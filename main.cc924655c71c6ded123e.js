var zN=Object.defineProperty,ZN=Object.defineProperties,KN=Object.getOwnPropertyDescriptors,jO=Object.getOwnPropertySymbols,YN=Object.prototype.hasOwnProperty,QN=Object.prototype.propertyIsEnumerable,$O=(Ke,ye,L)=>ye in Ke?zN(Ke,ye,{enumerable:!0,configurable:!0,writable:!0,value:L}):Ke[ye]=L,HO=(Ke,ye)=>{for(var L in ye||(ye={}))YN.call(ye,L)&&$O(Ke,L,ye[L]);if(jO)for(var L of jO(ye))QN.call(ye,L)&&$O(Ke,L,ye[L]);return Ke},GO=(Ke,ye)=>ZN(Ke,KN(ye));(self.webpackChunkchatlist=self.webpackChunkchatlist||[]).push([[179],{8255:Ke=>{function ye(L){return Promise.resolve().then(()=>{var p=new Error("Cannot find module '"+L+"'");throw p.code="MODULE_NOT_FOUND",p})}ye.keys=()=>[],ye.resolve=ye,ye.id=8255,Ke.exports=ye},3018:(Ke,ye,L)=>{"use strict";L.d(ye,{deG:()=>Ld,tb:()=>RD,AFp:()=>xD,ip1:()=>mg,CZH:()=>sd,hGG:()=>Hx,z2F:()=>ad,sBO:()=>ys,Sil:()=>_g,_Vd:()=>_c,EJc:()=>od,SBq:()=>Ea,qLn:()=>Jd,vpe:()=>$o,gxx:()=>vp,tBr:()=>zu,XFs:()=>et,OlP:()=>Mn,zs3:()=>Rn,ZZ4:()=>zp,aQg:()=>Fy,soG:()=>If,YKP:()=>oE,v3s:()=>x_,h0i:()=>vc,PXZ:()=>xx,R0b:()=>Xi,FiY:()=>ds,Lbi:()=>E_,g9A:()=>MD,Qsj:()=>uI,FYo:()=>ba,JOm:()=>da,Tiy:()=>Bl,q3G:()=>gt,tp0:()=>aa,EAV:()=>YD,Rgc:()=>Yp,dDg:()=>tb,DyG:()=>ia,q4F:()=>nE,GfV:()=>dI,s_b:()=>Xp,ifc:()=>Dt,eFA:()=>qD,G48:()=>Un,Gpc:()=>me,X6Q:()=>D_,_c5:()=>iT,VLi:()=>$D,c2e:()=>b_,zSh:()=>Rm,wAp:()=>mt,vHH:()=>De,EiD:()=>Ue,mCW:()=>Ju,qzn:()=>Di,JVY:()=>Wg,pB0:()=>Zg,eBb:()=>ov,L6k:()=>zg,LAX:()=>ca,cg1:()=>je,Tjo:()=>iu,kL8:()=>_y,yhl:()=>Qu,dqk:()=>rt,sIi:()=>Eh,CqO:()=>cc,QGY:()=>iy,F4k:()=>I0,RDi:()=>Ko,AaK:()=>X,z3N:()=>zi,qOj:()=>o0,TTD:()=>Id,_Bn:()=>Ry,xp6:()=>dw,uIk:()=>Pr,ekj:()=>Vh,Suo:()=>oD,Xpm:()=>U,lG2:()=>ir,Yz7:()=>Mt,cJS:()=>Dr,oAB:()=>Lt,Yjl:()=>Ut,Y36:()=>Oh,_UZ:()=>pC,qZA:()=>ry,TgZ:()=>w0,EpF:()=>C0,n5z:()=>Hi,Ikx:()=>yy,LFG:()=>yn,$8M:()=>Ci,NdJ:()=>D0,CRH:()=>kE,oxw:()=>oy,ALo:()=>eD,xi3:()=>ME,Q6J:()=>Nh,VKq:()=>QI,iGM:()=>sD,MAs:()=>d0,CHM:()=>Yo,LSH:()=>Gr,kYT:()=>ct,YNc:()=>Ah,_uU:()=>NC,Oqu:()=>Pp,hij:()=>my});var p=L(9765),H=L(5319),k=L(7574),ne=L(6682),se=L(2441);var ae=L(1307);function re(){return new p.xQ}function B(i){for(let s in i)if(i[s]===B)return s;throw Error("Could not find renamed property on target object.")}function te(i,s){for(const o in s)s.hasOwnProperty(o)&&!i.hasOwnProperty(o)&&(i[o]=s[o])}function X(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(X).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const o=s.indexOf("\n");return-1===o?s:s.substring(0,o)}function de(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const Ce=B({__forward_ref__:B});function me(i){return i.__forward_ref__=me,i.toString=function(){return X(this())},i}function ge(i){return Se(i)?i():i}function Se(i){return"function"==typeof i&&i.hasOwnProperty(Ce)&&i.__forward_ref__===me}class De extends Error{constructor(s,o){super(function(i,s){return`${i?`NG0${i}: `:""}${s}`}(s,o)),this.code=s}}function $e(i){return"string"==typeof i?i:null==i?"":String(i)}function Ft(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():$e(i)}function He(i,s){const o=s?` in ${s}`:"";throw new De("201",`No provider for ${Ft(i)} found${o}`)}function sn(i,s){null==i&&function(i,s,o,u){throw new Error(`ASSERTION ERROR: ${i}`+(null==u?"":` [Expected=> ${o} ${u} ${s} <=Actual]`))}(s,i,null,"!=")}function Mt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Dr(i){return{providers:i.providers||[],imports:i.imports||[]}}function $n(i){return Me(i,Zt)||Me(i,Jr)}function Me(i,s){return i.hasOwnProperty(s)?i[s]:null}function Tr(i){return i&&(i.hasOwnProperty(bn)||i.hasOwnProperty(Ar))?i[bn]:null}const Zt=B({\u0275prov:B}),bn=B({\u0275inj:B}),Jr=B({ngInjectableDef:B}),Ar=B({ngInjectorDef:B});var et=(()=>((et=et||{})[et.Default=0]="Default",et[et.Host=1]="Host",et[et.Self=2]="Self",et[et.SkipSelf=4]="SkipSelf",et[et.Optional=8]="Optional",et))();let lr;function Fr(i){const s=lr;return lr=i,s}function on(i,s,o){const u=$n(i);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:o&et.Optional?null:void 0!==s?s:void He(X(i),"Injector")}function Ye(i){return{toString:i}.toString()}var Hn=(()=>((Hn=Hn||{})[Hn.OnPush=0]="OnPush",Hn[Hn.Default=1]="Default",Hn))(),Dt=(()=>((Dt=Dt||{})[Dt.Emulated=0]="Emulated",Dt[Dt.None=2]="None",Dt[Dt.ShadowDom=3]="ShadowDom",Dt))();const Kn="undefined"!=typeof globalThis&&globalThis,Pn="undefined"!=typeof window&&window,nn="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,rt=Kn||"undefined"!=typeof global&&global||Pn||nn,be={},Re=[],yt=B({\u0275cmp:B}),Et=B({\u0275dir:B}),zt=B({\u0275pipe:B}),W=B({\u0275mod:B}),G=B({\u0275loc:B}),K=B({\u0275fac:B}),j=B({__NG_ELEMENT_ID__:B});let N=0;function U(i){return Ye(()=>{const o={},u={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:o,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===Hn.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||Re,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||Dt.Emulated,id:"c",styles:i.styles||Re,_:null,setInput:null,schemas:i.schemas||null,tView:null},c=i.directives,d=i.features,g=i.pipes;return u.id+=N++,u.inputs=un(i.inputs,o),u.outputs=un(i.outputs),d&&d.forEach(_=>_(u)),u.directiveDefs=c?()=>("function"==typeof c?c():c).map(Ae):null,u.pipeDefs=g?()=>("function"==typeof g?g():g).map(ot):null,u})}function Ae(i){return dn(i)||function(i){return i[Et]||null}(i)}function ot(i){return function(i){return i[zt]||null}(i)}const Je={};function Lt(i){return Ye(()=>{const s={type:i.type,bootstrap:i.bootstrap||Re,declarations:i.declarations||Re,imports:i.imports||Re,exports:i.exports||Re,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(Je[i.id]=i.type),s})}function ct(i,s){return Ye(()=>{const o=Sr(i,!0);o.declarations=s.declarations||Re,o.imports=s.imports||Re,o.exports=s.exports||Re})}function un(i,s){if(null==i)return be;const o={};for(const u in i)if(i.hasOwnProperty(u)){let c=i[u],d=c;Array.isArray(c)&&(d=c[1],c=c[0]),o[c]=u,s&&(s[c]=d)}return o}const ir=U;function Ut(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function dn(i){return i[yt]||null}function Sr(i,s){const o=i[W]||null;if(!o&&!0===s)throw new Error(`Type ${X(i)} does not have '\u0275mod' property.`);return o}function Es(i){return Array.isArray(i)&&"object"==typeof i[1]}function Sn(i){return Array.isArray(i)&&!0===i[1]}function Vc(i){return 0!=(8&i.flags)}function bs(i){return 2==(2&i.flags)}function Ma(i){return 1==(1&i.flags)}function fi(i){return null!==i.template}function vd(i){return 0!=(512&i[2])}function bi(i,s){return i.hasOwnProperty(K)?i[K]:null}class Qn{constructor(s,o,u){this.previousValue=s,this.currentValue=o,this.firstChange=u}isFirstChange(){return this.firstChange}}function Id(){return yo}function yo(i){return i.type.prototype.ngOnChanges&&(i.setInput=Hc),Pg}function Pg(){const i=_o(this),s=null==i?void 0:i.current;if(s){const o=i.previous;if(o===be)i.previous=s;else for(let u in s)o[u]=s[u];i.current=null,this.ngOnChanges(s)}}function Hc(i,s,o,u){const c=_o(i)||function(i,s){return i[Bf]=s}(i,{previous:be,current:null}),d=c.current||(c.current={}),g=c.previous,_=this.declaredInputs[o],b=g[_];d[_]=new Qn(b&&b.currentValue,s,g===be),i[u]=s}Id.ngInherit=!0;const Bf="__ngSimpleChanges__";function _o(i){return i[Bf]||null}let ns;function Ko(i){ns=i}function pn(i){return!!i.listen}const Eu={createRenderer:(i,s)=>void 0!==ns?ns:"undefined"!=typeof document?document:void 0};function Gt(i){for(;Array.isArray(i);)i=i[0];return i}function bu(i,s){return Gt(s[i])}function xr(i,s){return Gt(s[i.index])}function Is(i,s){return i.data[s]}function Ds(i,s){return i[s]}function mn(i,s){const o=s[i];return Es(o)?o:o[0]}function Ra(i){return 4==(4&i[2])}function wu(i){return 128==(128&i[2])}function Vi(i,s){return null==s?null:i[s]}function Oa(i){i[18]=0}function Na(i,s){i[5]+=s;let o=i,u=i[3];for(;null!==u&&(1===s&&1===o[5]||-1===s&&0===o[5]);)u[5]+=s,o=u,u=u[3]}const vt={lFrame:Mu(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Pa(){return vt.bindingsEnabled}function Ie(){return vt.lFrame.lView}function qt(){return vt.lFrame.tView}function Yo(i){return vt.lFrame.contextLView=i,i[8]}function xn(){let i=qc();for(;null!==i&&64===i.type;)i=i.parent;return i}function qc(){return vt.lFrame.currentTNode}function Ui(i,s){const o=vt.lFrame;o.currentTNode=i,o.isParent=s}function Co(){return vt.lFrame.isParent}function Ws(){return vt.isInCheckNoChangesMode}function Bi(i){vt.isInCheckNoChangesMode=i}function Mr(){const i=vt.lFrame;let s=i.bindingRootIndex;return-1===s&&(s=i.bindingRootIndex=i.tView.bindingStartIndex),s}function rs(){return vt.lFrame.bindingIndex++}function Fa(i,s){const o=vt.lFrame;o.bindingIndex=o.bindingRootIndex=i,Jo(s)}function Jo(i){vt.lFrame.currentDirectiveIndex=i}function Su(){return vt.lFrame.currentQueryIndex}function Sd(i){vt.lFrame.currentQueryIndex=i}function Wc(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function xd(i,s,o){if(o&et.SkipSelf){let c=s,d=i;for(;!(c=c.parent,null!==c||o&et.Host||(c=Wc(d),null===c||(d=d[15],10&c.type))););if(null===c)return!1;s=c,i=d}const u=vt.lFrame=xu();return u.currentTNode=s,u.lView=i,!0}function Io(i){const s=xu(),o=i[1];vt.lFrame=s,s.currentTNode=o.firstChild,s.lView=i,s.tView=o,s.contextLView=i,s.bindingIndex=o.bindingStartIndex,s.inI18n=!1}function xu(){const i=vt.lFrame,s=null===i?null:i.child;return null===s?Mu(i):s}function Mu(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function zc(){const i=vt.lFrame;return vt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Md=zc;function Rd(){const i=zc();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Rr(){return vt.lFrame.selectedIndex}function ji(i){vt.lFrame.selectedIndex=i}function wn(){const i=vt.lFrame;return Is(i.tView,i.selectedIndex)}function Pu(i,s){for(let o=s.directiveStart,u=s.directiveEnd;o<u;o++){const d=i.data[o].type.prototype,{ngAfterContentInit:g,ngAfterContentChecked:_,ngAfterViewInit:b,ngAfterViewChecked:I,ngOnDestroy:A}=d;g&&(i.contentHooks||(i.contentHooks=[])).push(-o,g),_&&((i.contentHooks||(i.contentHooks=[])).push(o,_),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(o,_)),b&&(i.viewHooks||(i.viewHooks=[])).push(-o,b),I&&((i.viewHooks||(i.viewHooks=[])).push(o,I),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(o,I)),null!=A&&(i.destroyHooks||(i.destroyHooks=[])).push(o,A)}}function ku(i,s,o){Od(i,s,3,o)}function Fu(i,s,o,u){(3&i[2])===o&&Od(i,s,o,u)}function Xo(i,s){let o=i[2];(3&o)===s&&(o&=2047,o+=1,i[2]=o)}function Od(i,s,o,u){const d=null!=u?u:-1,g=s.length-1;let _=0;for(let b=void 0!==u?65535&i[18]:0;b<g;b++)if("number"==typeof s[b+1]){if(_=s[b],null!=u&&_>=u)break}else s[b]<0&&(i[18]+=65536),(_<d||-1==d)&&(zs(i,o,s,b),i[18]=(4294901760&i[18])+b+2),b++}function zs(i,s,o,u){const c=o[u]<0,d=o[u+1],_=i[c?-o[u]:o[u]];if(c){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{d.call(_)}finally{}}}else try{d.call(_)}finally{}}class Va{constructor(s,o,u){this.factory=s,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=u}}function Ua(i,s,o){const u=pn(i);let c=0;for(;c<o.length;){const d=o[c];if("number"==typeof d){if(0!==d)break;c++;const g=o[c++],_=o[c++],b=o[c++];u?i.setAttribute(s,_,b,g):s.setAttributeNS(g,_,b)}else{const g=d,_=o[++c];zf(g)?u&&i.setProperty(s,g,_):u?i.setAttribute(s,g,_):s.setAttribute(g,_),c++}}return c}function Lu(i){return 3===i||4===i||6===i}function zf(i){return 64===i.charCodeAt(0)}function Vu(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let o=-1;for(let u=0;u<s.length;u++){const c=s[u];"number"==typeof c?o=c:0===o||Uu(i,o,c,null,-1===o||2===o?s[++u]:null)}}return i}function Uu(i,s,o,u,c){let d=0,g=i.length;if(-1===s)g=-1;else for(;d<i.length;){const _=i[d++];if("number"==typeof _){if(_===s){g=-1;break}if(_>s){g=d-1;break}}}for(;d<i.length;){const _=i[d];if("number"==typeof _)break;if(_===o){if(null===u)return void(null!==c&&(i[d+1]=c));if(u===i[d+1])return void(i[d+2]=c)}d++,null!==u&&d++,null!==c&&d++}-1!==g&&(i.splice(g,0,s),d=g+1),i.splice(d++,0,o),null!==u&&i.splice(d++,0,u),null!==c&&i.splice(d++,0,c)}function is(i){return-1!==i}function Do(i){return 32767&i}function Ba(i,s){let o=function(i){return i>>16}(i),u=s;for(;o>0;)u=u[15],o--;return u}let Bu=!0;function Qc(i){const s=Bu;return Bu=i,s}let pt=0;function ea(i,s){const o=$u(i,s);if(-1!==o)return o;const u=s[1];u.firstCreatePass&&(i.injectorIndex=s.length,jr(u.data,i),jr(s,null),jr(u.blueprint,null));const c=To(i,s),d=i.injectorIndex;if(is(c)){const g=Do(c),_=Ba(c,s),b=_[1].data;for(let I=0;I<8;I++)s[d+I]=_[g+I]|b[g+I]}return s[d+8]=c,d}function jr(i,s){i.push(0,0,0,0,0,0,0,0,s)}function $u(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function To(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let o=0,u=null,c=s;for(;null!==c;){const d=c[1],g=d.type;if(u=2===g?d.declTNode:1===g?c[6]:null,null===u)return-1;if(o++,c=c[15],-1!==u.injectorIndex)return u.injectorIndex|o<<16}return-1}function pr(i,s,o){!function(i,s,o){let u;"string"==typeof o?u=o.charCodeAt(0)||0:o.hasOwnProperty(j)&&(u=o[j]),null==u&&(u=o[j]=pt++);const c=255&u;s.data[i+(c>>5)]|=1<<c}(i,s,o)}function ja(i,s,o){if(o&et.Optional)return i;He(s,"NodeInjector")}function Pd(i,s,o,u){if(o&et.Optional&&void 0===u&&(u=null),0==(o&(et.Self|et.Host))){const c=i[9],d=Fr(void 0);try{return c?c.get(s,u,o&et.Optional):on(s,u,o&et.Optional)}finally{Fr(d)}}return ja(u,s,o)}function ei(i,s,o,u=et.Default,c){if(null!==i){const d=function(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(j)?i[j]:void 0;return"number"==typeof s?s>=0?255&s:Xc:s}(o);if("function"==typeof d){if(!xd(s,i,u))return u&et.Host?ja(c,o,u):Pd(s,o,u,c);try{const g=d(u);if(null!=g||u&et.Optional)return g;He(o)}finally{Md()}}else if("number"==typeof d){let g=null,_=$u(i,s),b=-1,I=u&et.Host?s[16][6]:null;for((-1===_||u&et.SkipSelf)&&(b=-1===_?To(i,s):s[_+8],-1!==b&&ra(u,!1)?(g=s[1],_=Do(b),s=Ba(b,s)):_=-1);-1!==_;){const A=s[1];if(na(d,_,A.data)){const O=Gn(_,s,o,g,u,I);if(O!==ta)return O}b=s[_+8],-1!==b&&ra(u,s[1].data[_+8]===I)&&na(d,_,s)?(g=A,_=Do(b),s=Ba(b,s)):_=-1}}}return Pd(s,o,u,c)}const ta={};function Xc(){return new ss(xn(),Ie())}function Gn(i,s,o,u,c,d){const g=s[1],_=g.data[i+8],A=wi(_,g,o,null==u?bs(_)&&Bu:u!=g&&0!=(3&_.type),c&et.Host&&d===_);return null!==A?Ks(s,g,A,_):ta}function wi(i,s,o,u,c){const d=i.providerIndexes,g=s.data,_=1048575&d,b=i.directiveStart,A=d>>20,F=c?_+A:i.directiveEnd;for(let q=u?_:_+A;q<F;q++){const Y=g[q];if(q<b&&o===Y||q>=b&&Y.type===o)return q}if(c){const q=g[b];if(q&&fi(q)&&q.type===o)return b}return null}function Ks(i,s,o,u){let c=i[o];const d=s.data;if(function(i){return i instanceof Va}(c)){const g=c;g.resolving&&function(i,s){throw new De("200",`Circular dependency in DI detected for ${i}`)}(Ft(d[o]));const _=Qc(g.canSeeViewProviders);g.resolving=!0;const b=g.injectImpl?Fr(g.injectImpl):null;xd(i,u,et.Default);try{c=i[o]=g.factory(void 0,d,i,u),s.firstCreatePass&&o>=u.directiveStart&&function(i,s,o){const{ngOnChanges:u,ngOnInit:c,ngDoCheck:d}=s.type.prototype;if(u){const g=yo(s);(o.preOrderHooks||(o.preOrderHooks=[])).push(i,g),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(i,g)}c&&(o.preOrderHooks||(o.preOrderHooks=[])).push(0-i,c),d&&((o.preOrderHooks||(o.preOrderHooks=[])).push(i,d),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(i,d))}(o,d[o],s)}finally{null!==b&&Fr(b),Qc(_),g.resolving=!1,Md()}}return c}function na(i,s,o){return!!(o[s+(i>>5)]&1<<i)}function ra(i,s){return!(i&et.Self||i&et.Host&&s)}class ss{constructor(s,o){this._tNode=s,this._lView=o}get(s,o,u){return ei(this._tNode,this._lView,s,u,o)}}function Hi(i){return Ye(()=>{const s=i.prototype.constructor,o=s[K]||Ao(s),u=Object.prototype;let c=Object.getPrototypeOf(i.prototype).constructor;for(;c&&c!==u;){const d=c[K]||Ao(c);if(d&&d!==o)return d;c=Object.getPrototypeOf(c)}return d=>new d})}function Ao(i){return Se(i)?()=>{const s=Ao(ge(i));return s&&s()}:bi(i)}function Ci(i){return function(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const o=i.attrs;if(o){const u=o.length;let c=0;for(;c<u;){const d=o[c];if(Lu(d))break;if(0===d)c+=2;else if("number"==typeof d)for(c++;c<u&&"string"==typeof o[c];)c++;else{if(d===s)return o[c+1];c+=2}}}return null}(xn(),i)}const os="__parameters__";function us(i,s,o){return Ye(()=>{const u=function(i){return function(...o){if(i){const u=i(...o);for(const c in u)this[c]=u[c]}}}(s);function c(...d){if(this instanceof c)return u.apply(this,d),this;const g=new c(...d);return _.annotation=g,_;function _(b,I,A){const O=b.hasOwnProperty(os)?b[os]:Object.defineProperty(b,os,{value:[]})[os];for(;O.length<=A;)O.push(null);return(O[A]=O[A]||[]).push(g),b}}return o&&(c.prototype=Object.create(o.prototype)),c.prototype.ngMetadataName=i,c.annotationCls=c,c})}class Mn{constructor(s,o){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=Mt({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Ld=new Mn("AnalyzeForEntryComponents"),ia=Function;function Gi(i,s){void 0===s&&(s=i);for(let o=0;o<i.length;o++){let u=i[o];Array.isArray(u)?(s===i&&(s=i.slice(0,o)),Gi(u,s)):s!==i&&s.push(u)}return s}function cs(i,s){i.forEach(o=>Array.isArray(o)?cs(o,s):s(o))}function Gu(i,s,o){s>=i.length?i.push(o):i.splice(s,0,o)}function Xs(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function ri(i,s,o){let u=gr(i,s);return u>=0?i[1|u]=o:(u=~u,function(i,s,o,u){let c=i.length;if(c==s)i.push(o,u);else if(1===c)i.push(u,i[0]),i[0]=o;else{for(c--,i.push(i[c-1],i[c]);c>s;)i[c]=i[c-2],c--;i[s]=o,i[s+1]=u}}(i,u,s,o)),u}function Bd(i,s){const o=gr(i,s);if(o>=0)return i[1|o]}function gr(i,s){return function(i,s,o){let u=0,c=i.length>>o;for(;c!==u;){const d=u+(c-u>>1),g=i[d<<o];if(s===g)return d<<o;g>s?c=d:u=d+1}return~(c<<o)}(i,s,1)}const st={},At="__NG_DI_FLAG__",St="ngTempTokenPath",mr=/\n/gm,oa="__source",Wi=B({provide:String,useValue:B});let Mo;function Ii(i){const s=Mo;return Mo=i,s}function Ha(i,s=et.Default){if(void 0===Mo)throw new Error("inject() must be called from an injection context");return null===Mo?on(i,void 0,s):Mo.get(i,s&et.Optional?null:void 0,s)}function yn(i,s=et.Default){return(lr||Ha)(ge(i),s)}function no(i){const s=[];for(let o=0;o<i.length;o++){const u=ge(i[o]);if(Array.isArray(u)){if(0===u.length)throw new Error("Arguments array must have arguments.");let c,d=et.Default;for(let g=0;g<u.length;g++){const _=u[g],b=ev(_);"number"==typeof b?-1===b?c=_.token:d|=b:c=_}s.push(yn(c,d))}else s.push(yn(u))}return s}function Wu(i,s){return i[At]=s,i.prototype[At]=s,i}function ev(i){return i[At]}function yr(i,s,o,u){const c=i[St];throw s[oa]&&c.unshift(s[oa]),i.message=function(i,s,o,u=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let c=X(s);if(Array.isArray(s))c=s.map(X).join(" -> ");else if("object"==typeof s){let d=[];for(let g in s)if(s.hasOwnProperty(g)){let _=s[g];d.push(g+":"+("string"==typeof _?JSON.stringify(_):X(_)))}c=`{${d.join(", ")}}`}return`${o}${u?"("+u+")":""}[${c}]: ${i.replace(mr,"\n  ")}`}("\n"+i.message,c,o,u),i.ngTokenPath=c,i[St]=null,i}const zu=Wu(us("Inject",i=>({token:i})),-1),ds=Wu(us("Optional"),8),aa=Wu(us("SkipSelf"),4);let qa;function ua(i){var s;return(null===(s=function(){if(void 0===qa&&(qa=null,rt.trustedTypes))try{qa=rt.trustedTypes.createPolicy("angular",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch(i){}return qa}())||void 0===s?void 0:s.createHTML(i))||i}class Wa{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class rv extends Wa{getTypeName(){return"HTML"}}class iv extends Wa{getTypeName(){return"Style"}}class sv extends Wa{getTypeName(){return"Script"}}class qg extends Wa{getTypeName(){return"URL"}}class rp extends Wa{getTypeName(){return"ResourceURL"}}function zi(i){return i instanceof Wa?i.changingThisBreaksApplicationSecurity:i}function Di(i,s){const o=Qu(i);if(null!=o&&o!==s){if("ResourceURL"===o&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${o} (see https://g.co/ng/security#xss)`)}return o===s}function Qu(i){return i instanceof Wa&&i.getTypeName()||null}function Wg(i){return new rv(i)}function zg(i){return new iv(i)}function ov(i){return new sv(i)}function ca(i){return new qg(i)}function Zg(i){return new rp(i)}class qd{constructor(s){this.inertDocumentHelper=s}getInertBodyElement(s){s="<body><remove></remove>"+s;try{const o=(new window.DOMParser).parseFromString(ua(s),"text/html").body;return null===o?this.inertDocumentHelper.getInertBodyElement(s):(o.removeChild(o.firstChild),o)}catch(o){return null}}}class Yg{constructor(s){if(this.defaultDoc=s,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const o=this.inertDocument.createElement("html");this.inertDocument.appendChild(o);const u=this.inertDocument.createElement("body");o.appendChild(u)}}getInertBodyElement(s){const o=this.inertDocument.createElement("template");if("content"in o)return o.innerHTML=ua(s),o;const u=this.inertDocument.createElement("body");return u.innerHTML=ua(s),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(u),u}stripCustomNsAttrs(s){const o=s.attributes;for(let c=o.length-1;0<c;c--){const g=o.item(c).name;("xmlns:ns1"===g||0===g.indexOf("ns1:"))&&s.removeAttribute(g)}let u=s.firstChild;for(;u;)u.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(u),u=u.nextSibling}}const Qg=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,ip=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Ju(i){return(i=String(i)).match(Qg)||i.match(ip)?i:"unsafe:"+i}function Zi(i){const s={};for(const o of i.split(","))s[o]=!0;return s}function dl(...i){const s={};for(const o of i)for(const u in o)o.hasOwnProperty(u)&&(s[u]=!0);return s}const sp=Zi("area,br,col,hr,img,wbr"),op=Zi("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),hl=Zi("rp,rt"),Zd=dl(sp,dl(op,Zi("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),dl(hl,Zi("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),dl(hl,op)),Kd=Zi("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),fl=Zi("srcset"),f=dl(Kd,fl,Zi("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Zi("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),m=Zi("script,style,template");class E{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(s){let o=s.firstChild,u=!0;for(;o;)if(o.nodeType===Node.ELEMENT_NODE?u=this.startElement(o):o.nodeType===Node.TEXT_NODE?this.chars(o.nodeValue):this.sanitizedSomething=!0,u&&o.firstChild)o=o.firstChild;else for(;o;){o.nodeType===Node.ELEMENT_NODE&&this.endElement(o);let c=this.checkClobberedElement(o,o.nextSibling);if(c){o=c;break}o=this.checkClobberedElement(o,o.parentNode)}return this.buf.join("")}startElement(s){const o=s.nodeName.toLowerCase();if(!Zd.hasOwnProperty(o))return this.sanitizedSomething=!0,!m.hasOwnProperty(o);this.buf.push("<"),this.buf.push(o);const u=s.attributes;for(let c=0;c<u.length;c++){const d=u.item(c),g=d.name,_=g.toLowerCase();if(!f.hasOwnProperty(_)){this.sanitizedSomething=!0;continue}let b=d.value;Kd[_]&&(b=Ju(b)),fl[_]&&(i=b,b=(i=String(i)).split(",").map(s=>Ju(s.trim())).join(", ")),this.buf.push(" ",g,'="',Z(b),'"')}var i;return this.buf.push(">"),!0}endElement(s){const o=s.nodeName.toLowerCase();Zd.hasOwnProperty(o)&&!sp.hasOwnProperty(o)&&(this.buf.push("</"),this.buf.push(o),this.buf.push(">"))}chars(s){this.buf.push(Z(s))}checkClobberedElement(s,o){if(o&&(s.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${s.outerHTML}`);return o}}const S=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,M=/([^\#-~ |!])/g;function Z(i){return i.replace(/&/g,"&amp;").replace(S,function(s){return"&#"+(1024*(s.charCodeAt(0)-55296)+(s.charCodeAt(1)-56320)+65536)+";"}).replace(M,function(s){return"&#"+s.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let he;function Ue(i,s){let o=null;try{he=he||function(i){const s=new Yg(i);return function(){try{return!!(new window.DOMParser).parseFromString(ua(""),"text/html")}catch(i){return!1}}()?new qd(s):s}(i);let u=s?String(s):"";o=he.getInertBodyElement(u);let c=5,d=u;do{if(0===c)throw new Error("Failed to sanitize html because the input is unstable");c--,u=d,d=o.innerHTML,o=he.getInertBodyElement(u)}while(u!==d);return ua((new E).sanitizeChildren(Pe(o)||o))}finally{if(o){const u=Pe(o)||o;for(;u.firstChild;)u.removeChild(u.firstChild)}}}function Pe(i){return"content"in i&&function(i){return i.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===i.nodeName}(i)?i.content:null}var gt=(()=>((gt=gt||{})[gt.NONE=0]="NONE",gt[gt.HTML=1]="HTML",gt[gt.STYLE=2]="STYLE",gt[gt.SCRIPT=3]="SCRIPT",gt[gt.URL=4]="URL",gt[gt.RESOURCE_URL=5]="RESOURCE_URL",gt))();function Gr(i){const s=function(){const i=Ie();return i&&i[12]}();return s?s.sanitize(gt.URL,i)||"":Di(i,"URL")?zi(i):Ju($e(i))}const rm="__ngContext__";function Dn(i,s){i[rm]=s}function im(i){const s=function(i){return i[rm]||null}(i);return s?Array.isArray(s)?s:s.lView:null}function am(i){return i.ngOriginalError}function lv(i,...s){i.error(...s)}class Jd{constructor(){this._console=console}handleError(s){const o=this._findOriginalError(s),u=this._findContext(s),c=(i=s)&&i.ngErrorLogger||lv;var i;c(this._console,"ERROR",s),o&&c(this._console,"ORIGINAL ERROR",o),u&&c(this._console,"ERROR CONTEXT",u)}_findContext(s){return s?s.ngDebugContext||this._findContext(am(s)):null}_findOriginalError(s){let o=s&&am(s);for(;o&&am(o);)o=am(o);return o||null}}const Kb=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(rt))();function la(i){return i instanceof Function?i():i}var da=(()=>((da=da||{})[da.Important=1]="Important",da[da.DashCase=2]="DashCase",da))();function hv(i,s){return undefined(i,s)}function eh(i){const s=i[3];return Sn(s)?s[3]:s}function dm(i){return Jb(i[13])}function gv(i){return Jb(i[4])}function Jb(i){for(;null!==i&&!Sn(i);)i=i[4];return i}function th(i,s,o,u,c){if(null!=u){let d,g=!1;Sn(u)?d=u:Es(u)&&(g=!0,u=u[0]);const _=Gt(u);0===i&&null!==o?null==c?pm(s,o,_):ha(s,o,_,c||null,!0):1===i&&null!==o?ha(s,o,_,c||null,!0):2===i?function(i,s,o){const u=gm(i,s);u&&function(i,s,o,u){pn(i)?i.removeChild(s,o,u):s.removeChild(o)}(i,u,s,o)}(s,_,g):3===i&&s.destroyNode(_),null!=d&&function(i,s,o,u,c){const d=o[7];d!==Gt(o)&&th(s,i,u,d,c);for(let _=10;_<o.length;_++){const b=o[_];hp(b[1],b,i,s,u,d)}}(s,i,d,o,c)}}function yv(i,s,o){return pn(i)?i.createElement(s,o):null===o?i.createElement(s):i.createElementNS(o,s)}function ew(i,s){const o=i[9],u=o.indexOf(s),c=s[3];1024&s[2]&&(s[2]&=-1025,Na(c,-1)),o.splice(u,1)}function vv(i,s){if(i.length<=10)return;const o=10+s,u=i[o];if(u){const c=u[17];null!==c&&c!==i&&ew(c,u),s>0&&(i[o-1][4]=u[4]);const d=Xs(i,10+s);!function(i,s){hp(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(u[1],u);const g=d[19];null!==g&&g.detachView(d[1]),u[3]=null,u[4]=null,u[2]&=-129}return u}function tw(i,s){if(!(256&s[2])){const o=s[11];pn(o)&&o.destroyNode&&hp(i,s,o,3,null,null),function(i){let s=i[13];if(!s)return fm(i[1],i);for(;s;){let o=null;if(Es(s))o=s[13];else{const u=s[10];u&&(o=u)}if(!o){for(;s&&!s[4]&&s!==i;)Es(s)&&fm(s[1],s),s=s[3];null===s&&(s=i),Es(s)&&fm(s[1],s),o=s&&s[4]}s=o}}(s)}}function fm(i,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function(i,s){let o;if(null!=i&&null!=(o=i.destroyHooks))for(let u=0;u<o.length;u+=2){const c=s[o[u]];if(!(c instanceof Va)){const d=o[u+1];if(Array.isArray(d))for(let g=0;g<d.length;g+=2){const _=c[d[g]],b=d[g+1];try{b.call(_)}finally{}}else try{d.call(c)}finally{}}}}(i,s),function(i,s){const o=i.cleanup,u=s[7];let c=-1;if(null!==o)for(let d=0;d<o.length-1;d+=2)if("string"==typeof o[d]){const g=o[d+1],_="function"==typeof g?g(s):Gt(s[g]),b=u[c=o[d+2]],I=o[d+3];"boolean"==typeof I?_.removeEventListener(o[d],b,I):I>=0?u[c=I]():u[c=-I].unsubscribe(),d+=2}else{const g=u[c=o[d+1]];o[d].call(g)}if(null!==u){for(let d=c+1;d<u.length;d++)u[d]();s[7]=null}}(i,s),1===s[1].type&&pn(s[11])&&s[11].destroy();const o=s[17];if(null!==o&&Sn(s[3])){o!==s[3]&&ew(o,s);const u=s[19];null!==u&&u.detachView(i)}}}function si(i,s,o){return function(i,s,o){let u=s;for(;null!==u&&40&u.type;)u=(s=u).parent;if(null===u)return o[0];if(2&u.flags){const c=i.data[u.directiveStart].encapsulation;if(c===Dt.None||c===Dt.Emulated)return null}return xr(u,o)}(i,s.parent,o)}function ha(i,s,o,u,c){pn(i)?i.insertBefore(s,o,u,c):s.insertBefore(o,u,c)}function pm(i,s,o){pn(i)?i.appendChild(s,o):s.appendChild(o)}function rh(i,s,o,u,c){null!==u?ha(i,s,o,u,c):pm(i,s,o)}function gm(i,s){return pn(i)?i.parentNode(s):s.parentNode}let Ev=function(i,s,o){return 40&i.type?xr(i,o):null};function dp(i,s,o,u){const c=si(i,u,s),d=s[11],_=function(i,s,o){return Ev(i,s,o)}(u.parent||s[6],u,s);if(null!=c)if(Array.isArray(o))for(let b=0;b<o.length;b++)rh(d,c,o[b],_,!1);else rh(d,c,o,_,!1)}function sh(i,s){if(null!==s){const o=s.type;if(3&o)return xr(s,i);if(4&o)return Za(-1,i[s.index]);if(8&o){const u=s.child;if(null!==u)return sh(i,u);{const c=i[s.index];return Sn(c)?Za(-1,c):Gt(c)}}if(32&o)return hv(s,i)()||Gt(i[s.index]);{const u=tA(i,s);return null!==u?Array.isArray(u)?u[0]:sh(eh(i[16]),u):sh(i,s.next)}}return null}function tA(i,s){return null!==s?i[16][6].projection[s.projection]:null}function Za(i,s){const o=10+i+1;if(o<s.length){const u=s[o],c=u[1].firstChild;if(null!==c)return sh(u,c)}return s[7]}function Iv(i,s,o,u,c,d,g){for(;null!=o;){const _=u[o.index],b=o.type;if(g&&0===s&&(_&&Dn(Gt(_),u),o.flags|=4),64!=(64&o.flags))if(8&b)Iv(i,s,o.child,u,c,d,!1),th(s,i,c,_,d);else if(32&b){const I=hv(o,u);let A;for(;A=I();)th(s,i,c,A,d);th(s,i,c,_,d)}else 16&b?Dv(i,s,u,o,c,d):th(s,i,c,_,d);o=g?o.projectionNext:o.next}}function hp(i,s,o,u,c,d){Iv(o,u,i.firstChild,s,c,d,!1)}function Dv(i,s,o,u,c,d){const g=o[16],b=g[6].projection[u.projection];if(Array.isArray(b))for(let I=0;I<b.length;I++)th(s,i,c,b[I],d);else Iv(i,s,b,g[3],c,d,!0)}function iw(i,s,o){pn(i)?i.setAttribute(s,"style",o):s.style.cssText=o}function ym(i,s,o){pn(i)?""===o?i.removeAttribute(s,"class"):i.setAttribute(s,"class",o):s.className=o}function sw(i,s,o){let u=i.length;for(;;){const c=i.indexOf(s,o);if(-1===c)return c;if(0===c||i.charCodeAt(c-1)<=32){const d=s.length;if(c+d===u||i.charCodeAt(c+d)<=32)return c}o=c+1}}const ow="ng-template";function Tv(i,s,o){let u=0;for(;u<i.length;){let c=i[u++];if(o&&"class"===c){if(c=i[u],-1!==sw(c.toLowerCase(),s,0))return!0}else if(1===c){for(;u<i.length&&"string"==typeof(c=i[u++]);)if(c.toLowerCase()===s)return!0;return!1}}return!1}function aw(i){return 4===i.type&&i.value!==ow}function sA(i,s,o){return s===(4!==i.type||o?i.value:ow)}function uw(i,s,o){let u=4;const c=i.attrs||[],d=function(i){for(let s=0;s<i.length;s++)if(Lu(i[s]))return s;return i.length}(c);let g=!1;for(let _=0;_<s.length;_++){const b=s[_];if("number"!=typeof b){if(!g)if(4&u){if(u=2|1&u,""!==b&&!sA(i,b,o)||""===b&&1===s.length){if(Po(u))return!1;g=!0}}else{const I=8&u?b:s[++_];if(8&u&&null!==i.attrs){if(!Tv(i.attrs,I,o)){if(Po(u))return!1;g=!0}continue}const O=VM(8&u?"class":b,c,aw(i),o);if(-1===O){if(Po(u))return!1;g=!0;continue}if(""!==I){let F;F=O>d?"":c[O+1].toLowerCase();const q=8&u?F:null;if(q&&-1!==sw(q,I,0)||2&u&&I!==F){if(Po(u))return!1;g=!0}}}}else{if(!g&&!Po(u)&&!Po(b))return!1;if(g&&Po(b))continue;g=!1,u=b|1&u}}return Po(u)||g}function Po(i){return 0==(1&i)}function VM(i,s,o,u){if(null===s)return-1;let c=0;if(u||!o){let d=!1;for(;c<s.length;){const g=s[c];if(g===i)return c;if(3===g||6===g)d=!0;else{if(1===g||2===g){let _=s[++c];for(;"string"==typeof _;)_=s[++c];continue}if(4===g)break;if(0===g){c+=4;continue}}c+=d?1:2}return-1}return function(i,s){let o=i.indexOf(4);if(o>-1)for(o++;o<i.length;){const u=i[o];if("number"==typeof u)return-1;if(u===s)return o;o++}return-1}(s,i)}function cw(i,s,o=!1){for(let u=0;u<s.length;u++)if(uw(i,s[u],o))return!0;return!1}function lw(i,s){return i?":not("+s.trim()+")":s}function fp(i){let s=i[0],o=1,u=2,c="",d=!1;for(;o<i.length;){let g=i[o];if("string"==typeof g)if(2&u){const _=i[++o];c+="["+g+(_.length>0?'="'+_+'"':"")+"]"}else 8&u?c+="."+g:4&u&&(c+=" "+g);else""!==c&&!Po(g)&&(s+=lw(d,c),c=""),u=g,d=d||!Po(u);o++}return""!==c&&(s+=lw(d,c)),s}const Bt={};function dw(i){Av(qt(),Ie(),Rr()+i,Ws())}function Av(i,s,o,u){if(!u)if(3==(3&s[2])){const d=i.preOrderCheckHooks;null!==d&&ku(s,d,o)}else{const d=i.preOrderHooks;null!==d&&Fu(s,d,0,o)}ji(o)}function vm(i,s){return i<<17|s<<2}function ro(i){return i>>17&32767}function Ms(i){return 2|i}function fa(i){return(131068&i)>>2}function oh(i,s){return-131069&i|s<<2}function fw(i){return 1|i}function uh(i,s){const o=i.contentQueries;if(null!==o)for(let u=0;u<o.length;u+=2){const c=o[u],d=o[u+1];if(-1!==d){const g=i.data[d];Sd(c),g.contentQueries(2,s[d],d)}}}function ch(i,s,o,u,c,d,g,_,b,I){const A=s.blueprint.slice();return A[0]=c,A[2]=140|u,Oa(A),A[3]=A[15]=i,A[8]=o,A[10]=g||i&&i[10],A[11]=_||i&&i[11],A[12]=b||i&&i[12]||null,A[9]=I||i&&i[9]||null,A[6]=d,A[16]=2==s.type?i[16]:A,A}function lh(i,s,o,u,c){let d=i.data[s];if(null===d)d=function(i,s,o,u,c){const d=qc(),g=Co(),b=i.data[s]=function(i,s,o,u,c,d){return{type:o,index:u,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:d,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,g?d:d&&d.parent,o,s,u,c);return null===i.firstChild&&(i.firstChild=b),null!==d&&(g?null==d.child&&null!==b.parent&&(d.child=b):null===d.next&&(d.next=b)),b}(i,s,o,u,c),vt.lFrame.inI18n&&(d.flags|=64);else if(64&d.type){d.type=o,d.value=u,d.attrs=c;const g=function(){const i=vt.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();d.injectorIndex=null===g?-1:g.injectorIndex}return Ui(d,!0),d}function dh(i,s,o,u){if(0===o)return-1;const c=s.length;for(let d=0;d<o;d++)s.push(u),i.blueprint.push(u),i.data.push(null);return c}function gp(i,s,o){Io(s);try{const u=i.viewQuery;null!==u&&_p(1,u,o);const c=i.template;null!==c&&kv(i,s,c,1,o),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&uh(i,s),i.staticViewQueries&&_p(2,i.viewQuery,o);const d=i.components;null!==d&&function(i,s){for(let o=0;o<s.length;o++)TA(i,s[o])}(s,d)}catch(u){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),u}finally{s[2]&=-5,Rd()}}function _l(i,s,o,u){const c=s[2];if(256==(256&c))return;Io(s);const d=Ws();try{Oa(s),function(i){vt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==o&&kv(i,s,o,2,u);const g=3==(3&c);if(!d)if(g){const I=i.preOrderCheckHooks;null!==I&&ku(s,I,null)}else{const I=i.preOrderHooks;null!==I&&Fu(s,I,0,null),Xo(s,0)}if(function(i){for(let s=dm(i);null!==s;s=gv(s)){if(!s[2])continue;const o=s[9];for(let u=0;u<o.length;u++){const c=o[u],d=c[3];0==(1024&c[2])&&Na(d,1),c[2]|=1024}}}(s),function(i){for(let s=dm(i);null!==s;s=gv(s))for(let o=10;o<s.length;o++){const u=s[o],c=u[1];wu(u)&&_l(c,u,c.template,u[8])}}(s),null!==i.contentQueries&&uh(i,s),!d)if(g){const I=i.contentCheckHooks;null!==I&&ku(s,I)}else{const I=i.contentHooks;null!==I&&Fu(s,I,1),Xo(s,1)}!function(i,s){const o=i.hostBindingOpCodes;if(null!==o)try{for(let u=0;u<o.length;u++){const c=o[u];if(c<0)ji(~c);else{const d=c,g=o[++u],_=o[++u];Fa(g,d),_(2,s[d])}}}finally{ji(-1)}}(i,s);const _=i.components;null!==_&&function(i,s){for(let o=0;o<s.length;o++)Rw(i,s[o])}(s,_);const b=i.viewQuery;if(null!==b&&_p(2,b,u),!d)if(g){const I=i.viewCheckHooks;null!==I&&ku(s,I)}else{const I=i.viewHooks;null!==I&&Fu(s,I,2),Xo(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),d||(s[2]&=-73),1024&s[2]&&(s[2]&=-1025,Na(s[3],-1))}finally{Rd()}}function Pv(i,s,o,u){const c=s[10],d=!Ws(),g=Ra(s);try{d&&!g&&c.begin&&c.begin(),g&&gp(i,s,u),_l(i,s,o,u)}finally{d&&!g&&c.end&&c.end()}}function kv(i,s,o,u,c){const d=Rr(),g=2&u;try{ji(-1),g&&s.length>20&&Av(i,s,20,Ws()),o(u,c)}finally{ji(d)}}function Sm(i,s,o){!Pa()||(function(i,s,o,u){const c=o.directiveStart,d=o.directiveEnd;i.firstCreatePass||ea(o,s),Dn(u,s);const g=o.initialInputs;for(let _=c;_<d;_++){const b=i.data[_],I=fi(b);I&&Sw(s,o,b);const A=Ks(s,i,_,o);Dn(A,s),null!==g&&CA(0,_-c,A,b,0,g),I&&(mn(o.index,s)[8]=A)}}(i,s,o,xr(o,s)),128==(128&o.flags)&&function(i,s,o){const u=o.directiveStart,c=o.directiveEnd,g=o.index,_=vt.lFrame.currentDirectiveIndex;try{ji(g);for(let b=u;b<c;b++){const I=i.data[b],A=s[b];Jo(b),(null!==I.hostBindings||0!==I.hostVars||null!==I.hostAttrs)&&Tw(I,A)}}finally{ji(-1),Jo(_)}}(i,s,o))}function vl(i,s,o=xr){const u=s.localNames;if(null!==u){let c=s.index+1;for(let d=0;d<u.length;d+=2){const g=u[d+1],_=-1===g?o(s,i):i[g];i[c++]=_}}}function vw(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=hh(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function hh(i,s,o,u,c,d,g,_,b,I){const A=20+u,O=A+c,F=function(i,s){const o=[];for(let u=0;u<s;u++)o.push(u<i?null:Bt);return o}(A,O),q="function"==typeof I?I():I;return F[1]={type:i,blueprint:F,template:o,queries:null,viewQuery:_,declTNode:s,data:F.slice().fill(null,A),bindingStartIndex:A,expandoStartIndex:O,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof d?d():d,pipeRegistry:"function"==typeof g?g():g,firstChild:null,schemas:b,consts:q,incompleteFirstPass:!1}}function Vv(i,s,o,u){const c=AA(s);null===o?c.push(u):(c.push(o),i.firstCreatePass&&kw(i).push(u,c.length-1))}function ww(i,s,o){for(let u in i)if(i.hasOwnProperty(u)){const c=i[u];(o=null===o?{}:o).hasOwnProperty(u)?o[u].push(s,c):o[u]=[s,c]}return o}function Si(i,s,o,u,c,d,g,_){const b=xr(s,o);let A,I=s.inputs;!_&&null!=I&&(A=I[u])?(Lw(i,o,A,u,c),bs(s)&&function(i,s){const o=mn(s,i);16&o[2]||(o[2]|=64)}(o,s.index)):3&s.type&&(u=function(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(u),c=null!=g?g(c,s.value||"",u):c,pn(d)?d.setProperty(b,u,c):zf(u)||(b.setProperty?b.setProperty(u,c):b[u]=c))}function xm(i,s,o,u){let c=!1;if(Pa()){const d=function(i,s,o){const u=i.directiveRegistry;let c=null;if(u)for(let d=0;d<u.length;d++){const g=u[d];cw(o,g.selectors,!1)&&(c||(c=[]),pr(ea(o,s),i,g.type),fi(g)?(Aw(i,o),c.unshift(g)):c.push(g))}return c}(i,s,o),g=null===u?null:{"":-1};if(null!==d){c=!0,mp(o,i.data.length,d.length);for(let A=0;A<d.length;A++){const O=d[A];O.providersResolver&&O.providersResolver(O)}let _=!1,b=!1,I=dh(i,s,d.length,null);for(let A=0;A<d.length;A++){const O=d[A];o.mergedAttrs=Vu(o.mergedAttrs,O.hostAttrs),$v(i,o,s,I,O),wA(I,O,g),null!==O.contentQueries&&(o.flags|=8),(null!==O.hostBindings||null!==O.hostAttrs||0!==O.hostVars)&&(o.flags|=128);const F=O.type.prototype;!_&&(F.ngOnChanges||F.ngOnInit||F.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(o.index),_=!0),!b&&(F.ngOnChanges||F.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(o.index),b=!0),I++}!function(i,s){const u=s.directiveEnd,c=i.data,d=s.attrs,g=[];let _=null,b=null;for(let I=s.directiveStart;I<u;I++){const A=c[I],O=A.inputs,F=null===d||aw(s)?null:IA(O,d);g.push(F),_=ww(O,I,_),b=ww(A.outputs,I,b)}null!==_&&(_.hasOwnProperty("class")&&(s.flags|=16),_.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=g,s.inputs=_,s.outputs=b}(i,o)}g&&function(i,s,o){if(s){const u=i.localNames=[];for(let c=0;c<s.length;c+=2){const d=o[s[c+1]];if(null==d)throw new De("301",`Export of name '${s[c+1]}' not found!`);u.push(s[c],d)}}}(o,u,g)}return o.mergedAttrs=Vu(o.mergedAttrs,o.attrs),c}function Dw(i,s,o,u,c,d){const g=d.hostBindings;if(g){let _=i.hostBindingOpCodes;null===_&&(_=i.hostBindingOpCodes=[]);const b=~s.index;(function(i){let s=i.length;for(;s>0;){const o=i[--s];if("number"==typeof o&&o<0)return o}return 0})(_)!=b&&_.push(b),_.push(u,c,g)}}function Tw(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function Aw(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function wA(i,s,o){if(o){if(s.exportAs)for(let u=0;u<s.exportAs.length;u++)o[s.exportAs[u]]=i;fi(s)&&(o[""]=i)}}function mp(i,s,o){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+o,i.providerIndexes=s}function $v(i,s,o,u,c){i.data[u]=c;const d=c.factory||(c.factory=bi(c.type)),g=new Va(d,fi(c),null);i.blueprint[u]=g,o[u]=g,Dw(i,s,0,u,dh(i,o,c.hostVars,Bt),c)}function Sw(i,s,o){const u=xr(s,i),c=vw(o),d=i[10],g=qv(i,ch(i,c,null,o.onPush?64:16,u,s,d,d.createRenderer(u,o),null,null));i[s.index]=g}function io(i,s,o,u,c,d){const g=xr(i,s);!function(i,s,o,u,c,d,g){if(null==d)pn(i)?i.removeAttribute(s,c,o):s.removeAttribute(c);else{const _=null==g?$e(d):g(d,u||"",c);pn(i)?i.setAttribute(s,c,_,o):o?s.setAttributeNS(o,c,_):s.setAttribute(c,_)}}(s[11],g,d,i.value,o,u,c)}function CA(i,s,o,u,c,d){const g=d[s];if(null!==g){const _=u.setInput;for(let b=0;b<g.length;){const I=g[b++],A=g[b++],O=g[b++];null!==_?u.setInput(o,O,I,A):o[A]=O}}}function IA(i,s){let o=null,u=0;for(;u<s.length;){const c=s[u];if(0!==c)if(5!==c){if("number"==typeof c)break;i.hasOwnProperty(c)&&(null===o&&(o=[]),o.push(c,i[c],s[u+1])),u+=2}else u+=2;else u+=4}return o}function Gv(i,s,o,u){return new Array(i,!0,!1,s,null,0,u,o,null,null)}function Rw(i,s){const o=mn(s,i);if(wu(o)){const u=o[1];80&o[2]?_l(u,o,u.template,o[8]):o[5]>0&&Ow(o)}}function Ow(i){for(let u=dm(i);null!==u;u=gv(u))for(let c=10;c<u.length;c++){const d=u[c];if(1024&d[2]){const g=d[1];_l(g,d,g.template,d[8])}else d[5]>0&&Ow(d)}const o=i[1].components;if(null!==o)for(let u=0;u<o.length;u++){const c=mn(o[u],i);wu(c)&&c[5]>0&&Ow(c)}}function TA(i,s){const o=mn(s,i),u=o[1];(function(i,s){for(let o=s.length;o<i.blueprint.length;o++)s.push(i.blueprint[o])})(u,o),gp(u,o,o[8])}function qv(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function yp(i){for(;i;){i[2]|=64;const s=eh(i);if(vd(i)&&!s)return i;i=s}return null}function Mm(i,s,o){const u=s[10];u.begin&&u.begin();try{_l(i,s,i.template,o)}catch(c){throw Fw(s,c),c}finally{u.end&&u.end()}}function Nw(i){!function(i){for(let s=0;s<i.components.length;s++){const o=i.components[s],u=im(o),c=u[1];Pv(c,u,c.template,o)}}(i[8])}function _p(i,s,o){Sd(0),s(i,o)}const Zv=(()=>Promise.resolve(null))();function AA(i){return i[7]||(i[7]=[])}function kw(i){return i.cleanup||(i.cleanup=[])}function Fw(i,s){const o=i[9],u=o?o.get(Jd,null):null;u&&u.handleError(s)}function Lw(i,s,o,u,c){for(let d=0;d<o.length;){const g=o[d++],_=o[d++],b=s[g],I=i.data[g];null!==I.setInput?I.setInput(b,c,u,_):b[_]=c}}function rc(i,s,o){const u=bu(s,i);!function(i,s,o){pn(i)?i.setValue(s,o):s.textContent=o}(i[11],u,o)}function Kv(i,s,o){let u=o?i.styles:null,c=o?i.classes:null,d=0;if(null!==s)for(let g=0;g<s.length;g++){const _=s[g];"number"==typeof _?d=_:1==d?c=de(c,_):2==d&&(u=de(u,_+": "+s[++g]+";"))}o?i.styles=u:i.stylesWithoutHost=u,o?i.classes=c:i.classesWithoutHost=c}const vp=new Mn("INJECTOR",-1);class MA{get(s,o=st){if(o===st){const u=new Error(`NullInjectorError: No provider for ${X(s)}!`);throw u.name="NullInjectorError",u}return o}}const Rm=new Mn("Set Injector scope."),Om={},RA={};let Nm;function Yv(){return void 0===Nm&&(Nm=new MA),Nm}function Qv(i,s=null,o=null,u){return new Uw(i,o,s||Yv(),u)}class Uw{constructor(s,o,u,c=null){this.parent=u,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const d=[];o&&cs(o,_=>this.processProvider(_,s,o)),cs([s],_=>this.processInjectorType(_,[],d)),this.records.set(vp,ph(void 0,this));const g=this.records.get(Rm);this.scope=null!=g?g.value:null,this.source=c||("object"==typeof s?null:X(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,o=st,u=et.Default){this.assertNotDestroyed();const c=Ii(this),d=Fr(void 0);try{if(!(u&et.SkipSelf)){let _=this.records.get(s);if(void 0===_){const b=("function"==typeof(i=s)||"object"==typeof i&&i instanceof Mn)&&$n(s);_=b&&this.injectableDefInScope(b)?ph(Pm(s),Om):null,this.records.set(s,_)}if(null!=_)return this.hydrate(s,_)}return(u&et.Self?Yv():this.parent).get(s,o=u&et.Optional&&o===st?null:o)}catch(g){if("NullInjectorError"===g.name){if((g[St]=g[St]||[]).unshift(X(s)),c)throw g;return yr(g,s,"R3InjectorError",this.source)}throw g}finally{Fr(d),Ii(c)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((u,c)=>s.push(X(c))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(s,o,u){if(!(s=ge(s)))return!1;let c=Tr(s);const d=null==c&&s.ngModule||void 0,g=void 0===d?s:d,_=-1!==u.indexOf(g);if(void 0!==d&&(c=Tr(d)),null==c)return!1;if(null!=c.imports&&!_){let A;u.push(g);try{cs(c.imports,O=>{this.processInjectorType(O,o,u)&&(void 0===A&&(A=[]),A.push(O))})}finally{}if(void 0!==A)for(let O=0;O<A.length;O++){const{ngModule:F,providers:q}=A[O];cs(q,Y=>this.processProvider(Y,F,q||Re))}}this.injectorDefTypes.add(g);const b=bi(g)||(()=>new g);this.records.set(g,ph(b,Om));const I=c.providers;if(null!=I&&!_){const A=s;cs(I,O=>this.processProvider(O,A,I))}return void 0!==d&&void 0!==s.providers}processProvider(s,o,u){let c=gh(s=ge(s))?s:ge(s&&s.provide);const d=(i=s,km(i)?ph(void 0,i.useValue):ph(OA(i),Om));var i;if(gh(s)||!0!==s.multi)this.records.get(c);else{let g=this.records.get(c);g||(g=ph(void 0,Om,!0),g.factory=()=>no(g.multi),this.records.set(c,g)),c=s,g.multi.push(s)}this.records.set(c,d)}hydrate(s,o){return o.value===Om&&(o.value=RA,o.value=o.factory()),"object"==typeof o.value&&o.value&&null!==(i=o.value)&&"object"==typeof i&&"function"==typeof i.ngOnDestroy&&this.onDestroy.add(o.value),o.value;var i}injectableDefInScope(s){if(!s.providedIn)return!1;const o=ge(s.providedIn);return"string"==typeof o?"any"===o||o===this.scope:this.injectorDefTypes.has(o)}}function Pm(i){const s=$n(i),o=null!==s?s.factory:bi(i);if(null!==o)return o;if(i instanceof Mn)throw new Error(`Token ${X(i)} is missing a \u0275prov definition.`);if(i instanceof Function)return function(i){const s=i.length;if(s>0){const u=function(i,s){const o=[];for(let u=0;u<i;u++)o.push(s);return o}(s,"?");throw new Error(`Can't resolve all parameters for ${X(i)}: (${u.join(", ")}).`)}const o=function(i){const s=i&&(i[Zt]||i[Jr]);if(s){const o=function(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${o}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${o}" class.`),s}return null}(i);return null!==o?()=>o.factory(i):()=>new i}(i);throw new Error("unreachable")}function OA(i,s,o){let u;if(gh(i)){const c=ge(i);return bi(c)||Pm(c)}if(km(i))u=()=>ge(i.useValue);else if(function(i){return!(!i||!i.useFactory)}(i))u=()=>i.useFactory(...no(i.deps||[]));else if(function(i){return!(!i||!i.useExisting)}(i))u=()=>yn(ge(i.useExisting));else{const c=ge(i&&(i.useClass||i.provide));if(!function(i){return!!i.deps}(i))return bi(c)||Pm(c);u=()=>new c(...no(i.deps))}return u}function ph(i,s,o=!1){return{factory:i,value:s,multi:o?[]:void 0}}function km(i){return null!==i&&"object"==typeof i&&Wi in i}function gh(i){return"function"==typeof i}const it=function(i,s,o){return function(i,s=null,o=null,u){const c=Qv(i,s,o,u);return c._resolveInjectorDefTypes(),c}({name:o},s,i,o)};let Rn=(()=>{class i{static create(o,u){return Array.isArray(o)?it(o,u,""):it(o.providers,o.parent,o.name||"")}}return i.THROW_IF_NOT_FOUND=st,i.NULL=new MA,i.\u0275prov=Mt({token:i,providedIn:"any",factory:()=>yn(vp)}),i.__NG_ELEMENT_ID__=-1,i})();function Cp(i,s){Pu(im(i)[1],xn())}function o0(i){let s=function(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),o=!0;const u=[i];for(;s;){let c;if(fi(i))c=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new Error("Directives cannot inherit Components");c=s.\u0275dir}if(c){if(o){u.push(c);const g=i;g.inputs=_h(i.inputs),g.declaredInputs=_h(i.declaredInputs),g.outputs=_h(i.outputs);const _=c.hostBindings;_&&Jw(i,_);const b=c.viewQuery,I=c.contentQueries;if(b&&a0(i,b),I&&Qw(i,I),te(i.inputs,c.inputs),te(i.declaredInputs,c.declaredInputs),te(i.outputs,c.outputs),fi(c)&&c.data.animation){const A=i.data;A.animation=(A.animation||[]).concat(c.data.animation)}}const d=c.features;if(d)for(let g=0;g<d.length;g++){const _=d[g];_&&_.ngInherit&&_(i),_===o0&&(o=!1)}}s=Object.getPrototypeOf(s)}!function(i){let s=0,o=null;for(let u=i.length-1;u>=0;u--){const c=i[u];c.hostVars=s+=c.hostVars,c.hostAttrs=Vu(c.hostAttrs,o=Vu(o,c.hostAttrs))}}(u)}function _h(i){return i===be?{}:i===Re?[]:i}function a0(i,s){const o=i.viewQuery;i.viewQuery=o?(u,c)=>{s(u,c),o(u,c)}:s}function Qw(i,s){const o=i.contentQueries;i.contentQueries=o?(u,c,d)=>{s(u,c,d),o(u,c,d)}:s}function Jw(i,s){const o=i.hostBindings;i.hostBindings=o?(u,c)=>{s(u,c),o(u,c)}:s}let vh=null;function sc(){if(!vh){const i=rt.Symbol;if(i&&i.iterator)vh=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let o=0;o<s.length;++o){const u=s[o];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(vh=u)}}}return vh}class oo{constructor(s){this.wrapped=s}static wrap(s){return new oo(s)}static unwrap(s){return oo.isWrapped(s)?s.wrapped:s}static isWrapped(s){return s instanceof oo}}function Eh(i){return!!Gm(i)&&(Array.isArray(i)||!(i instanceof Map)&&sc()in i)}function Gm(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function ao(i,s,o){return i[s]=o}function xi(i,s,o){return!Object.is(i[s],o)&&(i[s]=o,!0)}function Pr(i,s,o,u){const c=Ie();return xi(c,rs(),s)&&(qt(),io(wn(),c,i,s,o,u)),Pr}function Ah(i,s,o,u,c,d,g,_){const b=Ie(),I=qt(),A=i+20,O=I.firstCreatePass?function(i,s,o,u,c,d,g,_,b){const I=s.consts,A=lh(s,i,4,g||null,Vi(I,_));xm(s,o,A,Vi(I,b)),Pu(s,A);const O=A.tViews=hh(2,A,u,c,d,s.directiveRegistry,s.pipeRegistry,null,s.schemas,I);return null!==s.queries&&(s.queries.template(s,A),O.queries=s.queries.embeddedTView(A)),A}(A,I,b,s,o,u,c,d,g):I.data[A];Ui(O,!1);const F=b[11].createComment("");dp(I,b,F,O),Dn(F,b),qv(b,b[A]=Gv(F,b,F,O)),Ma(O)&&Sm(I,b,O),null!=g&&vl(b,O,_)}function d0(i){return Ds(vt.lFrame.contextLView,20+i)}function Oh(i,s=et.Default){const o=Ie();return null===o?yn(i,s):ei(xn(),o,ge(i),s)}function Nh(i,s,o){const u=Ie();return xi(u,rs(),s)&&Si(qt(),wn(),u,i,s,u[11],o,!1),Nh}function Tl(i,s,o,u,c){const g=c?"class":"style";Lw(i,o,s.inputs[g],g,u)}function w0(i,s,o,u){const c=Ie(),d=qt(),g=20+i,_=c[11],b=c[g]=yv(_,s,vt.lFrame.currentNamespace),I=d.firstCreatePass?function(i,s,o,u,c,d,g){const _=s.consts,I=lh(s,i,2,c,Vi(_,d));return xm(s,o,I,Vi(_,g)),null!==I.attrs&&Kv(I,I.attrs,!1),null!==I.mergedAttrs&&Kv(I,I.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,I),I}(g,d,c,0,s,o,u):d.data[g];Ui(I,!0);const A=I.mergedAttrs;null!==A&&Ua(_,b,A);const O=I.classes;null!==O&&ym(_,b,O);const F=I.styles;null!==F&&iw(_,b,F),64!=(64&I.flags)&&dp(d,c,b,I),0===vt.lFrame.elementDepthCount&&Dn(b,c),vt.lFrame.elementDepthCount++,Ma(I)&&(Sm(d,c,I),function(i,s,o){if(Vc(s)){const c=s.directiveEnd;for(let d=s.directiveStart;d<c;d++){const g=i.data[d];g.contentQueries&&g.contentQueries(1,o[d],d)}}}(d,I,c)),null!==u&&vl(c,I)}function ry(){let i=xn();Co()?vt.lFrame.isParent=!1:(i=i.parent,Ui(i,!1));const s=i;vt.lFrame.elementDepthCount--;const o=qt();o.firstCreatePass&&(Pu(o,i),Vc(i)&&o.queries.elementEnd(i)),null!=s.classesWithoutHost&&function(i){return 0!=(16&i.flags)}(s)&&Tl(o,s,Ie(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function(i){return 0!=(32&i.flags)}(s)&&Tl(o,s,Ie(),s.stylesWithoutHost,!1)}function pC(i,s,o,u){w0(i,s,o,u),ry()}function C0(){return Ie()}function iy(i){return!!i&&"function"==typeof i.then}function I0(i){return!!i&&"function"==typeof i.subscribe}const cc=I0;function D0(i,s,o,u){const c=Ie(),d=qt(),g=xn();return function(i,s,o,u,c,d,g,_){const b=Ma(u),A=i.firstCreatePass&&kw(i),O=s[8],F=AA(s);let q=!0;if(3&u.type||_){const ee=xr(u,s),Fe=_?_(ee):ee,Ee=F.length,at=_?It=>_(Gt(It[u.index])):u.index;if(pn(o)){let It=null;if(!_&&b&&(It=function(i,s,o,u){const c=i.cleanup;if(null!=c)for(let d=0;d<c.length-1;d+=2){const g=c[d];if(g===o&&c[d+1]===u){const _=s[7],b=c[d+2];return _.length>b?_[b]:null}"string"==typeof g&&(d+=2)}return null}(i,s,c,u.index)),null!==It)(It.__ngLastListenerFn__||It).__ngNextListenerFn__=d,It.__ngLastListenerFn__=d,q=!1;else{d=sy(u,s,O,d,!1);const Xt=o.listen(Fe,c,d);F.push(d,Xt),A&&A.push(c,at,Ee,Ee+1)}}else d=sy(u,s,O,d,!0),Fe.addEventListener(c,d,g),F.push(d),A&&A.push(c,at,Ee,g)}else d=sy(u,s,O,d,!1);const Y=u.outputs;let le;if(q&&null!==Y&&(le=Y[c])){const ee=le.length;if(ee)for(let Fe=0;Fe<ee;Fe+=2){const jn=s[le[Fe]][le[Fe+1]].subscribe(d),Kr=F.length;F.push(d,jn),A&&A.push(c,u.index,Kr,-(Kr+1))}}}(d,c,c[11],g,i,s,!!o,u),D0}function T0(i,s,o,u){try{return!1!==o(u)}catch(c){return Fw(i,c),!1}}function sy(i,s,o,u,c){return function d(g){if(g===Function)return u;const _=2&i.flags?mn(i.index,s):s;0==(32&s[2])&&yp(_);let b=T0(s,0,u,g),I=d.__ngNextListenerFn__;for(;I;)b=T0(s,0,I,g)&&b,I=I.__ngNextListenerFn__;return c&&!1===b&&(g.preventDefault(),g.returnValue=!1),b}}function oy(i=1){return function(i){return(vt.lFrame.contextLView=function(i,s){for(;i>0;)s=s[15],i--;return s}(i,vt.lFrame.contextLView))[8]}(i)}function M0(i,s,o,u,c){const d=i[o+1],g=null===s;let _=u?ro(d):fa(d),b=!1;for(;0!==_&&(!1===b||g);){const A=i[_+1];rS(i[_],s)&&(b=!0,i[_+1]=u?fw(A):Ms(A)),_=u?ro(A):fa(A)}b&&(i[o+1]=u?Ms(d):fw(d))}function rS(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&gr(i,s)>=0}function Vh(i,s){return function(i,s,o,u){const c=Ie(),d=qt(),g=function(i){const s=vt.lFrame,o=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,o}(2);d.firstUpdatePass&&function(i,s,o,u){const c=i.data;if(null===c[o+1]){const d=c[Rr()],g=function(i,s){return s>=i.expandoStartIndex}(i,o);(function(i,s){return 0!=(i.flags&(s?16:32))})(d,u)&&null===s&&!g&&(s=!1),s=function(i,s,o,u){const c=function(i){const s=vt.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let d=u?s.residualClasses:s.residualStyles;if(null===c)0===(u?s.classBindings:s.styleBindings)&&(o=Uh(o=py(null,i,s,o,u),s.attrs,u),d=null);else{const g=s.directiveStylingLast;if(-1===g||i[g]!==c)if(o=py(c,i,s,o,u),null===d){let b=function(i,s,o){const u=o?s.classBindings:s.styleBindings;if(0!==fa(u))return i[ro(u)]}(i,s,u);void 0!==b&&Array.isArray(b)&&(b=py(null,i,s,b[1],u),b=Uh(b,s.attrs,u),function(i,s,o,u){i[ro(o?s.classBindings:s.styleBindings)]=u}(i,s,u,b))}else d=function(i,s,o){let u;const c=s.directiveEnd;for(let d=1+s.directiveStylingLast;d<c;d++)u=Uh(u,i[d].hostAttrs,o);return Uh(u,s.attrs,o)}(i,s,u)}return void 0!==d&&(u?s.residualClasses=d:s.residualStyles=d),o}(c,d,s,u),function(i,s,o,u,c,d){let g=d?s.classBindings:s.styleBindings,_=ro(g),b=fa(g);i[u]=o;let A,I=!1;if(Array.isArray(o)){const O=o;A=O[1],(null===A||gr(O,A)>0)&&(I=!0)}else A=o;if(c)if(0!==b){const F=ro(i[_+1]);i[u+1]=vm(F,_),0!==F&&(i[F+1]=oh(i[F+1],u)),i[_+1]=function(i,s){return 131071&i|s<<17}(i[_+1],u)}else i[u+1]=vm(_,0),0!==_&&(i[_+1]=oh(i[_+1],u)),_=u;else i[u+1]=vm(b,0),0===_?_=u:i[b+1]=oh(i[b+1],u),b=u;I&&(i[u+1]=Ms(i[u+1])),M0(i,A,u,!0),M0(i,A,u,!1),function(i,s,o,u,c){const d=c?i.residualClasses:i.residualStyles;null!=d&&"string"==typeof s&&gr(d,s)>=0&&(o[u+1]=fw(o[u+1]))}(s,A,i,u,d),g=vm(_,b),d?s.classBindings=g:s.styleBindings=g}(c,d,s,o,g,u)}}(d,i,g,u),s!==Bt&&xi(c,g,s)&&function(i,s,o,u,c,d,g,_){if(!(3&s.type))return;const b=i.data,I=b[_+1];Np(function(i){return 1==(1&i)}(I)?V0(b,s,o,c,fa(I),g):void 0)||(Np(d)||function(i){return 2==(2&i)}(I)&&(d=V0(b,null,o,c,_,g)),function(i,s,o,u,c){const d=pn(i);if(s)c?d?i.addClass(o,u):o.classList.add(u):d?i.removeClass(o,u):o.classList.remove(u);else{let g=-1===u.indexOf("-")?void 0:da.DashCase;if(null==c)d?i.removeStyle(o,u,g):o.style.removeProperty(u);else{const _="string"==typeof c&&c.endsWith("!important");_&&(c=c.slice(0,-10),g|=da.Important),d?i.setStyle(o,u,c,g):o.style.setProperty(u,c,_?"important":"")}}}(u,g,bu(Rr(),o),c,d))}(d,d.data[Rr()],c,c[11],i,c[g+1]=function(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=X(zi(i)))),i}(s,o),u,g)}(i,s,null,!0),Vh}function py(i,s,o,u,c){let d=null;const g=o.directiveEnd;let _=o.directiveStylingLast;for(-1===_?_=o.directiveStart:_++;_<g&&(d=s[_],u=Uh(u,d.hostAttrs,c),d!==i);)_++;return null!==i&&(o.directiveStylingLast=_),u}function Uh(i,s,o){const u=o?1:2;let c=-1;if(null!==s)for(let d=0;d<s.length;d++){const g=s[d];"number"==typeof g?c=g:c===u&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),ri(i,g,!!o||s[++d]))}return void 0===i?null:i}function V0(i,s,o,u,c,d){const g=null===s;let _;for(;c>0;){const b=i[c],I=Array.isArray(b),A=I?b[1]:b,O=null===A;let F=o[c+1];F===Bt&&(F=O?Re:void 0);let q=O?Bd(F,u):A===u?F:void 0;if(I&&!Np(q)&&(q=Bd(b,u)),Np(q)&&(_=q,g))return _;const Y=i[c+1];c=g?ro(Y):fa(Y)}if(null!==s){let b=d?s.residualClasses:s.residualStyles;null!=b&&(_=Bd(b,u))}return _}function Np(i){return void 0!==i}function NC(i,s=""){const o=Ie(),u=qt(),c=i+20,d=u.firstCreatePass?lh(u,c,1,s,null):u.data[c],g=o[c]=function(i,s){return pn(i)?i.createText(s):i.createTextNode(s)}(o[11],s);dp(u,o,g,d),Ui(d,!1)}function Pp(i){return my("",i,""),Pp}function my(i,s,o){const u=Ie(),c=function(i,s,o,u){return xi(i,rs(),o)?s+$e(o)+u:Bt}(u,i,s,o);return c!==Bt&&rc(u,Rr(),c),my}function yy(i,s,o){const u=Ie();return xi(u,rs(),s)&&Si(qt(),wn(),u,i,s,u[11],o,!0),yy}const ft=void 0;var an=["en",[["a","p"],["AM","PM"],ft],[["AM","PM"],ft,ft],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ft,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ft,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ft,"{1} 'at' {0}",ft],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(i){const s=Math.floor(Math.abs(i)),o=i.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===o?1:5}];let jh={};function je(i){const s=function(i){return i.toLowerCase().replace(/_/g,"-")}(i);let o=dc(s);if(o)return o;const u=s.split("-")[0];if(o=dc(u),o)return o;if("en"===u)return an;throw new Error(`Missing locale data for the locale "${i}".`)}function _y(i){return je(i)[mt.PluralCase]}function dc(i){return i in jh||(jh[i]=rt.ng&&rt.ng.common&&rt.ng.common.locales&&rt.ng.common.locales[i]),jh[i]}var mt=(()=>((mt=mt||{})[mt.LocaleId=0]="LocaleId",mt[mt.DayPeriodsFormat=1]="DayPeriodsFormat",mt[mt.DayPeriodsStandalone=2]="DayPeriodsStandalone",mt[mt.DaysFormat=3]="DaysFormat",mt[mt.DaysStandalone=4]="DaysStandalone",mt[mt.MonthsFormat=5]="MonthsFormat",mt[mt.MonthsStandalone=6]="MonthsStandalone",mt[mt.Eras=7]="Eras",mt[mt.FirstDayOfWeek=8]="FirstDayOfWeek",mt[mt.WeekendRange=9]="WeekendRange",mt[mt.DateFormat=10]="DateFormat",mt[mt.TimeFormat=11]="TimeFormat",mt[mt.DateTimeFormat=12]="DateTimeFormat",mt[mt.NumberSymbols=13]="NumberSymbols",mt[mt.NumberFormats=14]="NumberFormats",mt[mt.CurrencyCode=15]="CurrencyCode",mt[mt.CurrencySymbol=16]="CurrencySymbol",mt[mt.CurrencyName=17]="CurrencyName",mt[mt.Currencies=18]="Currencies",mt[mt.Directionality=19]="Directionality",mt[mt.PluralCase=20]="PluralCase",mt[mt.ExtraData=21]="ExtraData",mt))();const Vp="en-US";let vy=Vp;function ue(i){sn(i,"Expected localeId to be defined"),"string"==typeof i&&(vy=i.toLowerCase().replace(/_/g,"-"))}function Sy(i,s,o,u,c){if(i=ge(i),Array.isArray(i))for(let d=0;d<i.length;d++)Sy(i[d],s,o,u,c);else{const d=qt(),g=Ie();let _=gh(i)?i:ge(i.provide),b=OA(i);const I=xn(),A=1048575&I.providerIndexes,O=I.directiveStart,F=I.providerIndexes>>20;if(gh(i)||!i.multi){const q=new Va(b,c,Oh),Y=My(_,s,c?A:A+F,O);-1===Y?(pr(ea(I,g),d,_),xy(d,i,s.length),s.push(_),I.directiveStart++,I.directiveEnd++,c&&(I.providerIndexes+=1048576),o.push(q),g.push(q)):(o[Y]=q,g[Y]=q)}else{const q=My(_,s,A+F,O),Y=My(_,s,A,A+F),le=q>=0&&o[q],ee=Y>=0&&o[Y];if(c&&!ee||!c&&!le){pr(ea(I,g),d,_);const Fe=function(i,s,o,u,c){const d=new Va(i,o,Oh);return d.multi=[],d.index=s,d.componentProviders=0,va(d,c,u&&!o),d}(c?sI:Yh,o.length,c,u,b);!c&&ee&&(o[Y].providerFactory=Fe),xy(d,i,s.length,0),s.push(_),I.directiveStart++,I.directiveEnd++,c&&(I.providerIndexes+=1048576),o.push(Fe),g.push(Fe)}else xy(d,i,q>-1?q:Y,va(o[c?Y:q],b,!c&&u));!c&&u&&ee&&o[Y].componentProviders++}}}function xy(i,s,o,u){const c=gh(s);if(c||function(i){return!!i.useClass}(s)){const g=(s.useClass||s).prototype.ngOnDestroy;if(g){const _=i.destroyHooks||(i.destroyHooks=[]);if(!c&&s.multi){const b=_.indexOf(o);-1===b?_.push(o,[u,g]):_[b+1].push(u,g)}else _.push(o,g)}}}function va(i,s,o){return o&&i.componentProviders++,i.multi.push(s)-1}function My(i,s,o,u){for(let c=o;c<u;c++)if(s[c]===i)return c;return-1}function Yh(i,s,o,u){return Hp(this.multi,[])}function sI(i,s,o,u){const c=this.multi;let d;if(this.providerFactory){const g=this.providerFactory.componentProviders,_=Ks(o,o[1],this.providerFactory.index,u);d=_.slice(0,g),Hp(c,d);for(let b=g;b<_.length;b++)d.push(_[b])}else d=[],Hp(c,d);return d}function Hp(i,s){for(let o=0;o<i.length;o++)s.push((0,i[o])());return s}function Ry(i,s=[]){return o=>{o.providersResolver=(u,c)=>function(i,s,o){const u=qt();if(u.firstCreatePass){const c=fi(i);Sy(o,u.data,u.blueprint,c,!0),Sy(s,u.data,u.blueprint,c,!1)}}(u,c?c(i):i,s)}}class Mi{}const Jh="ngComponent";class X0{resolveComponentFactory(s){throw function(i){const s=Error(`No component factory found for ${X(i)}. Did you add it to @NgModule.entryComponents?`);return s[Jh]=i,s}(s)}}let _c=(()=>{class i{}return i.NULL=new X0,i})();function Ny(...i){}function Vl(i,s){return new Ea(xr(i,s))}const TS=function(){return Vl(xn(),Ie())};let Ea=(()=>{class i{constructor(o){this.nativeElement=o}}return i.__NG_ELEMENT_ID__=TS,i})();function tE(i){return i instanceof Ea?i.nativeElement:i}class ba{}let uI=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>Xh(),i})();const Xh=function(){const i=Ie(),o=mn(xn().index,i);return function(i){return i[11]}(Es(o)?o:i)};let Bl=(()=>{class i{}return i.\u0275prov=Mt({token:i,providedIn:"root",factory:()=>null}),i})();class dI{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const nE=new dI("12.2.16");class Vn{constructor(){}supports(s){return Eh(s)}create(s){return new hI(s)}}const Py=(i,s)=>s;class hI{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||Py}forEachItem(s){let o;for(o=this._itHead;null!==o;o=o._next)s(o)}forEachOperation(s){let o=this._itHead,u=this._removalsHead,c=0,d=null;for(;o||u;){const g=!u||o&&o.currentIndex<iE(u,c,d)?o:u,_=iE(g,c,d),b=g.currentIndex;if(g===u)c--,u=u._nextRemoved;else if(o=o._next,null==g.previousIndex)c++;else{d||(d=[]);const I=_-c,A=b-c;if(I!=A){for(let F=0;F<I;F++){const q=F<d.length?d[F]:d[F]=0,Y=q+F;A<=Y&&Y<I&&(d[F]=q+1)}d[g.previousIndex]=A-I}}_!==b&&s(g,_,b)}}forEachPreviousItem(s){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)s(o)}forEachAddedItem(s){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)s(o)}forEachMovedItem(s){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)s(o)}forEachRemovedItem(s){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)s(o)}forEachIdentityChange(s){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)s(o)}diff(s){if(null==s&&(s=[]),!Eh(s))throw new Error(`Error trying to diff '${X(s)}'. Only arrays and iterables are allowed`);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let c,d,g,o=this._itHead,u=!1;if(Array.isArray(s)){this.length=s.length;for(let _=0;_<this.length;_++)d=s[_],g=this._trackByFn(_,d),null!==o&&Object.is(o.trackById,g)?(u&&(o=this._verifyReinsertion(o,d,g,_)),Object.is(o.item,d)||this._addIdentityChange(o,d)):(o=this._mismatch(o,d,g,_),u=!0),o=o._next}else c=0,function(i,s){if(Array.isArray(i))for(let o=0;o<i.length;o++)s(i[o]);else{const o=i[sc()]();let u;for(;!(u=o.next()).done;)s(u.value)}}(s,_=>{g=this._trackByFn(c,_),null!==o&&Object.is(o.trackById,g)?(u&&(o=this._verifyReinsertion(o,_,g,c)),Object.is(o.item,_)||this._addIdentityChange(o,_)):(o=this._mismatch(o,_,g,c),u=!0),o=o._next,c++}),this.length=c;return this._truncate(o),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,o,u,c){let d;return null===s?d=this._itTail:(d=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(s.item,o)||this._addIdentityChange(s,o),this._reinsertAfter(s,d,c)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(u,c))?(Object.is(s.item,o)||this._addIdentityChange(s,o),this._moveAfter(s,d,c)):s=this._addAfter(new SS(o,u),d,c),s}_verifyReinsertion(s,o,u,c){let d=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==d?s=this._reinsertAfter(d,s._prev,c):s.currentIndex!=c&&(s.currentIndex=c,this._addToMoves(s,c)),s}_truncate(s){for(;null!==s;){const o=s._next;this._addToRemovals(this._unlink(s)),s=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,o,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const c=s._prevRemoved,d=s._nextRemoved;return null===c?this._removalsHead=d:c._nextRemoved=d,null===d?this._removalsTail=c:d._prevRemoved=c,this._insertAfter(s,o,u),this._addToMoves(s,u),s}_moveAfter(s,o,u){return this._unlink(s),this._insertAfter(s,o,u),this._addToMoves(s,u),s}_addAfter(s,o,u){return this._insertAfter(s,o,u),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,o,u){const c=null===o?this._itHead:o._next;return s._next=c,s._prev=o,null===c?this._itTail=s:c._prev=s,null===o?this._itHead=s:o._next=s,null===this._linkedRecords&&(this._linkedRecords=new fI),this._linkedRecords.put(s),s.currentIndex=u,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const o=s._prev,u=s._next;return null===o?this._itHead=u:o._next=u,null===u?this._itTail=o:u._prev=o,s}_addToMoves(s,o){return s.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new fI),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,o){return s.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class SS{constructor(s,o){this.item=s,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Wp{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,o){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===o||o<=u.currentIndex)&&Object.is(u.trackById,s))return u;return null}remove(s){const o=s._prevDup,u=s._nextDup;return null===o?this._head=u:o._nextDup=u,null===u?this._tail=o:u._prevDup=o,null===this._head}}class fI{constructor(){this.map=new Map}put(s){const o=s.trackById;let u=this.map.get(o);u||(u=new Wp,this.map.set(o,u)),u.add(s)}get(s,o){const c=this.map.get(s);return c?c.get(s,o):null}remove(s){const o=s.trackById;return this.map.get(o).remove(s)&&this.map.delete(o),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function iE(i,s,o){const u=i.previousIndex;if(null===u)return u;let c=0;return o&&u<o.length&&(c=o[u]),u+s+c}class jl{constructor(){}supports(s){return s instanceof Map||Gm(s)}create(){return new eu}}class eu{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let o;for(o=this._mapHead;null!==o;o=o._next)s(o)}forEachPreviousItem(s){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)s(o)}forEachChangedItem(s){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)s(o)}forEachAddedItem(s){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)s(o)}forEachRemovedItem(s){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)s(o)}diff(s){if(s){if(!(s instanceof Map||Gm(s)))throw new Error(`Error trying to diff '${X(s)}'. Only maps and objects are allowed`)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(s,(u,c)=>{if(o&&o.key===c)this._maybeAddToChanges(o,u),this._appendAfter=o,o=o._next;else{const d=this._getOrCreateRecordForKey(c,u);o=this._insertBeforeOrAppend(o,d)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let u=o;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,o){if(s){const u=s._prev;return o._next=s,o._prev=u,s._prev=o,u&&(u._next=o),s===this._mapHead&&(this._mapHead=o),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(s,o){if(this._records.has(s)){const c=this._records.get(s);this._maybeAddToChanges(c,o);const d=c._prev,g=c._next;return d&&(d._next=g),g&&(g._prev=d),c._next=null,c._prev=null,c}const u=new pI(s);return this._records.set(s,u),u.currentValue=o,this._addToAdditions(u),u}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,o){Object.is(o,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=o,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,o){s instanceof Map?s.forEach(o):Object.keys(s).forEach(u=>o(s[u],u))}}class pI{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function sE(){return new zp([new Vn])}let zp=(()=>{class i{constructor(o){this.factories=o}static create(o,u){if(null!=u){const c=u.factories.slice();o=o.concat(c)}return new i(o)}static extend(o){return{provide:i,useFactory:u=>i.create(o,u||sE()),deps:[[i,new aa,new ds]]}}find(o){const u=this.factories.find(c=>c.supports(o));if(null!=u)return u;throw new Error(`Cannot find a differ supporting object '${o}' of type '${function(i){return i.name||typeof i}(o)}'`)}}return i.\u0275prov=Mt({token:i,providedIn:"root",factory:sE}),i})();function ky(){return new Fy([new jl])}let Fy=(()=>{class i{constructor(o){this.factories=o}static create(o,u){if(u){const c=u.factories.slice();o=o.concat(c)}return new i(o)}static extend(o){return{provide:i,useFactory:u=>i.create(o,u||ky()),deps:[[i,new aa,new ds]]}}find(o){const u=this.factories.find(c=>c.supports(o));if(u)return u;throw new Error(`Cannot find a differ supporting object '${o}'`)}}return i.\u0275prov=Mt({token:i,providedIn:"root",factory:ky}),i})();function tr(i,s,o,u,c=!1){for(;null!==o;){const d=s[o.index];if(null!==d&&u.push(Gt(d)),Sn(d))for(let _=10;_<d.length;_++){const b=d[_],I=b[1].firstChild;null!==I&&tr(b[1],b,I,u)}const g=o.type;if(8&g)tr(i,s,o.child,u);else if(32&g){const _=hv(o,s);let b;for(;b=_();)u.push(b)}else if(16&g){const _=tA(s,o);if(Array.isArray(_))u.push(..._);else{const b=eh(s[16]);tr(b[1],b,_,u,!0)}}o=c?o.projectionNext:o.next}return u}class Qt{constructor(s,o){this._lView=s,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,o=s[1];return tr(o,s,o.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(Sn(s)){const o=s[8],u=o?o.indexOf(this):-1;u>-1&&(vv(s,u),Xs(o,u))}this._attachedToViewContainer=!1}tw(this._lView[1],this._lView)}onDestroy(s){Vv(this._lView[1],this._lView,null,s)}markForCheck(){yp(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Mm(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(i,s,o){Bi(!0);try{Mm(i,s,o)}finally{Bi(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var s;this._appRef=null,hp(this._lView[1],s=this._lView,s[11],2,null,null)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=s}}class gI extends Qt{constructor(s){super(s),this._view=s}detectChanges(){Nw(this._view)}checkNoChanges(){!function(i){Bi(!0);try{Nw(i)}finally{Bi(!1)}}(this._view)}get context(){return null}}const xS=function(i){return function(i,s,o){if(bs(i)&&!o){const u=mn(i.index,s);return new Qt(u,u)}return 47&i.type?new Qt(s[16],s):null}(xn(),Ie(),16==(16&i))};let ys=(()=>{class i{}return i.__NG_ELEMENT_ID__=xS,i})();const _I=[new jl],vI=new zp([new Vn]),Kp=new Fy(_I),Wt=function(){return Hl(xn(),Ie())};let Yp=(()=>{class i{}return i.__NG_ELEMENT_ID__=Wt,i})();const Ly=Yp,Qp=class extends Ly{constructor(s,o,u){super(),this._declarationLView=s,this._declarationTContainer=o,this.elementRef=u}createEmbeddedView(s){const o=this._declarationTContainer.tViews,u=ch(this._declarationLView,o,s,16,null,o.declTNode,null,null,null,null);u[17]=this._declarationLView[this._declarationTContainer.index];const d=this._declarationLView[19];return null!==d&&(u[19]=d.createEmbeddedView(o)),gp(o,u,s),new Qt(u)}};function Hl(i,s){return 4&i.type?new Qp(s,i,Vl(i,s)):null}class vc{}class oE{}const bI=function(){return CI(xn(),Ie())};let Xp=(()=>{class i{}return i.__NG_ELEMENT_ID__=bI,i})();const OS=Xp,wI=class extends OS{constructor(s,o,u){super(),this._lContainer=s,this._hostTNode=o,this._hostLView=u}get element(){return Vl(this._hostTNode,this._hostLView)}get injector(){return new ss(this._hostTNode,this._hostLView)}get parentInjector(){const s=To(this._hostTNode,this._hostLView);if(is(s)){const o=Ba(s,this._hostLView),u=Do(s);return new ss(o[1].data[u+8],o)}return new ss(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const o=tf(this._lContainer);return null!==o&&o[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,o,u){const c=s.createEmbeddedView(o||{});return this.insert(c,u),c}createComponent(s,o,u,c,d){const g=u||this.parentInjector;if(!d&&null==s.ngModule&&g){const b=g.get(vc,null);b&&(d=b)}const _=s.create(g,c,void 0,d);return this.insert(_.hostView,o),_}insert(s,o){const u=s._lView,c=u[1];if(Sn(u[3])){const A=this.indexOf(s);if(-1!==A)this.detach(A);else{const O=u[3],F=new wI(O,O[6],O[3]);F.detach(F.indexOf(s))}}const d=this._adjustIndex(o),g=this._lContainer;!function(i,s,o,u){const c=10+u,d=o.length;u>0&&(o[c-1][4]=s),u<d-10?(s[4]=o[c],Gu(o,10+u,s)):(o.push(s),s[4]=null),s[3]=o;const g=s[17];null!==g&&o!==g&&function(i,s){const o=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===o?i[9]=[s]:o.push(s)}(g,s);const _=s[19];null!==_&&_.insertView(i),s[2]|=128}(c,u,g,d);const _=Za(d,g),b=u[11],I=gm(b,g[7]);return null!==I&&function(i,s,o,u,c,d){u[0]=c,u[6]=s,hp(i,u,o,1,c,d)}(c,g[6],b,u,I,_),s.attachToViewContainerRef(),Gu(Vy(g),d,s),s}move(s,o){return this.insert(s,o)}indexOf(s){const o=tf(this._lContainer);return null!==o?o.indexOf(s):-1}remove(s){const o=this._adjustIndex(s,-1),u=vv(this._lContainer,o);u&&(Xs(Vy(this._lContainer),o),tw(u[1],u))}detach(s){const o=this._adjustIndex(s,-1),u=vv(this._lContainer,o);return u&&null!=Xs(Vy(this._lContainer),o)?new Qt(u):null}_adjustIndex(s,o=0){return null==s?this.length+o:s}};function tf(i){return i[8]}function Vy(i){return i[8]||(i[8]=[])}function CI(i,s){let o;const u=s[i.index];if(Sn(u))o=u;else{let c;if(8&i.type)c=Gt(u);else{const d=s[11];c=d.createComment("");const g=xr(i,s);ha(d,gm(d,g),c,function(i,s){return pn(i)?i.nextSibling(s):s.nextSibling}(d,g),!1)}s[i.index]=o=Gv(u,s,c,i),qv(s,o)}return new wI(o,i,s)}const Xl={};class qI extends _c{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const o=dn(s);return new ff(o,this.ngModule)}}function wE(i){const s=[];for(let o in i)i.hasOwnProperty(o)&&s.push({propName:i[o],templateName:o});return s}const WI=new Mn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Kb});class ff extends Mi{constructor(s,o){super(),this.componentDef=s,this.ngModule=o,this.componentType=s.type,this.selector=s.selectors.map(fp).join(","),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!o}get inputs(){return wE(this.componentDef.inputs)}get outputs(){return wE(this.componentDef.outputs)}create(s,o,u,c){const d=(c=c||this.ngModule)?function(i,s){return{get:(o,u,c)=>{const d=i.get(o,Xl,c);return d!==Xl||u===Xl?d:s.get(o,u,c)}}}(s,c.injector):s,g=d.get(ba,Eu),_=d.get(Bl,null),b=g.createRenderer(null,this.componentDef),I=this.componentDef.selectors[0][0]||"div",A=u?function(i,s,o){if(pn(i))return i.selectRootElement(s,o===Dt.ShadowDom);let u="string"==typeof s?i.querySelector(s):s;return u.textContent="",u}(b,u,this.componentDef.encapsulation):yv(g.createRenderer(null,this.componentDef),I,function(i){const s=i.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(I)),O=this.componentDef.onPush?576:528,F=function(i,s){return{components:[],scheduler:i||Kb,clean:Zv,playerHandler:s||null,flags:0}}(),q=hh(0,null,null,1,0,null,null,null,null,null),Y=ch(null,q,F,O,null,null,g,b,_,d);let le,ee;Io(Y);try{const Fe=function(i,s,o,u,c,d){const g=o[1];o[20]=i;const b=lh(g,20,2,"#host",null),I=b.mergedAttrs=s.hostAttrs;null!==I&&(Kv(b,I,!0),null!==i&&(Ua(c,i,I),null!==b.classes&&ym(c,i,b.classes),null!==b.styles&&iw(c,i,b.styles)));const A=u.createRenderer(i,s),O=ch(o,vw(s),null,s.onPush?64:16,o[20],b,u,A,d||null,null);return g.firstCreatePass&&(pr(ea(b,o),g,s.type),Aw(g,b),mp(b,o.length,1)),qv(o,O),o[20]=O}(A,this.componentDef,Y,g,b);if(A)if(u)Ua(b,A,["ng-version",nE.full]);else{const{attrs:Ee,classes:at}=function(i){const s=[],o=[];let u=1,c=2;for(;u<i.length;){let d=i[u];if("string"==typeof d)2===c?""!==d&&s.push(d,i[++u]):8===c&&o.push(d);else{if(!Po(c))break;c=d}u++}return{attrs:s,classes:o}}(this.componentDef.selectors[0]);Ee&&Ua(b,A,Ee),at&&at.length>0&&ym(b,A,at.join(" "))}if(ee=Is(q,20),void 0!==o){const Ee=ee.projection=[];for(let at=0;at<this.ngContentSelectors.length;at++){const It=o[at];Ee.push(null!=It?Array.from(It):null)}}le=function(i,s,o,u,c){const d=o[1],g=function(i,s,o){const u=xn();i.firstCreatePass&&(o.providersResolver&&o.providersResolver(o),$v(i,u,s,dh(i,s,1,null),o));const c=Ks(s,i,u.directiveStart,u);Dn(c,s);const d=xr(u,s);return d&&Dn(d,s),c}(d,o,s);if(u.components.push(g),i[8]=g,c&&c.forEach(b=>b(g,s)),s.contentQueries){const b=xn();s.contentQueries(1,g,b.directiveStart)}const _=xn();return!d.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(ji(_.index),Dw(o[1],_,0,_.directiveStart,_.directiveEnd,s),Tw(s,g)),g}(Fe,this.componentDef,Y,F,[Cp]),gp(q,Y,null)}finally{Rd()}return new ZS(this.componentType,le,Vl(ee,Y),Y,ee)}}class ZS extends class{}{constructor(s,o,u,c,d){super(),this.location=u,this._rootLView=c,this._tNode=d,this.instance=o,this.hostView=this.changeDetectorRef=new gI(c),this.componentType=s}get injector(){return new ss(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}const pf=new Map;class KS extends vc{constructor(s,o){super(),this._parent=o,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new qI(this);const u=Sr(s),c=s[G]||null;c&&ue(c),this._bootstrapComponents=la(u.bootstrap),this._r3Injector=Qv(s,o,[{provide:vc,useValue:this},{provide:_c,useValue:this.componentFactoryResolver}],X(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,o=Rn.THROW_IF_NOT_FOUND,u=et.Default){return s===Rn||s===vc||s===vp?this:this._r3Injector.get(s,o,u)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class CE extends oE{constructor(s){super(),this.moduleType=s,null!==Sr(s)&&function(i){const s=new Set;!function o(u){const c=Sr(u,!0),d=c.id;null!==d&&(function(i,s,o){if(s&&s!==o)throw new Error(`Duplicate module registered for ${i} - ${X(s)} vs ${X(s.name)}`)}(d,pf.get(d),u),pf.set(d,u));const g=la(c.imports);for(const _ of g)s.has(_)||(s.add(_),o(_))}(i)}(s)}create(s){return new KS(this.moduleType,s)}}function QI(i,s,o,u){return function(i,s,o,u,c,d){const g=s+o;return xi(i,g,c)?ao(i,g+1,d?u.call(d,c):u(c)):td(i,g+1)}(Ie(),Mr(),i,s,o,u)}function td(i,s){const o=i[s];return o===Bt?void 0:o}function XI(i,s,o,u,c,d,g){const _=s+o;return function(i,s,o,u){const c=xi(i,s,o);return xi(i,s+1,u)||c}(i,_,c,d)?ao(i,_+2,g?u.call(g,c,d):u(c,d)):td(i,_+2)}function eD(i,s){const o=qt();let u;const c=i+20;o.firstCreatePass?(u=function(i,s){if(s)for(let o=s.length-1;o>=0;o--){const u=s[o];if(i===u.name)return u}throw new De("302",`The pipe '${i}' could not be found!`)}(s,o.pipeRegistry),o.data[c]=u,u.onDestroy&&(o.destroyHooks||(o.destroyHooks=[])).push(c,u.onDestroy)):u=o.data[c];const d=u.factory||(u.factory=bi(u.type)),g=Fr(Oh);try{const _=Qc(!1),b=d();return Qc(_),function(i,s,o,u){o>=i.data.length&&(i.data[o]=null,i.blueprint[o]=null),s[o]=u}(o,Ie(),c,b),b}finally{Fr(g)}}function ME(i,s,o,u){const c=i+20,d=Ie(),g=Ds(d,c);return function(i,s){oo.isWrapped(s)&&(s=oo.unwrap(s),i[vt.lFrame.bindingIndex]=Bt);return s}(d,function(i,s){return i[1].data[s].pure}(d,c)?XI(d,Mr(),s,g.transform,o,u,g):g.transform(o,u))}function s_(i){return s=>{setTimeout(i,void 0,s)}}const $o=class extends p.xQ{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,o,u){var c,d,g;let _=s,b=o||(()=>null),I=u;if(s&&"object"==typeof s){const O=s;_=null===(c=O.next)||void 0===c?void 0:c.bind(O),b=null===(d=O.error)||void 0===d?void 0:d.bind(O),I=null===(g=O.complete)||void 0===g?void 0:g.bind(O)}this.__isAsync&&(b=s_(b),_&&(_=s_(_)),I&&(I=s_(I)));const A=super.subscribe({next:_,error:b,complete:I});return s instanceof H.w&&s.add(A),A}};function XS(){return this._results[sc()]()}class yf{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=sc(),u=yf.prototype;u[o]||(u[o]=XS)}get changes(){return this._changes||(this._changes=new $o)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,o){return this._results.reduce(s,o)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,o){const u=this;u.dirty=!1;const c=Gi(s);(this._changesDetected=!function(i,s,o){if(i.length!==s.length)return!1;for(let u=0;u<i.length;u++){let c=i[u],d=s[u];if(o&&(c=o(c),d=o(d)),d!==c)return!1}return!0}(u._results,c,o))&&(u._results=c,u.length=c.length,u.last=c[this.length-1],u.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class o_{constructor(s){this.queryList=s,this.matches=null}clone(){return new o_(this.queryList)}setDirty(){this.queryList.setDirty()}}class ag{constructor(s=[]){this.queries=s}createEmbeddedView(s){const o=s.queries;if(null!==o){const u=null!==s.contentQueries?s.contentQueries[0]:o.length,c=[];for(let d=0;d<u;d++){const g=o.getByIndex(d);c.push(this.queries[g.indexInDeclarationView].clone())}return new ag(c)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let o=0;o<this.queries.length;o++)null!==uD(s,o).matches&&this.queries[o].setDirty()}}class ug{constructor(s,o,u=null){this.predicate=s,this.flags=o,this.read=u}}class rd{constructor(s=[]){this.queries=s}elementStart(s,o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(s,o)}elementEnd(s){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(s)}embeddedTView(s){let o=null;for(let u=0;u<this.length;u++){const c=null!==o?o.length:0,d=this.getByIndex(u).embeddedTView(s,c);d&&(d.indexInDeclarationView=u,null!==o?o.push(d):o=[d])}return null!==o?new rd(o):null}template(s,o){for(let u=0;u<this.queries.length;u++)this.queries[u].template(s,o)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class _f{constructor(s,o=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(s,o){this.isApplyingToNode(o)&&this.matchTNode(s,o)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,o){this.elementStart(s,o)}embeddedTView(s,o){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,o),new _f(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let u=s.parent;for(;null!==u&&8&u.type&&u.index!==o;)u=u.parent;return o===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(s,o){const u=this.metadata.predicate;if(Array.isArray(u))for(let c=0;c<u.length;c++){const d=u[c];this.matchTNodeWithReadOption(s,o,OE(o,d)),this.matchTNodeWithReadOption(s,o,wi(o,s,d,!1,!1))}else u===Yp?4&o.type&&this.matchTNodeWithReadOption(s,o,-1):this.matchTNodeWithReadOption(s,o,wi(o,s,u,!1,!1))}matchTNodeWithReadOption(s,o,u){if(null!==u){const c=this.metadata.read;if(null!==c)if(c===Ea||c===Xp||c===Yp&&4&o.type)this.addMatch(o.index,-2);else{const d=wi(o,s,c,!1,!1);null!==d&&this.addMatch(o.index,d)}else this.addMatch(o.index,u)}}addMatch(s,o){null===this.matches?this.matches=[s,o]:this.matches.push(s,o)}}function OE(i,s){const o=i.localNames;if(null!==o)for(let u=0;u<o.length;u+=2)if(o[u]===s)return o[u+1];return null}function PE(i,s,o,u){return-1===o?function(i,s){return 11&i.type?Vl(i,s):4&i.type?Hl(i,s):null}(s,i):-2===o?function(i,s,o){return o===Ea?Vl(s,i):o===Yp?Hl(s,i):o===Xp?CI(s,i):void 0}(i,s,u):Ks(i,i[1],o,s)}function iD(i,s,o,u){const c=s[19].queries[u];if(null===c.matches){const d=i.data,g=o.matches,_=[];for(let b=0;b<g.length;b+=2){const I=g[b];_.push(I<0?null:PE(s,d[I],g[b+1],o.metadata.read))}c.matches=_}return c.matches}function a_(i,s,o,u){const c=i.queries.getByIndex(o),d=c.matches;if(null!==d){const g=iD(i,s,c,o);for(let _=0;_<d.length;_+=2){const b=d[_];if(b>0)u.push(g[_/2]);else{const I=d[_+1],A=s[-b];for(let O=10;O<A.length;O++){const F=A[O];F[17]===F[3]&&a_(F[1],F,I,u)}if(null!==A[9]){const O=A[9];for(let F=0;F<O.length;F++){const q=O[F];a_(q[1],q,I,u)}}}}}return u}function sD(i){const s=Ie(),o=qt(),u=Su();Sd(u+1);const c=uD(o,u);if(i.dirty&&Ra(s)===(2==(2&c.metadata.flags))){if(null===c.matches)i.reset([]);else{const d=c.crossesNgTemplate?a_(o,s,u,[]):iD(o,s,c,u);i.reset(d,tE),i.notifyOnChanges()}return!0}return!1}function oD(i,s,o,u){const c=qt();if(c.firstCreatePass){const d=xn();(function(i,s,o){null===i.queries&&(i.queries=new rd),i.queries.track(new _f(s,o))})(c,new ug(s,o,u),d.index),function(i,s){const o=i.contentQueries||(i.contentQueries=[]);s!==(o.length?o[o.length-1]:-1)&&o.push(i.queries.length-1,s)}(c,i),2==(2&o)&&(c.staticContentQueries=!0)}!function(i,s,o){const u=new yf(4==(4&o));Vv(i,s,u,u.destroy),null===s[19]&&(s[19]=new ag),s[19].queries.push(new o_(u))}(c,Ie(),o)}function kE(){return i=Ie(),s=Su(),i[19].queries[s].queryList;var i,s}function uD(i,s){return i.queries.getByIndex(s)}const mg=new Mn("Application Initializer");let sd=(()=>{class i{constructor(o){this.appInits=o,this.resolve=Ny,this.reject=Ny,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,c)=>{this.resolve=u,this.reject=c})}runInitializers(){if(this.initialized)return;const o=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const d=this.appInits[c]();if(iy(d))o.push(d);else if(cc(d)){const g=new Promise((_,b)=>{d.subscribe({complete:_,error:b})});o.push(g)}}Promise.all(o).then(()=>{u()}).catch(c=>{this.reject(c)}),0===o.length&&u(),this.initialized=!0}}return i.\u0275fac=function(o){return new(o||i)(yn(mg,8))},i.\u0275prov=Mt({token:i,factory:i.\u0275fac}),i})();const xD=new Mn("AppId"),mx={provide:xD,useFactory:function(){return`${yg()}${yg()}${yg()}`},deps:[]};function yg(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const MD=new Mn("Platform Initializer"),E_=new Mn("Platform ID"),RD=new Mn("appBootstrapListener");let b_=(()=>{class i{log(o){console.log(o)}warn(o){console.warn(o)}}return i.\u0275fac=function(o){return new(o||i)},i.\u0275prov=Mt({token:i,factory:i.\u0275fac}),i})();const If=new Mn("LocaleId"),od=new Mn("DefaultCurrencyCode");class _x{constructor(s,o){this.ngModuleFactory=s,this.componentFactories=o}}const KE=function(i){return new CE(i)},YE=KE,vx=function(i){return Promise.resolve(KE(i))},LD=function(i){const s=KE(i),u=la(Sr(i).declarations).reduce((c,d)=>{const g=dn(d);return g&&c.push(new ff(g)),c},[]);return new _x(s,u)},QE=LD,UD=function(i){return Promise.resolve(LD(i))};let _g=(()=>{class i{constructor(){this.compileModuleSync=YE,this.compileModuleAsync=vx,this.compileModuleAndAllComponentsSync=QE,this.compileModuleAndAllComponentsAsync=UD}clearCache(){}clearCacheFor(o){}getModuleId(o){}}return i.\u0275fac=function(o){return new(o||i)},i.\u0275prov=Mt({token:i,factory:i.\u0275fac}),i})();const wx=(()=>Promise.resolve(0))();function vg(i){"undefined"==typeof Zone?wx.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Xi{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new $o(!1),this.onMicrotaskEmpty=new $o(!1),this.onStable=new $o(!1),this.onError=new $o(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!u&&o,c.shouldCoalesceRunChangeDetection=u,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function(){let i=rt.requestAnimationFrame,s=rt.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const o=i[Zone.__symbol__("OriginalDelegate")];o&&(i=o);const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function(i){const s=()=>{!function(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(rt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,Eg(i),i.isCheckStableRunning=!0,w_(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),Eg(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,u,c,d,g,_)=>{try{return C_(i),o.invokeTask(c,d,g,_)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===d.type||i.shouldCoalesceRunChangeDetection)&&s(),eb(i)}},onInvoke:(o,u,c,d,g,_,b)=>{try{return C_(i),o.invoke(c,d,g,_,b)}finally{i.shouldCoalesceRunChangeDetection&&s(),eb(i)}},onHasTask:(o,u,c,d)=>{o.hasTask(c,d),u===c&&("microTask"==d.change?(i._hasPendingMicrotasks=d.microTask,Eg(i),w_(i)):"macroTask"==d.change&&(i.hasPendingMacrotasks=d.macroTask))},onHandleError:(o,u,c,d)=>(o.handleError(c,d),i.runOutsideAngular(()=>i.onError.emit(d)),!1)})}(c)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Xi.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Xi.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,o,u){return this._inner.run(s,o,u)}runTask(s,o,u,c){const d=this._inner,g=d.scheduleEventTask("NgZoneEvent: "+c,s,Cx,Ny,Ny);try{return d.runTask(g,o,u)}finally{d.cancelTask(g)}}runGuarded(s,o,u){return this._inner.runGuarded(s,o,u)}runOutsideAngular(s){return this._outer.run(s)}}const Cx={};function w_(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function Eg(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function C_(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function eb(i){i._nesting--,w_(i)}class jD{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new $o,this.onMicrotaskEmpty=new $o,this.onStable=new $o,this.onError=new $o}run(s,o,u){return s.apply(o,u)}runGuarded(s,o,u){return s.apply(o,u)}runOutsideAngular(s){return s()}runTask(s,o,u,c){return s.apply(o,u)}}let tb=(()=>{class i{constructor(o){this._ngZone=o,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Xi.assertNotInAngularZone(),vg(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())vg(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(o)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,u,c){let d=-1;u&&u>0&&(d=setTimeout(()=>{this._callbacks=this._callbacks.filter(g=>g.timeoutId!==d),o(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:o,timeoutId:d,updateCb:c})}whenStable(o,u,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,u,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(o,u,c){return[]}}return i.\u0275fac=function(o){return new(o||i)(yn(Xi))},i.\u0275prov=Mt({token:i,factory:i.\u0275fac}),i})(),bg=(()=>{class i{constructor(){this._applications=new Map,I_.addToWindow(this)}registerApplication(o,u){this._applications.set(o,u)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,u=!0){return I_.findTestabilityInTree(this,o,u)}}return i.\u0275fac=function(o){return new(o||i)},i.\u0275prov=Mt({token:i,factory:i.\u0275fac}),i})();class tn{addToWindow(s){}findTestabilityInTree(s,o,u){return null}}function $D(i){I_=i}let I_=new tn,nb=!0,Tf=!1;function D_(){return Tf=!0,nb}function Un(){if(Tf)throw new Error("Cannot enable prod mode after platform setup.");nb=!1}let Nn;const Sx=new Mn("AllowMultipleToken");class xx{constructor(s,o){this.name=s,this.token=o}}function qD(i,s,o=[]){const u=`Platform: ${s}`,c=new Mn(u);return(d=[])=>{let g=ob();if(!g||g.injector.get(Sx,!1))if(i)i(o.concat(d).concat({provide:c,useValue:!0}));else{const _=o.concat(d).concat({provide:c,useValue:!0},{provide:Rm,useValue:"platform"});!function(i){if(Nn&&!Nn.destroyed&&!Nn.injector.get(Sx,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Nn=i.get(T_);const s=i.get(MD,null);s&&s.forEach(o=>o())}(Rn.create({providers:_,name:u}))}return function(i){const s=ob();if(!s)throw new Error("No platform exists!");if(!s.injector.get(i,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return s}(c)}}function ob(){return Nn&&!Nn.destroyed?Nn:null}let T_=(()=>{class i{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,u){const _=function(i,s){let o;return o="noop"===i?new jD:("zone.js"===i?void 0:i)||new Xi({enableLongStackTrace:D_(),shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),o}(u?u.ngZone:void 0,{ngZoneEventCoalescing:u&&u.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:u&&u.ngZoneRunCoalescing||!1}),b=[{provide:Xi,useValue:_}];return _.run(()=>{const I=Rn.create({providers:b,parent:this.injector,name:o.moduleType.name}),A=o.create(I),O=A.injector.get(Jd,null);if(!O)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return _.runOutsideAngular(()=>{const F=_.onError.subscribe({next:q=>{O.handleError(q)}});A.onDestroy(()=>{Af(this._modules,A),F.unsubscribe()})}),function(i,s,o){try{const u=o();return iy(u)?u.catch(c=>{throw s.runOutsideAngular(()=>i.handleError(c)),c}):u}catch(u){throw s.runOutsideAngular(()=>i.handleError(u)),u}}(O,_,()=>{const F=A.injector.get(sd);return F.runInitializers(),F.donePromise.then(()=>(ue(A.injector.get(If,Vp)||Vp),this._moduleDoBootstrap(A),A))})})}bootstrapModule(o,u=[]){const c=A_({},u);return function(i,s,o){const u=new CE(o);return Promise.resolve(u)}(0,0,o).then(d=>this.bootstrapModuleFactory(d,c))}_moduleDoBootstrap(o){const u=o.injector.get(ad);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(c=>u.bootstrap(c));else{if(!o.instance.ngDoBootstrap)throw new Error(`The module ${X(o.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);o.instance.ngDoBootstrap(u)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(o=>o.destroy()),this._destroyListeners.forEach(o=>o()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(o){return new(o||i)(yn(Rn))},i.\u0275prov=Mt({token:i,factory:i.\u0275fac}),i})();function A_(i,s){return Array.isArray(s)?s.reduce(A_,i):Object.assign(Object.assign({},i),s)}let ad=(()=>{class i{constructor(o,u,c,d,g){this._zone=o,this._injector=u,this._exceptionHandler=c,this._componentFactoryResolver=d,this._initStatus=g,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const _=new k.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),b=new k.y(I=>{let A;this._zone.runOutsideAngular(()=>{A=this._zone.onStable.subscribe(()=>{Xi.assertNotInAngularZone(),vg(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const O=this._zone.onUnstable.subscribe(()=>{Xi.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{A.unsubscribe(),O.unsubscribe()}});this.isStable=(0,ne.T)(_,b.pipe(i=>(0,ae.x)()(function(i,s){return function(u){let c;c="function"==typeof i?i:function(){return i};const d=Object.create(u,se.N);return d.source=u,d.subjectFactory=c,d}}(re)(i))))}bootstrap(o,u){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let c;c=o instanceof Mi?o:this._componentFactoryResolver.resolveComponentFactory(o),this.componentTypes.push(c.componentType);const d=function(i){return i.isBoundToModule}(c)?void 0:this._injector.get(vc),_=c.create(Rn.NULL,[],u||c.selector,d),b=_.location.nativeElement,I=_.injector.get(tb,null),A=I&&_.injector.get(bg);return I&&A&&A.registerApplication(b,I),_.onDestroy(()=>{this.detachView(_.hostView),Af(this.components,_),A&&A.unregisterApplication(b)}),this._loadComponent(_),_}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const u=o;this._views.push(u),u.attachToAppRef(this)}detachView(o){const u=o;Af(this._views,u),u.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o),this._injector.get(RD,[]).concat(this._bootstrapListeners).forEach(c=>c(o))}ngOnDestroy(){this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(o){return new(o||i)(yn(Xi),yn(Rn),yn(Jd),yn(_c),yn(sd))},i.\u0275prov=Mt({token:i,factory:i.\u0275fac}),i})();function Af(i,s){const o=i.indexOf(s);o>-1&&i.splice(o,1)}class x_{}class Px{}const kx={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let YD=(()=>{class i{constructor(o,u){this._compiler=o,this._config=u||kx}load(o){return this.loadAndCompile(o)}loadAndCompile(o){let[u,c]=o.split("#");return void 0===c&&(c="default"),L(8255)(u).then(d=>d[c]).then(d=>QD(d,u,c)).then(d=>this._compiler.compileModuleAsync(d))}loadFactory(o){let[u,c]=o.split("#"),d="NgFactory";return void 0===c&&(c="default",d=""),L(8255)(this._config.factoryPathPrefix+u+this._config.factoryPathSuffix).then(g=>g[c+d]).then(g=>QD(g,u,c))}}return i.\u0275fac=function(o){return new(o||i)(yn(_g),yn(Px,8))},i.\u0275prov=Mt({token:i,factory:i.\u0275fac}),i})();function QD(i,s,o){if(!i)throw new Error(`Cannot find '${o}' in '${s}'`);return i}const iu=function(i){return null},iT=qD(null,"core",[{provide:E_,useValue:"unknown"},{provide:T_,deps:[Rn]},{provide:bg,deps:[]},{provide:b_,deps:[]}]),sT=[{provide:ad,useClass:ad,deps:[Xi,Rn,Jd,_c,sd]},{provide:WI,deps:[Xi],useFactory:function(i){let s=[];return i.onStable.subscribe(()=>{for(;s.length;)s.pop()()}),function(o){s.push(o)}}},{provide:sd,useClass:sd,deps:[[new ds,mg]]},{provide:_g,useClass:_g,deps:[]},mx,{provide:zp,useFactory:function(){return vI},deps:[]},{provide:Fy,useFactory:function(){return Kp},deps:[]},{provide:If,useFactory:function(i){return ue(i=i||"undefined"!=typeof $localize&&$localize.locale||Vp),i},deps:[[new zu(If),new ds,new aa]]},{provide:od,useValue:"USD"}];let Hx=(()=>{class i{constructor(o){}}return i.\u0275fac=function(o){return new(o||i)(yn(ad))},i.\u0275mod=Lt({type:i}),i.\u0275inj=Dr({providers:sT}),i})()},8939:(Ke,ye,L)=>{"use strict";L.d(ye,{hO:()=>X,xv:()=>re,Dh:()=>ae,GT:()=>oe,cc:()=>de,on:()=>V,pX:()=>se});var p=L(3018),H=L(7841),k=L(8440);Ke=L.hmd(Ke);const ne=["ngOnDestroy"],se=(Se,xe,De,Ze={})=>new Proxy(Se,{get:(ut,$e)=>De.runOutsideAngular(()=>{var Ft;if(Se[$e])return(null===(Ft=null==Ze?void 0:Ze.spy)||void 0===Ft?void 0:Ft.get)&&Ze.spy.get($e,Se[$e]),Se[$e];if(ne.indexOf($e)>-1)return()=>{};const _t=xe.toPromise().then(Oe=>{const Ne=Oe&&Oe[$e];return"function"==typeof Ne?Ne.bind(Oe):Ne&&Ne.then?Ne.then(He=>De.run(()=>He)):De.run(()=>Ne)});return new Proxy(()=>{},{get:(Oe,Ne)=>_t[Ne],apply:(Oe,Ne,He)=>_t.then(Qe=>{var Xe;const Ct=Qe&&Qe(...He);return(null===(Xe=null==Ze?void 0:Ze.spy)||void 0===Xe?void 0:Xe.apply)&&Ze.spy.apply($e,He,Ct),Ct})})})}),oe=(Se,xe)=>{xe.forEach(De=>{Object.getOwnPropertyNames(De.prototype||De).forEach(Ze=>{Object.defineProperty(Se.prototype,Ze,Object.getOwnPropertyDescriptor(De.prototype||De,Ze))})})};class ve{constructor(xe){return xe}}const ae=new p.OlP("angularfire2.app.options"),re=new p.OlP("angularfire2.app.name");function V(Se,xe,De){const ut="object"==typeof De&&De||{};ut.name=ut.name||"string"==typeof De&&De||"[DEFAULT]";const Ft=H.Z.apps.filter(_t=>_t&&_t.name===ut.name)[0]||xe.runOutsideAngular(()=>H.Z.initializeApp(Se,ut));try{JSON.stringify(Se)!==JSON.stringify(Ft.options)&&B("error",`${Ft.name} Firebase App already initialized with different options${Ke.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(_t){}return new ve(Ft)}const B=(Se,...xe)=>{(0,p.X6Q)()&&"undefined"!=typeof console&&console[Se](...xe)},te={provide:ve,useFactory:V,deps:[ae,p.R0b,[new p.FiY,re]]};let X=(()=>{class Se{constructor(De){H.Z.registerVersion("angularfire",k.q4.full,"core"),H.Z.registerVersion("angularfire",k.q4.full,"app-compat"),H.Z.registerVersion("angular",p.q4F.full,De.toString())}static initializeApp(De,Ze){return{ngModule:Se,providers:[{provide:ae,useValue:De},{provide:re,useValue:Ze}]}}}return Se.\u0275fac=function(De){return new(De||Se)(p.LFG(p.Lbi))},Se.\u0275mod=p.oAB({type:Se}),Se.\u0275inj=p.cJS({providers:[te]}),Se})();function de(Se,xe,De,Ze,ut){const[,$e,Ft]=globalThis.\u0275AngularfireInstanceCache.find(_t=>_t[0]===Se)||[];if($e)return function(Se,xe){try{return Se.toString()===xe.toString()}catch(De){return Se===xe}}(ut,Ft)||(ge("error",`${xe} was already initialized on the ${De} Firebase App with different settings.${me?" You may need to reload as Firebase is not HMR aware.":""}`),ge("warn",{is:ut,was:Ft})),$e;{const _t=Ze();return globalThis.\u0275AngularfireInstanceCache.push([Se,_t,ut]),_t}}const me=!!Ke.hot,ge=(Se,...xe)=>{(0,p.X6Q)()&&"undefined"!=typeof console&&console[Se](...xe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},8440:(Ke,ye,L)=>{"use strict";L.d(ye,{q4:()=>Bg,iC:()=>gr,HU:()=>$r,vb:()=>Xs,JM:()=>Gu});var p=L(3018),H=L(2329),k=L(8239),ne=L(8026),se=L(3854),oe=L(3910),ve=L(5422),ae=L(200);const re="@firebase/installations",V="0.5.15",te=`w:${V}`,X="FIS_v2",xe=new se.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function De(C){return C instanceof se.ZR&&C.code.includes("request-failed")}function Ze({projectId:C}){return`https://firebaseinstallations.googleapis.com/v1/projects/${C}/installations`}function ut(C){return{token:C.token,requestStatus:2,expiresIn:Qe(C.expiresIn),creationTime:Date.now()}}function $e(C,T){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,k.Z)(function*(C,T){const $=(yield T.json()).error;return xe.create("request-failed",{requestName:C,serverCode:$.code,serverMessage:$.message,serverStatus:$.status})})).apply(this,arguments)}function _t({apiKey:C}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C})}function Oe(C,{refreshToken:T}){const R=_t(C);return R.append("Authorization",function(C){return`${X} ${C}`}(T)),R}function Ne(C){return He.apply(this,arguments)}function He(){return(He=(0,k.Z)(function*(C){const T=yield C();return T.status>=500&&T.status<600?C():T})).apply(this,arguments)}function Qe(C){return Number(C.replace("s","000"))}function Ct(C,T){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,k.Z)(function*({appConfig:C,heartbeatServiceProvider:T},{fid:R}){const $=Ze(C),Q=_t(C),ce=T.getImmediate({optional:!0});if(ce){const At=yield ce.getHeartbeatsHeader();At&&Q.append("x-firebase-client",At)}const Be={method:"POST",headers:Q,body:JSON.stringify({fid:R,authVersion:X,appId:C.appId,sdkVersion:te})},st=yield Ne(()=>fetch($,Be));if(st.ok){const At=yield st.json();return{fid:At.fid||R,registrationStatus:2,refreshToken:At.refreshToken,authToken:ut(At.authToken)}}throw yield $e("Create Installation",st)})).apply(this,arguments)}function Tn(C){return new Promise(T=>{setTimeout(T,C)})}const Bs=/^[cdef][\w-]{21}$/;function po(){try{const C=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(C),C[0]=112+C[0]%16;const R=function(C){return function(C){return btoa(String.fromCharCode(...C)).replace(/\+/g,"-").replace(/\//g,"_")}(C).substr(0,22)}(C);return Bs.test(R)?R:""}catch(C){return""}}function rr(C){return`${C.appName}!${C.appId}`}const hi=new Map;function es(C,T){const R=rr(C);zn(R,T),function(C,T){const R=(!En&&"BroadcastChannel"in self&&(En=new BroadcastChannel("[Firebase] FID Change"),En.onmessage=C=>{zn(C.data.key,C.data.fid)}),En);R&&R.postMessage({key:C,fid:T}),0===hi.size&&En&&(En.close(),En=null)}(R,T)}function zn(C,T){const R=hi.get(C);if(R)for(const $ of R)$(T)}let En=null;const Me="firebase-installations-store";let Zn=null;function cr(){return Zn||(Zn=(0,ae.X3)("firebase-installations-database",1,{upgrade:(C,T)=>{0===T&&C.createObjectStore(Me)}})),Zn}function Tr(C,T){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,k.Z)(function*(C,T){const R=rr(C),Q=(yield cr()).transaction(Me,"readwrite"),ce=Q.objectStore(Me),we=yield ce.get(R);return yield ce.put(T,R),yield Q.done,(!we||we.fid!==T.fid)&&es(C,T.fid),T})).apply(this,arguments)}function bn(C){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,k.Z)(function*(C){const T=rr(C),$=(yield cr()).transaction(Me,"readwrite");yield $.objectStore(Me).delete(T),yield $.done})).apply(this,arguments)}function Ar(C,T){return et.apply(this,arguments)}function et(){return(et=(0,k.Z)(function*(C,T){const R=rr(C),Q=(yield cr()).transaction(Me,"readwrite"),ce=Q.objectStore(Me),we=yield ce.get(R),Be=T(we);return void 0===Be?yield ce.delete(R):yield ce.put(Be,R),yield Q.done,Be&&(!we||we.fid!==Be.fid)&&es(C,Be.fid),Be})).apply(this,arguments)}function lr(C){return dr.apply(this,arguments)}function dr(){return(dr=(0,k.Z)(function*(C){let T;const R=yield Ar(C.appConfig,$=>{const Q=Fr($),ce=on(C,Q);return T=ce.registrationPromise,ce.installationEntry});return""===R.fid?{installationEntry:yield T}:{installationEntry:R,registrationPromise:T}})).apply(this,arguments)}function Fr(C){return Dt(C||{fid:po(),registrationStatus:0})}function on(C,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(xe.create("app-offline"))};const R={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},$=function(C,T){return Ye.apply(this,arguments)}(C,R);return{installationEntry:R,registrationPromise:$}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:Hn(C)}:{installationEntry:T}}function Ye(){return(Ye=(0,k.Z)(function*(C,T){try{const R=yield Ct(C,T);return Tr(C.appConfig,R)}catch(R){throw De(R)&&409===R.customData.serverCode?yield bn(C.appConfig):yield Tr(C.appConfig,{fid:T.fid,registrationStatus:0}),R}})).apply(this,arguments)}function Hn(C){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,k.Z)(function*(C){let T=yield en(C.appConfig);for(;1===T.registrationStatus;)yield Tn(100),T=yield en(C.appConfig);if(0===T.registrationStatus){const{installationEntry:R,registrationPromise:$}=yield lr(C);return $||R}return T})).apply(this,arguments)}function en(C){return Ar(C,T=>{if(!T)throw xe.create("installation-not-found");return Dt(T)})}function Dt(C){return function(C){return 1===C.registrationStatus&&C.registrationTime+1e4<Date.now()}(C)?{fid:C.fid,registrationStatus:0}:C}function Pn(C,T){return nn.apply(this,arguments)}function nn(){return(nn=(0,k.Z)(function*({appConfig:C,heartbeatServiceProvider:T},R){const $=Lr(C,R),Q=Oe(C,R),ce=T.getImmediate({optional:!0});if(ce){const At=yield ce.getHeartbeatsHeader();At&&Q.append("x-firebase-client",At)}const Be={method:"POST",headers:Q,body:JSON.stringify({installation:{sdkVersion:te,appId:C.appId}})},st=yield Ne(()=>fetch($,Be));if(st.ok)return ut(yield st.json());throw yield $e("Generate Auth Token",st)})).apply(this,arguments)}function Lr(C,{fid:T}){return`${Ze(C)}/${T}/authTokens:generate`}function rt(C){return hr.apply(this,arguments)}function hr(){return(hr=(0,k.Z)(function*(C,T=!1){let R;const $=yield Ar(C.appConfig,ce=>{if(!zt(ce))throw xe.create("not-registered");const we=ce.authToken;if(!T&&W(we))return ce;if(1===we.requestStatus)return R=ze(C,T),ce;{if(!navigator.onLine)throw xe.create("app-offline");const Be=K(ce);return R=yt(C,Be),Be}});return R?yield R:$.authToken})).apply(this,arguments)}function ze(C,T){return be.apply(this,arguments)}function be(){return(be=(0,k.Z)(function*(C,T){let R=yield Re(C.appConfig);for(;1===R.authToken.requestStatus;)yield Tn(100),R=yield Re(C.appConfig);const $=R.authToken;return 0===$.requestStatus?rt(C,T):$})).apply(this,arguments)}function Re(C){return Ar(C,T=>{if(!zt(T))throw xe.create("not-registered");return function(C){return 1===C.requestStatus&&C.requestTime+1e4<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function yt(C,T){return Et.apply(this,arguments)}function Et(){return(Et=(0,k.Z)(function*(C,T){try{const R=yield Pn(C,T),$=Object.assign(Object.assign({},T),{authToken:R});return yield Tr(C.appConfig,$),R}catch(R){if(!De(R)||401!==R.customData.serverCode&&404!==R.customData.serverCode){const $=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield Tr(C.appConfig,$)}else yield bn(C.appConfig);throw R}})).apply(this,arguments)}function zt(C){return void 0!==C&&2===C.registrationStatus}function W(C){return 2===C.requestStatus&&!function(C){const T=Date.now();return T<C.creationTime||C.creationTime+C.expiresIn<T+36e5}(C)}function K(C){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},C),{authToken:T})}function U(){return(U=(0,k.Z)(function*(C){const T=C,{installationEntry:R,registrationPromise:$}=yield lr(T);return $?$.catch(console.error):rt(T).catch(console.error),R.fid})).apply(this,arguments)}function Ae(){return(Ae=(0,k.Z)(function*(C,T=!1){const R=C;return yield ot(R),(yield rt(R,T)).token})).apply(this,arguments)}function ot(C){return Je.apply(this,arguments)}function Je(){return(Je=(0,k.Z)(function*(C){const{registrationPromise:T}=yield lr(C);T&&(yield T)})).apply(this,arguments)}function Sr(C){return xe.create("missing-app-config-values",{valueName:C})}const gd="installations";(0,ne._registerComponent)(new oe.wA(gd,C=>{const T=C.getProvider("app").getImmediate(),R=function(C){if(!C||!C.options)throw Sr("App Configuration");if(!C.name)throw Sr("App Name");const T=["projectId","apiKey","appId"];for(const R of T)if(!C.options[R])throw Sr(R);return{appName:C.name,projectId:C.options.projectId,apiKey:C.options.apiKey,appId:C.options.appId}}(T);return{app:T,appConfig:R,heartbeatServiceProvider:(0,ne._getProvider)(T,"heartbeat"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,ne._registerComponent)(new oe.wA("installations-internal",C=>{const T=C.getProvider("app").getImmediate(),R=(0,ne._getProvider)(T,gd).getImmediate();return{getId:()=>function(C){return U.apply(this,arguments)}(R),getToken:Q=>function(C){return Ae.apply(this,arguments)}(R,Q)}},"PRIVATE")),(0,ne.registerVersion)(re,V),(0,ne.registerVersion)(re,V,"esm2017");const kn="@firebase/remote-config",Yn=new se.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class _d{constructor(T,R,$,Q){this.client=T,this.storage=R,this.storageCache=$,this.logger=Q}isCachedDataFresh(T,R){if(!R)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const $=Date.now()-R,Q=$<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${$}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${Q}.`),Q}fetch(T){var R=this;return(0,k.Z)(function*(){const[$,Q]=yield Promise.all([R.storage.getLastSuccessfulFetchTimestampMillis(),R.storage.getLastSuccessfulFetchResponse()]);if(Q&&R.isCachedDataFresh(T.cacheMaxAgeMillis,$))return Q;T.eTag=Q&&Q.eTag;const ce=yield R.client.fetch(T),we=[R.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ce.status&&we.push(R.storage.setLastSuccessfulFetchResponse(ce)),yield Promise.all(we),ce})()}}function Es(C=navigator){return C.languages&&C.languages[0]||C.language}class Sn{constructor(T,R,$,Q,ce,we){this.firebaseInstallations=T,this.sdkVersion=R,this.namespace=$,this.projectId=Q,this.apiKey=ce,this.appId=we}fetch(T){var R=this;return(0,k.Z)(function*(){var $,Q,ce;const[we,Be]=yield Promise.all([R.firebaseInstallations.getId(),R.firebaseInstallations.getToken()]),At=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${R.projectId}/namespaces/${R.namespace}:fetch?key=${R.apiKey}`,St={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},lt={sdk_version:R.sdkVersion,app_instance_id:we,app_instance_id_token:Be,app_id:R.appId,language_code:Es()},mr={method:"POST",headers:St,body:JSON.stringify(lt)},dt=fetch(At,mr),oa=new Promise((yn,or)=>{T.signal.addEventListener(()=>{const qu=new Error("The operation was aborted.");qu.name="AbortError",or(qu)})});let qi;try{yield Promise.race([dt,oa]),qi=yield dt}catch(yn){let or="fetch-client-network";throw"AbortError"===(null===($=yn)||void 0===$?void 0:$.name)&&(or="fetch-timeout"),Yn.create(or,{originalErrorMessage:null===(Q=yn)||void 0===Q?void 0:Q.message})}let Wi=qi.status;const Mo=qi.headers.get("ETag")||void 0;let Ii,Ha;if(200===qi.status){let yn;try{yn=yield qi.json()}catch(or){throw Yn.create("fetch-client-parse",{originalErrorMessage:null===(ce=or)||void 0===ce?void 0:ce.message})}Ii=yn.entries,Ha=yn.state}if("INSTANCE_STATE_UNSPECIFIED"===Ha?Wi=500:"NO_CHANGE"===Ha?Wi=304:("NO_TEMPLATE"===Ha||"EMPTY_CONFIG"===Ha)&&(Ii={}),304!==Wi&&200!==Wi)throw Yn.create("fetch-status",{httpStatus:Wi});return{status:Wi,eTag:Mo,config:Ii}})()}}class Ma{constructor(T,R){this.client=T,this.storage=R}fetch(T){var R=this;return(0,k.Z)(function*(){const $=(yield R.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return R.attemptFetch(T,$)})()}attemptFetch(T,{throttleEndTimeMillis:R,backoffCount:$}){var Q=this;return(0,k.Z)(function*(){yield function(C,T){return new Promise((R,$)=>{const Q=Math.max(T-Date.now(),0),ce=setTimeout(R,Q);C.addEventListener(()=>{clearTimeout(ce),$(Yn.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,R);try{const ce=yield Q.client.fetch(T);return yield Q.storage.deleteThrottleMetadata(),ce}catch(ce){if(!function(C){if(!(C instanceof se.ZR&&C.customData))return!1;const T=Number(C.customData.httpStatus);return 429===T||500===T||503===T||504===T}(ce))throw ce;const we={throttleEndTimeMillis:Date.now()+(0,se.$s)($),backoffCount:$+1};return yield Q.storage.setThrottleMetadata(we),Q.attemptFetch(T,we)}})()}}class Ed{constructor(T,R,$,Q,ce){this.app=T,this._client=R,this._storageCache=$,this._storage=Q,this._logger=ce,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function du(C,T){var R;const $=C.target.error||void 0;return Yn.create(T,{originalErrorMessage:$&&(null===(R=$)||void 0===R?void 0:R.message)})}const ws="app_namespace_store";class bd{constructor(T,R,$,Q=function(){return new Promise((C,T)=>{var R;try{const $=indexedDB.open("firebase_remote_config",1);$.onerror=Q=>{T(du(Q,"storage-open"))},$.onsuccess=Q=>{C(Q.target.result)},$.onupgradeneeded=Q=>{0===Q.oldVersion&&Q.target.result.createObjectStore(ws,{keyPath:"compositeKey"})}}catch($){T(Yn.create("storage-open",{originalErrorMessage:null===(R=$)||void 0===R?void 0:R.message}))}})}()){this.appId=T,this.appName=R,this.namespace=$,this.openDbPromise=Q}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var R=this;return(0,k.Z)(function*(){const $=yield R.openDbPromise;return new Promise((Q,ce)=>{var we;const st=$.transaction([ws],"readonly").objectStore(ws),At=R.createCompositeKey(T);try{const St=st.get(At);St.onerror=lt=>{ce(du(lt,"storage-get"))},St.onsuccess=lt=>{const mr=lt.target.result;Q(mr?mr.value:void 0)}}catch(St){ce(Yn.create("storage-get",{originalErrorMessage:null===(we=St)||void 0===we?void 0:we.message}))}})})()}set(T,R){var $=this;return(0,k.Z)(function*(){const Q=yield $.openDbPromise;return new Promise((ce,we)=>{var Be;const At=Q.transaction([ws],"readwrite").objectStore(ws),St=$.createCompositeKey(T);try{const lt=At.put({compositeKey:St,value:R});lt.onerror=mr=>{we(du(mr,"storage-set"))},lt.onsuccess=()=>{ce()}}catch(lt){we(Yn.create("storage-set",{originalErrorMessage:null===(Be=lt)||void 0===Be?void 0:Be.message}))}})})()}delete(T){var R=this;return(0,k.Z)(function*(){const $=yield R.openDbPromise;return new Promise((Q,ce)=>{var we;const st=$.transaction([ws],"readwrite").objectStore(ws),At=R.createCompositeKey(T);try{const St=st.delete(At);St.onerror=lt=>{ce(du(lt,"storage-delete"))},St.onsuccess=()=>{Q()}}catch(St){ce(Yn.create("storage-delete",{originalErrorMessage:null===(we=St)||void 0===we?void 0:we.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class Og{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,k.Z)(function*(){const R=T.storage.getLastFetchStatus(),$=T.storage.getLastSuccessfulFetchTimestampMillis(),Q=T.storage.getActiveConfig(),ce=yield R;ce&&(T.lastFetchStatus=ce);const we=yield $;we&&(T.lastSuccessfulFetchTimestampMillis=we);const Be=yield Q;Be&&(T.activeConfig=Be)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function Vf(){return fu.apply(this,arguments)}function fu(){return(fu=(0,k.Z)(function*(){if(!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch(C){return!1}})).apply(this,arguments)}(0,ne._registerComponent)(new oe.wA("remote-config",function(T,{instanceIdentifier:R}){const $=T.getProvider("app").getImmediate(),Q=T.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Yn.create("registration-window");if(!(0,se.hl)())throw Yn.create("indexed-db-unavailable");const{projectId:ce,apiKey:we,appId:Be}=$.options;if(!ce)throw Yn.create("registration-project-id");if(!we)throw Yn.create("registration-api-key");if(!Be)throw Yn.create("registration-app-id");const st=new bd(Be,$.name,R=R||"firebase"),At=new Og(st),St=new ve.Yd(kn);St.logLevel=ve.in.ERROR;const lt=new Sn(Q,ne.SDK_VERSION,R,ce,we,Be),mr=new Ma(lt,st),dt=new _d(mr,st,At,St),oa=new Ed($,dt,At,st,St);return function(C){const T=(0,se.m9)(C);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(oa),oa},"PUBLIC").setMultipleInstances(!0)),(0,ne.registerVersion)(kn,"0.3.14"),(0,ne.registerVersion)(kn,"0.3.14","esm2017");const Ng="/firebase-messaging-sw.js",Cd="/firebase-cloud-messaging-push-scope",jc="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",$c="google.c.a.c_id",gu="google.c.a.c_l",mu="google.c.a.ts",Cs="google.c.a.e";var bi=(()=>{return(C=bi||(bi={})).PUSH_RECEIVED="push-received",C.NOTIFICATION_CLICKED="notification-clicked",bi;var C})();function Qn(C){const T=new Uint8Array(C);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Id(C){const R=(C+"=".repeat((4-C.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),$=atob(R),Q=new Uint8Array($.length);for(let ce=0;ce<$.length;++ce)Q[ce]=$.charCodeAt(ce);return Q}const yo="fcm_token_details_db",Hc="fcm_token_object_Store";function Bf(C){return _o.apply(this,arguments)}function _o(){return _o=(0,k.Z)(function*(C){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ce=>ce.name).includes(yo))return null;let T=null;return(yield(0,ae.X3)(yo,5,{upgrade:($=(0,k.Z)(function*(Q,ce,we,Be){var st;if(ce<2||!Q.objectStoreNames.contains(Hc))return;const At=Be.objectStore(Hc),St=yield At.index("fcmSenderId").get(C);if(yield At.clear(),St)if(2===ce){const lt=St;if(!lt.auth||!lt.p256dh||!lt.endpoint)return;T={token:lt.fcmToken,createTime:null!==(st=lt.createTime)&&void 0!==st?st:Date.now(),subscriptionOptions:{auth:lt.auth,p256dh:lt.p256dh,endpoint:lt.endpoint,swScope:lt.swScope,vapidKey:"string"==typeof lt.vapidKey?lt.vapidKey:Qn(lt.vapidKey)}}}else if(3===ce){const lt=St;T={token:lt.fcmToken,createTime:lt.createTime,subscriptionOptions:{auth:Qn(lt.auth),p256dh:Qn(lt.p256dh),endpoint:lt.endpoint,swScope:lt.swScope,vapidKey:Qn(lt.vapidKey)}}}else if(4===ce){const lt=St;T={token:lt.fcmToken,createTime:lt.createTime,subscriptionOptions:{auth:Qn(lt.auth),p256dh:Qn(lt.p256dh),endpoint:lt.endpoint,swScope:lt.swScope,vapidKey:Qn(lt.vapidKey)}}}}),function(ce,we,Be,st){return $.apply(this,arguments)})})).close(),yield(0,ae.Lj)(yo),yield(0,ae.Lj)("fcm_vapid_details_db"),yield(0,ae.Lj)("undefined"),jf(T)?T:null;var $}),_o.apply(this,arguments)}function jf(C){if(!C||!C.subscriptionOptions)return!1;const{subscriptionOptions:T}=C;return"number"==typeof C.createTime&&C.createTime>0&&"string"==typeof C.token&&C.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}const In="firebase-messaging-store";let _u=null;function vu(){return _u||(_u=(0,ae.X3)("firebase-messaging-database",1,{upgrade:(C,T)=>{0===T&&C.createObjectStore(In)}})),_u}function ns(C){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,k.Z)(function*(C){const T=Eu(C),$=yield(yield vu()).transaction(In).objectStore(In).get(T);if($)return $;{const Q=yield Bf(C.appConfig.senderId);if(Q)return yield vo(C,Q),Q}})).apply(this,arguments)}function vo(C,T){return pi.apply(this,arguments)}function pi(){return(pi=(0,k.Z)(function*(C,T){const R=Eu(C),Q=(yield vu()).transaction(In,"readwrite");return yield Q.objectStore(In).put(T,R),yield Q.done,T})).apply(this,arguments)}function pn(C){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,k.Z)(function*(C){const T=Eu(C),$=(yield vu()).transaction(In,"readwrite");yield $.objectStore(In).delete(T),yield $.done})).apply(this,arguments)}function Eu({appConfig:C}){return C.appId}const Gt=new se.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Hf(C,T){return bo.apply(this,arguments)}function bo(){return(bo=(0,k.Z)(function*(C,T){var R;const $=yield mn(C),Q=wu(T),ce={method:"POST",headers:$,body:JSON.stringify(Q)};let we;try{we=yield(yield fetch(Ds(C.appConfig),ce)).json()}catch(Be){throw Gt.create("token-subscribe-failed",{errorInfo:null===(R=Be)||void 0===R?void 0:R.toString()})}if(we.error)throw Gt.create("token-subscribe-failed",{errorInfo:we.error.message});if(!we.token)throw Gt.create("token-subscribe-no-token");return we.token})).apply(this,arguments)}function bu(C,T){return xr.apply(this,arguments)}function xr(){return(xr=(0,k.Z)(function*(C,T){var R;const $=yield mn(C),Q=wu(T.subscriptionOptions),ce={method:"PATCH",headers:$,body:JSON.stringify(Q)};let we;try{we=yield(yield fetch(`${Ds(C.appConfig)}/${T.token}`,ce)).json()}catch(Be){throw Gt.create("token-update-failed",{errorInfo:null===(R=Be)||void 0===R?void 0:R.toString()})}if(we.error)throw Gt.create("token-update-failed",{errorInfo:we.error.message});if(!we.token)throw Gt.create("token-update-no-token");return we.token})).apply(this,arguments)}function Gf(C,T){return Is.apply(this,arguments)}function Is(){return(Is=(0,k.Z)(function*(C,T){var R;const Q={method:"DELETE",headers:yield mn(C)};try{const we=yield(yield fetch(`${Ds(C.appConfig)}/${T}`,Q)).json();if(we.error)throw Gt.create("token-unsubscribe-failed",{errorInfo:we.error.message})}catch(ce){throw Gt.create("token-unsubscribe-failed",{errorInfo:null===(R=ce)||void 0===R?void 0:R.toString()})}})).apply(this,arguments)}function Ds({projectId:C}){return`https://fcmregistrations.googleapis.com/v1/projects/${C}/registrations`}function mn(C){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,k.Z)(function*({appConfig:C,installations:T}){const R=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C.apiKey,"x-goog-firebase-installations-auth":`FIS ${R}`})})).apply(this,arguments)}function wu({p256dh:C,auth:T,endpoint:R,vapidKey:$}){const Q={web:{endpoint:R,auth:T,p256dh:C}};return $!==jc&&(Q.web.applicationPubKey=$),Q}const Cu=6048e5;function Vi(C){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,k.Z)(function*(C){const T=yield Pa(C.swRegistration,C.vapidKey),R={vapidKey:C.vapidKey,swScope:C.swRegistration.scope,endpoint:T.endpoint,auth:Qn(T.getKey("auth")),p256dh:Qn(T.getKey("p256dh"))},$=yield ns(C.firebaseDependencies);if($){if(Iu($.subscriptionOptions,R))return Date.now()>=$.createTime+Cu?Dd(C,{token:$.token,createTime:Date.now(),subscriptionOptions:R}):$.token;try{yield Gf(C.firebaseDependencies,$.token)}catch(Q){console.warn(Q)}return wo(C.firebaseDependencies,R)}return wo(C.firebaseDependencies,R)})).apply(this,arguments)}function Na(C){return vt.apply(this,arguments)}function vt(){return(vt=(0,k.Z)(function*(C){const T=yield ns(C.firebaseDependencies);T&&(yield Gf(C.firebaseDependencies,T.token),yield pn(C.firebaseDependencies));const R=yield C.swRegistration.pushManager.getSubscription();return!R||R.unsubscribe()})).apply(this,arguments)}function Dd(C,T){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,k.Z)(function*(C,T){try{const R=yield bu(C.firebaseDependencies,T),$=Object.assign(Object.assign({},T),{token:R,createTime:Date.now()});return yield vo(C.firebaseDependencies,$),R}catch(R){throw yield Na(C),R}})).apply(this,arguments)}function wo(C,T){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,k.Z)(function*(C,T){const $={token:yield Hf(C,T),createTime:Date.now(),subscriptionOptions:T};return yield vo(C,$),$.token})).apply(this,arguments)}function Pa(C,T){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,k.Z)(function*(C,T){return(yield C.pushManager.getSubscription())||C.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Id(T)})})).apply(this,arguments)}function Iu(C,T){return T.vapidKey===C.vapidKey&&T.endpoint===C.endpoint&&T.auth===C.auth&&T.p256dh===C.p256dh}function Ie(C){const T={from:C.from,collapseKey:C.collapse_key,messageId:C.fcmMessageId};return function(C,T){if(!T.notification)return;C.notification={};const R=T.notification.title;R&&(C.notification.title=R);const $=T.notification.body;$&&(C.notification.body=$);const Q=T.notification.image;Q&&(C.notification.image=Q)}(T,C),function(C,T){!T.data||(C.data=T.data)}(T,C),function(C,T){var R,$,Q,ce,we;if(!T.fcmOptions&&!(null===(R=T.notification)||void 0===R?void 0:R.click_action))return;C.fcmOptions={};const Be=null!==(Q=null===($=T.fcmOptions)||void 0===$?void 0:$.link)&&void 0!==Q?Q:null===(ce=T.notification)||void 0===ce?void 0:ce.click_action;Be&&(C.fcmOptions.link=Be);const st=null===(we=T.fcmOptions)||void 0===we?void 0:we.analytics_label;st&&(C.fcmOptions.analyticsLabel=st)}(T,C),T}function qc(C){return"object"==typeof C&&!!C&&$c in C}function qs(C,T){const R=[];for(let $=0;$<C.length;$++)R.push(C.charAt($)),$<T.length&&R.push(T.charAt($));return R.join("")}function Co(C){return Gt.create("missing-app-config-values",{valueName:C})}qs("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),qs("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Qo{constructor(T,R,$){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Q=function(C){if(!C||!C.options)throw Co("App Configuration Object");if(!C.name)throw Co("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:R}=C;for(const $ of T)if(!R[$])throw Co($);return{appName:C.name,projectId:R.projectId,apiKey:R.apiKey,appId:R.appId,senderId:R.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:Q,installations:R,analyticsProvider:$}}_delete(){return Promise.resolve()}}function Du(C){return Td.apply(this,arguments)}function Td(){return(Td=(0,k.Z)(function*(C){var T;try{C.swRegistration=yield navigator.serviceWorker.register(Ng,{scope:Cd}),C.swRegistration.update().catch(()=>{})}catch(R){throw Gt.create("failed-service-worker-registration",{browserErrorMessage:null===(T=R)||void 0===T?void 0:T.message})}})).apply(this,arguments)}function Ws(C,T){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,k.Z)(function*(C,T){if(!T&&!C.swRegistration&&(yield Du(C)),T||!C.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw Gt.create("invalid-sw-registration");C.swRegistration=T}})).apply(this,arguments)}function Mr(C,T){return Br.apply(this,arguments)}function Br(){return(Br=(0,k.Z)(function*(C,T){T?C.vapidKey=T:C.vapidKey||(C.vapidKey=jc)})).apply(this,arguments)}function rs(){return(rs=(0,k.Z)(function*(C,T){if(!navigator)throw Gt.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Gt.create("permission-blocked");return yield Mr(C,null==T?void 0:T.vapidKey),yield Ws(C,null==T?void 0:T.serviceWorkerRegistration),Vi(C)})).apply(this,arguments)}function As(C,T,R){return ka.apply(this,arguments)}function ka(){return(ka=(0,k.Z)(function*(C,T,R){const $=Ad(T);(yield C.firebaseDependencies.analyticsProvider.get()).logEvent($,{message_id:R[$c],message_name:R[gu],message_time:R[mu],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Ad(C){switch(C){case bi.NOTIFICATION_CLICKED:return"notification_open";case bi.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function La(){return(La=(0,k.Z)(function*(C,T){const R=T.data;if(!R.isFirebaseMessaging)return;C.onMessageHandler&&R.messageType===bi.PUSH_RECEIVED&&("function"==typeof C.onMessageHandler?C.onMessageHandler(Ie(R)):C.onMessageHandler.next(Ie(R)));const $=R.data;qc($)&&"1"===$[Cs]&&(yield As(C,R.messageType,$))})).apply(this,arguments)}const Jo="@firebase/messaging";function xd(){return Io.apply(this,arguments)}function Io(){return(Io=(0,k.Z)(function*(){try{yield(0,se.eu)()}catch(C){return!1}return"undefined"!=typeof window&&(0,se.hl)()&&(0,se.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,ne._registerComponent)(new oe.wA("messaging",C=>{const T=new Qo(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),C.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",R=>function(C,T){return La.apply(this,arguments)}(T,R)),T},"PUBLIC")),(0,ne._registerComponent)(new oe.wA("messaging-internal",C=>{const T=C.getProvider("messaging").getImmediate();return{getToken:$=>function(C,T){return rs.apply(this,arguments)}(T,$)}},"PRIVATE")),(0,ne.registerVersion)(Jo,"0.9.19"),(0,ne.registerVersion)(Jo,"0.9.19","esm2017");const ji="analytics",wn="firebase_id",Yc="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ou="https://www.googletagmanager.com/gtag/js",fr=new ve.Yd("@firebase/analytics");function Nu(C){return Promise.all(C.map(T=>T.catch(R=>R)))}function Pu(C,T){const R=document.createElement("script");R.src=`${Ou}?l=${C}&id=${T}`,R.async=!0,document.head.appendChild(R)}function Fu(C,T,R,$,Q,ce){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,k.Z)(function*(C,T,R,$,Q,ce){const we=$[Q];try{if(we)yield T[we];else{const st=(yield Nu(R)).find(At=>At.measurementId===Q);st&&(yield T[st.appId])}}catch(Be){fr.error(Be)}C("config",Q,ce)})).apply(this,arguments)}function Od(C,T,R,$,Q){return zs.apply(this,arguments)}function zs(){return(zs=(0,k.Z)(function*(C,T,R,$,Q){try{let ce=[];if(Q&&Q.send_to){let we=Q.send_to;Array.isArray(we)||(we=[we]);const Be=yield Nu(R);for(const st of we){const At=Be.find(lt=>lt.measurementId===st),St=At&&T[At.appId];if(!St){ce=[];break}ce.push(St)}}0===ce.length&&(ce=Object.values(T)),yield Promise.all(ce),C("event",$,Q||{})}catch(ce){fr.error(ce)}})).apply(this,arguments)}function kg(C){const T=window.document.getElementsByTagName("script");for(const R of Object.values(T))if(R.src&&R.src.includes(Ou)&&R.src.includes(C))return R;return null}const Or=new se.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Wf=new class{constructor(T={},R=1e3){this.throttleMetadata=T,this.intervalMillis=R}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,R){this.throttleMetadata[T]=R}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function X_(C){return new Headers({Accept:"application/json","x-goog-api-key":C})}function Ua(C){return Lu.apply(this,arguments)}function Lu(){return(Lu=(0,k.Z)(function*(C){var T;const{appId:R,apiKey:$}=C,Q={method:"GET",headers:X_($)},ce=Yc.replace("{app-id}",R),we=yield fetch(ce,Q);if(200!==we.status&&304!==we.status){let Be="";try{const st=yield we.json();(null===(T=st.error)||void 0===T?void 0:T.message)&&(Be=st.error.message)}catch(st){}throw Or.create("config-fetch-failed",{httpStatus:we.status,responseMessage:Be})}return we.json()})).apply(this,arguments)}function zf(C){return Vu.apply(this,arguments)}function Vu(){return(Vu=(0,k.Z)(function*(C,T=Wf,R){const{appId:$,apiKey:Q,measurementId:ce}=C.options;if(!$)throw Or.create("no-app-id");if(!Q){if(ce)return{measurementId:ce,appId:$};throw Or.create("no-api-key")}const we=T.getThrottleMetadata($)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Be=new Ba;return setTimeout((0,k.Z)(function*(){Be.abort()}),void 0!==R?R:6e4),Uu({appId:$,apiKey:Q,measurementId:ce},we,Be,T)})).apply(this,arguments)}function Uu(C,T,R){return is.apply(this,arguments)}function is(){return(is=(0,k.Z)(function*(C,{throttleEndTimeMillis:T,backoffCount:R},$,Q=Wf){var ce,we;const{appId:Be,measurementId:st}=C;try{yield Do($,T)}catch(At){if(st)return fr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${st} provided in the "measurementId" field in the local Firebase config. [${null===(ce=At)||void 0===ce?void 0:ce.message}]`),{appId:Be,measurementId:st};throw At}try{const At=yield Ua(C);return Q.deleteThrottleMetadata(Be),At}catch(At){const St=At;if(!Zf(St)){if(Q.deleteThrottleMetadata(Be),st)return fr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${st} provided in the "measurementId" field in the local Firebase config. [${null==St?void 0:St.message}]`),{appId:Be,measurementId:st};throw At}const lt=503===Number(null===(we=null==St?void 0:St.customData)||void 0===we?void 0:we.httpStatus)?(0,se.$s)(R,Q.intervalMillis,30):(0,se.$s)(R,Q.intervalMillis),mr={throttleEndTimeMillis:Date.now()+lt,backoffCount:R+1};return Q.setThrottleMetadata(Be,mr),fr.debug(`Calling attemptFetch again in ${lt} millis`),Uu(C,mr,$,Q)}})).apply(this,arguments)}function Do(C,T){return new Promise((R,$)=>{const Q=Math.max(T-Date.now(),0),ce=setTimeout(R,Q);C.addEventListener(()=>{clearTimeout(ce),$(Or.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}function Zf(C){if(!(C instanceof se.ZR&&C.customData))return!1;const T=Number(C.customData.httpStatus);return 429===T||500===T||503===T||504===T}class Ba{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}let Bu,pr;function ju(){return(ju=(0,k.Z)(function*(C,T,R,$,Q){if(Q&&Q.global)C("event",R,$);else{const ce=yield T;C("event",R,Object.assign(Object.assign({},$),{send_to:ce}))}})).apply(this,arguments)}function Kf(C){pr=C}function ja(C){Bu=C}function Pd(){return ei.apply(this,arguments)}function ei(){return(ei=(0,k.Z)(function*(){var C;if(!(0,se.hl)())return fr.warn(Or.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,se.eu)()}catch(T){return fr.warn(Or.create("indexeddb-unavailable",{errorInfo:null===(C=T)||void 0===C?void 0:C.toString()}).message),!1}return!0})).apply(this,arguments)}function Xc(){return(Xc=(0,k.Z)(function*(C,T,R,$,Q,ce,we){var Be;const st=zf(C);st.then(dt=>{R[dt.measurementId]=dt.appId,C.options.measurementId&&dt.measurementId!==C.options.measurementId&&fr.warn(`The measurement ID in the local Firebase config (${C.options.measurementId}) does not match the measurement ID fetched from the server (${dt.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(dt=>fr.error(dt)),T.push(st);const At=Pd().then(dt=>{if(dt)return $.getId()}),[St,lt]=yield Promise.all([st,At]);kg(ce)||Pu(ce,St.measurementId),pr&&(Q("consent","default",pr),Kf(void 0)),Q("js",new Date);const mr=null!==(Be=null==we?void 0:we.config)&&void 0!==Be?Be:{};return mr.origin="firebase",mr.update=!0,null!=lt&&(mr[wn]=lt),Q("config",St.measurementId,mr),Bu&&(Q("set",Bu),ja(void 0)),St.measurementId})).apply(this,arguments)}class Gn{constructor(T){this.app=T}_delete(){return delete wi[this.app.options.appId],Promise.resolve()}}let wi={},Ks=[];const kd={};let ss,Hi,na="dataLayer",Ao=!1;function os(C,T,R){!function(){const C=[];if((0,se.ru)()&&C.push("This is a browser extension environment."),(0,se.zI)()||C.push("Cookies are not available."),C.length>0){const T=C.map(($,Q)=>`(${Q+1}) ${$}`).join(" "),R=Or.create("invalid-analytics-context",{errorInfo:T});fr.warn(R.message)}}();const $=C.options.appId;if(!$)throw Or.create("no-app-id");if(!C.options.apiKey){if(!C.options.measurementId)throw Or.create("no-api-key");fr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${C.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=wi[$])throw Or.create("already-exists",{id:$});if(!Ao){!function(C){let T=[];Array.isArray(window[C])?T=window[C]:window[C]=T}(na);const{wrappedGtag:ce,gtagCore:we}=function(C,T,R,$,Q){let ce=function(...we){window[$].push(arguments)};return window[Q]&&"function"==typeof window[Q]&&(ce=window[Q]),window[Q]=function(C,T,R,$){function ce(){return(ce=(0,k.Z)(function*(we,Be,st){try{"event"===we?yield Od(C,T,R,Be,st):"config"===we?yield Fu(C,T,R,$,Be,st):"consent"===we?C("consent","update",st):C("set",Be)}catch(At){fr.error(At)}})).apply(this,arguments)}return function(we,Be,st){return ce.apply(this,arguments)}}(ce,C,T,R),{gtagCore:ce,wrappedGtag:window[Q]}}(wi,Ks,kd,na,"gtag");Hi=ce,ss=we,Ao=!0}return wi[$]=function(C,T,R,$,Q,ce,we){return Xc.apply(this,arguments)}(C,Ks,kd,T,ss,na,R),new Gn(C)}function qn(){return us.apply(this,arguments)}function us(){return(us=(0,k.Z)(function*(){if((0,se.ru)()||!(0,se.zI)()||!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch(C){return!1}})).apply(this,arguments)}const Qs="@firebase/analytics";(0,ne._registerComponent)(new oe.wA(ji,(T,{options:R})=>os(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),R),"PUBLIC")),(0,ne._registerComponent)(new oe.wA("analytics-internal",function(T){try{const R=T.getProvider(ji).getImmediate();return{logEvent:($,Q,ce)=>function(C,T,R,$){C=(0,se.m9)(C),function(C,T,R,$,Q){return ju.apply(this,arguments)}(Hi,wi[C.app.options.appId],T,R,$).catch(Q=>fr.error(Q))}(R,$,Q,ce)}}catch(R){throw Or.create("interop-component-reg-failed",{reason:R})}},"PRIVATE")),(0,ne.registerVersion)(Qs,"0.8.3"),(0,ne.registerVersion)(Qs,"0.8.3","esm2017");var Js=L(7771),Vd=L(3637),Ug=L(3342),So=L(3101),Jf=L(309);const Bg=new p.GfV("7.4.1"),Nr="__angularfire_symbol__analyticsIsSupportedValue",ti="__angularfire_symbol__analyticsIsSupported",Hu="__angularfire_symbol__remoteConfigIsSupportedValue",Fn="__angularfire_symbol__remoteConfigIsSupported",ia="__angularfire_symbol__messagingIsSupportedValue",xs="__angularfire_symbol__messagingIsSupported";function Gu(C,T,R){if(T){if(1===T.length)return T[0];const ce=T.filter(we=>we.app===R);if(1===ce.length)return ce[0]}return R.container.getProvider(C).getImmediate({optional:!0})}globalThis[ti]||(globalThis[ti]=qn().then(C=>globalThis[Nr]=C).catch(()=>globalThis[Nr]=!1)),globalThis[xs]||(globalThis[xs]=xd().then(C=>globalThis[ia]=C).catch(()=>globalThis[ia]=!1)),globalThis[Fn]||(globalThis[Fn]=Vf().then(C=>globalThis[Hu]=C).catch(()=>globalThis[Hu]=!1));const Xs=(C,T)=>{const R=T?[T]:(0,H.C6)(),$=[];return R.forEach(Q=>{Q.container.getProvider(C).instances.forEach(we=>{$.includes(we)||$.push(we)})}),$};function ni(){}class tl{constructor(T,R=Js.N){this.zone=T,this.delegate=R}now(){return this.delegate.now()}schedule(T,R,$){const Q=this.zone;return this.delegate.schedule(function(we){Q.runGuarded(()=>{T.apply(this,[we])})},R,$)}}class xo{constructor(T){this.zone=T,this.task=null}call(T,R){const $=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ni,{},ni,ni)),R.pipe((0,Ug.b)({next:$,complete:$,error:$})).subscribe(T).add($)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let $r=(()=>{class C{constructor(R){this.ngZone=R,this.outsideAngular=R.runOutsideAngular(()=>new tl(Zone.current)),this.insideAngular=R.run(()=>new tl(Zone.current,Vd.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return C.\u0275fac=function(R){return new(R||C)(p.LFG(p.R0b))},C.\u0275prov=p.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();function sa(){const C=globalThis.\u0275AngularFireScheduler;if(!C)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return C}function gr(C){return sa(),function(C){return function(R){return(R=R.lift(new xo(C.ngZone))).pipe((0,So.R)(C.outsideAngular),(0,Jf.QV)(C.insideAngular))}}(sa())(C)}},3607:(Ke,ye,L)=>{"use strict";L.d(ye,{$:()=>Td,A:()=>po,B:()=>hi,G:()=>sr,H:()=>bs,J:()=>Qn,L:()=>An,M:()=>vo,N:()=>Eu,P:()=>T,Q:()=>$f,R:()=>tl,T:()=>Gt,U:()=>Eo,V:()=>xr,W:()=>Gf,X:()=>wu,Y:()=>Yo,Z:()=>qc,_:()=>Ui,a:()=>ja,a0:()=>Tu,a1:()=>As,a2:()=>Ad,a3:()=>La,a4:()=>Au,a5:()=>Sd,a6:()=>xd,a7:()=>Io,a8:()=>Mu,a9:()=>zc,aA:()=>sl,aB:()=>Kt,aC:()=>ev,aD:()=>Wu,aE:()=>Cn,aI:()=>ta,aL:()=>bo,aa:()=>J_,ab:()=>ji,ac:()=>Zc,af:()=>fr,ag:()=>Pu,ah:()=>ku,ak:()=>vt,al:()=>Nd,an:()=>Zf,ao:()=>_n,ap:()=>$s,aq:()=>cr,ar:()=>vs,as:()=>xa,at:()=>En,au:()=>cl,av:()=>Ku,aw:()=>Mt,ax:()=>Me,ay:()=>Zt,az:()=>Vr,b:()=>pr,c:()=>St,d:()=>oa,e:()=>mr,f:()=>Ub,g:()=>$g,h:()=>rl,i:()=>Qs,j:()=>il,k:()=>Ju,l:()=>eo,m:()=>dl,o:()=>Cr,r:()=>Bd,s:()=>sa,u:()=>Xf});var p=L(8239),H=L(3854),k=L(8026),ne=L(5422);function ae(v,f){var m={};for(var E in v)Object.prototype.hasOwnProperty.call(v,E)&&f.indexOf(E)<0&&(m[E]=v[E]);if(null!=v&&"function"==typeof Object.getOwnPropertySymbols){var S=0;for(E=Object.getOwnPropertySymbols(v);S<E.length;S++)f.indexOf(E[S])<0&&Object.prototype.propertyIsEnumerable.call(v,E[S])&&(m[E[S]]=v[E[S]])}return m}var Ge=L(3910);const Cr={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},po={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const hi=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},es=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},sn=new H.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),zn=new ne.Yd("@firebase/auth");function Qr(v,...f){zn.logLevel<=ne.in.ERROR&&zn.error(`Auth (${k.SDK_VERSION}): ${v}`,...f)}function En(v,...f){throw $n(v,...f)}function Mt(v,...f){return $n(v,...f)}function Wo(v,f,m){const E=Object.assign(Object.assign({},es()),{[f]:m});return new H.LL("auth","Firebase",E).create(f,{appName:v.name})}function Dr(v,f,m){if(!(f instanceof m))throw m.name!==f.constructor.name&&En(v,"argument-error"),Wo(v,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function $n(v,...f){if("string"!=typeof v){const m=f[0],E=[...f.slice(1)];return E[0]&&(E[0].appName=v.name),v._errorFactory.create(m,...E)}return sn.create(v,...f)}function Me(v,f,...m){if(!v)throw $n(f,...m)}function Zn(v){const f="INTERNAL ASSERTION FAILED: "+v;throw Qr(f),new Error(f)}function cr(v,f){v||Zn(f)}const Tr=new Map;function Zt(v){cr(v instanceof Function,"Expected a class definition");let f=Tr.get(v);return f?(cr(f instanceof v,"Instance stored in cache mismatched with class"),f):(f=new v,Tr.set(v,f),f)}function Ar(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function et(){return"http:"===lr()||"https:"===lr()}function lr(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class on{constructor(f,m){this.shortDelay=f,this.longDelay=m,cr(m>f,"Short delay should be less than long delay!"),this.isMobile=(0,H.uI)()||(0,H.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(et()||(0,H.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function nt(v,f){cr(v.emulator,"Emulator should always be set here");const{url:m}=v.emulator;return f?`${m}${f.startsWith("/")?f.slice(1):f}`:m}class Ye{static initialize(f,m,E){this.fetchImpl=f,m&&(this.headersImpl=m),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Zn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Zn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Zn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Hn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Xr=new on(3e4,6e4);function en(v,f){return v.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:v.tenantId}):f}function Dt(v,f,m,E){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,p.Z)(function*(v,f,m,E,S={}){return Pn(v,S,(0,p.Z)(function*(){let M={},Z={};E&&("GET"===f?Z=E:M={body:JSON.stringify(E)});const he=(0,H.xO)(Object.assign({key:v.config.apiKey},Z)).slice(1),Ue=yield v._getAdditionalHeaders();return Ue["Content-Type"]="application/json",v.languageCode&&(Ue["X-Firebase-Locale"]=v.languageCode),Ye.fetch()(hr(v,v.config.apiHost,m,he),Object.assign({method:f,headers:Ue,referrerPolicy:"no-referrer"},M))}))})).apply(this,arguments)}function Pn(v,f,m){return nn.apply(this,arguments)}function nn(){return(nn=(0,p.Z)(function*(v,f,m){v._canInitEmulator=!1;const E=Object.assign(Object.assign({},Hn),f);try{const S=new ze(v),M=yield Promise.race([m(),S.promise]);S.clearNetworkTimeout();const Z=yield M.json();if("needConfirmation"in Z)throw be(v,"account-exists-with-different-credential",Z);if(M.ok&&!("errorMessage"in Z))return Z;{const he=M.ok?Z.errorMessage:Z.error.message,[Ue,Pe]=he.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ue)throw be(v,"credential-already-in-use",Z);if("EMAIL_EXISTS"===Ue)throw be(v,"email-already-in-use",Z);if("USER_DISABLED"===Ue)throw be(v,"user-disabled",Z);const ht=E[Ue]||Ue.toLowerCase().replace(/[_\s]+/g,"-");if(Pe)throw Wo(v,ht,Pe);En(v,ht)}}catch(S){if(S instanceof H.ZR)throw S;En(v,"network-request-failed")}})).apply(this,arguments)}function Lr(v,f,m,E){return rt.apply(this,arguments)}function rt(){return(rt=(0,p.Z)(function*(v,f,m,E,S={}){const M=yield Dt(v,f,m,E,S);return"mfaPendingCredential"in M&&En(v,"multi-factor-auth-required",{_serverResponse:M}),M})).apply(this,arguments)}function hr(v,f,m,E){const S=`${f}${m}?${E}`;return v.config.emulator?nt(v.config,S):`${v.config.apiScheme}://${S}`}class ze{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((m,E)=>{this.timer=setTimeout(()=>E(Mt(this.auth,"network-request-failed")),Xr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function be(v,f,m){const E={appName:v.name};m.email&&(E.email=m.email),m.phoneNumber&&(E.phoneNumber=m.phoneNumber);const S=Mt(v,f,E);return S.customData._tokenResponse=m,S}function yt(){return(yt=(0,p.Z)(function*(v,f){return Dt(v,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function Et(v,f){return zt.apply(this,arguments)}function zt(){return(zt=(0,p.Z)(function*(v,f){return Dt(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function W(v,f){return G.apply(this,arguments)}function G(){return(G=(0,p.Z)(function*(v,f){return Dt(v,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function K(v){if(v)try{const f=new Date(Number(v));if(!isNaN(f.getTime()))return f.toUTCString()}catch(f){}}function U(){return(U=(0,p.Z)(function*(v,f=!1){const m=(0,H.m9)(v),E=yield m.getIdToken(f),S=Ae(E);Me(S&&S.exp&&S.auth_time&&S.iat,m.auth,"internal-error");const M="object"==typeof S.firebase?S.firebase:void 0,Z=null==M?void 0:M.sign_in_provider;return{claims:S,token:E,authTime:K(ie(S.auth_time)),issuedAtTime:K(ie(S.iat)),expirationTime:K(ie(S.exp)),signInProvider:Z||null,signInSecondFactor:(null==M?void 0:M.sign_in_second_factor)||null}})).apply(this,arguments)}function ie(v){return 1e3*Number(v)}function Ae(v){var f;const[m,E,S]=v.split(".");if(void 0===m||void 0===E||void 0===S)return Qr("JWT malformed, contained fewer than 3 sections"),null;try{const M=(0,H.tV)(E);return M?JSON.parse(M):(Qr("Failed to decode base64 JWT payload"),null)}catch(M){return Qr("Caught error parsing JWT payload as JSON",null===(f=M)||void 0===f?void 0:f.toString()),null}}function Je(v,f){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,p.Z)(function*(v,f,m=!1){if(m)return f;try{return yield f}catch(E){throw E instanceof H.ZR&&ct(E)&&v.auth.currentUser===v&&(yield v.auth.signOut()),E}})).apply(this,arguments)}function ct({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class un{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var m;if(f){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const S=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(f=!1){var m=this;if(!this.isRunning)return;const E=this.getInterval(f);this.timerId=setTimeout((0,p.Z)(function*(){yield m.iteration()}),E)}iteration(){var f=this;return(0,p.Z)(function*(){var m;try{yield f.user.getIdToken(!0)}catch(E){return void("auth/network-request-failed"===(null===(m=E)||void 0===m?void 0:m.code)&&f.schedule(!0))}f.schedule()})()}}class ir{constructor(f,m){this.createdAt=f,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=K(this.lastLoginAt),this.creationTime=K(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Ut(v){return dn.apply(this,arguments)}function dn(){return(dn=(0,p.Z)(function*(v){var f;const m=v.auth,E=yield v.getIdToken(),S=yield Je(v,W(m,{idToken:E}));Me(null==S?void 0:S.users.length,m,"internal-error");const M=S.users[0];v._notifyReloadListener(M);const Z=(null===(f=M.providerUserInfo)||void 0===f?void 0:f.length)?gd(M.providerUserInfo):[],he=Sr(v.providerData,Z),ht=!!v.isAnonymous&&!(v.email&&M.passwordHash||(null==he?void 0:he.length)),gt={uid:M.localId,displayName:M.displayName||null,photoURL:M.photoUrl||null,email:M.email||null,emailVerified:M.emailVerified||!1,phoneNumber:M.phoneNumber||null,tenantId:M.tenantId||null,providerData:he,metadata:new ir(M.createdAt,M.lastLoginAt),isAnonymous:ht};Object.assign(v,gt)})).apply(this,arguments)}function _s(){return(_s=(0,p.Z)(function*(v){const f=(0,H.m9)(v);yield Ut(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function Sr(v,f){return[...v.filter(E=>!f.some(S=>S.providerId===E.providerId)),...f]}function gd(v){return v.map(f=>{var{providerId:m}=f,E=ae(f,["providerId"]);return{providerId:m,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function qe(){return(qe=(0,p.Z)(function*(v,f){const m=yield Pn(v,{},(0,p.Z)(function*(){const E=(0,H.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:S,apiKey:M}=v.config,Z=hr(v,S,"/v1/token",`key=${M}`),he=yield v._getAdditionalHeaders();return he["Content-Type"]="application/x-www-form-urlencoded",Ye.fetch()(Z,{method:"POST",headers:he,body:E})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class Tt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){Me(f.idToken,"internal-error"),Me(void 0!==f.idToken,"internal-error"),Me(void 0!==f.refreshToken,"internal-error");const m="expiresIn"in f&&void 0!==f.expiresIn?Number(f.expiresIn):function(v){const f=Ae(v);return Me(f,"internal-error"),Me(void 0!==f.exp,"internal-error"),Me(void 0!==f.iat,"internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,m)}getToken(f,m=!1){var E=this;return(0,p.Z)(function*(){return Me(!E.accessToken||E.refreshToken,f,"user-token-expired"),m||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(f,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,m){var E=this;return(0,p.Z)(function*(){const{accessToken:S,refreshToken:M,expiresIn:Z}=yield function(v,f){return qe.apply(this,arguments)}(f,m);E.updateTokensAndExpiration(S,M,Number(Z))})()}updateTokensAndExpiration(f,m,E){this.refreshToken=m||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(f,m){const{refreshToken:E,accessToken:S,expirationTime:M}=m,Z=new Tt;return E&&(Me("string"==typeof E,"internal-error",{appName:f}),Z.refreshToken=E),S&&(Me("string"==typeof S,"internal-error",{appName:f}),Z.accessToken=S),M&&(Me("number"==typeof M,"internal-error",{appName:f}),Z.expirationTime=M),Z}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new Tt,this.toJSON())}_performRefresh(){return Zn("not implemented")}}function rn(v,f){Me("string"==typeof v||void 0===v,"internal-error",{appName:f})}class kn{constructor(f){var{uid:m,auth:E,stsTokenManager:S}=f,M=ae(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new un(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=E,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=M.displayName||null,this.email=M.email||null,this.emailVerified=M.emailVerified||!1,this.phoneNumber=M.phoneNumber||null,this.photoURL=M.photoURL||null,this.isAnonymous=M.isAnonymous||!1,this.tenantId=M.tenantId||null,this.providerData=M.providerData?[...M.providerData]:[],this.metadata=new ir(M.createdAt||void 0,M.lastLoginAt||void 0)}getIdToken(f){var m=this;return(0,p.Z)(function*(){const E=yield Je(m,m.stsTokenManager.getToken(m.auth,f));return Me(E,m.auth,"internal-error"),m.accessToken!==E&&(m.accessToken=E,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),E})()}getIdTokenResult(f){return function(v){return U.apply(this,arguments)}(this,f)}reload(){return function(v){return _s.apply(this,arguments)}(this)}_assign(f){this!==f&&(Me(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(m=>Object.assign({},m)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new kn(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){Me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,m=!1){var E=this;return(0,p.Z)(function*(){let S=!1;f.idToken&&f.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(f),S=!0),m&&(yield Ut(E)),yield E.auth._persistUserIfCurrent(E),S&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var f=this;return(0,p.Z)(function*(){const m=yield f.getIdToken();return yield Je(f,function(v,f){return yt.apply(this,arguments)}(f.auth,{idToken:m})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,m){var E,S,M,Z,he,Ue,Pe,ht;const gt=null!==(E=m.displayName)&&void 0!==E?E:void 0,vn=null!==(S=m.email)&&void 0!==S?S:void 0,Hr=null!==(M=m.phoneNumber)&&void 0!==M?M:void 0,Gr=null!==(Z=m.photoURL)&&void 0!==Z?Z:void 0,pl=null!==(he=m.tenantId)&&void 0!==he?he:void 0,No=null!==(Ue=m._redirectEventId)&&void 0!==Ue?Ue:void 0,Xg=null!==(Pe=m.createdAt)&&void 0!==Pe?Pe:void 0,em=null!==(ht=m.lastLoginAt)&&void 0!==ht?ht:void 0,{uid:ap,emailVerified:tm,isAnonymous:gl,providerData:Xu,stsTokenManager:za}=m;Me(ap&&za,f,"internal-error");const ii=Tt.fromJSON(this.name,za);Me("string"==typeof ap,f,"internal-error"),rn(gt,f.name),rn(vn,f.name),Me("boolean"==typeof tm,f,"internal-error"),Me("boolean"==typeof gl,f,"internal-error"),rn(Hr,f.name),rn(Gr,f.name),rn(pl,f.name),rn(No,f.name),rn(Xg,f.name),rn(em,f.name);const ml=new kn({uid:ap,auth:f,email:vn,emailVerified:tm,displayName:gt,isAnonymous:gl,photoURL:Gr,phoneNumber:Hr,tenantId:pl,stsTokenManager:ii,createdAt:Xg,lastLoginAt:em});return Xu&&Array.isArray(Xu)&&(ml.providerData=Xu.map(nm=>Object.assign({},nm))),No&&(ml._redirectEventId=No),ml}static _fromIdTokenResponse(f,m,E=!1){return(0,p.Z)(function*(){const S=new Tt;S.updateFromServerResponse(m);const M=new kn({uid:m.localId,auth:f,stsTokenManager:S,isAnonymous:E});return yield Ut(M),M})()}}const An=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,p.Z)(function*(){return!0})()}_set(m,E){var S=this;return(0,p.Z)(function*(){S.storage[m]=E})()}_get(m){var E=this;return(0,p.Z)(function*(){const S=E.storage[m];return void 0===S?null:S})()}_remove(m){var E=this;return(0,p.Z)(function*(){delete E.storage[m]})()}_addListener(m,E){}_removeListener(m,E){}}return v.type="NONE",v})();function Vr(v,f,m){return`firebase:${v}:${f}:${m}`}class hn{constructor(f,m,E){this.persistence=f,this.auth=m,this.userKey=E;const{config:S,name:M}=this.auth;this.fullUserKey=Vr(this.userKey,S.apiKey,M),this.fullPersistenceKey=Vr("persistence",S.apiKey,M),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,p.Z)(function*(){const m=yield f.persistence._get(f.fullUserKey);return m?kn._fromJSON(f.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var m=this;return(0,p.Z)(function*(){if(m.persistence===f)return;const E=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=f,E?m.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,m,E="authUser"){return(0,p.Z)(function*(){if(!m.length)return new hn(Zt(An),f,E);const S=(yield Promise.all(m.map(function(){var Pe=(0,p.Z)(function*(ht){if(yield ht._isAvailable())return ht});return function(ht){return Pe.apply(this,arguments)}}()))).filter(Pe=>Pe);let M=S[0]||Zt(An);const Z=Vr(E,f.config.apiKey,f.name);let he=null;for(const Pe of m)try{const ht=yield Pe._get(Z);if(ht){const gt=kn._fromJSON(f,ht);Pe!==M&&(he=gt),M=Pe;break}}catch(ht){}const Ue=S.filter(Pe=>Pe._shouldAllowMigration);return M._shouldAllowMigration&&Ue.length?(M=Ue[0],he&&(yield M._set(Z,he.toJSON())),yield Promise.all(m.map(function(){var Pe=(0,p.Z)(function*(ht){if(ht!==M)try{yield ht._remove(Z)}catch(gt){}});return function(ht){return Pe.apply(this,arguments)}}())),new hn(M,f,E)):new hn(M,f,E)})()}}function Yn(v){const f=v.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(js(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(zo(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(ts(f))return"Blackberry";if(Ur(f))return"Webos";if(Rt(f))return"Safari";if((f.includes("chrome/")||Sa(f))&&!f.includes("edge/"))return"Chrome";if(xa(f))return"Android";{const E=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==E?void 0:E.length))return E[1]}return"Other"}function zo(v=(0,H.z$)()){return/firefox\//i.test(v)}function Rt(v=(0,H.z$)()){const f=v.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function Sa(v=(0,H.z$)()){return/crios\//i.test(v)}function js(v=(0,H.z$)()){return/iemobile/i.test(v)}function xa(v=(0,H.z$)()){return/android/i.test(v)}function ts(v=(0,H.z$)()){return/blackberry/i.test(v)}function Ur(v=(0,H.z$)()){return/webos/i.test(v)}function vs(v=(0,H.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function $s(v=(0,H.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}function Zo(v=(0,H.z$)()){return vs(v)||xa(v)||Ur(v)||ts(v)||/windows phone/i.test(v)||js(v)}function lu(v,f=[]){let m;switch(v){case"Browser":m=Yn((0,H.z$)());break;case"Worker":m=`${Yn((0,H.z$)())}-${v}`;break;default:m=v}const E=f.length?f.join(","):"FirebaseCore-web";return`${m}/JsCore/${k.SDK_VERSION}/${E}`}class yd{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,m){const E=M=>new Promise((Z,he)=>{try{Z(f(M))}catch(Ue){he(Ue)}});E.onAbort=m,this.queue.push(E);const S=this.queue.length-1;return()=>{this.queue[S]=()=>Promise.resolve()}}runMiddleware(f){var m=this;return(0,p.Z)(function*(){var E;if(m.auth.currentUser===f)return;const S=[];try{for(const M of m.queue)yield M(f),M.onAbort&&S.push(M.onAbort)}catch(M){S.reverse();for(const Z of S)try{Z()}catch(he){}throw m.auth._errorFactory.create("login-blocked",{originalMessage:null===(E=M)||void 0===E?void 0:E.message})}})()}}class Lc{constructor(f,m,E){this.app=f,this.heartbeatServiceProvider=m,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new mo(this),this.idTokenSubscription=new mo(this),this.beforeStateQueue=new yd(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=sn,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(f,m){var E=this;return m&&(this._popupRedirectResolver=Zt(m)),this._initializationPromise=this.queue((0,p.Z)(function*(){var S,M;if(!E._deleted&&(E.persistenceManager=yield hn.create(E,f),!E._deleted)){if(null===(S=E._popupRedirectResolver)||void 0===S?void 0:S._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch(Z){}yield E.initializeCurrentUser(m),E.lastNotifiedUid=(null===(M=E.currentUser)||void 0===M?void 0:M.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,p.Z)(function*(){if(f._deleted)return;const m=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||m){if(f.currentUser&&m&&f.currentUser.uid===m.uid)return f._currentUser._assign(m),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(m,!0)}})()}initializeCurrentUser(f){var m=this;return(0,p.Z)(function*(){var E;const S=yield m.assertedPersistence.getCurrentUser();let M=S,Z=!1;if(f&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const he=null===(E=m.redirectUser)||void 0===E?void 0:E._redirectEventId,Ue=null==M?void 0:M._redirectEventId,Pe=yield m.tryRedirectSignIn(f);(!he||he===Ue)&&(null==Pe?void 0:Pe.user)&&(M=Pe.user,Z=!0)}if(!M)return m.directlySetCurrentUser(null);if(!M._redirectEventId){if(Z)try{yield m.beforeStateQueue.runMiddleware(M)}catch(he){M=S,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(he))}return M?m.reloadAndSetCurrentUserOrClear(M):m.directlySetCurrentUser(null)}return Me(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===M._redirectEventId?m.directlySetCurrentUser(M):m.reloadAndSetCurrentUserOrClear(M)})()}tryRedirectSignIn(f){var m=this;return(0,p.Z)(function*(){let E=null;try{E=yield m._popupRedirectResolver._completeRedirectFn(m,f,!0)}catch(S){yield m._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(f){var m=this;return(0,p.Z)(function*(){var E;try{yield Ut(f)}catch(S){if("auth/network-request-failed"!==(null===(E=S)||void 0===E?void 0:E.code))return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var f=this;return(0,p.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var m=this;return(0,p.Z)(function*(){const E=f?(0,H.m9)(f):null;return E&&Me(E.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(E&&E._clone(m))})()}_updateCurrentUser(f,m=!1){var E=this;return(0,p.Z)(function*(){if(!E._deleted)return f&&Me(E.tenantId===f.tenantId,E,"tenant-id-mismatch"),m||(yield E.beforeStateQueue.runMiddleware(f)),E.queue((0,p.Z)(function*(){yield E.directlySetCurrentUser(f),E.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,p.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var m=this;return this.queue((0,p.Z)(function*(){yield m.assertedPersistence.setPersistence(Zt(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new H.LL("auth","Firebase",f())}onAuthStateChanged(f,m,E){return this.registerStateListener(this.authStateSubscription,f,m,E)}beforeAuthStateChanged(f,m){return this.beforeStateQueue.pushCallback(f,m)}onIdTokenChanged(f,m,E){return this.registerStateListener(this.idTokenSubscription,f,m,E)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,m){var E=this;return(0,p.Z)(function*(){const S=yield E.getOrInitRedirectPersistenceManager(m);return null===f?S.removeCurrentUser():S.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var m=this;return(0,p.Z)(function*(){if(!m.redirectPersistenceManager){const E=f&&Zt(f)||m._popupRedirectResolver;Me(E,m,"argument-error"),m.redirectPersistenceManager=yield hn.create(m,[Zt(E._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(f){var m=this;return(0,p.Z)(function*(){var E,S;return m._isInitialized&&(yield m.queue((0,p.Z)(function*(){}))),(null===(E=m._currentUser)||void 0===E?void 0:E._redirectEventId)===f?m._currentUser:(null===(S=m.redirectUser)||void 0===S?void 0:S._redirectEventId)===f?m.redirectUser:null})()}_persistUserIfCurrent(f){var m=this;return(0,p.Z)(function*(){if(f===m.currentUser)return m.queue((0,p.Z)(function*(){return m.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(m=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,m,E,S){if(this._deleted)return()=>{};const M="function"==typeof m?m:m.next.bind(m),Z=this._isInitialized?Promise.resolve():this._initializationPromise;return Me(Z,this,"internal-error"),Z.then(()=>M(this.currentUser)),"function"==typeof m?f.addObserver(m,E,S):f.addObserver(m)}directlySetCurrentUser(f){var m=this;return(0,p.Z)(function*(){m.currentUser&&m.currentUser!==f&&m._currentUser._stopProactiveRefresh(),f&&m.isProactiveRefreshEnabled&&f._startProactiveRefresh(),m.currentUser=f,f?yield m.assertedPersistence.setCurrentUser(f):yield m.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return Me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=lu(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,p.Z)(function*(){var m;const E={"X-Client-Version":f.clientVersion};f.app.options.appId&&(E["X-Firebase-gmpid"]=f.app.options.appId);const S=yield null===(m=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return S&&(E["X-Firebase-Client"]=S),E})()}}function Cn(v){return(0,H.m9)(v)}class mo{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,H.ne)(m=>this.observer=m)}get next(){return Me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function sr(v,f,m){const E=Cn(v);Me(E._canInitEmulator,E,"emulator-config-failed"),Me(/^https?:\/\//.test(f),E,"invalid-emulator-scheme");const S=!!(null==m?void 0:m.disableWarnings),M=_d(f),{host:Z,port:he}=function(v){const f=_d(v),m=/(\/\/)?([^?#/]+)/.exec(v.substr(f.length));if(!m)return{host:"",port:null};const E=m[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(E);if(S){const M=S[1];return{host:M,port:Sn(E.substr(M.length+1))}}{const[M,Z]=E.split(":");return{host:M,port:Sn(Z)}}}(f);E.config.emulator={url:`${M}//${Z}${null===he?"":`:${he}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:Z,port:he,protocol:M.replace(":",""),options:Object.freeze({disableWarnings:S})}),S||function(){function v(){const f=document.createElement("p"),m=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}function _d(v){const f=v.indexOf(":");return f<0?"":v.substr(0,f+1)}function Sn(v){if(!v)return null;const f=Number(v);return isNaN(f)?null:f}class bs{constructor(f,m){this.providerId=f,this.signInMethod=m}toJSON(){return Zn("not implemented")}_getIdTokenResponse(f){return Zn("not implemented")}_linkToIdToken(f,m){return Zn("not implemented")}_getReauthenticationResolver(f){return Zn("not implemented")}}function Ma(v,f){return fi.apply(this,arguments)}function fi(){return(fi=(0,p.Z)(function*(v,f){return Dt(v,"POST","/v1/accounts:resetPassword",en(v,f))})).apply(this,arguments)}function vd(v,f){return Ed.apply(this,arguments)}function Ed(){return(Ed=(0,p.Z)(function*(v,f){return Dt(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function du(v,f){return ws.apply(this,arguments)}function ws(){return(ws=(0,p.Z)(function*(v,f){return Dt(v,"POST","/v1/accounts:update",en(v,f))})).apply(this,arguments)}function Uc(){return(Uc=(0,p.Z)(function*(v,f){return Lr(v,"POST","/v1/accounts:signInWithPassword",en(v,f))})).apply(this,arguments)}function Bc(v,f){return bd.apply(this,arguments)}function bd(){return(bd=(0,p.Z)(function*(v,f){return Dt(v,"POST","/v1/accounts:sendOobCode",en(v,f))})).apply(this,arguments)}function Og(v,f){return wd.apply(this,arguments)}function wd(){return(wd=(0,p.Z)(function*(v,f){return Bc(v,f)})).apply(this,arguments)}function Q_(v,f){return hu.apply(this,arguments)}function hu(){return(hu=(0,p.Z)(function*(v,f){return Bc(v,f)})).apply(this,arguments)}function Vf(v,f){return fu.apply(this,arguments)}function fu(){return(fu=(0,p.Z)(function*(v,f){return Bc(v,f)})).apply(this,arguments)}function Ng(v,f){return Cd.apply(this,arguments)}function Cd(){return(Cd=(0,p.Z)(function*(v,f){return Bc(v,f)})).apply(this,arguments)}function pu(){return(pu=(0,p.Z)(function*(v,f){return Lr(v,"POST","/v1/accounts:signInWithEmailLink",en(v,f))})).apply(this,arguments)}function gu(){return(gu=(0,p.Z)(function*(v,f){return Lr(v,"POST","/v1/accounts:signInWithEmailLink",en(v,f))})).apply(this,arguments)}class mu extends bs{constructor(f,m,E,S=null){super("password",E),this._email=f,this._password=m,this._tenantId=S}static _fromEmailAndPassword(f,m){return new mu(f,m,"password")}static _fromEmailAndCode(f,m,E=null){return new mu(f,m,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f;if((null==m?void 0:m.email)&&(null==m?void 0:m.password)){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(f){var m=this;return(0,p.Z)(function*(){switch(m.signInMethod){case"password":return function(v,f){return Uc.apply(this,arguments)}(f,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function(v,f){return pu.apply(this,arguments)}(f,{email:m._email,oobCode:m._password});default:En(f,"internal-error")}})()}_linkToIdToken(f,m){var E=this;return(0,p.Z)(function*(){switch(E.signInMethod){case"password":return vd(f,{idToken:m,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function(v,f){return gu.apply(this,arguments)}(f,{idToken:m,email:E._email,oobCode:E._password});default:En(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function Cs(v,f){return Uf.apply(this,arguments)}function Uf(){return(Uf=(0,p.Z)(function*(v,f){return Lr(v,"POST","/v1/accounts:signInWithIdp",en(v,f))})).apply(this,arguments)}class Qn extends bs{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const m=new Qn(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(m.idToken=f.idToken),f.accessToken&&(m.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(m.nonce=f.nonce),f.pendingToken&&(m.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(m.accessToken=f.oauthToken,m.secret=f.oauthTokenSecret):En("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:E,signInMethod:S}=m,M=ae(m,["providerId","signInMethod"]);if(!E||!S)return null;const Z=new Qn(E,S);return Z.idToken=M.idToken||void 0,Z.accessToken=M.accessToken||void 0,Z.secret=M.secret,Z.nonce=M.nonce,Z.pendingToken=M.pendingToken||null,Z}_getIdTokenResponse(f){return Cs(f,this.buildRequest())}_linkToIdToken(f,m){const E=this.buildRequest();return E.idToken=m,Cs(f,E)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,Cs(f,m)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),f.postBody=(0,H.xO)(m)}return f}}function Id(v,f){return yo.apply(this,arguments)}function yo(){return(yo=(0,p.Z)(function*(v,f){return Dt(v,"POST","/v1/accounts:sendVerificationCode",en(v,f))})).apply(this,arguments)}function Hc(){return(Hc=(0,p.Z)(function*(v,f){return Lr(v,"POST","/v1/accounts:signInWithPhoneNumber",en(v,f))})).apply(this,arguments)}function _o(){return(_o=(0,p.Z)(function*(v,f){const m=yield Lr(v,"POST","/v1/accounts:signInWithPhoneNumber",en(v,f));if(m.temporaryProof)throw be(v,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const jf={USER_NOT_FOUND:"user-not-found"};function Gc(){return(Gc=(0,p.Z)(function*(v,f){return Lr(v,"POST","/v1/accounts:signInWithPhoneNumber",en(v,Object.assign(Object.assign({},f),{operation:"REAUTH"})),jf)})).apply(this,arguments)}class In extends bs{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,m){return new In({verificationId:f,verificationCode:m})}static _fromTokenResponse(f,m){return new In({phoneNumber:f,temporaryProof:m})}_getIdTokenResponse(f){return function(v,f){return Hc.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,m){return function(v,f){return _o.apply(this,arguments)}(f,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function(v,f){return Gc.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:m,verificationId:E,verificationCode:S}=this.params;return f&&m?{temporaryProof:f,phoneNumber:m}:{sessionInfo:E,code:S}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:m,verificationCode:E,phoneNumber:S,temporaryProof:M}=f;return E||m||S||M?new In({verificationId:m,verificationCode:E,phoneNumber:S,temporaryProof:M}):null}}class ns{constructor(f){var m,E,S,M,Z,he;const Ue=(0,H.zd)((0,H.pd)(f)),Pe=null!==(m=Ue.apiKey)&&void 0!==m?m:null,ht=null!==(E=Ue.oobCode)&&void 0!==E?E:null,gt=function(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=Ue.mode)&&void 0!==S?S:null);Me(Pe&&ht&&gt,"argument-error"),this.apiKey=Pe,this.operation=gt,this.code=ht,this.continueUrl=null!==(M=Ue.continueUrl)&&void 0!==M?M:null,this.languageCode=null!==(Z=Ue.languageCode)&&void 0!==Z?Z:null,this.tenantId=null!==(he=Ue.tenantId)&&void 0!==he?he:null}static parseLink(f){const m=function(v){const f=(0,H.zd)((0,H.pd)(v)).link,m=f?(0,H.zd)((0,H.pd)(f)).deep_link_id:null,E=(0,H.zd)((0,H.pd)(v)).deep_link_id;return(E?(0,H.zd)((0,H.pd)(E)).link:null)||E||m||f||v}(f);try{return new ns(m)}catch(E){return null}}}let vo=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(m,E){return mu._fromEmailAndPassword(m,E)}static credentialWithLink(m,E){const S=ns.parseLink(E);return Me(S,"argument-error"),mu._fromEmailAndCode(m,S.code,S.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class pi{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class pn extends pi{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class Eo extends pn{static credentialFromJSON(f){const m="string"==typeof f?JSON.parse(f):f;return Me("providerId"in m&&"signInMethod"in m,"argument-error"),Qn._fromParams(m)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return Me(f.idToken||f.accessToken,"argument-error"),Qn._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return Eo.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return Eo.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:m,oauthAccessToken:E,oauthTokenSecret:S,pendingToken:M,nonce:Z,providerId:he}=f;if(!E&&!S&&!m&&!M||!he)return null;try{return new Eo(he)._credential({idToken:m,accessToken:E,nonce:Z,pendingToken:M})}catch(Ue){return null}}}let Eu=(()=>{class v extends pn{constructor(){super("facebook.com")}static credential(m){return Qn._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch(E){return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),$f=(()=>{class v extends pn{constructor(){super("google.com"),this.addScope("profile")}static credential(m,E){return Qn._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:E})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:E,oauthAccessToken:S}=m;if(!E&&!S)return null;try{return v.credential(E,S)}catch(M){return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),Gt=(()=>{class v extends pn{constructor(){super("github.com")}static credential(m){return Qn._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch(E){return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class bo extends bs{constructor(f,m){super(f,f),this.pendingToken=m}_getIdTokenResponse(f){return Cs(f,this.buildRequest())}_linkToIdToken(f,m){const E=this.buildRequest();return E.idToken=m,Cs(f,E)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,Cs(f,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:E,signInMethod:S,pendingToken:M}=m;return E&&S&&M&&E===S?new bo(E,M):null}static _create(f,m){return new bo(f,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class xr extends pi{constructor(f){Me(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return xr.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return xr.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const m=bo.fromJSON(f);return Me(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:m,providerId:E}=f;if(!m||!E)return null;try{return bo._create(E,m)}catch(S){return null}}}let Gf=(()=>{class v extends pn{constructor(){super("twitter.com")}static credential(m,E){return Qn._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:E})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:E,oauthTokenSecret:S}=m;if(!E||!S)return null;try{return v.credential(E,S)}catch(M){return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function Is(v,f){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,p.Z)(function*(v,f){return Lr(v,"POST","/v1/accounts:signUp",en(v,f))})).apply(this,arguments)}class mn{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,m,E,S=!1){return(0,p.Z)(function*(){const M=yield kn._fromIdTokenResponse(f,E,S),Z=Ra(E);return new mn({user:M,providerId:Z,_tokenResponse:E,operationType:m})})()}static _forOperation(f,m,E){return(0,p.Z)(function*(){yield f._updateTokensIfNecessary(E,!0);const S=Ra(E);return new mn({user:f,providerId:S,_tokenResponse:E,operationType:m})})()}}function Ra(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function wu(v){return Cu.apply(this,arguments)}function Cu(){return(Cu=(0,p.Z)(function*(v){var f;const m=Cn(v);if(yield m._initializationPromise,null===(f=m.currentUser)||void 0===f?void 0:f.isAnonymous)return new mn({user:m.currentUser,providerId:null,operationType:"signIn"});const E=yield Is(m,{returnSecureToken:!0}),S=yield mn._fromIdTokenResponse(m,"signIn",E,!0);return yield m._updateCurrentUser(S.user),S})).apply(this,arguments)}class Vi extends H.ZR{constructor(f,m,E,S){var M;super(m.code,m.message),this.operationType=E,this.user=S,Object.setPrototypeOf(this,Vi.prototype),this.customData={appName:f.name,tenantId:null!==(M=f.tenantId)&&void 0!==M?M:void 0,_serverResponse:m.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(f,m,E,S){return new Vi(f,m,E,S)}}function Oa(v,f,m,E){return("reauthenticate"===f?m._getReauthenticationResolver(v):m._getIdTokenResponse(v)).catch(M=>{throw"auth/multi-factor-auth-required"===M.code?Vi._fromErrorAndOperation(v,M,f,E):M})}function Na(v){return new Set(v.map(({providerId:f})=>f).filter(f=>!!f))}function vt(v,f){return Dd.apply(this,arguments)}function Dd(){return(Dd=(0,p.Z)(function*(v,f){const m=(0,H.m9)(v);yield Hs(!0,m,f);const{providerUserInfo:E}=yield Et(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[f]}),S=Na(E||[]);return m.providerData=m.providerData.filter(M=>S.has(M.providerId)),S.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function Ts(v,f){return wo.apply(this,arguments)}function wo(){return(wo=(0,p.Z)(function*(v,f,m=!1){const E=yield Je(v,f._linkToIdToken(v.auth,yield v.getIdToken()),m);return mn._forOperation(v,"link",E)})).apply(this,arguments)}function Hs(v,f,m){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,p.Z)(function*(v,f,m){yield Ut(f);const S=!1===v?"provider-already-linked":"no-such-provider";Me(Na(f.providerData).has(m)===v,f.auth,S)})).apply(this,arguments)}function Gs(v,f){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,p.Z)(function*(v,f,m=!1){var E;const{auth:S}=v,M="reauthenticate";try{const Z=yield Je(v,Oa(S,M,f,v),m);Me(Z.idToken,S,"internal-error");const he=Ae(Z.idToken);Me(he,S,"internal-error");const{sub:Ue}=he;return Me(v.uid===Ue,S,"user-mismatch"),mn._forOperation(v,M,Z)}catch(Z){throw"auth/user-not-found"===(null===(E=Z)||void 0===E?void 0:E.code)&&En(S,"user-mismatch"),Z}})).apply(this,arguments)}function Ie(v,f){return qt.apply(this,arguments)}function qt(){return(qt=(0,p.Z)(function*(v,f,m=!1){const E="signIn",S=yield Oa(v,E,f),M=yield mn._fromIdTokenResponse(v,E,S);return m||(yield v._updateCurrentUser(M.user)),M})).apply(this,arguments)}function Yo(v,f){return xn.apply(this,arguments)}function xn(){return(xn=(0,p.Z)(function*(v,f){return Ie(Cn(v),f)})).apply(this,arguments)}function qc(v,f){return qs.apply(this,arguments)}function qs(){return(qs=(0,p.Z)(function*(v,f){const m=(0,H.m9)(v);return yield Hs(!1,m,f.providerId),Ts(m,f)})).apply(this,arguments)}function Ui(v,f){return Co.apply(this,arguments)}function Co(){return(Co=(0,p.Z)(function*(v,f){return Gs((0,H.m9)(v),f)})).apply(this,arguments)}function Qo(v,f){return Du.apply(this,arguments)}function Du(){return(Du=(0,p.Z)(function*(v,f){return Lr(v,"POST","/v1/accounts:signInWithCustomToken",en(v,f))})).apply(this,arguments)}function Td(v,f){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,p.Z)(function*(v,f){const m=Cn(v),E=yield Qo(m,{token:f,returnSecureToken:!0}),S=yield mn._fromIdTokenResponse(m,"signIn",E);return yield m._updateCurrentUser(S.user),S})).apply(this,arguments)}class Bi{constructor(f,m){this.factorId=f,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(f,m){return"phoneInfo"in m?Mr._fromServerResponse(f,m):En(f,"internal-error")}}class Mr extends Bi{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,m){return new Mr(m)}}function Br(v,f,m){var E;Me((null===(E=m.url)||void 0===E?void 0:E.length)>0,v,"invalid-continue-uri"),Me(void 0===m.dynamicLinkDomain||m.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),f.continueUrl=m.url,f.dynamicLinkDomain=m.dynamicLinkDomain,f.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(Me(m.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),f.iOSBundleId=m.iOS.bundleId),m.android&&(Me(m.android.packageName.length>0,v,"missing-android-pkg-name"),f.androidInstallApp=m.android.installApp,f.androidMinimumVersionCode=m.android.minimumVersion,f.androidPackageName=m.android.packageName)}function Tu(v,f,m){return rs.apply(this,arguments)}function rs(){return(rs=(0,p.Z)(function*(v,f,m){const E=(0,H.m9)(v),S={requestType:"PASSWORD_RESET",email:f};m&&Br(E,S,m),yield Q_(E,S)})).apply(this,arguments)}function As(v,f,m){return ka.apply(this,arguments)}function ka(){return(ka=(0,p.Z)(function*(v,f,m){yield Ma((0,H.m9)(v),{oobCode:f,newPassword:m})})).apply(this,arguments)}function Ad(v,f){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,p.Z)(function*(v,f){yield du((0,H.m9)(v),{oobCode:f})})).apply(this,arguments)}function La(v,f){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,p.Z)(function*(v,f){const m=(0,H.m9)(v),E=yield Ma(m,{oobCode:f}),S=E.requestType;switch(Me(S,m,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Me(E.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Me(E.mfaInfo,m,"internal-error");default:Me(E.email,m,"internal-error")}let M=null;return E.mfaInfo&&(M=Bi._fromServerResponse(Cn(m),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:M},operation:S}})).apply(this,arguments)}function Au(v,f){return Su.apply(this,arguments)}function Su(){return(Su=(0,p.Z)(function*(v,f){const{data:m}=yield La((0,H.m9)(v),f);return m.email})).apply(this,arguments)}function Sd(v,f,m){return Wc.apply(this,arguments)}function Wc(){return(Wc=(0,p.Z)(function*(v,f,m){const E=Cn(v),S=yield Is(E,{returnSecureToken:!0,email:f,password:m}),M=yield mn._fromIdTokenResponse(E,"signIn",S);return yield E._updateCurrentUser(M.user),M})).apply(this,arguments)}function xd(v,f,m){return Yo((0,H.m9)(v),vo.credential(f,m))}function Io(v,f,m){return xu.apply(this,arguments)}function xu(){return(xu=(0,p.Z)(function*(v,f,m){const E=(0,H.m9)(v),S={requestType:"EMAIL_SIGNIN",email:f};Me(m.handleCodeInApp,E,"argument-error"),m&&Br(E,S,m),yield Vf(E,S)})).apply(this,arguments)}function Mu(v,f){const m=ns.parseLink(f);return"EMAIL_SIGNIN"===(null==m?void 0:m.operation)}function zc(v,f,m){return Md.apply(this,arguments)}function Md(){return(Md=(0,p.Z)(function*(v,f,m){const E=(0,H.m9)(v),S=vo.credentialWithLink(f,m||Ar());return Me(S._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),Yo(E,S)})).apply(this,arguments)}function Rd(v,f){return Ru.apply(this,arguments)}function Ru(){return(Ru=(0,p.Z)(function*(v,f){return Dt(v,"POST","/v1/accounts:createAuthUri",en(v,f))})).apply(this,arguments)}function J_(v,f){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,p.Z)(function*(v,f){const E={identifier:f,continueUri:et()?Ar():"http://localhost"},{signinMethods:S}=yield Rd((0,H.m9)(v),E);return S||[]})).apply(this,arguments)}function ji(v,f){return wn.apply(this,arguments)}function wn(){return(wn=(0,p.Z)(function*(v,f){const m=(0,H.m9)(v),S={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};f&&Br(m.auth,S,f);const{email:M}=yield Og(m.auth,S);M!==v.email&&(yield v.reload())})).apply(this,arguments)}function Zc(v,f,m){return Kc.apply(this,arguments)}function Kc(){return(Kc=(0,p.Z)(function*(v,f,m){const E=(0,H.m9)(v),M={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:f};m&&Br(E.auth,M,m);const{email:Z}=yield Ng(E.auth,M);Z!==v.email&&(yield v.reload())})).apply(this,arguments)}function Yc(v,f){return Ou.apply(this,arguments)}function Ou(){return(Ou=(0,p.Z)(function*(v,f){return Dt(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function fr(v,f){return Nu.apply(this,arguments)}function Nu(){return(Nu=(0,p.Z)(function*(v,{displayName:f,photoURL:m}){if(void 0===f&&void 0===m)return;const E=(0,H.m9)(v),M={idToken:yield E.getIdToken(),displayName:f,photoUrl:m,returnSecureToken:!0},Z=yield Je(E,Yc(E.auth,M));E.displayName=Z.displayName||null,E.photoURL=Z.photoUrl||null;const he=E.providerData.find(({providerId:Ue})=>"password"===Ue);he&&(he.displayName=E.displayName,he.photoURL=E.photoURL),yield E._updateTokensIfNecessary(Z)})).apply(this,arguments)}function Pu(v,f){return Fu((0,H.m9)(v),f,null)}function ku(v,f){return Fu((0,H.m9)(v),null,f)}function Fu(v,f,m){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,p.Z)(function*(v,f,m){const{auth:E}=v,M={idToken:yield v.getIdToken(),returnSecureToken:!0};f&&(M.email=f),m&&(M.password=m);const Z=yield Je(v,vd(E,M));yield v._updateTokensIfNecessary(Z,!0)})).apply(this,arguments)}class zs{constructor(f,m,E={}){this.isNewUser=f,this.providerId=m,this.profile=E}}class Ss extends zs{constructor(f,m,E,S){super(f,m,E),this.username=S}}class Va extends zs{constructor(f,m){super(f,"facebook.com",m)}}class kg extends Ss{constructor(f,m){super(f,"github.com",m,"string"==typeof(null==m?void 0:m.login)?null==m?void 0:m.login:null)}}class qf extends zs{constructor(f,m){super(f,"google.com",m)}}class Or extends Ss{constructor(f,m,E){super(f,"twitter.com",m,E)}}function Nd(v){const{user:f,_tokenResponse:m}=v;return f.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function(v){var f,m;if(!v)return null;const{providerId:E}=v,S=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},M=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!E&&(null==v?void 0:v.idToken)){const Z=null===(m=null===(f=Ae(v.idToken))||void 0===f?void 0:f.firebase)||void 0===m?void 0:m.sign_in_provider;if(Z)return new zs(M,"anonymous"!==Z&&"custom"!==Z?Z:null)}if(!E)return null;switch(E){case"facebook.com":return new Va(M,S);case"github.com":return new kg(M,S);case"google.com":return new qf(M,S);case"twitter.com":return new Or(M,S,v.screenName||null);case"custom":case"anonymous":return new zs(M,null);default:return new zs(M,E,S)}}(m)}class is{constructor(f,m,E){this.type=f,this.credential=m,this.auth=E}static _fromIdtoken(f,m){return new is("enroll",f,m)}static _fromMfaPendingCredential(f){return new is("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var m,E;if(null==f?void 0:f.multiFactorSession){if(null===(m=f.multiFactorSession)||void 0===m?void 0:m.pendingCredential)return is._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null===(E=f.multiFactorSession)||void 0===E?void 0:E.idToken)return is._fromIdtoken(f.multiFactorSession.idToken)}return null}}class Do{constructor(f,m,E){this.session=f,this.hints=m,this.signInResolver=E}static _fromError(f,m){const E=Cn(f),S=m.customData._serverResponse,M=(S.mfaInfo||[]).map(he=>Bi._fromServerResponse(E,he));Me(S.mfaPendingCredential,E,"internal-error");const Z=is._fromMfaPendingCredential(S.mfaPendingCredential);return new Do(Z,M,function(){var he=(0,p.Z)(function*(Ue){const Pe=yield Ue._process(E,Z);delete S.mfaInfo,delete S.mfaPendingCredential;const ht=Object.assign(Object.assign({},S),{idToken:Pe.idToken,refreshToken:Pe.refreshToken});switch(m.operationType){case"signIn":const gt=yield mn._fromIdTokenResponse(E,m.operationType,ht);return yield E._updateCurrentUser(gt.user),gt;case"reauthenticate":return Me(m.user,E,"internal-error"),mn._forOperation(m.user,m.operationType,ht);default:En(E,"internal-error")}});return function(Ue){return he.apply(this,arguments)}}())}resolveSignIn(f){var m=this;return(0,p.Z)(function*(){return m.signInResolver(f)})()}}function Zf(v,f){var m;const E=(0,H.m9)(v),S=f;return Me(f.customData.operationType,E,"argument-error"),Me(null===(m=S.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,E,"argument-error"),Do._fromError(E,S)}function Ba(v,f){return Dt(v,"POST","/v2/accounts/mfaEnrollment:start",en(v,f))}class ju{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(E=>Bi._fromServerResponse(f.auth,E)))})}static _fromUser(f){return new ju(f)}getSession(){var f=this;return(0,p.Z)(function*(){return is._fromIdtoken(yield f.user.getIdToken(),f.user.auth)})()}enroll(f,m){var E=this;return(0,p.Z)(function*(){const S=f,M=yield E.getSession(),Z=yield Je(E.user,S._process(E.user.auth,M,m));return yield E.user._updateTokensIfNecessary(Z),E.user.reload()})()}unenroll(f){var m=this;return(0,p.Z)(function*(){var E;const S="string"==typeof f?f:f.uid,M=yield m.user.getIdToken(),Z=yield Je(m.user,function(v,f){return Dt(v,"POST","/v2/accounts/mfaEnrollment:withdraw",en(v,f))}(m.user.auth,{idToken:M,mfaEnrollmentId:S}));m.enrolledFactors=m.enrolledFactors.filter(({uid:he})=>he!==S),yield m.user._updateTokensIfNecessary(Z);try{yield m.user.reload()}catch(he){if("auth/user-token-expired"!==(null===(E=he)||void 0===E?void 0:E.code))throw he}})()}}const Jc=new WeakMap;function _n(v){const f=(0,H.m9)(v);return Jc.has(f)||Jc.set(f,ju._fromUser(f)),Jc.get(f)}const pt="__sak";class $i{constructor(f,m){this.storageRetriever=f,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(pt,"1"),this.storage.removeItem(pt),Promise.resolve(!0)):Promise.resolve(!1)}catch(f){return Promise.resolve(!1)}}_set(f,m){return this.storage.setItem(f,JSON.stringify(m)),Promise.resolve()}_get(f){const m=this.storage.getItem(f);return Promise.resolve(m?JSON.parse(m):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const pr=(()=>{class v extends $i{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,E)=>this.onStorageEvent(m,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const v=(0,H.z$)();return Rt(v)||vs(v)}()&&function(){try{return!(!window||window===window.top)}catch(v){return!1}}(),this.fallbackToPolling=Zo(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const E of Object.keys(this.listeners)){const S=this.storage.getItem(E),M=this.localCache[E];S!==M&&m(E,M,S)}}onStorageEvent(m,E=!1){if(!m.key)return void this.forAllChangedKeys((he,Ue,Pe)=>{this.notifyListeners(he,Pe)});const S=m.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const he=this.storage.getItem(S);if(m.newValue!==he)null!==m.newValue?this.storage.setItem(S,m.newValue):this.storage.removeItem(S);else if(this.localCache[S]===m.newValue&&!E)return}const M=()=>{const he=this.storage.getItem(S);!E&&this.localCache[S]===he||this.notifyListeners(S,he)},Z=this.storage.getItem(S);(0,H.w1)()&&10===document.documentMode&&Z!==m.newValue&&m.newValue!==m.oldValue?setTimeout(M,10):M()}notifyListeners(m,E){this.localCache[m]=E;const S=this.listeners[m];if(S)for(const M of Array.from(S))M(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,E,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:E,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,E){var S=()=>super._set,M=this;return(0,p.Z)(function*(){yield S().call(M,m,E),M.localCache[m]=JSON.stringify(E)})()}_get(m){var E=()=>super._get,S=this;return(0,p.Z)(function*(){const M=yield E().call(S,m);return S.localCache[m]=JSON.stringify(M),M})()}_remove(m){var E=()=>super._remove,S=this;return(0,p.Z)(function*(){yield E().call(S,m),delete S.localCache[m]})()}}return v.type="LOCAL",v})(),ja=(()=>{class v extends $i{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,E){}_removeListener(m,E){}}return v.type="SESSION",v})();let ei=(()=>{class v{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const E=this.receivers.find(M=>M.isListeningto(m));if(E)return E;const S=new v(m);return this.receivers.push(S),S}isListeningto(m){return this.eventTarget===m}handleEvent(m){var E=this;return(0,p.Z)(function*(){const S=m,{eventId:M,eventType:Z,data:he}=S.data,Ue=E.handlersMap[Z];if(!(null==Ue?void 0:Ue.size))return;S.ports[0].postMessage({status:"ack",eventId:M,eventType:Z});const Pe=Array.from(Ue).map(function(){var gt=(0,p.Z)(function*(vn){return vn(S.origin,he)});return function(vn){return gt.apply(this,arguments)}}()),ht=yield function(v){return Promise.all(v.map(function(){var f=(0,p.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(E){return{fulfilled:!1,reason:E}}});return function(m){return f.apply(this,arguments)}}()))}(Pe);S.ports[0].postMessage({status:"done",eventId:M,eventType:Z,response:ht})})()}_subscribe(m,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(E)}_unsubscribe(m,E){this.handlersMap[m]&&E&&this.handlersMap[m].delete(E),(!E||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function ta(v="",f=10){let m="";for(let E=0;E<f;E++)m+=Math.floor(10*Math.random());return v+m}class Xc{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,m,E=50){var S=this;return(0,p.Z)(function*(){const M="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!M)throw new Error("connection_unavailable");let Z,he;return new Promise((Ue,Pe)=>{const ht=ta("",20);M.port1.start();const gt=setTimeout(()=>{Pe(new Error("unsupported_event"))},E);he={messageChannel:M,onMessage(vn){const Hr=vn;if(Hr.data.eventId===ht)switch(Hr.data.status){case"ack":clearTimeout(gt),Z=setTimeout(()=>{Pe(new Error("timeout"))},3e3);break;case"done":clearTimeout(Z),Ue(Hr.data.response);break;default:clearTimeout(gt),clearTimeout(Z),Pe(new Error("invalid_response"))}}},S.handlers.add(he),M.port1.addEventListener("message",he.onMessage),S.target.postMessage({eventType:f,eventId:ht,data:m},[M.port2])}).finally(()=>{he&&S.removeMessageHandler(he)})})()}}function Gn(){return window}function Ks(){return void 0!==Gn().WorkerGlobalScope&&"function"==typeof Gn().importScripts}function na(){return(na=(0,p.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(v){return null}})).apply(this,arguments)}const Hi="firebaseLocalStorageDb",Ci="firebaseLocalStorage",Ys="fbase_key";class os{constructor(f){this.request=f}toPromise(){return new Promise((f,m)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function bt(v,f){return v.transaction([Ci],f?"readwrite":"readonly").objectStore(Ci)}function qn(){const v=indexedDB.open(Hi,1);return new Promise((f,m)=>{v.addEventListener("error",()=>{m(v.error)}),v.addEventListener("upgradeneeded",()=>{const E=v.result;try{E.createObjectStore(Ci,{keyPath:Ys})}catch(S){m(S)}}),v.addEventListener("success",(0,p.Z)(function*(){const E=v.result;E.objectStoreNames.contains(Ci)?f(E):(E.close(),yield function(){const v=indexedDB.deleteDatabase(Hi);return new os(v).toPromise()}(),f(yield qn()))}))})}function us(v,f,m){return Yf.apply(this,arguments)}function Yf(){return(Yf=(0,p.Z)(function*(v,f,m){const E=bt(v,!0).put({[Ys]:f,value:m});return new os(E).toPromise()})).apply(this,arguments)}function el(){return(el=(0,p.Z)(function*(v,f){const m=bt(v,!1).get(f),E=yield new os(m).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function Fd(v,f){const m=bt(v,!0).delete(f);return new os(m).toPromise()}const Qs=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,p.Z)(function*(){return m.db||(m.db=yield qn()),m.db})()}_withRetries(m){var E=this;return(0,p.Z)(function*(){let S=0;for(;;)try{const M=yield E._openDb();return yield m(M)}catch(M){if(S++>3)throw M;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,p.Z)(function*(){return Ks()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,p.Z)(function*(){m.receiver=ei._getInstance(Ks()?self:null),m.receiver._subscribe("keyChanged",function(){var E=(0,p.Z)(function*(S,M){return{keyProcessed:(yield m._poll()).includes(M.key)}});return function(S,M){return E.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var E=(0,p.Z)(function*(S,M){return["keyChanged"]});return function(S,M){return E.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,p.Z)(function*(){var E,S;if(m.activeServiceWorker=yield function(){return na.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new Xc(m.activeServiceWorker);const M=yield m.sender._send("ping",{},800);!M||(null===(E=M[0])||void 0===E?void 0:E.fulfilled)&&(null===(S=M[0])||void 0===S?void 0:S.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var E=this;return(0,p.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function(){var v;return(null===(v=null==navigator?void 0:navigator.serviceWorker)||void 0===v?void 0:v.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:m},E.serviceWorkerReceiverAvailable?800:50)}catch(S){}})()}_isAvailable(){return(0,p.Z)(function*(){try{if(!indexedDB)return!1;const m=yield qn();return yield us(m,pt,"1"),yield Fd(m,pt),!0}catch(m){}return!1})()}_withPendingWrite(m){var E=this;return(0,p.Z)(function*(){E.pendingWrites++;try{yield m()}finally{E.pendingWrites--}})()}_set(m,E){var S=this;return(0,p.Z)(function*(){return S._withPendingWrite((0,p.Z)(function*(){return yield S._withRetries(M=>us(M,m,E)),S.localCache[m]=E,S.notifyServiceWorker(m)}))})()}_get(m){var E=this;return(0,p.Z)(function*(){const S=yield E._withRetries(M=>function(v,f){return el.apply(this,arguments)}(M,m));return E.localCache[m]=S,S})()}_remove(m){var E=this;return(0,p.Z)(function*(){return E._withPendingWrite((0,p.Z)(function*(){return yield E._withRetries(S=>Fd(S,m)),delete E.localCache[m],E.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,p.Z)(function*(){const E=yield m._withRetries(Z=>{const he=bt(Z,!1).getAll();return new os(he).toPromise()});if(!E)return[];if(0!==m.pendingWrites)return[];const S=[],M=new Set;for(const{fbase_key:Z,value:he}of E)M.add(Z),JSON.stringify(m.localCache[Z])!==JSON.stringify(he)&&(m.notifyListeners(Z,he),S.push(Z));for(const Z of Object.keys(m.localCache))m.localCache[Z]&&!M.has(Z)&&(m.notifyListeners(Z,null),S.push(Z));return S})()}notifyListeners(m,E){this.localCache[m]=E;const S=this.listeners[m];if(S)for(const M of Array.from(S))M(E)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,p.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function Qf(v,f){return Dt(v,"POST","/v2/accounts/mfaSignIn:start",en(v,f))}function Vd(){return(Vd=(0,p.Z)(function*(v){return(yield Dt(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function So(v){return new Promise((f,m)=>{const E=document.createElement("script");E.setAttribute("src",v),E.onload=f,E.onerror=S=>{const M=Mt("internal-error");M.customData=S,m(M)},E.type="text/javascript",E.charset="UTF-8",function(){var v,f;return null!==(f=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==f?f:document}().appendChild(E)})}function Jf(v){return`__${v}${Math.floor(1e6*Math.random())}`}const ti=1e12;class Hu{constructor(f){this.auth=f,this.counter=ti,this._widgets=new Map}render(f,m){const E=this.counter;return this._widgets.set(E,new Fn(f,this.auth.name,m||{})),this.counter++,E}reset(f){var m;const E=f||ti;null===(m=this._widgets.get(E))||void 0===m||m.delete(),this._widgets.delete(E)}getResponse(f){var m;return(null===(m=this._widgets.get(f||ti))||void 0===m?void 0:m.getResponse())||""}execute(f){var m=this;return(0,p.Z)(function*(){var E;return null===(E=m._widgets.get(f||ti))||void 0===E||E.execute(),""})()}}class Fn{constructor(f,m,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof f?document.getElementById(f):f;Me(S,"argument-error",{appName:m}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(v){const f=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<50;E++)f.push(m.charAt(Math.floor(Math.random()*m.length)));return f.join("")}();const{callback:f,"expired-callback":m}=this.params;if(f)try{f(this.responseToken)}catch(E){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch(E){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const xs=Jf("rcb"),Ud=new on(3e4,6e4);class Gi{constructor(){var f;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(f=Gn().grecaptcha)||void 0===f?void 0:f.render)}load(f,m=""){return Me((v=m).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v),f,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(Gn().grecaptcha):new Promise((E,S)=>{const M=Gn().setTimeout(()=>{S(Mt(f,"network-request-failed"))},Ud.get());Gn()[xs]=()=>{Gn().clearTimeout(M),delete Gn()[xs];const he=Gn().grecaptcha;if(!he)return void S(Mt(f,"internal-error"));const Ue=he.render;he.render=(Pe,ht)=>{const gt=Ue(Pe,ht);return this.counter++,gt},this.hostLanguage=m,E(he)},So(`https://www.google.com/recaptcha/api.js??${(0,H.xO)({onload:xs,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(M),S(Mt(f,"internal-error"))})});var v}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){var m;return!!(null===(m=Gn().grecaptcha)||void 0===m?void 0:m.render)&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Gu{load(f){return(0,p.Z)(function*(){return new Hu(f)})()}clearedOneInstance(){}}const Xs="recaptcha",ni={theme:"light",type:"image"};class tl{constructor(f,m=Object.assign({},ni),E){this.parameters=m,this.type=Xs,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Cn(E),this.isInvisible="invisible"===this.parameters.size,Me("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof f?document.getElementById(f):f;Me(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Gu:new Gi,this.validateStartingState()}verify(){var f=this;return(0,p.Z)(function*(){f.assertNotDestroyed();const m=yield f.render(),E=f.getAssertedRecaptcha();return E.getResponse(m)||new Promise(M=>{const Z=he=>{!he||(f.tokenChangeListeners.delete(Z),M(he))};f.tokenChangeListeners.add(Z),f.isInvisible&&E.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){Me(!this.parameters.sitekey,this.auth,"argument-error"),Me(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Me("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return m=>{if(this.tokenChangeListeners.forEach(E=>E(m)),"function"==typeof f)f(m);else if("string"==typeof f){const E=Gn()[f];"function"==typeof E&&E(m)}}}assertNotDestroyed(){Me(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,p.Z)(function*(){if(yield f.init(),!f.widgetId){let m=f.container;if(!f.isInvisible){const E=document.createElement("div");m.appendChild(E),m=E}f.widgetId=f.getAssertedRecaptcha().render(m,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,p.Z)(function*(){Me(et()&&!Ks(),f.auth,"internal-error"),yield function(){let v=null;return new Promise(f=>{"complete"!==document.readyState?(v=()=>f(),window.addEventListener("load",v)):f()}).catch(f=>{throw v&&window.removeEventListener("load",v),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const m=yield function(v){return Vd.apply(this,arguments)}(f.auth);Me(m,f.auth,"internal-error"),f.parameters.sitekey=m})()}getAssertedRecaptcha(){return Me(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class $r{constructor(f,m){this.verificationId=f,this.onConfirmation=m}confirm(f){const m=In._fromVerification(this.verificationId,f);return this.onConfirmation(m)}}function sa(v,f,m){return nl.apply(this,arguments)}function nl(){return(nl=(0,p.Z)(function*(v,f,m){const E=Cn(v),S=yield $a(E,f,(0,H.m9)(m));return new $r(S,M=>Yo(E,M))})).apply(this,arguments)}function eo(v,f,m){return ri.apply(this,arguments)}function ri(){return(ri=(0,p.Z)(function*(v,f,m){const E=(0,H.m9)(v);yield Hs(!1,E,"phone");const S=yield $a(E.auth,f,(0,H.m9)(m));return new $r(S,M=>qc(E,M))})).apply(this,arguments)}function Bd(v,f,m){return gr.apply(this,arguments)}function gr(){return(gr=(0,p.Z)(function*(v,f,m){const E=(0,H.m9)(v),S=yield $a(E.auth,f,(0,H.m9)(m));return new $r(S,M=>Ui(E,M))})).apply(this,arguments)}function $a(v,f,m){return to.apply(this,arguments)}function to(){return(to=(0,p.Z)(function*(v,f,m){var E;const S=yield m.verify();try{let M;if(Me("string"==typeof S,v,"argument-error"),Me(m.type===Xs,v,"argument-error"),M="string"==typeof f?{phoneNumber:f}:f,"session"in M){const Z=M.session;if("phoneNumber"in M)return Me("enroll"===Z.type,v,"internal-error"),(yield Ba(v,{idToken:Z.credential,phoneEnrollmentInfo:{phoneNumber:M.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{Me("signin"===Z.type,v,"internal-error");const he=(null===(E=M.multiFactorHint)||void 0===E?void 0:E.uid)||M.multiFactorUid;return Me(he,v,"missing-multi-factor-info"),(yield Qf(v,{mfaPendingCredential:Z.credential,mfaEnrollmentId:he,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Z}=yield Id(v,{phoneNumber:M.phoneNumber,recaptchaToken:S});return Z}}finally{m._reset()}})).apply(this,arguments)}function Xf(v,f){return C.apply(this,arguments)}function C(){return(C=(0,p.Z)(function*(v,f){yield Ts((0,H.m9)(v),f)})).apply(this,arguments)}let T=(()=>{class v{constructor(m){this.providerId=v.PROVIDER_ID,this.auth=Cn(m)}verifyPhoneNumber(m,E){return $a(this.auth,m,(0,H.m9)(E))}static credential(m,E){return In._fromVerification(m,E)}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:E,temporaryProof:S}=m;return E&&S?In._fromTokenResponse(E,S):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function R(v,f){return f?Zt(f):(Me(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class $ extends bs{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return Cs(f,this._buildIdpRequest())}_linkToIdToken(f,m){return Cs(f,this._buildIdpRequest(m))}_getReauthenticationResolver(f){return Cs(f,this._buildIdpRequest())}_buildIdpRequest(f){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(m.idToken=f),m}}function Q(v){return Ie(v.auth,new $(v),v.bypassAuthState)}function ce(v){const{auth:f,user:m}=v;return Me(m,f,"internal-error"),Gs(m,new $(v),v.bypassAuthState)}function we(v){return Be.apply(this,arguments)}function Be(){return(Be=(0,p.Z)(function*(v){const{auth:f,user:m}=v;return Me(m,f,"internal-error"),Ts(m,new $(v),v.bypassAuthState)})).apply(this,arguments)}class st{constructor(f,m,E,S,M=!1){this.auth=f,this.resolver=E,this.user=S,this.bypassAuthState=M,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var f=this;return new Promise(function(){var m=(0,p.Z)(function*(E,S){f.pendingPromise={resolve:E,reject:S};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(M){f.reject(M)}});return function(E,S){return m.apply(this,arguments)}}())}onAuthEvent(f){var m=this;return(0,p.Z)(function*(){const{urlResponse:E,sessionId:S,postBody:M,tenantId:Z,error:he,type:Ue}=f;if(he)return void m.reject(he);const Pe={auth:m.auth,requestUri:E,sessionId:S,tenantId:Z||void 0,postBody:M||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(Ue)(Pe))}catch(ht){m.reject(ht)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return Q;case"linkViaPopup":case"linkViaRedirect":return we;case"reauthViaPopup":case"reauthViaRedirect":return ce;default:En(this.auth,"internal-error")}}resolve(f){cr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){cr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const At=new on(2e3,1e4);function St(v,f,m){return lt.apply(this,arguments)}function lt(){return(lt=(0,p.Z)(function*(v,f,m){const E=Cn(v);Dr(v,f,pi);const S=R(E,m);return new Wi(E,"signInViaPopup",f,S).executeNotNull()})).apply(this,arguments)}function mr(v,f,m){return dt.apply(this,arguments)}function dt(){return(dt=(0,p.Z)(function*(v,f,m){const E=(0,H.m9)(v);Dr(E.auth,f,pi);const S=R(E.auth,m);return new Wi(E.auth,"reauthViaPopup",f,S,E).executeNotNull()})).apply(this,arguments)}function oa(v,f,m){return qi.apply(this,arguments)}function qi(){return(qi=(0,p.Z)(function*(v,f,m){const E=(0,H.m9)(v);Dr(E.auth,f,pi);const S=R(E.auth,m);return new Wi(E.auth,"linkViaPopup",f,S,E).executeNotNull()})).apply(this,arguments)}let Wi=(()=>{class v extends st{constructor(m,E,S,M,Z){super(m,E,M,Z),this.provider=S,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var m=this;return(0,p.Z)(function*(){const E=yield m.execute();return Me(E,m.auth,"internal-error"),E})()}onExecution(){var m=this;return(0,p.Z)(function*(){cr(1===m.filter.length,"Popup operations only handle one event");const E=ta();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],E),m.authWindow.associatedEvent=E,m.resolver._originValidation(m.auth).catch(S=>{m.reject(S)}),m.resolver._isIframeWebStorageSupported(m.auth,S=>{S||m.reject(Mt(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(Mt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const m=()=>{var E,S;this.pollId=(null===(S=null===(E=this.authWindow)||void 0===E?void 0:E.window)||void 0===S?void 0:S.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Mt(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,At.get())};m()}}return v.currentPopupAction=null,v})();const Ii=new Map;class Ha extends st{constructor(f,m,E=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,E),this.eventId=null}execute(){var f=()=>super.execute,m=this;return(0,p.Z)(function*(){let E=Ii.get(m.auth._key());if(!E){try{const M=(yield function(v,f){return or.apply(this,arguments)}(m.resolver,m.auth))?yield f().call(m):null;E=()=>Promise.resolve(M)}catch(S){E=()=>Promise.reject(S)}Ii.set(m.auth._key(),E)}return m.bypassAuthState||Ii.set(m.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(f){var m=()=>super.onAuthEvent,E=this;return(0,p.Z)(function*(){if("signInViaRedirect"===f.type)return m().call(E,f);if("unknown"!==f.type){if(f.eventId){const S=yield E.auth._redirectUserForId(f.eventId);if(S)return E.user=S,m().call(E,f);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,p.Z)(function*(){})()}cleanUp(){}}function or(){return(or=(0,p.Z)(function*(v,f){const m=ls(f),E=yr(v);if(!(yield E._isAvailable()))return!1;const S="true"===(yield E._get(m));return yield E._remove(m),S})).apply(this,arguments)}function qu(v,f){return no.apply(this,arguments)}function no(){return(no=(0,p.Z)(function*(v,f){return yr(v)._set(ls(f),"true")})).apply(this,arguments)}function Wu(){Ii.clear()}function ev(v,f){Ii.set(v._key(),f)}function yr(v){return Zt(v._redirectPersistence)}function ls(v){return Vr("pendingRedirect",v.config.apiKey,v.name)}function Ub(v,f,m){return function(v,f,m){return ds.apply(this,arguments)}(v,f,m)}function ds(){return(ds=(0,p.Z)(function*(v,f,m){const E=Cn(v);Dr(v,f,pi);const S=R(E,m);return yield qu(S,E),S._openRedirect(E,f,"signInViaRedirect")})).apply(this,arguments)}function rl(v,f,m){return function(v,f,m){return jd.apply(this,arguments)}(v,f,m)}function jd(){return(jd=(0,p.Z)(function*(v,f,m){const E=(0,H.m9)(v);Dr(E.auth,f,pi);const S=R(E.auth,m);yield qu(S,E.auth);const M=yield Zu(E);return S._openRedirect(E.auth,f,"reauthViaRedirect",M)})).apply(this,arguments)}function $g(v,f,m){return function(v,f,m){return Ga.apply(this,arguments)}(v,f,m)}function Ga(){return(Ga=(0,p.Z)(function*(v,f,m){const E=(0,H.m9)(v);Dr(E.auth,f,pi);const S=R(E.auth,m);yield Hs(!1,E,f.providerId),yield qu(S,E.auth);const M=yield Zu(E);return S._openRedirect(E.auth,f,"linkViaRedirect",M)})).apply(this,arguments)}function il(v,f){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,p.Z)(function*(v,f){return yield Cn(v)._initializationPromise,Kt(v,f,!1)})).apply(this,arguments)}function Kt(v,f){return hs.apply(this,arguments)}function hs(){return(hs=(0,p.Z)(function*(v,f,m=!1){const E=Cn(v),S=R(E,f),Z=yield new Ha(E,S,m).execute();return Z&&!m&&(delete Z.user._redirectEventId,yield E._persistUserIfCurrent(Z.user),yield E._setRedirectUser(null,f)),Z})).apply(this,arguments)}function Zu(v){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,p.Z)(function*(v){const f=ta(`${v.uid}:::`);return v._redirectEventId=f,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),f})).apply(this,arguments)}class sl{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let m=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(f,E)&&(m=!0,this.sendToConsumer(f,E),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return tv(v);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=f,m=!0)),m}sendToConsumer(f,m){var E;if(f.error&&!tv(f)){const S=(null===(E=f.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";m.onError(Mt(this.auth,S))}else m.onAuthEvent(f)}isEventForConsumer(f,m){const E=null===m.eventId||!!f.eventId&&f.eventId===m.eventId;return m.filter.includes(f.type)&&E}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ep(f))}saveEventToCache(f){this.cachedEventUids.add(ep(f)),this.lastProcessedEventTime=Date.now()}}function ep(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(f=>f).join("-")}function tv({type:v,error:f}){return"unknown"===v&&"auth/no-auth-event"===(null==f?void 0:f.code)}function Ku(v){return Gd.apply(this,arguments)}function Gd(){return(Gd=(0,p.Z)(function*(v,f={}){return Dt(v,"GET","/v1/projects",f)})).apply(this,arguments)}const qa=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,tp=/^https?/;function Yu(){return(Yu=(0,p.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:f}=yield Ku(v);for(const m of f)try{if(Hg(m))return}catch(E){}En(v,"unauthorized-domain")})).apply(this,arguments)}function Hg(v){const f=Ar(),{protocol:m,hostname:E}=new URL(f);if(v.startsWith("chrome-extension://")){const Z=new URL(v);return""===Z.hostname&&""===E?"chrome-extension:"===m&&v.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===m&&Z.hostname===E}if(!tp.test(m))return!1;if(qa.test(v))return E===v;const S=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(E)}const nv=new on(3e4,6e4);function ol(){const v=Gn().___jsl;if(null==v?void 0:v.H)for(const f of Object.keys(v.H))if(v.H[f].r=v.H[f].r||[],v.H[f].L=v.H[f].L||[],v.H[f].r=[...v.H[f].L],v.CP)for(let m=0;m<v.CP.length;m++)v.CP[m]=null}let al=null;function ul(v){return al=al||function(v){return new Promise((f,m)=>{var E,S,M;function Z(){ol(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{ol(),m(Mt(v,"network-request-failed"))},timeout:nv.get()})}if(null===(S=null===(E=Gn().gapi)||void 0===E?void 0:E.iframes)||void 0===S?void 0:S.Iframe)f(gapi.iframes.getContext());else{if(!(null===(M=Gn().gapi)||void 0===M?void 0:M.load)){const he=Jf("iframefcb");return Gn()[he]=()=>{gapi.load?Z():m(Mt(v,"network-request-failed"))},So(`https://apis.google.com/js/api.js?onload=${he}`).catch(Ue=>m(Ue))}Z()}}).catch(f=>{throw al=null,f})}(v),al}const Gg=new on(5e3,15e3),iv={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},sv=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function qg(v){const f=v.config;Me(f.authDomain,v,"auth-domain-config-required");const m=f.emulator?nt(f,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,E={apiKey:f.apiKey,appName:v.name,v:k.SDK_VERSION},S=sv.get(v.config.apiHost);S&&(E.eid=S);const M=v._getFrameworks();return M.length&&(E.fw=M.join(",")),`${m}?${(0,H.xO)(E).slice(1)}`}function zi(){return zi=(0,p.Z)(function*(v){const f=yield ul(v),m=Gn().gapi;return Me(m,v,"internal-error"),f.open({where:document.body,url:qg(v),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:iv,dontclear:!0},E=>new Promise(function(){var S=(0,p.Z)(function*(M,Z){yield E.restyle({setHideOnLeave:!1});const he=Mt(v,"network-request-failed"),Ue=Gn().setTimeout(()=>{Z(he)},Gg.get());function Pe(){Gn().clearTimeout(Ue),M(E)}E.ping(Pe).then(Pe,()=>{Z(he)})});return function(M,Z){return S.apply(this,arguments)}}()))}),zi.apply(this,arguments)}const Di={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ca{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(f){}}}function cl(v,f,m,E,S,M){Me(v.config.authDomain,v,"auth-domain-config-required"),Me(v.config.apiKey,v,"invalid-api-key");const Z={apiKey:v.config.apiKey,appName:v.name,authType:m,redirectUrl:E,v:k.SDK_VERSION,eventId:S};if(f instanceof pi){f.setDefaultLanguage(v.languageCode),Z.providerId=f.providerId||"",(0,H.xb)(f.getCustomParameters())||(Z.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Ue,Pe]of Object.entries(M||{}))Z[Ue]=Pe}if(f instanceof pn){const Ue=f.getScopes().filter(Pe=>""!==Pe);Ue.length>0&&(Z.scopes=Ue.join(","))}v.tenantId&&(Z.tid=v.tenantId);const he=Z;for(const Ue of Object.keys(he))void 0===he[Ue]&&delete he[Ue];return`${function({config:v}){return v.emulator?nt(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,H.xO)(he).slice(1)}`}const Wd="webStorageSupport",Ju=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ja,this._completeRedirectFn=Kt,this._overrideRedirectResult=ev}_openPopup(f,m,E,S){var M=this;return(0,p.Z)(function*(){var Z;cr(null===(Z=M.eventManagers[f._key()])||void 0===Z?void 0:Z.manager,"_initialize() not called before _openPopup()");const he=cl(f,m,E,Ar(),S);return function(v,f,m,E=500,S=600){const M=Math.max((window.screen.availHeight-S)/2,0).toString(),Z=Math.max((window.screen.availWidth-E)/2,0).toString();let he="";const Ue=Object.assign(Object.assign({},Di),{width:E.toString(),height:S.toString(),top:M,left:Z}),Pe=(0,H.z$)().toLowerCase();m&&(he=Sa(Pe)?"_blank":m),zo(Pe)&&(f=f||"http://localhost",Ue.scrollbars="yes");const ht=Object.entries(Ue).reduce((vn,[Hr,Gr])=>`${vn}${Hr}=${Gr},`,"");if(function(v=(0,H.z$)()){var f;return vs(v)&&!!(null===(f=window.navigator)||void 0===f?void 0:f.standalone)}(Pe)&&"_self"!==he)return function(v,f){const m=document.createElement("a");m.href=v,m.target=f;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(E)}(f||"",he),new ca(null);const gt=window.open(f||"",he,ht);Me(gt,v,"popup-blocked");try{gt.focus()}catch(vn){}return new ca(gt)}(f,he,ta())})()}_openRedirect(f,m,E,S){var M=this;return(0,p.Z)(function*(){return yield M._originValidation(f),v=cl(f,m,E,Ar(),S),Gn().location.href=v,new Promise(()=>{});var v})()}_initialize(f){const m=f._key();if(this.eventManagers[m]){const{manager:S,promise:M}=this.eventManagers[m];return S?Promise.resolve(S):(cr(M,"If manager is not set, promise should be"),M)}const E=this.initAndGetManager(f);return this.eventManagers[m]={promise:E},E.catch(()=>{delete this.eventManagers[m]}),E}initAndGetManager(f){var m=this;return(0,p.Z)(function*(){const E=yield function(v){return zi.apply(this,arguments)}(f),S=new sl(f);return E.register("authEvent",M=>(Me(null==M?void 0:M.authEvent,f,"invalid-auth-event"),{status:S.onEvent(M.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[f._key()]={manager:S},m.iframes[f._key()]=E,S})()}_isIframeWebStorageSupported(f,m){this.iframes[f._key()].send(Wd,{type:Wd},S=>{var M;const Z=null===(M=null==S?void 0:S[0])||void 0===M?void 0:M[Wd];void 0!==Z&&m(!!Z),En(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const m=f._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function(v){return Yu.apply(this,arguments)}(f)),this.originValidationPromises[m]}get _shouldInitProactively(){return Zo()||Rt()||vs()}};class Zi extends class{constructor(f){this.factorId=f}_process(f,m,E){switch(m.type){case"enroll":return this._finalizeEnroll(f,m.credential,E);case"signin":return this._finalizeSignIn(f,m.credential);default:return Zn("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new Zi(f)}_finalizeEnroll(f,m,E){return function(v,f){return Dt(v,"POST","/v2/accounts/mfaEnrollment:finalize",en(v,f))}(f,{idToken:m,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,m){return function(v,f){return Dt(v,"POST","/v2/accounts/mfaSignIn:finalize",en(v,f))}(f,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let dl=(()=>{class v{constructor(){}static assertion(m){return Zi._fromCredential(m)}}return v.FACTOR_ID="phone",v})();var v,sp="@firebase/auth",op="0.20.10";class hl{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var m=this;return(0,p.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const m=this.auth.onIdTokenChanged(E=>{var S;f((null===(S=E)||void 0===S?void 0:S.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,m),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const m=this.internalListeners.get(f);!m||(this.internalListeners.delete(f),m(),this.updateProactiveRefresh())}assertAuthConfigured(){Me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,H.Pz)("authIdTokenMaxAge"),v="Browser",(0,k._registerComponent)(new Ge.wA("auth",(f,{options:m})=>{const E=f.getProvider("app").getImmediate(),S=f.getProvider("heartbeat"),{apiKey:M,authDomain:Z}=E.options;return((he,Ue)=>{Me(M&&!M.includes(":"),"invalid-api-key",{appName:he.name}),Me(!(null==Z?void 0:Z.includes(":")),"argument-error",{appName:he.name});const Pe={apiKey:M,authDomain:Z,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:lu(v)},ht=new Lc(he,Ue,Pe);return function(v,f){const m=(null==f?void 0:f.persistence)||[],E=(Array.isArray(m)?m:[m]).map(Zt);(null==f?void 0:f.errorMap)&&v._updateErrorMap(f.errorMap),v._initializeWithPersistence(E,null==f?void 0:f.popupRedirectResolver)}(ht,m),ht})(E,S)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,m,E)=>{f.getProvider("auth-internal").initialize()})),(0,k._registerComponent)(new Ge.wA("auth-internal",f=>{const m=Cn(f.getProvider("auth").getImmediate());return new hl(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,k.registerVersion)(sp,op,void 0),(0,k.registerVersion)(sp,op,"esm2017")},3854:(Ke,ye,L)=>{"use strict";L.d(ye,{BH:()=>Ir,LL:()=>hi,ZR:()=>rr,zI:()=>Oe,US:()=>oe,tV:()=>re,L:()=>ae,$s:()=>Re,r3:()=>$n,Sg:()=>po,ne:()=>dr,vZ:()=>Tr,ZB:()=>B,pd:()=>et,aH:()=>Cr,Pz:()=>Bs,m9:()=>zt,z$:()=>X,jU:()=>me,ru:()=>ge,xb:()=>Zn,w1:()=>De,hl:()=>Ft,uI:()=>de,UG:()=>Ce,b$:()=>Se,G6:()=>$e,xO:()=>Jr,zd:()=>Ar,eu:()=>_t});const ne=function(W){const G=[];let K=0;for(let j=0;j<W.length;j++){let N=W.charCodeAt(j);N<128?G[K++]=N:N<2048?(G[K++]=N>>6|192,G[K++]=63&N|128):55296==(64512&N)&&j+1<W.length&&56320==(64512&W.charCodeAt(j+1))?(N=65536+((1023&N)<<10)+(1023&W.charCodeAt(++j)),G[K++]=N>>18|240,G[K++]=N>>12&63|128,G[K++]=N>>6&63|128,G[K++]=63&N|128):(G[K++]=N>>12|224,G[K++]=N>>6&63|128,G[K++]=63&N|128)}return G},oe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(W,G){if(!Array.isArray(W))throw Error("encodeByteArray takes an array as a parameter");this.init_();const K=G?this.byteToCharMapWebSafe_:this.byteToCharMap_,j=[];for(let N=0;N<W.length;N+=3){const U=W[N],ie=N+1<W.length,Ae=ie?W[N+1]:0,ot=N+2<W.length,Je=ot?W[N+2]:0;let un=(15&Ae)<<2|Je>>6,ir=63&Je;ot||(ir=64,ie||(un=64)),j.push(K[U>>2],K[(3&U)<<4|Ae>>4],K[un],K[ir])}return j.join("")},encodeString(W,G){return this.HAS_NATIVE_SUPPORT&&!G?btoa(W):this.encodeByteArray(ne(W),G)},decodeString(W,G){return this.HAS_NATIVE_SUPPORT&&!G?atob(W):function(W){const G=[];let K=0,j=0;for(;K<W.length;){const N=W[K++];if(N<128)G[j++]=String.fromCharCode(N);else if(N>191&&N<224){const U=W[K++];G[j++]=String.fromCharCode((31&N)<<6|63&U)}else if(N>239&&N<365){const ot=((7&N)<<18|(63&W[K++])<<12|(63&W[K++])<<6|63&W[K++])-65536;G[j++]=String.fromCharCode(55296+(ot>>10)),G[j++]=String.fromCharCode(56320+(1023&ot))}else{const U=W[K++],ie=W[K++];G[j++]=String.fromCharCode((15&N)<<12|(63&U)<<6|63&ie)}}return G.join("")}(this.decodeStringToByteArray(W,G))},decodeStringToByteArray(W,G){this.init_();const K=G?this.charToByteMapWebSafe_:this.charToByteMap_,j=[];for(let N=0;N<W.length;){const U=K[W.charAt(N++)],Ae=N<W.length?K[W.charAt(N)]:0;++N;const Je=N<W.length?K[W.charAt(N)]:64;++N;const ct=N<W.length?K[W.charAt(N)]:64;if(++N,null==U||null==Ae||null==Je||null==ct)throw Error();j.push(U<<2|Ae>>4),64!==Je&&(j.push(Ae<<4&240|Je>>2),64!==ct&&j.push(Je<<6&192|ct))}return j},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let W=0;W<this.ENCODED_VALS.length;W++)this.byteToCharMap_[W]=this.ENCODED_VALS.charAt(W),this.charToByteMap_[this.byteToCharMap_[W]]=W,this.byteToCharMapWebSafe_[W]=this.ENCODED_VALS_WEBSAFE.charAt(W),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[W]]=W,W>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(W)]=W,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(W)]=W)}}},ae=function(W){return function(W){const G=ne(W);return oe.encodeByteArray(G,!0)}(W).replace(/\./g,"")},re=function(W){try{return oe.decodeString(W,!0)}catch(G){console.error("base64Decode failed: ",G)}return null};function B(W,G){if(!(G instanceof Object))return G;switch(G.constructor){case Date:return new Date(G.getTime());case Object:void 0===W&&(W={});break;case Array:W=[];break;default:return G}for(const K in G)!G.hasOwnProperty(K)||!te(K)||(W[K]=B(W[K],G[K]));return W}function te(W){return"__proto__"!==W}function X(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function de(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(X())}function Ce(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(W){return!1}}function me(){return"object"==typeof self&&self.self===self}function ge(){const W="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof W&&void 0!==W.id}function Se(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function De(){const W=X();return W.indexOf("MSIE ")>=0||W.indexOf("Trident/")>=0}function $e(){return!Ce()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ft(){return"object"==typeof indexedDB}function _t(){return new Promise((W,G)=>{try{let K=!0;const j="validate-browser-context-for-indexeddb-analytics-module",N=self.indexedDB.open(j);N.onsuccess=()=>{N.result.close(),K||self.indexedDB.deleteDatabase(j),W(!0)},N.onupgradeneeded=()=>{K=!1},N.onerror=()=>{var U;G((null===(U=N.error)||void 0===U?void 0:U.message)||"")}}catch(K){G(K)}})}function Oe(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}const Ct=()=>{try{return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const W=process.env.__FIREBASE_DEFAULTS__;return W?JSON.parse(W):void 0})()||(()=>{if("undefined"==typeof document)return;let W;try{W=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(K){return}const G=W&&re(W[1]);return G&&JSON.parse(G)})()}catch(W){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${W}`)}},Cr=()=>{var W;return null===(W=Ct())||void 0===W?void 0:W.config},Bs=W=>{var G;return null===(G=Ct())||void 0===G?void 0:G[`_${W}`]};class Ir{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((G,K)=>{this.resolve=G,this.reject=K})}wrapCallback(G){return(K,j)=>{K?this.reject(K):this.resolve(j),"function"==typeof G&&(this.promise.catch(()=>{}),1===G.length?G(K):G(K,j))}}}function po(W,G){if(W.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const j=G||"demo-project",N=W.iat||0,U=W.sub||W.user_id;if(!U)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ie=Object.assign({iss:`https://securetoken.google.com/${j}`,aud:j,iat:N,exp:N+3600,auth_time:N,sub:U,user_id:U,firebase:{sign_in_provider:"custom",identities:{}}},W);return[ae(JSON.stringify({alg:"none",type:"JWT"})),ae(JSON.stringify(ie)),""].join(".")}class rr extends Error{constructor(G,K,j){super(K),this.code=G,this.customData=j,this.name="FirebaseError",Object.setPrototypeOf(this,rr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,hi.prototype.create)}}class hi{constructor(G,K,j){this.service=G,this.serviceName=K,this.errors=j}create(G,...K){const j=K[0]||{},N=`${this.service}/${G}`,U=this.errors[G],ie=U?function(W,G){return W.replace(sn,(K,j)=>{const N=G[j];return null!=N?String(N):`<${j}?>`})}(U,j):"Error";return new rr(N,`${this.serviceName}: ${ie} (${N}).`,j)}}const sn=/\{\$([^}]+)}/g;function $n(W,G){return Object.prototype.hasOwnProperty.call(W,G)}function Zn(W){for(const G in W)if(Object.prototype.hasOwnProperty.call(W,G))return!1;return!0}function Tr(W,G){if(W===G)return!0;const K=Object.keys(W),j=Object.keys(G);for(const N of K){if(!j.includes(N))return!1;const U=W[N],ie=G[N];if(Zt(U)&&Zt(ie)){if(!Tr(U,ie))return!1}else if(U!==ie)return!1}for(const N of j)if(!K.includes(N))return!1;return!0}function Zt(W){return null!==W&&"object"==typeof W}function Jr(W){const G=[];for(const[K,j]of Object.entries(W))Array.isArray(j)?j.forEach(N=>{G.push(encodeURIComponent(K)+"="+encodeURIComponent(N))}):G.push(encodeURIComponent(K)+"="+encodeURIComponent(j));return G.length?"&"+G.join("&"):""}function Ar(W){const G={};return W.replace(/^\?/,"").split("&").forEach(j=>{if(j){const[N,U]=j.split("=");G[decodeURIComponent(N)]=decodeURIComponent(U)}}),G}function et(W){const G=W.indexOf("?");if(!G)return"";const K=W.indexOf("#",G);return W.substring(G,K>0?K:void 0)}function dr(W,G){const K=new Fr(W,G);return K.subscribe.bind(K)}class Fr{constructor(G,K){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=K,this.task.then(()=>{G(this)}).catch(j=>{this.error(j)})}next(G){this.forEachObserver(K=>{K.next(G)})}error(G){this.forEachObserver(K=>{K.error(G)}),this.close(G)}complete(){this.forEachObserver(G=>{G.complete()}),this.close()}subscribe(G,K,j){let N;if(void 0===G&&void 0===K&&void 0===j)throw new Error("Missing Observer.");N=function(W,G){if("object"!=typeof W||null===W)return!1;for(const K of["next","error","complete"])if(K in W&&"function"==typeof W[K])return!0;return!1}(G)?G:{next:G,error:K,complete:j},void 0===N.next&&(N.next=Ye),void 0===N.error&&(N.error=Ye),void 0===N.complete&&(N.complete=Ye);const U=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?N.error(this.finalError):N.complete()}catch(ie){}}),this.observers.push(N),U}unsubscribeOne(G){void 0===this.observers||void 0===this.observers[G]||(delete this.observers[G],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(G){if(!this.finalized)for(let K=0;K<this.observers.length;K++)this.sendOne(K,G)}sendOne(G,K){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[G])try{K(this.observers[G])}catch(j){"undefined"!=typeof console&&console.error&&console.error(j)}})}close(G){this.finalized||(this.finalized=!0,void 0!==G&&(this.finalError=G),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ye(){}function Re(W,G=1e3,K=2){const j=G*Math.pow(K,W),N=Math.round(.5*j*(Math.random()-.5)*2);return Math.min(144e5,j+N)}function zt(W){return W&&W._delegate?W._delegate:W}},2329:(Ke,ye,L)=>{"use strict";L.d(ye,{Mq:()=>p.getApp,C6:()=>p.getApps});var p=L(8026);(0,p.registerVersion)("firebase","9.12.1","app")},7841:(Ke,ye,L)=>{"use strict";L.d(ye,{Z:()=>p.Z});var p=L(3394);p.Z.registerVersion("firebase","9.12.1","app-compat")},4828:(Ke,ye,L)=>{"use strict";L.r(ye);var p=L(8239),H=L(3394),k=L(3607),ne=L(3854),ve=(L(8026),L(5422),L(3910));function ae(){return window}function B(){return(B=(0,p.Z)(function*(j,N,U){var ie;const{BuildInfo:Ae}=ae();(0,k.aq)(N.sessionId,"AuthEvent did not contain a session ID");const ot=yield Se(N.sessionId),Je={};return(0,k.ar)()?Je.ibi=Ae.packageName:(0,k.as)()?Je.apn=Ae.packageName:(0,k.at)(j,"operation-not-supported-in-this-environment"),Ae.displayName&&(Je.appDisplayName=Ae.displayName),Je.sessionId=ot,(0,k.au)(j,U,N.type,void 0,null!==(ie=N.eventId)&&void 0!==ie?ie:void 0,Je)})).apply(this,arguments)}function X(){return(X=(0,p.Z)(function*(j){const{BuildInfo:N}=ae(),U={};(0,k.ar)()?U.iosBundleId=N.packageName:(0,k.as)()?U.androidPackageName=N.packageName:(0,k.at)(j,"operation-not-supported-in-this-environment"),yield(0,k.av)(j,U)})).apply(this,arguments)}function me(){return(me=(0,p.Z)(function*(j,N,U){const{cordova:ie}=ae();let Ae=()=>{};try{yield new Promise((ot,Je)=>{let Lt=null;function ct(){var Ut;ot();const dn=null===(Ut=ie.plugins.browsertab)||void 0===Ut?void 0:Ut.close;"function"==typeof dn&&dn(),"function"==typeof(null==U?void 0:U.close)&&U.close()}function un(){Lt||(Lt=window.setTimeout(()=>{Je((0,k.aw)(j,"redirect-cancelled-by-user"))},2e3))}function ir(){"visible"===(null==document?void 0:document.visibilityState)&&un()}N.addPassiveListener(ct),document.addEventListener("resume",un,!1),(0,k.as)()&&document.addEventListener("visibilitychange",ir,!1),Ae=()=>{N.removePassiveListener(ct),document.removeEventListener("resume",un,!1),document.removeEventListener("visibilitychange",ir,!1),Lt&&window.clearTimeout(Lt)}})}finally{Ae()}})).apply(this,arguments)}function Se(j){return xe.apply(this,arguments)}function xe(){return(xe=(0,p.Z)(function*(j){const N=De(j),U=yield crypto.subtle.digest("SHA-256",N);return Array.from(new Uint8Array(U)).map(Ae=>Ae.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function De(j){if((0,k.aq)(/[0-9a-zA-Z]+/.test(j),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(j);const N=new ArrayBuffer(j.length),U=new Uint8Array(N);for(let ie=0;ie<j.length;ie++)U[ie]=j.charCodeAt(ie);return U}class ut extends k.aA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(N=>{this.resolveInialized=N})}addPassiveListener(N){this.passiveListeners.add(N)}removePassiveListener(N){this.passiveListeners.delete(N)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(N){return this.resolveInialized(),this.passiveListeners.forEach(U=>U(N)),super.onEvent(N)}initialized(){var N=this;return(0,p.Z)(function*(){yield N.initPromise})()}}function _t(j){return Oe.apply(this,arguments)}function Oe(){return(Oe=(0,p.Z)(function*(j){const N=yield Qe()._get(Xe(j));return N&&(yield Qe()._remove(Xe(j))),N})).apply(this,arguments)}function He(){const j=[],N="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let U=0;U<20;U++){const ie=Math.floor(Math.random()*N.length);j.push(N.charAt(ie))}return j.join("")}function Qe(){return(0,k.ay)(k.b)}function Xe(j){return(0,k.az)("authEvent",j.config.apiKey,j.name)}function Tn(j){if(!(null==j?void 0:j.includes("?")))return{};const[N,...U]=j.split("?");return(0,ne.zd)(U.join("?"))}function po(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,k.aw)("no-auth-event")}}function sn(){var j;return(null===(j=null==self?void 0:self.location)||void 0===j?void 0:j.protocol)||null}function zn(j=(0,ne.z$)()){return!("file:"!==sn()&&"ionic:"!==sn()&&"capacitor:"!==sn()||!j.toLowerCase().match(/iphone|ipad|ipod|android/))}function Dr(){try{const j=self.localStorage,N=k.aI();if(j)return j.setItem(N,"1"),j.removeItem(N),!function(j=(0,ne.z$)()){return(0,ne.w1)()&&11===(null==document?void 0:document.documentMode)||function(j=(0,ne.z$)()){return/Edge\/\d+/.test(j)}(j)}()||(0,ne.hl)()}catch(j){return $n()&&(0,ne.hl)()}return!1}function $n(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Me(){return("http:"===sn()||"https:"===sn()||(0,ne.ru)()||zn())&&!((0,ne.b$)()||(0,ne.UG)())&&Dr()&&!$n()}function Zn(){return zn()&&"undefined"!=typeof document}function Tr(){return(Tr=(0,p.Z)(function*(){return!!Zn()&&new Promise(j=>{const N=setTimeout(()=>{j(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(N),j(!0)})})})).apply(this,arguments)}const bn={LOCAL:"local",NONE:"none",SESSION:"session"},Jr=k.ax,Ar="persistence";function lr(j){return dr.apply(this,arguments)}function dr(){return(dr=(0,p.Z)(function*(j){yield j._initializationPromise;const N=on(),U=k.az(Ar,j.config.apiKey,j.name);N&&N.setItem(U,j._getPersistence())})).apply(this,arguments)}function on(){var j;try{return(null===(j="undefined"!=typeof window?window:null)||void 0===j?void 0:j.sessionStorage)||null}catch(N){return null}}const nt=k.ax;class Ye{constructor(){this.browserResolver=k.ay(k.k),this.cordovaResolver=k.ay(class{constructor(){this._redirectPersistence=k.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=k.aB,this._overrideRedirectResult=k.aC}_initialize(N){var U=this;return(0,p.Z)(function*(){const ie=N._key();let Ae=U.eventManagers.get(ie);return Ae||(Ae=new ut(N),U.eventManagers.set(ie,Ae),U.attachCallbackListeners(N,Ae)),Ae})()}_openPopup(N){(0,k.at)(N,"operation-not-supported-in-this-environment")}_openRedirect(N,U,ie,Ae){var ot=this;return(0,p.Z)(function*(){!function(j){var N,U,ie,Ae,ot,Je,Lt,ct,un,ir;const Ut=ae();(0,k.ax)("function"==typeof(null===(N=null==Ut?void 0:Ut.universalLinks)||void 0===N?void 0:N.subscribe),j,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,k.ax)(void 0!==(null===(U=null==Ut?void 0:Ut.BuildInfo)||void 0===U?void 0:U.packageName),j,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,k.ax)("function"==typeof(null===(ot=null===(Ae=null===(ie=null==Ut?void 0:Ut.cordova)||void 0===ie?void 0:ie.plugins)||void 0===Ae?void 0:Ae.browsertab)||void 0===ot?void 0:ot.openUrl),j,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,k.ax)("function"==typeof(null===(ct=null===(Lt=null===(Je=null==Ut?void 0:Ut.cordova)||void 0===Je?void 0:Je.plugins)||void 0===Lt?void 0:Lt.browsertab)||void 0===ct?void 0:ct.isAvailable),j,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,k.ax)("function"==typeof(null===(ir=null===(un=null==Ut?void 0:Ut.cordova)||void 0===un?void 0:un.InAppBrowser)||void 0===ir?void 0:ir.open),j,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(N);const Je=yield ot._initialize(N);yield Je.initialized(),Je.resetRedirect(),(0,k.aD)(),yield ot._originValidation(N);const Lt=function(j,N,U=null){return{type:N,eventId:U,urlResponse:null,sessionId:He(),postBody:null,tenantId:j.tenantId,error:(0,k.aw)(j,"no-auth-event")}}(N,ie,Ae);yield function(j,N){return Qe()._set(Xe(j),N)}(N,Lt);const ct=yield function(j,N,U){return B.apply(this,arguments)}(N,Lt,U),un=yield function(j){const{cordova:N}=ae();return new Promise(U=>{N.plugins.browsertab.isAvailable(ie=>{let Ae=null;ie?N.plugins.browsertab.openUrl(j):Ae=N.InAppBrowser.open(j,(0,k.ap)()?"_blank":"_system","location=yes"),U(Ae)})})}(ct);return function(j,N,U){return me.apply(this,arguments)}(N,Je,un)})()}_isIframeWebStorageSupported(N,U){throw new Error("Method not implemented.")}_originValidation(N){const U=N._key();return this.originValidationPromises[U]||(this.originValidationPromises[U]=function(j){return X.apply(this,arguments)}(N)),this.originValidationPromises[U]}attachCallbackListeners(N,U){const{universalLinks:ie,handleOpenURL:Ae,BuildInfo:ot}=ae(),Je=setTimeout((0,p.Z)(function*(){yield _t(N),U.onEvent(po())}),500),Lt=function(){var ir=(0,p.Z)(function*(Ut){clearTimeout(Je);const dn=yield _t(N);let Fi=null;dn&&(null==Ut?void 0:Ut.url)&&(Fi=function(j,N){var U,ie;const Ae=function(j){const N=Tn(j),U=N.link?decodeURIComponent(N.link):void 0,ie=Tn(U).link,Ae=N.deep_link_id?decodeURIComponent(N.deep_link_id):void 0;return Tn(Ae).link||Ae||ie||U||j}(N);if(Ae.includes("/__/auth/callback")){const ot=Tn(Ae),Je=ot.firebaseError?function(j){try{return JSON.parse(j)}catch(N){return null}}(decodeURIComponent(ot.firebaseError)):null,Lt=null===(ie=null===(U=null==Je?void 0:Je.code)||void 0===U?void 0:U.split("auth/"))||void 0===ie?void 0:ie[1],ct=Lt?(0,k.aw)(Lt):null;return ct?{type:j.type,eventId:j.eventId,tenantId:j.tenantId,error:ct,urlResponse:null,sessionId:null,postBody:null}:{type:j.type,eventId:j.eventId,tenantId:j.tenantId,sessionId:j.sessionId,urlResponse:Ae,postBody:null}}return null}(dn,Ut.url)),U.onEvent(Fi||po())});return function(dn){return ir.apply(this,arguments)}}();void 0!==ie&&"function"==typeof ie.subscribe&&ie.subscribe(null,Lt);const ct=Ae,un=`${ot.packageName.toLowerCase()}://`;ae().handleOpenURL=function(){var ir=(0,p.Z)(function*(Ut){if(Ut.toLowerCase().startsWith(un)&&Lt({url:Ut}),"function"==typeof ct)try{ct(Ut)}catch(dn){console.error(dn)}});return function(Ut){return ir.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=k.a,this._completeRedirectFn=k.aB,this._overrideRedirectResult=k.aC}_initialize(N){var U=this;return(0,p.Z)(function*(){return yield U.selectUnderlyingResolver(),U.assertedUnderlyingResolver._initialize(N)})()}_openPopup(N,U,ie,Ae){var ot=this;return(0,p.Z)(function*(){return yield ot.selectUnderlyingResolver(),ot.assertedUnderlyingResolver._openPopup(N,U,ie,Ae)})()}_openRedirect(N,U,ie,Ae){var ot=this;return(0,p.Z)(function*(){return yield ot.selectUnderlyingResolver(),ot.assertedUnderlyingResolver._openRedirect(N,U,ie,Ae)})()}_isIframeWebStorageSupported(N,U){this.assertedUnderlyingResolver._isIframeWebStorageSupported(N,U)}_originValidation(N){return this.assertedUnderlyingResolver._originValidation(N)}get _shouldInitProactively(){return Zn()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return nt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var N=this;return(0,p.Z)(function*(){if(N.underlyingResolver)return;const U=yield function(){return Tr.apply(this,arguments)}();N.underlyingResolver=U?N.cordovaResolver:N.browserResolver})()}}function Hn(j){return j.unwrap()}function en(j){return Kn(j)}function Kn(j){const{_tokenResponse:N}=j instanceof ne.ZR?j.customData:j;if(!N)return null;if(!(j instanceof ne.ZR)&&"temporaryProof"in N&&"phoneNumber"in N)return k.P.credentialFromResult(j);const U=N.providerId;if(!U||U===k.o.PASSWORD)return null;let ie;switch(U){case k.o.GOOGLE:ie=k.Q;break;case k.o.FACEBOOK:ie=k.N;break;case k.o.GITHUB:ie=k.T;break;case k.o.TWITTER:ie=k.W;break;default:const{oauthIdToken:Ae,oauthAccessToken:ot,oauthTokenSecret:Je,pendingToken:Lt,nonce:ct}=N;return ot||Je||Ae||Lt?Lt?U.startsWith("saml.")?k.aL._create(U,Lt):k.J._fromParams({providerId:U,signInMethod:U,pendingToken:Lt,idToken:Ae,accessToken:ot}):new k.U(U).credential({idToken:Ae,accessToken:ot,rawNonce:ct}):null}return j instanceof ne.ZR?ie.credentialFromError(j):ie.credentialFromResult(j)}function Pn(j,N){return N.catch(U=>{throw U instanceof ne.ZR&&function(j,N){var U,ie;const Ae=null===(U=N.customData)||void 0===U?void 0:U._tokenResponse;if("auth/multi-factor-auth-required"===(null===(ie=N)||void 0===ie?void 0:ie.code))N.resolver=new rt(j,k.an(j,N));else if(Ae){const ot=Kn(N),Je=N;ot&&(Je.credential=ot,Je.tenantId=Ae.tenantId||void 0,Je.email=Ae.email||void 0,Je.phoneNumber=Ae.phoneNumber||void 0)}}(j,U),U}).then(U=>{const Ae=U.user;return{operationType:U.operationType,credential:en(U),additionalUserInfo:k.al(U),user:hr.getOrCreate(Ae)}})}function nn(j,N){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,p.Z)(function*(j,N){const U=yield N;return{verificationId:U.verificationId,confirm:ie=>Pn(j,U.confirm(ie))}})).apply(this,arguments)}class rt{constructor(N,U){this.resolver=U,this.auth=N.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(N){return Pn(Hn(this.auth),this.resolver.resolveSignIn(N))}}class hr{constructor(N){this._delegate=N,this.multiFactor=k.ao(N)}static getOrCreate(N){return hr.USER_MAP.has(N)||hr.USER_MAP.set(N,new hr(N)),hr.USER_MAP.get(N)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(N){return this._delegate.getIdTokenResult(N)}getIdToken(N){return this._delegate.getIdToken(N)}linkAndRetrieveDataWithCredential(N){return this.linkWithCredential(N)}linkWithCredential(N){var U=this;return(0,p.Z)(function*(){return Pn(U.auth,k.Z(U._delegate,N))})()}linkWithPhoneNumber(N,U){var ie=this;return(0,p.Z)(function*(){return nn(ie.auth,k.l(ie._delegate,N,U))})()}linkWithPopup(N){var U=this;return(0,p.Z)(function*(){return Pn(U.auth,k.d(U._delegate,N,Ye))})()}linkWithRedirect(N){var U=this;return(0,p.Z)(function*(){return yield lr(k.aE(U.auth)),k.g(U._delegate,N,Ye)})()}reauthenticateAndRetrieveDataWithCredential(N){return this.reauthenticateWithCredential(N)}reauthenticateWithCredential(N){var U=this;return(0,p.Z)(function*(){return Pn(U.auth,k._(U._delegate,N))})()}reauthenticateWithPhoneNumber(N,U){return nn(this.auth,k.r(this._delegate,N,U))}reauthenticateWithPopup(N){return Pn(this.auth,k.e(this._delegate,N,Ye))}reauthenticateWithRedirect(N){var U=this;return(0,p.Z)(function*(){return yield lr(k.aE(U.auth)),k.h(U._delegate,N,Ye)})()}sendEmailVerification(N){return k.ab(this._delegate,N)}unlink(N){var U=this;return(0,p.Z)(function*(){return yield k.ak(U._delegate,N),U})()}updateEmail(N){return k.ag(this._delegate,N)}updatePassword(N){return k.ah(this._delegate,N)}updatePhoneNumber(N){return k.u(this._delegate,N)}updateProfile(N){return k.af(this._delegate,N)}verifyBeforeUpdateEmail(N,U){return k.ac(this._delegate,N,U)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}hr.USER_MAP=new WeakMap;const ze=k.ax;let be=(()=>{class j{constructor(U,ie){if(this.app=U,ie.isInitialized())return this._delegate=ie.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Ae}=U.options;ze(Ae,"invalid-api-key",{appName:U.name}),ze(Ae,"invalid-api-key",{appName:U.name});const ot="undefined"!=typeof window?Ye:void 0;this._delegate=ie.initialize({options:{persistence:yt(Ae,U.name),popupRedirectResolver:ot}}),this._delegate._updateErrorMap(k.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?hr.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(U){this._delegate.languageCode=U}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(U){this._delegate.tenantId=U}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(U,ie){k.G(this._delegate,U,ie)}applyActionCode(U){return k.a2(this._delegate,U)}checkActionCode(U){return k.a3(this._delegate,U)}confirmPasswordReset(U,ie){return k.a1(this._delegate,U,ie)}createUserWithEmailAndPassword(U,ie){var Ae=this;return(0,p.Z)(function*(){return Pn(Ae._delegate,k.a5(Ae._delegate,U,ie))})()}fetchProvidersForEmail(U){return this.fetchSignInMethodsForEmail(U)}fetchSignInMethodsForEmail(U){return k.aa(this._delegate,U)}isSignInWithEmailLink(U){return k.a8(this._delegate,U)}getRedirectResult(){var U=this;return(0,p.Z)(function*(){ze(Me(),U._delegate,"operation-not-supported-in-this-environment");const ie=yield k.j(U._delegate,Ye);return ie?Pn(U._delegate,Promise.resolve(ie)):{credential:null,user:null}})()}addFrameworkForLogging(U){!function(j,N){(0,k.aE)(j)._logFramework(N)}(this._delegate,U)}onAuthStateChanged(U,ie,Ae){const{next:ot,error:Je,complete:Lt}=Re(U,ie,Ae);return this._delegate.onAuthStateChanged(ot,Je,Lt)}onIdTokenChanged(U,ie,Ae){const{next:ot,error:Je,complete:Lt}=Re(U,ie,Ae);return this._delegate.onIdTokenChanged(ot,Je,Lt)}sendSignInLinkToEmail(U,ie){return k.a7(this._delegate,U,ie)}sendPasswordResetEmail(U,ie){return k.a0(this._delegate,U,ie||void 0)}setPersistence(U){var ie=this;return(0,p.Z)(function*(){let Ae;switch(function(j,N){Jr(Object.values(bn).includes(N),j,"invalid-persistence-type"),(0,ne.b$)()?Jr(N!==bn.SESSION,j,"unsupported-persistence-type"):(0,ne.UG)()?Jr(N===bn.NONE,j,"unsupported-persistence-type"):$n()?Jr(N===bn.NONE||N===bn.LOCAL&&(0,ne.hl)(),j,"unsupported-persistence-type"):Jr(N===bn.NONE||Dr(),j,"unsupported-persistence-type")}(ie._delegate,U),U){case bn.SESSION:Ae=k.a;break;case bn.LOCAL:Ae=(yield k.ay(k.i)._isAvailable())?k.i:k.b;break;case bn.NONE:Ae=k.L;break;default:return k.at("argument-error",{appName:ie._delegate.name})}return ie._delegate.setPersistence(Ae)})()}signInAndRetrieveDataWithCredential(U){return this.signInWithCredential(U)}signInAnonymously(){return Pn(this._delegate,k.X(this._delegate))}signInWithCredential(U){return Pn(this._delegate,k.Y(this._delegate,U))}signInWithCustomToken(U){return Pn(this._delegate,k.$(this._delegate,U))}signInWithEmailAndPassword(U,ie){return Pn(this._delegate,k.a6(this._delegate,U,ie))}signInWithEmailLink(U,ie){return Pn(this._delegate,k.a9(this._delegate,U,ie))}signInWithPhoneNumber(U,ie){return nn(this._delegate,k.s(this._delegate,U,ie))}signInWithPopup(U){var ie=this;return(0,p.Z)(function*(){return ze(Me(),ie._delegate,"operation-not-supported-in-this-environment"),Pn(ie._delegate,k.c(ie._delegate,U,Ye))})()}signInWithRedirect(U){var ie=this;return(0,p.Z)(function*(){return ze(Me(),ie._delegate,"operation-not-supported-in-this-environment"),yield lr(ie._delegate),k.f(ie._delegate,U,Ye)})()}updateCurrentUser(U){return this._delegate.updateCurrentUser(U)}verifyPasswordResetCode(U){return k.a4(this._delegate,U)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return j.Persistence=bn,j})();function Re(j,N,U){let ie=j;"function"!=typeof j&&({next:ie,error:N,complete:U}=j);const Ae=ie;return{next:Je=>Ae(Je&&hr.getOrCreate(Je)),error:N,complete:U}}function yt(j,N){const U=function(j,N){const U=on();if(!U)return[];const ie=k.az(Ar,j,N);switch(U.getItem(ie)){case bn.NONE:return[k.L];case bn.LOCAL:return[k.i,k.a];case bn.SESSION:return[k.a];default:return[]}}(j,N);if("undefined"!=typeof self&&!U.includes(k.i)&&U.push(k.i),"undefined"!=typeof window)for(const ie of[k.b,k.a])U.includes(ie)||U.push(ie);return U.includes(k.L)||U.push(k.L),U}class Et{constructor(){this.providerId="phone",this._delegate=new k.P(Hn(H.Z.auth()))}static credential(N,U){return k.P.credential(N,U)}verifyPhoneNumber(N,U){return this._delegate.verifyPhoneNumber(N,U)}unwrap(){return this._delegate}}Et.PHONE_SIGN_IN_METHOD=k.P.PHONE_SIGN_IN_METHOD,Et.PROVIDER_ID=k.P.PROVIDER_ID;const zt=k.ax;var j;(j=H.Z).INTERNAL.registerComponent(new ve.wA("auth-compat",N=>{const U=N.getProvider("app-compat").getImmediate(),ie=N.getProvider("auth");return new be(U,ie)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:k.A.EMAIL_SIGNIN,PASSWORD_RESET:k.A.PASSWORD_RESET,RECOVER_EMAIL:k.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:k.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:k.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:k.A.VERIFY_EMAIL}},EmailAuthProvider:k.M,FacebookAuthProvider:k.N,GithubAuthProvider:k.T,GoogleAuthProvider:k.Q,OAuthProvider:k.U,SAMLAuthProvider:k.V,PhoneAuthProvider:Et,PhoneMultiFactorGenerator:k.m,RecaptchaVerifier:class{constructor(N,U,ie=H.Z.app()){var Ae;zt(null===(Ae=ie.options)||void 0===Ae?void 0:Ae.apiKey,"invalid-api-key",{appName:ie.name}),this._delegate=new k.R(N,U,ie.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}},TwitterAuthProvider:k.W,Auth:be,AuthCredential:k.H,Error:ne.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),j.registerVersion("@firebase/auth-compat","0.2.23")},7574:(Ke,ye,L)=>{"use strict";L.d(ye,{y:()=>B});var p=L(7393),k=L(9181),ne=L(6490),oe=L(6554),ve=L(4487);var V=L(2494);let B=(()=>{class X{constructor(Ce){this._isScalar=!1,Ce&&(this._subscribe=Ce)}lift(Ce){const me=new X;return me.source=this,me.operator=Ce,me}subscribe(Ce,me,ge){const{operator:Se}=this,xe=function(X,de,Ce){if(X){if(X instanceof p.L)return X;if(X[k.b])return X[k.b]()}return X||de||Ce?new p.L(X,de,Ce):new p.L(ne.c)}(Ce,me,ge);if(xe.add(Se?Se.call(xe,this.source):this.source||V.v.useDeprecatedSynchronousErrorHandling&&!xe.syncErrorThrowable?this._subscribe(xe):this._trySubscribe(xe)),V.v.useDeprecatedSynchronousErrorHandling&&xe.syncErrorThrowable&&(xe.syncErrorThrowable=!1,xe.syncErrorThrown))throw xe.syncErrorValue;return xe}_trySubscribe(Ce){try{return this._subscribe(Ce)}catch(me){V.v.useDeprecatedSynchronousErrorHandling&&(Ce.syncErrorThrown=!0,Ce.syncErrorValue=me),function(X){for(;X;){const{closed:de,destination:Ce,isStopped:me}=X;if(de||me)return!1;X=Ce&&Ce instanceof p.L?Ce:null}return!0}(Ce)?Ce.error(me):console.warn(me)}}forEach(Ce,me){return new(me=te(me))((ge,Se)=>{let xe;xe=this.subscribe(De=>{try{Ce(De)}catch(Ze){Se(Ze),xe&&xe.unsubscribe()}},Se,ge)})}_subscribe(Ce){const{source:me}=this;return me&&me.subscribe(Ce)}[oe.L](){return this}pipe(...Ce){return 0===Ce.length?this:function(X){return 0===X.length?ve.y:1===X.length?X[0]:function(Ce){return X.reduce((me,ge)=>ge(me),Ce)}}(Ce)(this)}toPromise(Ce){return new(Ce=te(Ce))((me,ge)=>{let Se;this.subscribe(xe=>Se=xe,xe=>ge(xe),()=>me(Se))})}}return X.create=de=>new X(de),X})();function te(X){if(X||(X=V.v.Promise||Promise),!X)throw new Error("no Promise impl found");return X}},6490:(Ke,ye,L)=>{"use strict";L.d(ye,{c:()=>k});var p=L(2494),H=L(4449);const k={closed:!0,next(ne){},error(ne){if(p.v.useDeprecatedSynchronousErrorHandling)throw ne;(0,H.z)(ne)},complete(){}}},9765:(Ke,ye,L)=>{"use strict";L.d(ye,{Yc:()=>ve,xQ:()=>ae});var p=L(7574),H=L(7393),k=L(5319),ne=L(7971),se=L(8858),oe=L(9181);class ve extends H.L{constructor(B){super(B),this.destination=B}}let ae=(()=>{class V extends p.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[oe.b](){return new ve(this)}lift(te){const X=new re(this,this);return X.operator=te,X}next(te){if(this.closed)throw new ne.N;if(!this.isStopped){const{observers:X}=this,de=X.length,Ce=X.slice();for(let me=0;me<de;me++)Ce[me].next(te)}}error(te){if(this.closed)throw new ne.N;this.hasError=!0,this.thrownError=te,this.isStopped=!0;const{observers:X}=this,de=X.length,Ce=X.slice();for(let me=0;me<de;me++)Ce[me].error(te);this.observers.length=0}complete(){if(this.closed)throw new ne.N;this.isStopped=!0;const{observers:te}=this,X=te.length,de=te.slice();for(let Ce=0;Ce<X;Ce++)de[Ce].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(te){if(this.closed)throw new ne.N;return super._trySubscribe(te)}_subscribe(te){if(this.closed)throw new ne.N;return this.hasError?(te.error(this.thrownError),k.w.EMPTY):this.isStopped?(te.complete(),k.w.EMPTY):(this.observers.push(te),new se.W(this,te))}asObservable(){const te=new p.y;return te.source=this,te}}return V.create=(B,te)=>new re(B,te),V})();class re extends ae{constructor(B,te){super(),this.destination=B,this.source=te}next(B){const{destination:te}=this;te&&te.next&&te.next(B)}error(B){const{destination:te}=this;te&&te.error&&this.destination.error(B)}complete(){const{destination:B}=this;B&&B.complete&&this.destination.complete()}_subscribe(B){const{source:te}=this;return te?this.source.subscribe(B):k.w.EMPTY}}},8858:(Ke,ye,L)=>{"use strict";L.d(ye,{W:()=>H});var p=L(5319);class H extends p.w{constructor(ne,se){super(),this.subject=ne,this.subscriber=se,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const ne=this.subject,se=ne.observers;if(this.subject=null,!se||0===se.length||ne.isStopped||ne.closed)return;const oe=se.indexOf(this.subscriber);-1!==oe&&se.splice(oe,1)}}},7393:(Ke,ye,L)=>{"use strict";L.d(ye,{L:()=>ve});var p=L(9105),H=L(6490),k=L(5319),ne=L(9181),se=L(2494),oe=L(4449);class ve extends k.w{constructor(V,B,te){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=H.c;break;case 1:if(!V){this.destination=H.c;break}if("object"==typeof V){V instanceof ve?(this.syncErrorThrowable=V.syncErrorThrowable,this.destination=V,V.add(this)):(this.syncErrorThrowable=!0,this.destination=new ae(this,V));break}default:this.syncErrorThrowable=!0,this.destination=new ae(this,V,B,te)}}[ne.b](){return this}static create(V,B,te){const X=new ve(V,B,te);return X.syncErrorThrowable=!1,X}next(V){this.isStopped||this._next(V)}error(V){this.isStopped||(this.isStopped=!0,this._error(V))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(V){this.destination.next(V)}_error(V){this.destination.error(V),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:V}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=V,this}}class ae extends ve{constructor(V,B,te,X){super(),this._parentSubscriber=V;let de,Ce=this;(0,p.m)(B)?de=B:B&&(de=B.next,te=B.error,X=B.complete,B!==H.c&&(Ce=Object.create(B),(0,p.m)(Ce.unsubscribe)&&this.add(Ce.unsubscribe.bind(Ce)),Ce.unsubscribe=this.unsubscribe.bind(this))),this._context=Ce,this._next=de,this._error=te,this._complete=X}next(V){if(!this.isStopped&&this._next){const{_parentSubscriber:B}=this;se.v.useDeprecatedSynchronousErrorHandling&&B.syncErrorThrowable?this.__tryOrSetError(B,this._next,V)&&this.unsubscribe():this.__tryOrUnsub(this._next,V)}}error(V){if(!this.isStopped){const{_parentSubscriber:B}=this,{useDeprecatedSynchronousErrorHandling:te}=se.v;if(this._error)te&&B.syncErrorThrowable?(this.__tryOrSetError(B,this._error,V),this.unsubscribe()):(this.__tryOrUnsub(this._error,V),this.unsubscribe());else if(B.syncErrorThrowable)te?(B.syncErrorValue=V,B.syncErrorThrown=!0):(0,oe.z)(V),this.unsubscribe();else{if(this.unsubscribe(),te)throw V;(0,oe.z)(V)}}}complete(){if(!this.isStopped){const{_parentSubscriber:V}=this;if(this._complete){const B=()=>this._complete.call(this._context);se.v.useDeprecatedSynchronousErrorHandling&&V.syncErrorThrowable?(this.__tryOrSetError(V,B),this.unsubscribe()):(this.__tryOrUnsub(B),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(V,B){try{V.call(this._context,B)}catch(te){if(this.unsubscribe(),se.v.useDeprecatedSynchronousErrorHandling)throw te;(0,oe.z)(te)}}__tryOrSetError(V,B,te){if(!se.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{B.call(this._context,te)}catch(X){return se.v.useDeprecatedSynchronousErrorHandling?(V.syncErrorValue=X,V.syncErrorThrown=!0,!0):((0,oe.z)(X),!0)}return!1}_unsubscribe(){const{_parentSubscriber:V}=this;this._context=null,this._parentSubscriber=null,V.unsubscribe()}}},5319:(Ke,ye,L)=>{"use strict";L.d(ye,{w:()=>oe});var p=L(9796),H=L(1555),k=L(9105);const se=(()=>{function ae(re){return Error.call(this),this.message=re?`${re.length} errors occurred during unsubscription:\n${re.map((V,B)=>`${B+1}) ${V.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=re,this}return ae.prototype=Object.create(Error.prototype),ae})();class oe{constructor(re){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,re&&(this._ctorUnsubscribe=!0,this._unsubscribe=re)}unsubscribe(){let re;if(this.closed)return;let{_parentOrParents:V,_ctorUnsubscribe:B,_unsubscribe:te,_subscriptions:X}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,V instanceof oe)V.remove(this);else if(null!==V)for(let de=0;de<V.length;++de)V[de].remove(this);if((0,k.m)(te)){B&&(this._unsubscribe=void 0);try{te.call(this)}catch(de){re=de instanceof se?ve(de.errors):[de]}}if((0,p.k)(X)){let de=-1,Ce=X.length;for(;++de<Ce;){const me=X[de];if((0,H.K)(me))try{me.unsubscribe()}catch(ge){re=re||[],ge instanceof se?re=re.concat(ve(ge.errors)):re.push(ge)}}}if(re)throw new se(re)}add(re){let V=re;if(!re)return oe.EMPTY;switch(typeof re){case"function":V=new oe(re);case"object":if(V===this||V.closed||"function"!=typeof V.unsubscribe)return V;if(this.closed)return V.unsubscribe(),V;if(!(V instanceof oe)){const X=V;V=new oe,V._subscriptions=[X]}break;default:throw new Error("unrecognized teardown "+re+" added to Subscription.")}let{_parentOrParents:B}=V;if(null===B)V._parentOrParents=this;else if(B instanceof oe){if(B===this)return V;V._parentOrParents=[B,this]}else{if(-1!==B.indexOf(this))return V;B.push(this)}const te=this._subscriptions;return null===te?this._subscriptions=[V]:te.push(V),V}remove(re){const V=this._subscriptions;if(V){const B=V.indexOf(re);-1!==B&&V.splice(B,1)}}}var ae;function ve(ae){return ae.reduce((re,V)=>re.concat(V instanceof se?V.errors:V),[])}oe.EMPTY=((ae=new oe).closed=!0,ae)},2494:(Ke,ye,L)=>{"use strict";L.d(ye,{v:()=>H});let p=!1;const H={Promise:void 0,set useDeprecatedSynchronousErrorHandling(k){if(k){const ne=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+ne.stack)}else p&&console.log("RxJS: Back to a better error behavior. Thank you. <3");p=k},get useDeprecatedSynchronousErrorHandling(){return p}}},5345:(Ke,ye,L)=>{"use strict";L.d(ye,{IY:()=>ne,Ds:()=>oe,ft:()=>ae});var p=L(7393),H=L(7574),k=L(7444);class ne extends p.L{constructor(V){super(),this.parent=V}_next(V){this.parent.notifyNext(V)}_error(V){this.parent.notifyError(V),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class oe extends p.L{notifyNext(V){this.destination.next(V)}notifyError(V){this.destination.error(V)}notifyComplete(){this.destination.complete()}}function ae(re,V){if(V.closed)return;if(re instanceof H.y)return re.subscribe(V);let B;try{B=(0,k.s)(re)(V)}catch(te){V.error(te)}return B}},2441:(Ke,ye,L)=>{"use strict";L.d(ye,{c:()=>se,N:()=>oe});var p=L(9765),H=L(7574),k=L(5319),ne=L(1307);class se extends H.y{constructor(B,te){super(),this.source=B,this.subjectFactory=te,this._refCount=0,this._isComplete=!1}_subscribe(B){return this.getSubject().subscribe(B)}getSubject(){const B=this._subject;return(!B||B.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let B=this._connection;return B||(this._isComplete=!1,B=this._connection=new k.w,B.add(this.source.subscribe(new ve(this.getSubject(),this))),B.closed&&(this._connection=null,B=k.w.EMPTY)),B}refCount(){return(0,ne.x)()(this)}}const oe=(()=>{const V=se.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:V._subscribe},_isComplete:{value:V._isComplete,writable:!0},getSubject:{value:V.getSubject},connect:{value:V.connect},refCount:{value:V.refCount}}})();class ve extends p.Yc{constructor(B,te){super(B),this.connectable=te}_error(B){this._unsubscribe(),super._error(B)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const B=this.connectable;if(B){this.connectable=null;const te=B._connection;B._refCount=0,B._subject=null,B._connection=null,te&&te.unsubscribe()}}}},9193:(Ke,ye,L)=>{"use strict";L.d(ye,{E:()=>H,c:()=>k});var p=L(7574);const H=new p.y(se=>se.complete());function k(se){return se?function(se){return new p.y(oe=>se.schedule(()=>oe.complete()))}(se):H}},4402:(Ke,ye,L)=>{"use strict";L.d(ye,{D:()=>Ce});var p=L(7574),H=L(7444),k=L(5319),ne=L(6554),ve=L(4087),ae=L(377),B=L(4072),te=L(9489);function Ce(me,ge){return ge?function(me,ge){if(null!=me){if(function(me){return me&&"function"==typeof me[ne.L]}(me))return function(me,ge){return new p.y(Se=>{const xe=new k.w;return xe.add(ge.schedule(()=>{const De=me[ne.L]();xe.add(De.subscribe({next(Ze){xe.add(ge.schedule(()=>Se.next(Ze)))},error(Ze){xe.add(ge.schedule(()=>Se.error(Ze)))},complete(){xe.add(ge.schedule(()=>Se.complete()))}}))})),xe})}(me,ge);if((0,B.t)(me))return function(me,ge){return new p.y(Se=>{const xe=new k.w;return xe.add(ge.schedule(()=>me.then(De=>{xe.add(ge.schedule(()=>{Se.next(De),xe.add(ge.schedule(()=>Se.complete()))}))},De=>{xe.add(ge.schedule(()=>Se.error(De)))}))),xe})}(me,ge);if((0,te.z)(me))return(0,ve.r)(me,ge);if(function(me){return me&&"function"==typeof me[ae.hZ]}(me)||"string"==typeof me)return function(me,ge){if(!me)throw new Error("Iterable cannot be null");return new p.y(Se=>{const xe=new k.w;let De;return xe.add(()=>{De&&"function"==typeof De.return&&De.return()}),xe.add(ge.schedule(()=>{De=me[ae.hZ](),xe.add(ge.schedule(function(){if(Se.closed)return;let Ze,ut;try{const $e=De.next();Ze=$e.value,ut=$e.done}catch($e){return void Se.error($e)}ut?Se.complete():(Se.next(Ze),this.schedule())}))})),xe})}(me,ge)}throw new TypeError((null!==me&&typeof me||me)+" is not observable")}(me,ge):me instanceof p.y?me:new p.y((0,H.s)(me))}},6693:(Ke,ye,L)=>{"use strict";L.d(ye,{n:()=>ne});var p=L(7574),H=L(5015),k=L(4087);function ne(se,oe){return oe?(0,k.r)(se,oe):new p.y((0,H.V)(se))}},6682:(Ke,ye,L)=>{"use strict";L.d(ye,{T:()=>se});var p=L(7574),H=L(4869),k=L(3282),ne=L(6693);function se(...oe){let ve=Number.POSITIVE_INFINITY,ae=null,re=oe[oe.length-1];return(0,H.K)(re)?(ae=oe.pop(),oe.length>1&&"number"==typeof oe[oe.length-1]&&(ve=oe.pop())):"number"==typeof re&&(ve=oe.pop()),null===ae&&1===oe.length&&oe[0]instanceof p.y?oe[0]:(0,k.J)(ve)((0,ne.n)(oe,ae))}},5917:(Ke,ye,L)=>{"use strict";L.d(ye,{of:()=>ne});var p=L(4869),H=L(6693),k=L(4087);function ne(...se){let oe=se[se.length-1];return(0,p.K)(oe)?(se.pop(),(0,k.r)(se,oe)):(0,H.n)(se)}},8002:(Ke,ye,L)=>{"use strict";L.d(ye,{U:()=>H});var p=L(7393);function H(se,oe){return function(ae){if("function"!=typeof se)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return ae.lift(new k(se,oe))}}class k{constructor(oe,ve){this.project=oe,this.thisArg=ve}call(oe,ve){return ve.subscribe(new ne(oe,this.project,this.thisArg))}}class ne extends p.L{constructor(oe,ve,ae){super(oe),this.project=ve,this.count=0,this.thisArg=ae||this}_next(oe){let ve;try{ve=this.project.call(this.thisArg,oe,this.count++)}catch(ae){return void this.destination.error(ae)}this.destination.next(ve)}}},3282:(Ke,ye,L)=>{"use strict";L.d(ye,{J:()=>k});var p=L(9773),H=L(4487);function k(ne=Number.POSITIVE_INFINITY){return(0,p.zg)(H.y,ne)}},9773:(Ke,ye,L)=>{"use strict";L.d(ye,{zg:()=>ne});var p=L(8002),H=L(4402),k=L(5345);function ne(ae,re,V=Number.POSITIVE_INFINITY){return"function"==typeof re?B=>B.pipe(ne((te,X)=>(0,H.D)(ae(te,X)).pipe((0,p.U)((de,Ce)=>re(te,de,X,Ce))),V)):("number"==typeof re&&(V=re),B=>B.lift(new se(ae,V)))}class se{constructor(re,V=Number.POSITIVE_INFINITY){this.project=re,this.concurrent=V}call(re,V){return V.subscribe(new oe(re,this.project,this.concurrent))}}class oe extends k.Ds{constructor(re,V,B=Number.POSITIVE_INFINITY){super(re),this.project=V,this.concurrent=B,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(re){this.active<this.concurrent?this._tryNext(re):this.buffer.push(re)}_tryNext(re){let V;const B=this.index++;try{V=this.project(re,B)}catch(te){return void this.destination.error(te)}this.active++,this._innerSub(V)}_innerSub(re){const V=new k.IY(this),B=this.destination;B.add(V);const te=(0,k.ft)(re,V);te!==V&&B.add(te)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(re){this.destination.next(re)}notifyComplete(){const re=this.buffer;this.active--,re.length>0?this._next(re.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},309:(Ke,ye,L)=>{"use strict";L.d(ye,{ht:()=>B,QV:()=>re});var p=L(7393),H=L(9193),k=L(5917),ne=L(7574);class ae{constructor(de,Ce,me){this.kind=de,this.value=Ce,this.error=me,this.hasValue="N"===de}observe(de){switch(this.kind){case"N":return de.next&&de.next(this.value);case"E":return de.error&&de.error(this.error);case"C":return de.complete&&de.complete()}}do(de,Ce,me){switch(this.kind){case"N":return de&&de(this.value);case"E":return Ce&&Ce(this.error);case"C":return me&&me()}}accept(de,Ce,me){return de&&"function"==typeof de.next?this.observe(de):this.do(de,Ce,me)}toObservable(){switch(this.kind){case"N":return(0,k.of)(this.value);case"E":return X=this.error,new ne.y(Ce=>Ce.error(X));case"C":return(0,H.c)()}var X;throw new Error("unexpected notification kind value")}static createNext(de){return void 0!==de?new ae("N",de):ae.undefinedValueNotification}static createError(de){return new ae("E",void 0,de)}static createComplete(){return ae.completeNotification}}function re(X,de=0){return function(me){return me.lift(new V(X,de))}}ae.completeNotification=new ae("C"),ae.undefinedValueNotification=new ae("N",void 0);class V{constructor(de,Ce=0){this.scheduler=de,this.delay=Ce}call(de,Ce){return Ce.subscribe(new B(de,this.scheduler,this.delay))}}class B extends p.L{constructor(de,Ce,me=0){super(de),this.scheduler=Ce,this.delay=me}static dispatch(de){const{notification:Ce,destination:me}=de;Ce.observe(me),this.unsubscribe()}scheduleMessage(de){this.destination.add(this.scheduler.schedule(B.dispatch,this.delay,new te(de,this.destination)))}_next(de){this.scheduleMessage(ae.createNext(de))}_error(de){this.scheduleMessage(ae.createError(de)),this.unsubscribe()}_complete(){this.scheduleMessage(ae.createComplete()),this.unsubscribe()}}class te{constructor(de,Ce){this.notification=de,this.destination=Ce}}},1307:(Ke,ye,L)=>{"use strict";L.d(ye,{x:()=>H});var p=L(7393);function H(){return function(oe){return oe.lift(new k(oe))}}class k{constructor(oe){this.connectable=oe}call(oe,ve){const{connectable:ae}=this;ae._refCount++;const re=new ne(oe,ae),V=ve.subscribe(re);return re.closed||(re.connection=ae.connect()),V}}class ne extends p.L{constructor(oe,ve){super(oe),this.connectable=ve}_unsubscribe(){const{connectable:oe}=this;if(!oe)return void(this.connection=null);this.connectable=null;const ve=oe._refCount;if(ve<=0)return void(this.connection=null);if(oe._refCount=ve-1,ve>1)return void(this.connection=null);const{connection:ae}=this,re=oe._connection;this.connection=null,re&&(!ae||re===ae)&&re.unsubscribe()}}},3101:(Ke,ye,L)=>{"use strict";L.d(ye,{R:()=>ge});var p=L(7574);let H=1;const k=Promise.resolve(),ne={};function se(xe){return xe in ne&&(delete ne[xe],!0)}const oe={setImmediate(xe){const De=H++;return ne[De]=!0,k.then(()=>se(De)&&xe()),De},clearImmediate(xe){se(xe)}};var ae=L(6465),V=L(6102);const X=new class extends V.v{flush(De){this.active=!0,this.scheduled=void 0;const{actions:Ze}=this;let ut,$e=-1,Ft=Ze.length;De=De||Ze.shift();do{if(ut=De.execute(De.state,De.delay))break}while(++$e<Ft&&(De=Ze.shift()));if(this.active=!1,ut){for(;++$e<Ft&&(De=Ze.shift());)De.unsubscribe();throw ut}}}(class extends ae.o{constructor(De,Ze){super(De,Ze),this.scheduler=De,this.work=Ze}requestAsyncId(De,Ze,ut=0){return null!==ut&&ut>0?super.requestAsyncId(De,Ze,ut):(De.actions.push(this),De.scheduled||(De.scheduled=oe.setImmediate(De.flush.bind(De,null))))}recycleAsyncId(De,Ze,ut=0){if(null!==ut&&ut>0||null===ut&&this.delay>0)return super.recycleAsyncId(De,Ze,ut);0===De.actions.length&&(oe.clearImmediate(Ze),De.scheduled=void 0)}});var de=L(9796);class me extends p.y{constructor(De,Ze=0,ut=X){var xe;super(),this.source=De,this.delayTime=Ze,this.scheduler=ut,(!(!(0,de.k)(xe=Ze)&&xe-parseFloat(xe)+1>=0)||Ze<0)&&(this.delayTime=0),(!ut||"function"!=typeof ut.schedule)&&(this.scheduler=X)}static create(De,Ze=0,ut=X){return new me(De,Ze,ut)}static dispatch(De){const{source:Ze,subscriber:ut}=De;return this.add(Ze.subscribe(ut))}_subscribe(De){return this.scheduler.schedule(me.dispatch,this.delayTime,{source:this.source,subscriber:De})}}function ge(xe,De=0){return function(ut){return ut.lift(new Se(xe,De))}}class Se{constructor(De,Ze){this.scheduler=De,this.delay=Ze}call(De,Ze){return new me(Ze,this.delay,this.scheduler).subscribe(De)}}},3342:(Ke,ye,L)=>{"use strict";L.d(ye,{b:()=>ne});var p=L(7393);function H(){}var k=L(9105);function ne(ve,ae,re){return function(B){return B.lift(new se(ve,ae,re))}}class se{constructor(ae,re,V){this.nextOrObserver=ae,this.error=re,this.complete=V}call(ae,re){return re.subscribe(new oe(ae,this.nextOrObserver,this.error,this.complete))}}class oe extends p.L{constructor(ae,re,V,B){super(ae),this._tapNext=H,this._tapError=H,this._tapComplete=H,this._tapError=V||H,this._tapComplete=B||H,(0,k.m)(re)?(this._context=this,this._tapNext=re):re&&(this._context=re,this._tapNext=re.next||H,this._tapError=re.error||H,this._tapComplete=re.complete||H)}_next(ae){try{this._tapNext.call(this._context,ae)}catch(re){return void this.destination.error(re)}this.destination.next(ae)}_error(ae){try{this._tapError.call(this._context,ae)}catch(re){return void this.destination.error(re)}this.destination.error(ae)}_complete(){try{this._tapComplete.call(this._context)}catch(ae){return void this.destination.error(ae)}return this.destination.complete()}}},4087:(Ke,ye,L)=>{"use strict";L.d(ye,{r:()=>k});var p=L(7574),H=L(5319);function k(ne,se){return new p.y(oe=>{const ve=new H.w;let ae=0;return ve.add(se.schedule(function(){ae!==ne.length?(oe.next(ne[ae++]),oe.closed||ve.add(this.schedule())):oe.complete()})),ve})}},6465:(Ke,ye,L)=>{"use strict";L.d(ye,{o:()=>k});var p=L(5319);class H extends p.w{constructor(se,oe){super()}schedule(se,oe=0){return this}}class k extends H{constructor(se,oe){super(se,oe),this.scheduler=se,this.work=oe,this.pending=!1}schedule(se,oe=0){if(this.closed)return this;this.state=se;const ve=this.id,ae=this.scheduler;return null!=ve&&(this.id=this.recycleAsyncId(ae,ve,oe)),this.pending=!0,this.delay=oe,this.id=this.id||this.requestAsyncId(ae,this.id,oe),this}requestAsyncId(se,oe,ve=0){return setInterval(se.flush.bind(se,this),ve)}recycleAsyncId(se,oe,ve=0){if(null!==ve&&this.delay===ve&&!1===this.pending)return oe;clearInterval(oe)}execute(se,oe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ve=this._execute(se,oe);if(ve)return ve;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(se,oe){let ae,ve=!1;try{this.work(se)}catch(re){ve=!0,ae=!!re&&re||new Error(re)}if(ve)return this.unsubscribe(),ae}_unsubscribe(){const se=this.id,oe=this.scheduler,ve=oe.actions,ae=ve.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==ae&&ve.splice(ae,1),null!=se&&(this.id=this.recycleAsyncId(oe,se,null)),this.delay=null}}},6102:(Ke,ye,L)=>{"use strict";L.d(ye,{v:()=>H});let p=(()=>{class k{constructor(se,oe=k.now){this.SchedulerAction=se,this.now=oe}schedule(se,oe=0,ve){return new this.SchedulerAction(this,se).schedule(ve,oe)}}return k.now=()=>Date.now(),k})();class H extends p{constructor(ne,se=p.now){super(ne,()=>H.delegate&&H.delegate!==this?H.delegate.now():se()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(ne,se=0,oe){return H.delegate&&H.delegate!==this?H.delegate.schedule(ne,se,oe):super.schedule(ne,se,oe)}flush(ne){const{actions:se}=this;if(this.active)return void se.push(ne);let oe;this.active=!0;do{if(oe=ne.execute(ne.state,ne.delay))break}while(ne=se.shift());if(this.active=!1,oe){for(;ne=se.shift();)ne.unsubscribe();throw oe}}}},3637:(Ke,ye,L)=>{"use strict";L.d(ye,{z:()=>k});var p=L(6465);const k=new(L(6102).v)(p.o)},7771:(Ke,ye,L)=>{"use strict";L.d(ye,{c:()=>oe,N:()=>se});var p=L(6465),k=L(6102);const se=new class extends k.v{}(class extends p.o{constructor(ae,re){super(ae,re),this.scheduler=ae,this.work=re}schedule(ae,re=0){return re>0?super.schedule(ae,re):(this.delay=re,this.state=ae,this.scheduler.flush(this),this)}execute(ae,re){return re>0||this.closed?super.execute(ae,re):this._execute(ae,re)}requestAsyncId(ae,re,V=0){return null!==V&&V>0||null===V&&this.delay>0?super.requestAsyncId(ae,re,V):ae.flush(this)}}),oe=se},377:(Ke,ye,L)=>{"use strict";L.d(ye,{hZ:()=>H});const H="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(Ke,ye,L)=>{"use strict";L.d(ye,{L:()=>p});const p="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(Ke,ye,L)=>{"use strict";L.d(ye,{b:()=>p});const p="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:(Ke,ye,L)=>{"use strict";L.d(ye,{N:()=>H});const H=(()=>{function k(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return k.prototype=Object.create(Error.prototype),k})()},4449:(Ke,ye,L)=>{"use strict";function p(H){setTimeout(()=>{throw H},0)}L.d(ye,{z:()=>p})},4487:(Ke,ye,L)=>{"use strict";function p(H){return H}L.d(ye,{y:()=>p})},9796:(Ke,ye,L)=>{"use strict";L.d(ye,{k:()=>p});const p=Array.isArray||(H=>H&&"number"==typeof H.length)},9489:(Ke,ye,L)=>{"use strict";L.d(ye,{z:()=>p});const p=H=>H&&"number"==typeof H.length&&"function"!=typeof H},9105:(Ke,ye,L)=>{"use strict";function p(H){return"function"==typeof H}L.d(ye,{m:()=>p})},1555:(Ke,ye,L)=>{"use strict";function p(H){return null!==H&&"object"==typeof H}L.d(ye,{K:()=>p})},4072:(Ke,ye,L)=>{"use strict";function p(H){return!!H&&"function"!=typeof H.subscribe&&"function"==typeof H.then}L.d(ye,{t:()=>p})},4869:(Ke,ye,L)=>{"use strict";function p(H){return H&&"function"==typeof H.schedule}L.d(ye,{K:()=>p})},7444:(Ke,ye,L)=>{"use strict";L.d(ye,{s:()=>B});var p=L(5015),H=L(4449),ne=L(377),oe=L(6554),ae=L(9489),re=L(4072),V=L(1555);const B=te=>{if(te&&"function"==typeof te[oe.L])return(te=>X=>{const de=te[oe.L]();if("function"!=typeof de.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return de.subscribe(X)})(te);if((0,ae.z)(te))return(0,p.V)(te);if((0,re.t)(te))return(te=>X=>(te.then(de=>{X.closed||(X.next(de),X.complete())},de=>X.error(de)).then(null,H.z),X))(te);if(te&&"function"==typeof te[ne.hZ])return(te=>X=>{const de=te[ne.hZ]();for(;;){let Ce;try{Ce=de.next()}catch(me){return X.error(me),X}if(Ce.done){X.complete();break}if(X.next(Ce.value),X.closed)break}return"function"==typeof de.return&&X.add(()=>{de.return&&de.return()}),X})(te);{const de=`You provided ${(0,V.K)(te)?"an invalid object":`'${te}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(de)}}},5015:(Ke,ye,L)=>{"use strict";L.d(ye,{V:()=>p});const p=H=>k=>{for(let ne=0,se=H.length;ne<se&&!k.closed;ne++)k.next(H[ne]);k.complete()}},9157:(Ke,ye,L)=>{"use strict";var p=L(3018);let H=null;function k(){return H}const ve=new p.OlP("DocumentToken");let ae=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,p.Yz7)({factory:re,token:n,providedIn:"platform"}),n})();function re(){return(0,p.LFG)(B)}const V=new p.OlP("Location Initialized");let B=(()=>{class n extends ae{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return k().getBaseHref(this._doc)}onPopState(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,a){te()?this._history.pushState(t,r,a):this.location.hash=a}replaceState(t,r,a){te()?this._history.replaceState(t,r,a):this.location.hash=a}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ve))},n.\u0275prov=(0,p.Yz7)({factory:X,token:n,providedIn:"platform"}),n})();function te(){return!!window.history.pushState}function X(){return new B((0,p.LFG)(ve))}function de(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ce(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function me(n){return n&&"?"!==n[0]?"?"+n:n}let ge=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,p.Yz7)({factory:Se,token:n,providedIn:"root"}),n})();function Se(n){const e=(0,p.LFG)(ve).location;return new De((0,p.LFG)(ae),e&&e.origin||"")}const xe=new p.OlP("appBaseHref");let De=(()=>{class n extends ge{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return de(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+me(this._platformLocation.search),a=this._platformLocation.hash;return a&&t?`${r}${a}`:r}pushState(t,r,a,l){const h=this.prepareExternalUrl(a+me(l));this._platformLocation.pushState(t,r,h)}replaceState(t,r,a,l){const h=this.prepareExternalUrl(a+me(l));this._platformLocation.replaceState(t,r,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,a;null===(a=(r=this._platformLocation).historyGo)||void 0===a||a.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ae),p.LFG(xe,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),Ze=(()=>{class n extends ge{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=de(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,a,l){let h=this.prepareExternalUrl(a+me(l));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.pushState(t,r,h)}replaceState(t,r,a,l){let h=this.prepareExternalUrl(a+me(l));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,a;null===(a=(r=this._platformLocation).historyGo)||void 0===a||a.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ae),p.LFG(xe,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),ut=(()=>{class n{constructor(t,r){this._subject=new p.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const a=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Ce(_t(a)),this._platformStrategy.onPopState(l=>{this._subject.emit({url:this.path(!0),pop:!0,state:l.state,type:l.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+me(r))}normalize(t){return n.stripTrailingSlash(function(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,_t(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",a=null){this._platformStrategy.pushState(a,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+me(r)),a)}replaceState(t,r="",a=null){this._platformStrategy.replaceState(a,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+me(r)),a)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,a;null===(a=(r=this._platformStrategy).historyGo)||void 0===a||a.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(a=>a(t,r))}subscribe(t,r,a){return this._subject.subscribe({next:t,error:r,complete:a})}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ge),p.LFG(ae))},n.normalizeQueryParams=me,n.joinWithSlash=de,n.stripTrailingSlash=Ce,n.\u0275prov=(0,p.Yz7)({factory:$e,token:n,providedIn:"root"}),n})();function $e(){return new ut((0,p.LFG)(ge),(0,p.LFG)(ae))}function _t(n){return n.replace(/\/index.html$/,"")}var He=(()=>((He=He||{})[He.Zero=0]="Zero",He[He.One=1]="One",He[He.Two=2]="Two",He[He.Few=3]="Few",He[He.Many=4]="Many",He[He.Other=5]="Other",He))(),Qe=(()=>((Qe=Qe||{})[Qe.Format=0]="Format",Qe[Qe.Standalone=1]="Standalone",Qe))(),Xe=(()=>((Xe=Xe||{})[Xe.Narrow=0]="Narrow",Xe[Xe.Abbreviated=1]="Abbreviated",Xe[Xe.Wide=2]="Wide",Xe[Xe.Short=3]="Short",Xe))(),Ct=(()=>((Ct=Ct||{})[Ct.Short=0]="Short",Ct[Ct.Medium=1]="Medium",Ct[Ct.Long=2]="Long",Ct[Ct.Full=3]="Full",Ct))(),Ge=(()=>((Ge=Ge||{})[Ge.Decimal=0]="Decimal",Ge[Ge.Group=1]="Group",Ge[Ge.List=2]="List",Ge[Ge.PercentSign=3]="PercentSign",Ge[Ge.PlusSign=4]="PlusSign",Ge[Ge.MinusSign=5]="MinusSign",Ge[Ge.Exponential=6]="Exponential",Ge[Ge.SuperscriptingExponent=7]="SuperscriptingExponent",Ge[Ge.PerMille=8]="PerMille",Ge[Ge.Infinity=9]="Infinity",Ge[Ge.NaN=10]="NaN",Ge[Ge.TimeSeparator=11]="TimeSeparator",Ge[Ge.CurrencyDecimal=12]="CurrencyDecimal",Ge[Ge.CurrencyGroup=13]="CurrencyGroup",Ge))();function es(n,e){return Zt((0,p.cg1)(n)[p.wAp.DateFormat],e)}function sn(n,e){return Zt((0,p.cg1)(n)[p.wAp.TimeFormat],e)}function Yt(n,e){return Zt((0,p.cg1)(n)[p.wAp.DateTimeFormat],e)}function zn(n,e){const t=(0,p.cg1)(n),r=t[p.wAp.NumberSymbols][e];if(void 0===r){if(e===Ge.CurrencyDecimal)return t[p.wAp.NumberSymbols][Ge.Decimal];if(e===Ge.CurrencyGroup)return t[p.wAp.NumberSymbols][Ge.Group]}return r}const $n=p.kL8;function Me(n){if(!n[p.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[p.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Zt(n,e){for(let t=e;t>-1;t--)if(void 0!==n[t])return n[t];throw new Error("Locale data API: locale data undefined")}function bn(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const lr=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,dr={},Fr=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var on=(()=>((on=on||{})[on.Short=0]="Short",on[on.ShortGMT=1]="ShortGMT",on[on.Long=2]="Long",on[on.Extended=3]="Extended",on))(),nt=(()=>((nt=nt||{})[nt.FullYear=0]="FullYear",nt[nt.Month=1]="Month",nt[nt.Date=2]="Date",nt[nt.Hours=3]="Hours",nt[nt.Minutes=4]="Minutes",nt[nt.Seconds=5]="Seconds",nt[nt.FractionalSeconds=6]="FractionalSeconds",nt[nt.Day=7]="Day",nt))(),Ye=(()=>((Ye=Ye||{})[Ye.DayPeriods=0]="DayPeriods",Ye[Ye.Days=1]="Days",Ye[Ye.Months=2]="Months",Ye[Ye.Eras=3]="Eras",Ye))();function Hn(n,e,t,r){let a=function(n){if(ot(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[a,l=1,h=1]=n.split("-").map(y=>+y);return Xr(a,l-1,h)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(lr))return function(n){const e=new Date(0);let t=0,r=0;const a=n[8]?e.setUTCFullYear:e.setFullYear,l=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),a.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const h=Number(n[4]||0)-t,y=Number(n[5]||0)-r,w=Number(n[6]||0),D=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return l.call(e,h,y,w,D),e}(r)}const e=new Date(n);if(!ot(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=en(t,e)||e;let y,h=[];for(;e;){if(y=Fr.exec(e),!y){h.push(e);break}{h=h.concat(y.slice(1));const x=h.pop();if(!x)break;e=x}}let w=a.getTimezoneOffset();r&&(w=j(r,w),a=function(n,e,t){const a=n.getTimezoneOffset();return function(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,-1*(j(e,a)-a))}(a,r));let D="";return h.forEach(x=>{const P=function(n){if(G[n])return G[n];let e;switch(n){case"G":case"GG":case"GGG":e=rt(Ye.Eras,Xe.Abbreviated);break;case"GGGG":e=rt(Ye.Eras,Xe.Wide);break;case"GGGGG":e=rt(Ye.Eras,Xe.Narrow);break;case"y":e=nn(nt.FullYear,1,0,!1,!0);break;case"yy":e=nn(nt.FullYear,2,0,!0,!0);break;case"yyy":e=nn(nt.FullYear,3,0,!1,!0);break;case"yyyy":e=nn(nt.FullYear,4,0,!1,!0);break;case"Y":e=W(1);break;case"YY":e=W(2,!0);break;case"YYY":e=W(3);break;case"YYYY":e=W(4);break;case"M":case"L":e=nn(nt.Month,1,1);break;case"MM":case"LL":e=nn(nt.Month,2,1);break;case"MMM":e=rt(Ye.Months,Xe.Abbreviated);break;case"MMMM":e=rt(Ye.Months,Xe.Wide);break;case"MMMMM":e=rt(Ye.Months,Xe.Narrow);break;case"LLL":e=rt(Ye.Months,Xe.Abbreviated,Qe.Standalone);break;case"LLLL":e=rt(Ye.Months,Xe.Wide,Qe.Standalone);break;case"LLLLL":e=rt(Ye.Months,Xe.Narrow,Qe.Standalone);break;case"w":e=zt(1);break;case"ww":e=zt(2);break;case"W":e=zt(1,!0);break;case"d":e=nn(nt.Date,1);break;case"dd":e=nn(nt.Date,2);break;case"c":case"cc":e=nn(nt.Day,1);break;case"ccc":e=rt(Ye.Days,Xe.Abbreviated,Qe.Standalone);break;case"cccc":e=rt(Ye.Days,Xe.Wide,Qe.Standalone);break;case"ccccc":e=rt(Ye.Days,Xe.Narrow,Qe.Standalone);break;case"cccccc":e=rt(Ye.Days,Xe.Short,Qe.Standalone);break;case"E":case"EE":case"EEE":e=rt(Ye.Days,Xe.Abbreviated);break;case"EEEE":e=rt(Ye.Days,Xe.Wide);break;case"EEEEE":e=rt(Ye.Days,Xe.Narrow);break;case"EEEEEE":e=rt(Ye.Days,Xe.Short);break;case"a":case"aa":case"aaa":e=rt(Ye.DayPeriods,Xe.Abbreviated);break;case"aaaa":e=rt(Ye.DayPeriods,Xe.Wide);break;case"aaaaa":e=rt(Ye.DayPeriods,Xe.Narrow);break;case"b":case"bb":case"bbb":e=rt(Ye.DayPeriods,Xe.Abbreviated,Qe.Standalone,!0);break;case"bbbb":e=rt(Ye.DayPeriods,Xe.Wide,Qe.Standalone,!0);break;case"bbbbb":e=rt(Ye.DayPeriods,Xe.Narrow,Qe.Standalone,!0);break;case"B":case"BB":case"BBB":e=rt(Ye.DayPeriods,Xe.Abbreviated,Qe.Format,!0);break;case"BBBB":e=rt(Ye.DayPeriods,Xe.Wide,Qe.Format,!0);break;case"BBBBB":e=rt(Ye.DayPeriods,Xe.Narrow,Qe.Format,!0);break;case"h":e=nn(nt.Hours,1,-12);break;case"hh":e=nn(nt.Hours,2,-12);break;case"H":e=nn(nt.Hours,1);break;case"HH":e=nn(nt.Hours,2);break;case"m":e=nn(nt.Minutes,1);break;case"mm":e=nn(nt.Minutes,2);break;case"s":e=nn(nt.Seconds,1);break;case"ss":e=nn(nt.Seconds,2);break;case"S":e=nn(nt.FractionalSeconds,1);break;case"SS":e=nn(nt.FractionalSeconds,2);break;case"SSS":e=nn(nt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=ze(on.Short);break;case"ZZZZZ":e=ze(on.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=ze(on.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=ze(on.Long);break;default:return null}return G[n]=e,e}(x);D+=P?P(a,t,w):"''"===x?"'":x.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),D}function Xr(n,e,t){const r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function en(n,e){const t=function(n){return(0,p.cg1)(n)[p.wAp.LocaleId]}(n);if(dr[t]=dr[t]||{},dr[t][e])return dr[t][e];let r="";switch(e){case"shortDate":r=es(n,Ct.Short);break;case"mediumDate":r=es(n,Ct.Medium);break;case"longDate":r=es(n,Ct.Long);break;case"fullDate":r=es(n,Ct.Full);break;case"shortTime":r=sn(n,Ct.Short);break;case"mediumTime":r=sn(n,Ct.Medium);break;case"longTime":r=sn(n,Ct.Long);break;case"fullTime":r=sn(n,Ct.Full);break;case"short":const a=en(n,"shortTime"),l=en(n,"shortDate");r=Dt(Yt(n,Ct.Short),[a,l]);break;case"medium":const h=en(n,"mediumTime"),y=en(n,"mediumDate");r=Dt(Yt(n,Ct.Medium),[h,y]);break;case"long":const w=en(n,"longTime"),D=en(n,"longDate");r=Dt(Yt(n,Ct.Long),[w,D]);break;case"full":const x=en(n,"fullTime"),P=en(n,"fullDate");r=Dt(Yt(n,Ct.Full),[x,P])}return r&&(dr[t][e]=r),r}function Dt(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return null!=e&&r in e?e[r]:t})),n}function Kn(n,e,t="-",r,a){let l="";(n<0||a&&n<=0)&&(a?n=1-n:(n=-n,l=t));let h=String(n);for(;h.length<e;)h="0"+h;return r&&(h=h.substr(h.length-e)),l+h}function nn(n,e,t=0,r=!1,a=!1){return function(l,h){let y=function(n,e){switch(n){case nt.FullYear:return e.getFullYear();case nt.Month:return e.getMonth();case nt.Date:return e.getDate();case nt.Hours:return e.getHours();case nt.Minutes:return e.getMinutes();case nt.Seconds:return e.getSeconds();case nt.FractionalSeconds:return e.getMilliseconds();case nt.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,l);if((t>0||y>-t)&&(y+=t),n===nt.Hours)0===y&&-12===t&&(y=12);else if(n===nt.FractionalSeconds)return function(n,e){return Kn(n,3).substr(0,e)}(y,e);const w=zn(h,Ge.MinusSign);return Kn(y,e,w,r,a)}}function rt(n,e,t=Qe.Format,r=!1){return function(a,l){return function(n,e,t,r,a,l){switch(t){case Ye.Months:return function(n,e,t){const r=(0,p.cg1)(n),l=Zt([r[p.wAp.MonthsFormat],r[p.wAp.MonthsStandalone]],e);return Zt(l,t)}(e,a,r)[n.getMonth()];case Ye.Days:return function(n,e,t){const r=(0,p.cg1)(n),l=Zt([r[p.wAp.DaysFormat],r[p.wAp.DaysStandalone]],e);return Zt(l,t)}(e,a,r)[n.getDay()];case Ye.DayPeriods:const h=n.getHours(),y=n.getMinutes();if(l){const D=function(n){const e=(0,p.cg1)(n);return Me(e),(e[p.wAp.ExtraData][2]||[]).map(r=>"string"==typeof r?bn(r):[bn(r[0]),bn(r[1])])}(e),x=function(n,e,t){const r=(0,p.cg1)(n);Me(r);const l=Zt([r[p.wAp.ExtraData][0],r[p.wAp.ExtraData][1]],e)||[];return Zt(l,t)||[]}(e,a,r),P=D.findIndex(z=>{if(Array.isArray(z)){const[J,fe]=z,Le=h>=J.hours&&y>=J.minutes,Ve=h<fe.hours||h===fe.hours&&y<fe.minutes;if(J.hours<fe.hours){if(Le&&Ve)return!0}else if(Le||Ve)return!0}else if(z.hours===h&&z.minutes===y)return!0;return!1});if(-1!==P)return x[P]}return function(n,e,t){const r=(0,p.cg1)(n),l=Zt([r[p.wAp.DayPeriodsFormat],r[p.wAp.DayPeriodsStandalone]],e);return Zt(l,t)}(e,a,r)[h<12?0:1];case Ye.Eras:return function(n,e){return Zt((0,p.cg1)(n)[p.wAp.Eras],e)}(e,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(a,l,n,e,t,r)}}function ze(n){return function(e,t,r){const a=-1*r,l=zn(t,Ge.MinusSign),h=a>0?Math.floor(a/60):Math.ceil(a/60);switch(n){case on.Short:return(a>=0?"+":"")+Kn(h,2,l)+Kn(Math.abs(a%60),2,l);case on.ShortGMT:return"GMT"+(a>=0?"+":"")+Kn(h,1,l);case on.Long:return"GMT"+(a>=0?"+":"")+Kn(h,2,l)+":"+Kn(Math.abs(a%60),2,l);case on.Extended:return 0===r?"Z":(a>=0?"+":"")+Kn(h,2,l)+":"+Kn(Math.abs(a%60),2,l);default:throw new Error(`Unknown zone width "${n}"`)}}}function Et(n){return Xr(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay()))}function zt(n,e=!1){return function(t,r){let a;if(e){const l=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,h=t.getDate();a=1+Math.floor((h+l)/7)}else{const l=Et(t),h=function(n){const e=Xr(n,0,1).getDay();return Xr(n,0,1+(e<=4?4:11)-e)}(l.getFullYear()),y=l.getTime()-h.getTime();a=1+Math.round(y/6048e5)}return Kn(a,n,zn(r,Ge.MinusSign))}}function W(n,e=!1){return function(t,r){return Kn(Et(t).getFullYear(),n,zn(r,Ge.MinusSign),e)}}const G={};function j(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function ot(n){return n instanceof Date&&!isNaN(n.valueOf())}class Vr{}let Yn=(()=>{class n extends Vr{constructor(t){super(),this.locale=t}getPluralCategory(t,r){switch($n(r||this.locale)(t)){case He.Zero:return"zero";case He.One:return"one";case He.Two:return"two";case He.Few:return"few";case He.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(p.soG))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class xa{constructor(e,t,r,a){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=a}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ts=(()=>{class n{constructor(t,r,a){this._viewContainer=t,this._template=r,this._differs=a,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(r){throw new Error(`Cannot find a differ supporting object '${t}' of type '${function(n){return n.name||typeof n}(t)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=[];t.forEachOperation((a,l,h)=>{if(null==a.previousIndex){const y=this._viewContainer.createEmbeddedView(this._template,new xa(null,this._ngForOf,-1,-1),null===h?void 0:h),w=new Ur(a,y);r.push(w)}else if(null==h)this._viewContainer.remove(null===l?void 0:l);else if(null!==l){const y=this._viewContainer.get(l);this._viewContainer.move(y,h);const w=new Ur(a,y);r.push(w)}});for(let a=0;a<r.length;a++)this._perViewChange(r[a].view,r[a].record);for(let a=0,l=this._viewContainer.length;a<l;a++){const h=this._viewContainer.get(a);h.context.index=a,h.context.count=l,h.context.ngForOf=this._ngForOf}t.forEachIdentityChange(a=>{this._viewContainer.get(a.currentIndex).context.$implicit=a.item})}_perViewChange(t,r){t.context.$implicit=r.item}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.s_b),p.Y36(p.Rgc),p.Y36(p.ZZ4))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();class Ur{constructor(e,t){this.record=e,this.view=t}}let sr=(()=>{class n{constructor(t,r,a){this._ngEl=t,this._differs=r,this._renderer=a,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[a,l]=t.split(".");null!=(r=null!=r&&l?`${r}${l}`:r)?this._renderer.setStyle(this._ngEl.nativeElement,a,r):this._renderer.removeStyle(this._ngEl.nativeElement,a)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.SBq),p.Y36(p.aQg),p.Y36(p.Qsj))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),n})();let Uc=(()=>{class n{constructor(t){this.locale=t}transform(t,r="mediumDate",a,l){if(null==t||""===t||t!=t)return null;try{return Hn(t,r,l||this.locale,a)}catch(h){throw function(n,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${(0,p.AaK)(n)}'`)}(n,h.message)}}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.soG,16))},n.\u0275pipe=p.Yjl({name:"date",type:n,pure:!0}),n})(),mu=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[{provide:Vr,useClass:Yn}]}),n})();function yo(n){return"server"===n}let _o=(()=>{class n{}return n.\u0275prov=(0,p.Yz7)({token:n,providedIn:"root",factory:()=>new jf((0,p.LFG)(ve),window)}),n})();class jf{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let a=r.currentNode;for(;a;){const l=a.shadowRoot;if(l){const h=l.getElementById(e)||l.querySelector(`[name="${e}"]`);if(h)return h}a=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,a=t.top+this.window.pageYOffset,l=this.offset();this.window.scrollTo(r-l[0],a-l[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=yu(this.window.history)||yu(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function yu(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class ns extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var n;n=new ns,H||(H=n)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(Ko=Ko||document.querySelector("base"),Ko?Ko.getAttribute("href"):null);return null==t?null:function(n){pi=pi||document.createElement("a"),pi.setAttribute("href",n);const e=pi.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Ko=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[a,l]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(a.trim()===e)return decodeURIComponent(l)}return null}(document.cookie,e)}}let pi,Ko=null;const Eo=new p.OlP("TRANSITION_ID"),$f=[{provide:p.ip1,useFactory:function(n,e,t){return()=>{t.get(p.CZH).donePromise.then(()=>{const r=k(),a=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let l=0;l<a.length;l++)r.remove(a[l])})}},deps:[Eo,ve,p.zs3],multi:!0}];class Gt{static init(){(0,p.VLi)(new Gt)}addToWindow(e){p.dqk.getAngularTestability=(r,a=!0)=>{const l=e.findTestabilityInTree(r,a);if(null==l)throw new Error("Could not find testability for element.");return l},p.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),p.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),p.dqk.frameworkStabilizers||(p.dqk.frameworkStabilizers=[]),p.dqk.frameworkStabilizers.push(r=>{const a=p.dqk.getAllAngularTestabilities();let l=a.length,h=!1;const y=function(w){h=h||w,l--,0==l&&r(h)};a.forEach(function(w){w.whenStable(y)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const a=e.getTestability(t);return null!=a?a:r?k().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Hf=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const Ts=new p.OlP("EventManagerPlugins");let wo=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(a=>a.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,a){return this._findPluginFor(r).addEventListener(t,r,a)}addGlobalEventListener(t,r,a){return this._findPluginFor(r).addGlobalEventListener(t,r,a)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const a=this._plugins;for(let l=0;l<a.length;l++){const h=a[l];if(h.supports(t))return this._eventNameToPlugin.set(t,h),h}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Ts),p.LFG(p.R0b))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class Hs{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const a=k().getGlobalEventTarget(this._doc,e);if(!a)throw new Error(`Unsupported event target ${a} for event ${t}`);return this.addEventListener(a,t,r)}}let Pa=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(a=>{this._stylesSet.has(a)||(this._stylesSet.add(a),r.add(a))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),Gs=(()=>{class n extends Pa{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,a){t.forEach(l=>{const h=this._doc.createElement("style");h.textContent=l,a.push(r.appendChild(h))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Iu),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,a)=>{this._addStylesToHost(t,a,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Iu))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ve))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function Iu(n){k().remove(n)}const Ie={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},qt=/%COMP%/g;function Qo(n,e,t){for(let r=0;r<e.length;r++){let a=e[r];Array.isArray(a)?Qo(n,a,t):(a=a.replace(qt,n),t.push(a))}return t}function Du(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Ws=(()=>{class n{constructor(t,r,a){this.eventManager=t,this.sharedStylesHost=r,this.appId=a,this.rendererByCompId=new Map,this.defaultRenderer=new Bi(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case p.ifc.Emulated:{let a=this.rendererByCompId.get(r.id);return a||(a=new rs(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,a)),a.applyToHost(t),a}case 1:case p.ifc.ShadowDom:return new As(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const a=Qo(r.id,r.styles,[]);this.sharedStylesHost.addStyles(a),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(wo),p.LFG(Gs),p.LFG(p.AFp))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class Bi{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(Ie[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,a){if(a){t=a+":"+t;const l=Ie[a];l?e.setAttributeNS(l,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const a=Ie[r];a?e.removeAttributeNS(a,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,a){a&(p.JOm.DashCase|p.JOm.Important)?e.style.setProperty(t,r,a&p.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&p.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Du(r)):this.eventManager.addEventListener(e,t,Du(r))}}class rs extends Bi{constructor(e,t,r,a){super(e),this.component=r;const l=Qo(a+"-"+r.id,r.styles,[]);t.addStyles(l),this.contentAttr="_ngcontent-%COMP%".replace(qt,a+"-"+r.id),this.hostAttr=function(n){return"_nghost-%COMP%".replace(qt,n)}(a+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class As extends Bi{constructor(e,t,r,a){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=Qo(a.id,a.styles,[]);for(let h=0;h<l.length;h++){const y=document.createElement("style");y.textContent=l[h],this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let ka=(()=>{class n extends Hs{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,a){return t.addEventListener(r,a,!1),()=>this.removeEventListener(t,r,a)}removeEventListener(t,r,a){return t.removeEventListener(r,a)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ve))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const Io=["alt","control","meta","shift"],Mu={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},zc={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Rr={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ji=(()=>{class n extends Hs{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,a){const l=n.parseEventName(r),h=n.eventCallback(l.fullKey,a,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>k().onAndCancel(t,l.domEventName,h))}static parseEventName(t){const r=t.toLowerCase().split("."),a=r.shift();if(0===r.length||"keydown"!==a&&"keyup"!==a)return null;const l=n._normalizeKey(r.pop());let h="";if(Io.forEach(w=>{const D=r.indexOf(w);D>-1&&(r.splice(D,1),h+=w+".")}),h+=l,0!=r.length||0===l.length)return null;const y={};return y.domEventName=a,y.fullKey=h,y}static getEventFullKey(t){let r="",a=function(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&zc.hasOwnProperty(e)&&(e=zc[e]))}return Mu[e]||e}(t);return a=a.toLowerCase()," "===a?a="space":"."===a&&(a="dot"),Io.forEach(l=>{l!=a&&Rr[l](t)&&(r+=l+".")}),r+=a,r}static eventCallback(t,r,a){return l=>{n.getEventFullKey(l)===t&&a.runGuarded(()=>r(l))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ve))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const zs=(0,p.eFA)(p._c5,"browser",[{provide:p.Lbi,useValue:"browser"},{provide:p.g9A,useValue:function(){ns.makeCurrent(),Gt.init()},multi:!0},{provide:ve,useFactory:function(){return(0,p.RDi)(document),document},deps:[]}]),Ss=[[],{provide:p.zSh,useValue:"root"},{provide:p.qLn,useFactory:function(){return new p.qLn},deps:[]},{provide:Ts,useClass:ka,multi:!0,deps:[ve,p.R0b,p.Lbi]},{provide:Ts,useClass:ji,multi:!0,deps:[ve]},[],{provide:Ws,useClass:Ws,deps:[wo,Gs,p.AFp]},{provide:p.FYo,useExisting:Ws},{provide:Pa,useExisting:Gs},{provide:Gs,useClass:Gs,deps:[ve]},{provide:p.dDg,useClass:p.dDg,deps:[p.R0b]},{provide:wo,useClass:wo,deps:[Ts,p.R0b]},{provide:class{},useClass:Hf,deps:[]},[]];let Va=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:p.AFp,useValue:t.appId},{provide:Eo,useExisting:p.AFp},$f]}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(n,12))},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:Ss,imports:[mu,p.hGG]}),n})();"undefined"!=typeof window&&window;var _n=L(4402),pt=L(5917),$i=L(9765),ea=L(7971);class jr extends $i.xQ{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new ea.N;return this._value}next(e){super.next(this._value=e)}}var $u=L(4869),To=L(9796),pr=L(7393);class Kf extends pr.L{notifyNext(e,t,r,a,l){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}class ja extends pr.L{constructor(e,t,r){super(),this.parent=e,this.outerValue=t,this.outerIndex=r,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var Pd=L(7444),ei=L(7574);function ta(n,e,t,r,a=new ja(n,t,r)){if(!a.closed)return e instanceof ei.y?e.subscribe(a):(0,Pd.s)(e)(a)}var Xc=L(6693);const Gn={};class Ks{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new kd(e,this.resultSelector))}}class kd extends Kf{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(Gn),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let r=0;r<t;r++)this.add(ta(this,e[r],void 0,r))}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,r){const a=this.values,h=this.toRespond?a[r]===Gn?--this.toRespond:this.toRespond:0;a[r]=t,0===h&&(this.resultSelector?this._tryResultSelector(a):this.destination.next(a.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(r){return void this.destination.error(r)}this.destination.next(t)}}const ra=(()=>{function n(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return n.prototype=Object.create(Error.prototype),n})();var ss=L(3282);function Ao(...n){return(0,ss.J)(1)((0,pt.of)(...n))}var Ci=L(9193);function Ys(n){return new ei.y(e=>{let t;try{t=n()}catch(a){return void e.error(a)}return(t?(0,_n.D)(t):(0,Ci.c)()).subscribe(e)})}var os=L(2441),bt=L(8002),as=L(5345);function qn(n,e){return"function"==typeof e?t=>t.pipe(qn((r,a)=>(0,_n.D)(n(r,a)).pipe((0,bt.U)((l,h)=>e(r,l,a,h))))):t=>t.lift(new us(n))}class us{constructor(e){this.project=e}call(e,t){return t.subscribe(new Yf(e,this.project))}}class Yf extends as.Ds{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const r=this.index++;try{t=this.project(e,r)}catch(a){return void this.destination.error(a)}this._innerSub(t)}_innerSub(e){const t=this.innerSubscription;t&&t.unsubscribe();const r=new as.IY(this),a=this.destination;a.add(r),this.innerSubscription=(0,as.ft)(e,r),this.innerSubscription!==r&&a.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;(!e||e.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}const el=(()=>{function n(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return n.prototype=Object.create(Error.prototype),n})();function Fd(n){return e=>0===n?(0,Ci.c)():e.lift(new Lg(n))}class Lg{constructor(e){if(this.total=e,this.total<0)throw new el}call(e,t){return t.subscribe(new Mn(e,this.total))}}class Mn extends pr.L{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,r=++this.count;r<=t&&(this.destination.next(e),r===t&&(this.destination.complete(),this.unsubscribe()))}}function Ld(...n){const e=n[n.length-1];return(0,$u.K)(e)?(n.pop(),t=>Ao(n,t,e)):t=>Ao(n,t)}function Qs(n,e){let t=!1;return arguments.length>=2&&(t=!0),function(a){return a.lift(new Qf(n,e,t))}}class Qf{constructor(e,t,r=!1){this.accumulator=e,this.seed=t,this.hasSeed=r}call(e,t){return t.subscribe(new Vg(e,this.accumulator,this.seed,this.hasSeed))}}class Vg extends pr.L{constructor(e,t,r,a){super(e),this.accumulator=t,this._seed=r,this.hasSeed=a,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let r;try{r=this.accumulator(this.seed,e,t)}catch(a){this.destination.error(a)}this.seed=r,this.destination.next(r)}}function Js(n,e){return function(r){return r.lift(new Vd(n,e))}}class Vd{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new Ug(e,this.predicate,this.thisArg))}}class Ug extends pr.L{constructor(e,t,r){super(e),this.predicate=t,this.thisArg=r,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(r){return void this.destination.error(r)}t&&this.destination.next(e)}}function So(n){return function(t){const r=new Jf(n),a=t.lift(r);return r.caught=a}}class Jf{constructor(e){this.selector=e}call(e,t){return t.subscribe(new Bg(e,this.selector,this.caught))}}class Bg extends as.Ds{constructor(e,t,r){super(e),this.selector=t,this.caught=r}error(e){if(!this.isStopped){let t;try{t=this.selector(e,this.caught)}catch(l){return void super.error(l)}this._unsubscribeAndRecycle();const r=new as.IY(this);this.add(r);const a=(0,as.ft)(t,r);a!==r&&this.add(a)}}}var Nr=L(9773);function ti(n,e){return(0,Nr.zg)(n,e,1)}function Hu(n){return function(t){return 0===n?(0,Ci.c)():t.lift(new Fn(n))}}class Fn{constructor(e){if(this.total=e,this.total<0)throw new el}call(e,t){return t.subscribe(new ia(e,this.total))}}class ia extends pr.L{constructor(e,t){super(e),this.total=t,this.ring=new Array,this.count=0}_next(e){const t=this.ring,r=this.total,a=this.count++;t.length<r?t.push(e):t[a%r]=e}_complete(){const e=this.destination;let t=this.count;if(t>0){const r=this.count>=this.total?this.total:this.count,a=this.ring;for(let l=0;l<r;l++){const h=t++%r;e.next(a[h])}}e.complete()}}function xs(n=Gi){return e=>e.lift(new Ud(n))}class Ud{constructor(e){this.errorFactory=e}call(e,t){return t.subscribe(new jg(e,this.errorFactory))}}class jg extends pr.L{constructor(e,t){super(e),this.errorFactory=t,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function Gi(){return new ra}function cs(n=null){return e=>e.lift(new Gu(n))}class Gu{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new Xs(e,this.defaultValue))}}class Xs extends pr.L{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var ni=L(4487);function xo(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Js((a,l)=>n(a,l,r)):ni.y,Fd(1),t?cs(e):xs(()=>new ra))}var $r=L(3342),sa=L(1307),nl=L(5319);class ri{constructor(e){this.callback=e}call(e,t){return t.subscribe(new Bd(e,this.callback))}}class Bd extends pr.L{constructor(e,t){super(e),this.add(new nl.w(t))}}class gr{constructor(e,t){this.id=e,this.url=t}}class $a extends gr{constructor(e,t,r="imperative",a=null){super(e,t),this.navigationTrigger=r,this.restoredState=a}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class to extends gr{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Xf extends gr{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class C extends gr{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class T extends gr{constructor(e,t,r,a){super(e,t),this.urlAfterRedirects=r,this.state=a}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class R extends gr{constructor(e,t,r,a){super(e,t),this.urlAfterRedirects=r,this.state=a}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $ extends gr{constructor(e,t,r,a,l){super(e,t),this.urlAfterRedirects=r,this.state=a,this.shouldActivate=l}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Q extends gr{constructor(e,t,r,a){super(e,t),this.urlAfterRedirects=r,this.state=a}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ce extends gr{constructor(e,t,r,a){super(e,t),this.urlAfterRedirects=r,this.state=a}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class we{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Be{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class st{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class At{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class St{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class lt{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class mr{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const dt="primary";class oa{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function qi(n){return new oa(n)}const Wi="ngNavigationCancelingError";function Mo(n){const e=Error("NavigationCancelingError: "+n);return e[Wi]=!0,e}function Ha(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const a={};for(let l=0;l<r.length;l++){const h=r[l],y=n[l];if(h.startsWith(":"))a[h.substring(1)]=y;else if(h!==y.path)return null}return{consumed:n.slice(0,r.length),posParams:a}}function or(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let a;for(let l=0;l<t.length;l++)if(a=t[l],!qu(n[a],e[a]))return!1;return!0}function qu(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((a,l)=>r[l]===a)}return n===e}function no(n){return Array.prototype.concat.apply([],n)}function Wu(n){return n.length>0?n[n.length-1]:null}function yr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function ls(n){return(0,p.CqO)(n)?n:(0,p.QGY)(n)?(0,_n.D)(Promise.resolve(n)):(0,pt.of)(n)}const zu={exact:function jd(n,e,t){if(!Oo(n.segments,e.segments)||!il(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!jd(n.children[r],e.children[r],t))return!1;return!0},subset:$d},ds={exact:function(n,e){return or(n,e)},subset:function(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>qu(n[t],e[t]))},ignored:()=>!0};function rl(n,e,t){return zu[t.paths](n.root,e.root,t.matrixParams)&&ds[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function $d(n,e,t){return Ga(n,e,e.segments,t)}function Ga(n,e,t,r){if(n.segments.length>t.length){const a=n.segments.slice(0,t.length);return!(!Oo(a,t)||e.hasChildren()||!il(a,t,r))}if(n.segments.length===t.length){if(!Oo(n.segments,t)||!il(n.segments,t,r))return!1;for(const a in e.children)if(!n.children[a]||!$d(n.children[a],e.children[a],r))return!1;return!0}{const a=t.slice(0,n.segments.length),l=t.slice(n.segments.length);return!!(Oo(n.segments,a)&&il(n.segments,a,r)&&n.children[dt])&&Ga(n.children[dt],e,l,r)}}function il(n,e,t){return e.every((r,a)=>ds[t](n[a].parameters,r.parameters))}class Ro{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=qi(this.queryParams)),this._queryParamMap}toString(){return tv.serialize(this)}}class Kt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,yr(t,(r,a)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Hd(this)}}class hs{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=qi(this.parameters)),this._parameterMap}toString(){return nv(this)}}function Oo(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class sl{}class ep{parse(e){const t=new sv(e);return new Ro(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Ku(e.root,!0)}`,r=function(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(a=>`${qa(t)}=${qa(a)}`).join("&"):`${qa(t)}=${qa(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);var n;return`${t}${r}${"string"==typeof e.fragment?`#${n=e.fragment,encodeURI(n)}`:""}`}}const tv=new ep;function Hd(n){return n.segments.map(e=>nv(e)).join("/")}function Ku(n,e){if(!n.hasChildren())return Hd(n);if(e){const t=n.children[dt]?Ku(n.children[dt],!1):"",r=[];return yr(n.children,(a,l)=>{l!==dt&&r.push(`${l}:${Ku(a,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function(n,e){let t=[];return yr(n.children,(r,a)=>{a===dt&&(t=t.concat(e(r,a)))}),yr(n.children,(r,a)=>{a!==dt&&(t=t.concat(e(r,a)))}),t}(n,(r,a)=>a===dt?[Ku(n.children[dt],!1)]:[`${a}:${Ku(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[dt]?`${Hd(n)}/${t[0]}`:`${Hd(n)}/(${t.join("//")})`}}function Gd(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function qa(n){return Gd(n).replace(/%3B/gi,";")}function ua(n){return Gd(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Yu(n){return decodeURIComponent(n)}function Hg(n){return Yu(n.replace(/\+/g,"%20"))}function nv(n){return`${ua(n.path)}${function(n){return Object.keys(n).map(e=>`;${ua(e)}=${ua(n[e])}`).join("")}(n.parameters)}`}const al=/^[^\/()?;=#]+/;function ul(n){const e=n.match(al);return e?e[0]:""}const Gg=/^[^=?&#]+/,rv=/^[^?&#]+/;class sv{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Kt([],{}):new Kt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[dt]=new Kt(e,t)),r}parseSegment(){const e=ul(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new hs(Yu(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=ul(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const a=ul(this.remaining);a&&(r=a,this.capture(r))}e[Yu(t)]=Yu(r)}parseQueryParam(e){const t=function(n){const e=n.match(Gg);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const h=function(n){const e=n.match(rv);return e?e[0]:""}(this.remaining);h&&(r=h,this.capture(r))}const a=Hg(t),l=Hg(r);if(e.hasOwnProperty(a)){let h=e[a];Array.isArray(h)||(h=[h],e[a]=h),h.push(l)}else e[a]=l}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=ul(this.remaining),a=this.remaining[r.length];if("/"!==a&&")"!==a&&";"!==a)throw new Error(`Cannot parse url '${this.url}'`);let l;r.indexOf(":")>-1?(l=r.substr(0,r.indexOf(":")),this.capture(l),this.capture(":")):e&&(l=dt);const h=this.parseChildren();t[l]=1===Object.keys(h).length?h[dt]:new Kt([],h),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class qg{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=rp(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=rp(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=zi(e,this._root);return t.length<2?[]:t[t.length-2].children.map(a=>a.value).filter(a=>a!==e)}pathFromRoot(e){return zi(e,this._root).map(t=>t.value)}}function rp(n,e){if(n===e.value)return e;for(const t of e.children){const r=rp(n,t);if(r)return r}return null}function zi(n,e){if(n===e.value)return[e];for(const t of e.children){const r=zi(n,t);if(r.length)return r.unshift(e),r}return[]}class Di{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Qu(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Wg extends qg{constructor(e,t){super(e),this.snapshot=t,cl(this,e)}toString(){return this.snapshot.toString()}}function zg(n,e){const t=function(n,e){const h=new qd([],{},{},"",{},dt,e,null,n.root,-1,{});return new Yg("",new Di(h,[]))}(n,e),r=new jr([new hs("",{})]),a=new jr({}),l=new jr({}),h=new jr({}),y=new jr(""),w=new ca(r,a,h,y,l,dt,e,t.root);return w.snapshot=t.root,new Wg(new Di(w,[]),t)}class ca{constructor(e,t,r,a,l,h,y,w){this.url=e,this.params=t,this.queryParams=r,this.fragment=a,this.data=l,this.outlet=h,this.component=y,this._futureSnapshot=w}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,bt.U)(e=>qi(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,bt.U)(e=>qi(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Zg(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const a=t[r],l=t[r-1];if(a.routeConfig&&""===a.routeConfig.path)r--;else{if(l.component)break;r--}}return function(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class qd{constructor(e,t,r,a,l,h,y,w,D,x,P){this.url=e,this.params=t,this.queryParams=r,this.fragment=a,this.data=l,this.outlet=h,this.component=y,this.routeConfig=w,this._urlSegment=D,this._lastPathIndex=x,this._resolve=P}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=qi(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=qi(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Yg extends qg{constructor(e,t){super(t),this.url=e,cl(this,t)}toString(){return Qg(this._root)}}function cl(n,e){e.value._routerState=n,e.children.forEach(t=>cl(n,t))}function Qg(n){const e=n.children.length>0?` { ${n.children.map(Qg).join(", ")} } `:"";return`${n.value}${e}`}function Wd(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,or(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),or(e.params,t.params)||n.params.next(t.params),function(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!or(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),or(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function ip(n,e){const t=or(n.params,e.params)&&function(n,e){return Oo(n,e)&&n.every((t,r)=>or(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||ip(n.parent,e.parent))}function ll(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const a=function(n,e,t){return e.children.map(r=>{for(const a of t.children)if(n.shouldReuseRoute(r.value,a.value.snapshot))return ll(n,r,a);return ll(n,r)})}(n,e,t);return new Di(r,a)}{if(n.shouldAttach(e.value)){const l=n.retrieve(e.value);if(null!==l){const h=l.route;return Zi(e,h),h}}const r=function(n){return new ca(new jr(n.url),new jr(n.params),new jr(n.queryParams),new jr(n.fragment),new jr(n.data),n.outlet,n.component,n)}(e.value),a=e.children.map(l=>ll(n,l));return new Di(r,a)}}function Zi(n,e){if(n.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(n.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=n.value;for(let t=0;t<n.children.length;++t)Zi(n.children[t],e.children[t])}function hl(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function zd(n){return"object"==typeof n&&null!=n&&n.outlets}function Jg(n,e,t,r,a){let l={};return r&&yr(r,(h,y)=>{l[y]=Array.isArray(h)?h.map(w=>`${w}`):`${h}`}),new Ro(t.root===n?e:av(t.root,n,e),l,a)}function av(n,e,t){const r={};return yr(n.children,(a,l)=>{r[l]=a===e?t:av(a,e,t)}),new Kt(n.segments,r)}class Zd{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&hl(r[0]))throw new Error("Root segment cannot have matrix parameters");const a=r.find(zd);if(a&&a!==Wu(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class fl{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function m(n,e,t){if(n||(n=new Kt([],{})),0===n.segments.length&&n.hasChildren())return E(n,e,t);const r=function(n,e,t){let r=0,a=e;const l={match:!1,pathIndex:0,commandIndex:0};for(;a<n.segments.length;){if(r>=t.length)return l;const h=n.segments[a],y=t[r];if(zd(y))break;const w=`${y}`,D=r<t.length-1?t[r+1]:null;if(a>0&&void 0===w)break;if(w&&D&&"object"==typeof D&&void 0===D.outlets){if(!Ue(w,D,h))return l;r+=2}else{if(!Ue(w,{},h))return l;r++}a++}return{match:!0,pathIndex:a,commandIndex:r}}(n,e,t),a=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const l=new Kt(n.segments.slice(0,r.pathIndex),{});return l.children[dt]=new Kt(n.segments.slice(r.pathIndex),n.children),E(l,0,a)}return r.match&&0===a.length?new Kt(n.segments,{}):r.match&&!n.hasChildren()?M(n,e,t):r.match?E(n,0,a):M(n,e,t)}function E(n,e,t){if(0===t.length)return new Kt(n.segments,{});{const r=function(n){return zd(n[0])?n[0].outlets:{[dt]:n}}(t),a={};return yr(r,(l,h)=>{"string"==typeof l&&(l=[l]),null!==l&&(a[h]=m(n.children[h],e,l))}),yr(n.children,(l,h)=>{void 0===r[h]&&(a[h]=l)}),new Kt(n.segments,a)}}function M(n,e,t){const r=n.segments.slice(0,e);let a=0;for(;a<t.length;){const l=t[a];if(zd(l)){const w=Z(l.outlets);return new Kt(r,w)}if(0===a&&hl(t[0])){r.push(new hs(n.segments[e].path,he(t[0]))),a++;continue}const h=zd(l)?l.outlets[dt]:`${l}`,y=a<t.length-1?t[a+1]:null;h&&y&&hl(y)?(r.push(new hs(h,he(y))),a+=2):(r.push(new hs(h,{})),a++)}return new Kt(r,{})}function Z(n){const e={};return yr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=M(new Kt([],{}),0,t))}),e}function he(n){const e={};return yr(n,(t,r)=>e[r]=`${t}`),e}function Ue(n,e,t){return n==t.path&&or(e,t.parameters)}class ht{constructor(e,t,r,a){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=a}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Wd(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const a=Qu(t);e.children.forEach(l=>{const h=l.value.outlet;this.deactivateRoutes(l,a[h],r),delete a[h]}),yr(a,(l,h)=>{this.deactivateRouteAndItsChildren(l,r)})}deactivateRoutes(e,t,r){const a=e.value,l=t?t.value:null;if(a===l)if(a.component){const h=r.getContext(a.outlet);h&&this.deactivateChildRoutes(e,t,h.children)}else this.deactivateChildRoutes(e,t,r);else l&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet);if(r&&r.outlet){const a=r.outlet.detach(),l=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:a,route:e,contexts:l})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),a=r&&e.value.component?r.children:t,l=Qu(e);for(const h of Object.keys(l))this.deactivateRouteAndItsChildren(l[h],a);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const a=Qu(t);e.children.forEach(l=>{this.activateRoutes(l,a[l.value.outlet],r),this.forwardEvent(new lt(l.value.snapshot))}),e.children.length&&this.forwardEvent(new At(e.value.snapshot))}activateRoutes(e,t,r){const a=e.value,l=t?t.value:null;if(Wd(a),a===l)if(a.component){const h=r.getOrCreateContext(a.outlet);this.activateChildRoutes(e,t,h.children)}else this.activateChildRoutes(e,t,r);else if(a.component){const h=r.getOrCreateContext(a.outlet);if(this.routeReuseStrategy.shouldAttach(a.snapshot)){const y=this.routeReuseStrategy.retrieve(a.snapshot);this.routeReuseStrategy.store(a.snapshot,null),h.children.onOutletReAttached(y.contexts),h.attachRef=y.componentRef,h.route=y.route.value,h.outlet&&h.outlet.attach(y.componentRef,y.route.value),gt(y.route)}else{const y=function(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(a.snapshot),w=y?y.module.componentFactoryResolver:null;h.attachRef=null,h.route=a,h.resolver=w,h.outlet&&h.outlet.activateWith(a,w),this.activateChildRoutes(e,null,h.children)}}else this.activateChildRoutes(e,null,r)}}function gt(n){Wd(n.value),n.children.forEach(gt)}class Hr{constructor(e,t){this.routes=e,this.module=t}}function Gr(n){return"function"==typeof n}function No(n){return n instanceof Ro}const gl=Symbol("INITIAL_VALUE");function Xu(){return qn(n=>function(...n){let e,t;return(0,$u.K)(n[n.length-1])&&(t=n.pop()),"function"==typeof n[n.length-1]&&(e=n.pop()),1===n.length&&(0,To.k)(n[0])&&(n=n[0]),(0,Xc.n)(n,t).lift(new Ks(e))}(n.map(e=>e.pipe(Fd(1),Ld(gl)))).pipe(Qs((e,t)=>{let r=!1;return t.reduce((a,l,h)=>a!==gl?a:(l===gl&&(r=!0),r||!1!==l&&h!==t.length-1&&!No(l)?a:l),e)},gl),Js(e=>e!==gl),(0,bt.U)(e=>No(e)?e:!0===e),Fd(1)))}let za=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&p._UZ(0,"router-outlet")},directives:function(){return[mm]},encapsulation:2}),n})();function ii(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];ml(r,nm(e,r))}}function ml(n,e){n.children&&ii(n.children,e)}function nm(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function rm(n){const e=n.children&&n.children.map(rm),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==dt&&(t.component=za),t}function Dn(n){return n.outlet||dt}function Yd(n,e){const t=n.filter(r=>Dn(r)===e);return t.push(...n.filter(r=>Dn(r)!==e)),t}const im={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function sm(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},im):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const l=(e.matcher||Ha)(t,n,e);if(!l)return Object.assign({},im);const h={};yr(l.posParams,(w,D)=>{h[D]=w.path});const y=l.consumed.length>0?Object.assign(Object.assign({},h),l.consumed[l.consumed.length-1].parameters):h;return{matched:!0,consumedSegments:l.consumed,lastChild:l.consumed.length,parameters:y,positionalParamSegments:null!==(r=l.posParams)&&void 0!==r?r:{}}}function om(n,e,t,r,a="corrected"){if(t.length>0&&function(n,e,t){return t.some(r=>up(n,e,r)&&Dn(r)!==dt)}(n,t,r)){const h=new Kt(e,function(n,e,t,r){const a={};a[dt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const l of t)if(""===l.path&&Dn(l)!==dt){const h=new Kt([],{});h._sourceSegment=n,h._segmentIndexShift=e.length,a[Dn(l)]=h}return a}(n,e,r,new Kt(t,n.children)));return h._sourceSegment=n,h._segmentIndexShift=e.length,{segmentGroup:h,slicedSegments:[]}}if(0===t.length&&function(n,e,t){return t.some(r=>up(n,e,r))}(n,t,r)){const h=new Kt(n.segments,function(n,e,t,r,a,l){const h={};for(const y of r)if(up(n,t,y)&&!a[Dn(y)]){const w=new Kt([],{});w._sourceSegment=n,w._segmentIndexShift="legacy"===l?n.segments.length:e.length,h[Dn(y)]=w}return Object.assign(Object.assign({},a),h)}(n,e,t,r,n.children,a));return h._sourceSegment=n,h._segmentIndexShift=e.length,{segmentGroup:h,slicedSegments:t}}const l=new Kt(n.segments,n.children);return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}function up(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Hb(n,e,t,r){return!!(Dn(n)===r||r!==dt&&up(e,t,n))&&("**"===n.path||sm(e,n,t).matched)}function Gb(n,e,t){return 0===e.length&&!n.children[t]}class cp{constructor(e){this.segmentGroup=e||null}}class uv{constructor(e){this.urlTree=e}}function Qd(n){return new ei.y(e=>e.error(new cp(n)))}function cv(n){return new ei.y(e=>e.error(new uv(n)))}function VT(n){return new ei.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class am{constructor(e,t,r,a,l){this.configLoader=t,this.urlSerializer=r,this.urlTree=a,this.config=l,this.allowRedirects=!0,this.ngModule=e.get(p.h0i)}apply(){const e=om(this.urlTree.root,[],[],this.config).segmentGroup,t=new Kt(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,dt).pipe((0,bt.U)(l=>this.createUrlTree(lv(l),this.urlTree.queryParams,this.urlTree.fragment))).pipe(So(l=>{if(l instanceof uv)return this.allowRedirects=!1,this.match(l.urlTree);throw l instanceof cp?this.noMatchError(l):l}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,dt).pipe((0,bt.U)(a=>this.createUrlTree(lv(a),e.queryParams,e.fragment))).pipe(So(a=>{throw a instanceof cp?this.noMatchError(a):a}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const a=e.segments.length>0?new Kt([],{[dt]:e}):e;return new Ro(a,t,r)}expandSegmentGroup(e,t,r,a){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,bt.U)(l=>new Kt([],l))):this.expandSegment(e,r,t,r.segments,a,!0)}expandChildren(e,t,r){const a=[];for(const l of Object.keys(r.children))"primary"===l?a.unshift(l):a.push(l);return(0,_n.D)(a).pipe(ti(l=>{const h=r.children[l],y=Yd(t,l);return this.expandSegmentGroup(e,y,h,l).pipe((0,bt.U)(w=>({segment:w,outlet:l})))}),Qs((l,h)=>(l[h.outlet]=h.segment,l),{}),function(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Js((a,l)=>n(a,l,r)):ni.y,Hu(1),t?cs(e):xs(()=>new ra))}())}expandSegment(e,t,r,a,l,h){return(0,_n.D)(r).pipe(ti(y=>this.expandSegmentAgainstRoute(e,t,r,y,a,l,h).pipe(So(D=>{if(D instanceof cp)return(0,pt.of)(null);throw D}))),xo(y=>!!y),So((y,w)=>{if(y instanceof ra||"EmptyError"===y.name){if(Gb(t,a,l))return(0,pt.of)(new Kt([],{}));throw new cp(t)}throw y}))}expandSegmentAgainstRoute(e,t,r,a,l,h,y){return Hb(a,t,l,h)?void 0===a.redirectTo?this.matchSegmentAgainstRoute(e,t,a,l,h):y&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,a,l,h):Qd(t):Qd(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,a,l,h){return"**"===a.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,a,h):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,a,l,h)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,a){const l=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?cv(l):this.lineralizeSegments(r,l).pipe((0,Nr.zg)(h=>{const y=new Kt(h,{});return this.expandSegment(e,y,t,h,a,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,a,l,h){const{matched:y,consumedSegments:w,lastChild:D,positionalParamSegments:x}=sm(t,a,l);if(!y)return Qd(t);const P=this.applyRedirectCommands(w,a.redirectTo,x);return a.redirectTo.startsWith("/")?cv(P):this.lineralizeSegments(a,P).pipe((0,Nr.zg)(z=>this.expandSegment(e,t,r,z.concat(l.slice(D)),h,!1)))}matchSegmentAgainstRoute(e,t,r,a,l){if("**"===r.path)return r.loadChildren?(r._loadedConfig?(0,pt.of)(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,bt.U)(z=>(r._loadedConfig=z,new Kt(a,{})))):(0,pt.of)(new Kt(a,{}));const{matched:h,consumedSegments:y,lastChild:w}=sm(t,r,a);if(!h)return Qd(t);const D=a.slice(w);return this.getChildConfig(e,r,a).pipe((0,Nr.zg)(P=>{const z=P.module,J=P.routes,{segmentGroup:fe,slicedSegments:Le}=om(t,y,D,J),Ve=new Kt(fe.segments,fe.children);if(0===Le.length&&Ve.hasChildren())return this.expandChildren(z,J,Ve).pipe((0,bt.U)(kt=>new Kt(y,kt)));if(0===J.length&&0===Le.length)return(0,pt.of)(new Kt(y,{}));const Pt=Dn(r)===l;return this.expandSegment(z,Ve,J,Le,Pt?dt:l,!0).pipe((0,bt.U)(xt=>new Kt(y.concat(xt.segments),xt.children)))}))}getChildConfig(e,t,r){return t.children?(0,pt.of)(new Hr(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?(0,pt.of)(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Nr.zg)(a=>{return a?this.configLoader.load(e.injector,t).pipe((0,bt.U)(l=>(t._loadedConfig=l,l))):(n=t,new ei.y(e=>e.error(Mo(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))));var n})):(0,pt.of)(new Hr([],e))}runCanLoadGuards(e,t,r){const a=t.canLoad;if(!a||0===a.length)return(0,pt.of)(!0);const l=a.map(h=>{const y=e.get(h);let w;if((n=y)&&Gr(n.canLoad))w=y.canLoad(t,r);else{if(!Gr(y))throw new Error("Invalid CanLoad guard");w=y(t,r)}var n;return ls(w)});return(0,pt.of)(l).pipe(Xu(),(0,$r.b)(h=>{if(!No(h))return;const y=Mo(`Redirecting to "${this.urlSerializer.serialize(h)}"`);throw y.url=h,y}),(0,bt.U)(h=>!0===h))}lineralizeSegments(e,t){let r=[],a=t.root;for(;;){if(r=r.concat(a.segments),0===a.numberOfChildren)return(0,pt.of)(r);if(a.numberOfChildren>1||!a.children[dt])return VT(e.redirectTo);a=a.children[dt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,a){const l=this.createSegmentGroup(e,t.root,r,a);return new Ro(l,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return yr(e,(a,l)=>{if("string"==typeof a&&a.startsWith(":")){const y=a.substring(1);r[l]=t[y]}else r[l]=a}),r}createSegmentGroup(e,t,r,a){const l=this.createSegments(e,t.segments,r,a);let h={};return yr(t.children,(y,w)=>{h[w]=this.createSegmentGroup(e,y,r,a)}),new Kt(l,h)}createSegments(e,t,r,a){return t.map(l=>l.path.startsWith(":")?this.findPosParam(e,l,a):this.findOrReturn(l,r))}findPosParam(e,t,r){const a=r[t.path.substring(1)];if(!a)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return a}findOrReturn(e,t){let r=0;for(const a of t){if(a.path===e.path)return t.splice(r),a;r++}return e}}function lv(n){const e={};for(const r of Object.keys(n.children)){const l=lv(n.children[r]);(l.segments.length>0||l.hasChildren())&&(e[r]=l)}return function(n){if(1===n.numberOfChildren&&n.children[dt]){const e=n.children[dt];return new Kt(n.segments.concat(e.segments),e.children)}return n}(new Kt(n.segments,e))}class Wb{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class um{constructor(e,t){this.component=e,this.route=t}}function BT(n,e,t){const r=n._root;return Ti(r,e?e._root:null,t,[r.value])}function cm(n,e,t){const r=function(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function Ti(n,e,t,r,a={canDeactivateChecks:[],canActivateChecks:[]}){const l=Qu(e);return n.children.forEach(h=>{(function(n,e,t,r,a={canDeactivateChecks:[],canActivateChecks:[]}){const l=n.value,h=e?e.value:null,y=t?t.getContext(n.value.outlet):null;if(h&&l.routeConfig===h.routeConfig){const w=function(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Oo(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Oo(n.url,e.url)||!or(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ip(n,e)||!or(n.queryParams,e.queryParams);default:return!ip(n,e)}}(h,l,l.routeConfig.runGuardsAndResolvers);w?a.canActivateChecks.push(new Wb(r)):(l.data=h.data,l._resolvedData=h._resolvedData),Ti(n,e,l.component?y?y.children:null:t,r,a),w&&y&&y.outlet&&y.outlet.isActivated&&a.canDeactivateChecks.push(new um(y.outlet.component,h))}else h&&lp(e,y,a),a.canActivateChecks.push(new Wb(r)),Ti(n,null,l.component?y?y.children:null:t,r,a)})(h,l[h.value.outlet],t,r.concat([h.value]),a),delete l[h.value.outlet]}),yr(l,(h,y)=>lp(h,t.getContext(y),a)),a}function lp(n,e,t){const r=Qu(n),a=n.value;yr(r,(l,h)=>{lp(l,a.component?e?e.children.getContext(h):null:e,t)}),t.canDeactivateChecks.push(new um(a.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,a))}class PM{}function WT(n){return new ei.y(e=>e.error(n))}class kM{constructor(e,t,r,a,l,h){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=a,this.paramsInheritanceStrategy=l,this.relativeLinkResolution=h}recognize(){const e=om(this.urlTree.root,[],[],this.config.filter(h=>void 0===h.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,dt);if(null===t)return null;const r=new qd([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},dt,this.rootComponentType,null,this.urlTree.root,-1,{}),a=new Di(r,t),l=new Yg(this.url,a);return this.inheritParamsAndData(l._root),l}inheritParamsAndData(e){const t=e.value,r=Zg(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(a=>this.inheritParamsAndData(a))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const l of Object.keys(t.children)){const h=t.children[l],y=Yd(e,l),w=this.processSegmentGroup(y,h,l);if(null===w)return null;r.push(...w)}const a=Qb(r);return a.sort((e,t)=>e.value.outlet===dt?-1:t.value.outlet===dt?1:e.value.outlet.localeCompare(t.value.outlet)),a}processSegment(e,t,r,a){for(const l of e){const h=this.processSegmentAgainstRoute(l,t,r,a);if(null!==h)return h}return Gb(t,r,a)?[]:null}processSegmentAgainstRoute(e,t,r,a){if(e.redirectTo||!Hb(e,t,r,a))return null;let l,h=[],y=[];if("**"===e.path){const J=r.length>0?Wu(r).parameters:{};l=new qd(r,J,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,pv(e),Dn(e),e.component,e,eh(t),fv(t)+r.length,dm(e))}else{const J=sm(t,e,r);if(!J.matched)return null;h=J.consumedSegments,y=r.slice(J.lastChild),l=new qd(h,J.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,pv(e),Dn(e),e.component,e,eh(t),fv(t)+h.length,dm(e))}const w=(n=e).children?n.children:n.loadChildren?n._loadedConfig.routes:[],{segmentGroup:D,slicedSegments:x}=om(t,h,y,w.filter(J=>void 0===J.redirectTo),this.relativeLinkResolution);var n;if(0===x.length&&D.hasChildren()){const J=this.processChildren(w,D);return null===J?null:[new Di(l,J)]}if(0===w.length&&0===x.length)return[new Di(l,[])];const P=Dn(e)===a,z=this.processSegment(w,D,x,P?dt:a);return null===z?null:[new Di(l,z)]}}function hv(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Qb(n){const e=[],t=new Set;for(const r of n){if(!hv(r)){e.push(r);continue}const a=e.find(l=>r.value.routeConfig===l.value.routeConfig);void 0!==a?(a.children.push(...r.children),t.add(a)):e.push(r)}for(const r of t){const a=Qb(r.children);e.push(new Di(r.value,a))}return e.filter(r=>!t.has(r))}function eh(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function fv(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function pv(n){return n.data||{}}function dm(n){return n.resolve||{}}function hm(n){return qn(e=>{const t=n(e);return t?(0,_n.D)(t).pipe((0,bt.U)(()=>e)):(0,pt.of)(e)})}class KT extends class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const _v=new p.OlP("ROUTES");class Xb{constructor(e,t,r,a){this.loader=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=a}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const a=this.loadModuleFactory(t.loadChildren).pipe((0,bt.U)(l=>{this.onLoadEndListener&&this.onLoadEndListener(t);const h=l.create(e);return new Hr(no(h.injector.get(_v,void 0,p.XFs.Self|p.XFs.Optional)).map(rm),h)}),So(l=>{throw t._loader$=void 0,l}));return t._loader$=new os.c(a,()=>new $i.xQ).pipe((0,sa.x)()),t._loader$}loadModuleFactory(e){return"string"==typeof e?(0,_n.D)(this.loader.load(e)):ls(e()).pipe((0,Nr.zg)(t=>t instanceof p.YKP?(0,pt.of)(t):(0,_n.D)(this.compiler.compileModuleAsync(t))))}}class YT{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new nh,this.attachRef=null}}class nh{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new YT,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}class ew{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function vv(n){throw n}function tw(n,e,t){return e.parse("/")}function fm(n,e){return(0,pt.of)(null)}const JT={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},XT={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let si=(()=>{class n{constructor(t,r,a,l,h,y,w,D){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=a,this.location=l,this.config=D,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new $i.xQ,this.errorHandler=vv,this.malformedUriErrorHandler=tw,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:fm,afterPreactivation:fm},this.urlHandlingStrategy=new ew,this.routeReuseStrategy=new KT,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=h.get(p.h0i),this.console=h.get(p.c2e);const z=h.get(p.R0b);this.isNgZoneEnabled=z instanceof p.R0b&&p.R0b.isInAngularZone(),this.resetConfig(D),this.currentUrlTree=new Ro(new Kt([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Xb(y,w,J=>this.triggerEvent(new we(J)),J=>this.triggerEvent(new Be(J))),this.routerState=zg(this.currentUrlTree,this.rootComponentType),this.transitions=new jr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Js(a=>0!==a.id),(0,bt.U)(a=>Object.assign(Object.assign({},a),{extractedUrl:this.urlHandlingStrategy.extract(a.rawUrl)})),qn(a=>{let l=!1,h=!1;return(0,pt.of)(a).pipe((0,$r.b)(y=>{this.currentNavigation={id:y.id,initialUrl:y.currentRawUrl,extractedUrl:y.extractedUrl,trigger:y.source,extras:y.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),qn(y=>{const w=this.browserUrlTree.toString(),D=!this.navigated||y.extractedUrl.toString()!==w||w!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||D)&&this.urlHandlingStrategy.shouldProcessUrl(y.rawUrl))return ha(y.source)&&(this.browserUrlTree=y.extractedUrl),(0,pt.of)(y).pipe(qn(P=>{const z=this.transitions.getValue();return r.next(new $a(P.id,this.serializeUrl(P.extractedUrl),P.source,P.restoredState)),z!==this.transitions.getValue()?Ci.E:Promise.resolve(P)}),function(n,e,t,r){return qn(a=>function(n,e,t,r,a){return new am(n,e,t,r,a).apply()}(n,e,t,a.extractedUrl,r).pipe((0,bt.U)(l=>Object.assign(Object.assign({},a),{urlAfterRedirects:l}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,$r.b)(P=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:P.urlAfterRedirects})}),function(n,e,t,r,a){return(0,Nr.zg)(l=>function(n,e,t,r,a="emptyOnly",l="legacy"){try{const h=new kM(n,e,t,r,a,l).recognize();return null===h?WT(new PM):(0,pt.of)(h)}catch(h){return WT(h)}}(n,e,l.urlAfterRedirects,t(l.urlAfterRedirects),r,a).pipe((0,bt.U)(h=>Object.assign(Object.assign({},l),{targetSnapshot:h}))))}(this.rootComponentType,this.config,P=>this.serializeUrl(P),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,$r.b)(P=>{"eager"===this.urlUpdateStrategy&&(P.extras.skipLocationChange||this.setBrowserUrl(P.urlAfterRedirects,P),this.browserUrlTree=P.urlAfterRedirects);const z=new T(P.id,this.serializeUrl(P.extractedUrl),this.serializeUrl(P.urlAfterRedirects),P.targetSnapshot);r.next(z)}));if(D&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:z,extractedUrl:J,source:fe,restoredState:Le,extras:Ve}=y,Pt=new $a(z,this.serializeUrl(J),fe,Le);r.next(Pt);const $t=zg(J,this.rootComponentType).snapshot;return(0,pt.of)(Object.assign(Object.assign({},y),{targetSnapshot:$t,urlAfterRedirects:J,extras:Object.assign(Object.assign({},Ve),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=y.rawUrl,this.browserUrlTree=y.urlAfterRedirects,y.resolve(null),Ci.E}),hm(y=>{const{targetSnapshot:w,id:D,extractedUrl:x,rawUrl:P,extras:{skipLocationChange:z,replaceUrl:J}}=y;return this.hooks.beforePreactivation(w,{navigationId:D,appliedUrlTree:x,rawUrlTree:P,skipLocationChange:!!z,replaceUrl:!!J})}),(0,$r.b)(y=>{const w=new R(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(w)}),(0,bt.U)(y=>Object.assign(Object.assign({},y),{guards:BT(y.targetSnapshot,y.currentSnapshot,this.rootContexts)})),function(n,e){return(0,Nr.zg)(t=>{const{targetSnapshot:r,currentSnapshot:a,guards:{canActivateChecks:l,canDeactivateChecks:h}}=t;return 0===h.length&&0===l.length?(0,pt.of)(Object.assign(Object.assign({},t),{guardsResult:!0})):function(n,e,t,r){return(0,_n.D)(n).pipe((0,Nr.zg)(a=>function(n,e,t,r,a){const l=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!l||0===l.length)return(0,pt.of)(!0);const h=l.map(y=>{const w=cm(y,e,a);let D;if(function(n){return n&&Gr(n.canDeactivate)}(w))D=ls(w.canDeactivate(n,e,t,r));else{if(!Gr(w))throw new Error("Invalid CanDeactivate guard");D=ls(w(n,e,t,r))}return D.pipe(xo())});return(0,pt.of)(h).pipe(Xu())}(a.component,a.route,t,e,r)),xo(a=>!0!==a,!0))}(h,r,a,n).pipe((0,Nr.zg)(y=>y&&function(n){return"boolean"==typeof n}(y)?function(n,e,t,r){return(0,_n.D)(e).pipe(ti(a=>Ao(function(n,e){return null!==n&&e&&e(new st(n)),(0,pt.of)(!0)}(a.route.parent,r),function(n,e){return null!==n&&e&&e(new St(n)),(0,pt.of)(!0)}(a.route,r),function(n,e,t){const r=e[e.length-1],l=e.slice(0,e.length-1).reverse().map(h=>function(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(h)).filter(h=>null!==h).map(h=>Ys(()=>{const y=h.guards.map(w=>{const D=cm(w,h.node,t);let x;if(function(n){return n&&Gr(n.canActivateChild)}(D))x=ls(D.canActivateChild(r,n));else{if(!Gr(D))throw new Error("Invalid CanActivateChild guard");x=ls(D(r,n))}return x.pipe(xo())});return(0,pt.of)(y).pipe(Xu())}));return(0,pt.of)(l).pipe(Xu())}(n,a.path,t),function(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,pt.of)(!0);const a=r.map(l=>Ys(()=>{const h=cm(l,e,t);let y;if(function(n){return n&&Gr(n.canActivate)}(h))y=ls(h.canActivate(e,n));else{if(!Gr(h))throw new Error("Invalid CanActivate guard");y=ls(h(e,n))}return y.pipe(xo())}));return(0,pt.of)(a).pipe(Xu())}(n,a.route,t))),xo(a=>!0!==a,!0))}(r,l,n,e):(0,pt.of)(y)),(0,bt.U)(y=>Object.assign(Object.assign({},t),{guardsResult:y})))})}(this.ngModule.injector,y=>this.triggerEvent(y)),(0,$r.b)(y=>{if(No(y.guardsResult)){const D=Mo(`Redirecting to "${this.serializeUrl(y.guardsResult)}"`);throw D.url=y.guardsResult,D}const w=new $(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot,!!y.guardsResult);this.triggerEvent(w)}),Js(y=>!!y.guardsResult||(this.restoreHistory(y),this.cancelNavigationTransition(y,""),!1)),hm(y=>{if(y.guards.canActivateChecks.length)return(0,pt.of)(y).pipe((0,$r.b)(w=>{const D=new Q(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(D)}),qn(w=>{let D=!1;return(0,pt.of)(w).pipe(function(n,e){return(0,Nr.zg)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:a}}=t;if(!a.length)return(0,pt.of)(t);let l=0;return(0,_n.D)(a).pipe(ti(h=>function(n,e,t,r){return function(n,e,t,r){const a=Object.keys(n);if(0===a.length)return(0,pt.of)({});const l={};return(0,_n.D)(a).pipe((0,Nr.zg)(h=>function(n,e,t,r){const a=cm(n,e,r);return ls(a.resolve?a.resolve(e,t):a(e,t))}(n[h],e,t,r).pipe((0,$r.b)(y=>{l[h]=y}))),Hu(1),(0,Nr.zg)(()=>Object.keys(l).length===a.length?(0,pt.of)(l):Ci.E))}(n._resolve,n,e,r).pipe((0,bt.U)(l=>(n._resolvedData=l,n.data=Object.assign(Object.assign({},n.data),Zg(n,t).resolve),null)))}(h.route,r,n,e)),(0,$r.b)(()=>l++),Hu(1),(0,Nr.zg)(h=>l===a.length?(0,pt.of)(t):Ci.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,$r.b)({next:()=>D=!0,complete:()=>{D||(this.restoreHistory(w),this.cancelNavigationTransition(w,"At least one route resolver didn't emit any value."))}}))}),(0,$r.b)(w=>{const D=new ce(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(D)}))}),hm(y=>{const{targetSnapshot:w,id:D,extractedUrl:x,rawUrl:P,extras:{skipLocationChange:z,replaceUrl:J}}=y;return this.hooks.afterPreactivation(w,{navigationId:D,appliedUrlTree:x,rawUrlTree:P,skipLocationChange:!!z,replaceUrl:!!J})}),(0,bt.U)(y=>{const w=function(n,e,t){const r=ll(n,e._root,t?t._root:void 0);return new Wg(r,e)}(this.routeReuseStrategy,y.targetSnapshot,y.currentRouterState);return Object.assign(Object.assign({},y),{targetRouterState:w})}),(0,$r.b)(y=>{this.currentUrlTree=y.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(y.urlAfterRedirects,y.rawUrl),this.routerState=y.targetRouterState,"deferred"===this.urlUpdateStrategy&&(y.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,y),this.browserUrlTree=y.urlAfterRedirects)}),((n,e,t)=>(0,bt.U)(r=>(new ht(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,y=>this.triggerEvent(y)),(0,$r.b)({next(){l=!0},complete(){l=!0}}),function(n){return e=>e.lift(new ri(n))}(()=>{var y;if(!l&&!h){const w=`Navigation ID ${a.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(a),this.cancelNavigationTransition(a,w)):this.cancelNavigationTransition(a,w)}(null===(y=this.currentNavigation)||void 0===y?void 0:y.id)===a.id&&(this.currentNavigation=null)}),So(y=>{if(h=!0,function(n){return n&&n[Wi]}(y)){const w=No(y.url);w||(this.navigated=!0,this.restoreHistory(a,!0));const D=new Xf(a.id,this.serializeUrl(a.extractedUrl),y.message);r.next(D),w?setTimeout(()=>{const x=this.urlHandlingStrategy.merge(y.url,this.rawUrlTree),P={skipLocationChange:a.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||ha(a.source)};this.scheduleNavigation(x,"imperative",null,P,{resolve:a.resolve,reject:a.reject,promise:a.promise})},0):a.resolve(!1)}else{this.restoreHistory(a,!0);const w=new C(a.id,this.serializeUrl(a.extractedUrl),y);r.next(w);try{a.resolve(this.errorHandler(y))}catch(D){a.reject(D)}}return Ci.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,r)&&setTimeout(()=>{const{source:a,state:l,urlTree:h}=r,y={replaceUrl:!0};if(l){const w=Object.assign({},l);delete w.navigationId,delete w.\u0275routerPageId,0!==Object.keys(w).length&&(y.state=w)}this.scheduleNavigation(h,a,l,y)},0),this.lastLocationChangeInfo=r}))}extractLocationChangeInfoFromEvent(t){var r;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(r=t.state)||void 0===r?void 0:r.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,r){if(!t)return!0;const a=r.urlTree.toString()===t.urlTree.toString();return r.transitionId!==t.transitionId||!a||!("hashchange"===r.source&&"popstate"===t.source||"popstate"===r.source&&"hashchange"===t.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){ii(t),this.config=t.map(rm),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:a,queryParams:l,fragment:h,queryParamsHandling:y,preserveFragment:w}=r,D=a||this.routerState.root,x=w?this.currentUrlTree.fragment:h;let P=null;switch(y){case"merge":P=Object.assign(Object.assign({},this.currentUrlTree.queryParams),l);break;case"preserve":P=this.currentUrlTree.queryParams;break;default:P=l||null}return null!==P&&(P=this.removeEmptyProps(P)),function(n,e,t,r,a){if(0===t.length)return Jg(e.root,e.root,e,r,a);const l=function(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Zd(!0,0,n);let e=0,t=!1;const r=n.reduce((a,l,h)=>{if("object"==typeof l&&null!=l){if(l.outlets){const y={};return yr(l.outlets,(w,D)=>{y[D]="string"==typeof w?w.split("/"):w}),[...a,{outlets:y}]}if(l.segmentPath)return[...a,l.segmentPath]}return"string"!=typeof l?[...a,l]:0===h?(l.split("/").forEach((y,w)=>{0==w&&"."===y||(0==w&&""===y?t=!0:".."===y?e++:""!=y&&a.push(y))}),a):[...a,l]},[]);return new Zd(t,e,r)}(t);if(l.toRoot())return Jg(e.root,new Kt([],{}),e,r,a);const h=function(n,e,t){if(n.isAbsolute)return new fl(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const l=t.snapshot._urlSegment;return new fl(l,l===e.root,0)}const r=hl(n.commands[0])?0:1;return function(n,e,t){let r=n,a=e,l=t;for(;l>a;){if(l-=a,r=r.parent,!r)throw new Error("Invalid number of '../'");a=r.segments.length}return new fl(r,!1,a-l)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(l,e,n),y=h.processChildren?E(h.segmentGroup,h.index,l.commands):m(h.segmentGroup,h.index,l.commands);return Jg(h.segmentGroup,y,e,r,a)}(D,this.currentUrlTree,t,P,null!=x?x:null)}navigateByUrl(t,r={skipLocationChange:!1}){const a=No(t)?t:this.parseUrl(t),l=this.urlHandlingStrategy.merge(a,this.rawUrlTree);return this.scheduleNavigation(l,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(a){r=this.malformedUriErrorHandler(a,this.urlSerializer,t)}return r}isActive(t,r){let a;if(a=!0===r?Object.assign({},JT):!1===r?Object.assign({},XT):r,No(t))return rl(this.currentUrlTree,t,a);const l=this.parseUrl(t);return rl(this.currentUrlTree,l,a)}removeEmptyProps(t){return Object.keys(t).reduce((r,a)=>{const l=t[a];return null!=l&&(r[a]=l),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new to(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,a,l,h){var y,w;if(this.disposed)return Promise.resolve(!1);const D=this.getTransition(),x=ha(r)&&D&&!ha(D.source),J=(this.lastSuccessfulId===D.id||this.currentNavigation?D.rawUrl:D.urlAfterRedirects).toString()===t.toString();if(x&&J)return Promise.resolve(!0);let fe,Le,Ve;h?(fe=h.resolve,Le=h.reject,Ve=h.promise):Ve=new Promise((xt,kt)=>{fe=xt,Le=kt});const Pt=++this.navigationId;let $t;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(a=this.location.getState()),$t=a&&a.\u0275routerPageId?a.\u0275routerPageId:l.replaceUrl||l.skipLocationChange?null!==(y=this.browserPageId)&&void 0!==y?y:0:(null!==(w=this.browserPageId)&&void 0!==w?w:0)+1):$t=0,this.setTransition({id:Pt,targetPageId:$t,source:r,restoredState:a,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:l,resolve:fe,reject:Le,promise:Ve,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Ve.catch(xt=>Promise.reject(xt))}setBrowserUrl(t,r){const a=this.urlSerializer.serialize(t),l=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(a)||r.extras.replaceUrl?this.location.replaceState(a,"",l):this.location.go(a,"",l)}restoreHistory(t,r=!1){var a,l;if("computed"===this.canceledNavigationResolution){const h=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)||0===h?this.currentUrlTree===(null===(l=this.currentNavigation)||void 0===l?void 0:l.finalUrl)&&0===h&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(h)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const a=new Xf(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(a),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(p.DyG),p.LFG(sl),p.LFG(nh),p.LFG(ut),p.LFG(p.zs3),p.LFG(p.v3s),p.LFG(p.Sil),p.LFG(void 0))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function ha(n){return"imperative"!==n}let rh=(()=>{class n{constructor(t,r,a){this.router=t,this.route=r,this.locationStrategy=a,this.commands=[],this.onChanges=new $i.xQ,this.subscription=t.events.subscribe(l=>{l instanceof to&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,a,l,h){if(0!==t||r||a||l||h||"string"==typeof this.target&&"_self"!=this.target)return!0;const y={skipLocationChange:ih(this.skipLocationChange),replaceUrl:ih(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,y),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:ih(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(si),p.Y36(ca),p.Y36(ge))},n.\u0275dir=p.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&p.NdJ("click",function(l){return r.onClick(l.button,l.ctrlKey,l.shiftKey,l.altKey,l.metaKey)}),2&t&&(p.Ikx("href",r.href,p.LSH),p.uIk("target",r.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[p.TTD]}),n})();function ih(n){return""===n||!!n}let mm=(()=>{class n{constructor(t,r,a,l,h){this.parentContexts=t,this.location=r,this.resolver=a,this.changeDetector=h,this.activated=null,this._activatedRoute=null,this.activateEvents=new p.vpe,this.deactivateEvents=new p.vpe,this.name=l||dt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const h=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),y=this.parentContexts.getOrCreateContext(this.name).children,w=new rw(t,y,this.location.injector);this.activated=this.location.createComponent(h,this.location.length,w),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(nh),p.Y36(p.s_b),p.Y36(p._Vd),p.$8M("name"),p.Y36(p.sBO))},n.\u0275dir=p.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),n})();class rw{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===ca?this.route:e===nh?this.childContexts:this.parent.get(e,t)}}class Ev{}class wv{preload(e,t){return(0,pt.of)(null)}}let dp=(()=>{class n{constructor(t,r,a,l,h){this.router=t,this.injector=l,this.preloadingStrategy=h,this.loader=new Xb(r,a,D=>t.triggerEvent(new we(D)),D=>t.triggerEvent(new Be(D)))}setUpPreloading(){this.subscription=this.router.events.pipe(Js(t=>t instanceof to),ti(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(p.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const a=[];for(const l of r)if(l.loadChildren&&!l.canLoad&&l._loadedConfig){const h=l._loadedConfig;a.push(this.processRoutes(h.module,h.routes))}else l.loadChildren&&!l.canLoad?a.push(this.preloadConfig(t,l)):l.children&&a.push(this.processRoutes(t,l.children));return(0,_n.D)(a).pipe((0,ss.J)(),(0,bt.U)(l=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?(0,pt.of)(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Nr.zg)(l=>(r._loadedConfig=l,this.processRoutes(l.module,l.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(si),p.LFG(p.v3s),p.LFG(p.Sil),p.LFG(p.zs3),p.LFG(Ev))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),sh=(()=>{class n{constructor(t,r,a={}){this.router=t,this.viewportScroller=r,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration=a.scrollPositionRestoration||"disabled",a.anchorScrolling=a.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof $a?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof to&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof mr&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new mr(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(si),p.LFG(_o),p.LFG(void 0))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const Za=new p.OlP("ROUTER_CONFIGURATION"),Cv=new p.OlP("ROUTER_FORROOT_GUARD"),hp=[ut,{provide:sl,useClass:ep},{provide:si,useFactory:function(n,e,t,r,a,l,h,y={},w,D){const x=new si(null,n,e,t,r,a,l,no(h));return w&&(x.urlHandlingStrategy=w),D&&(x.routeReuseStrategy=D),function(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy)}(y,x),y.enableTracing&&x.events.subscribe(P=>{var z,J;null===(z=console.group)||void 0===z||z.call(console,`Router Event: ${P.constructor.name}`),console.log(P.toString()),console.log(P),null===(J=console.groupEnd)||void 0===J||J.call(console)}),x},deps:[sl,nh,ut,p.zs3,p.v3s,p.Sil,_v,Za,[class{},new p.FiY],[class{},new p.FiY]]},nh,{provide:ca,useFactory:function(n){return n.routerState.root},deps:[si]},{provide:p.v3s,useClass:p.EAV},dp,wv,class{preload(e,t){return t().pipe(So(()=>(0,pt.of)(null)))}},{provide:Za,useValue:{enableTracing:!1}}];function nA(){return new p.PXZ("Router",si)}let Dv=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[hp,ym(t),{provide:Cv,useFactory:iw,deps:[[si,new p.FiY,new p.tp0]]},{provide:Za,useValue:r||{}},{provide:ge,useFactory:iA,deps:[ae,[new p.tBr(xe),new p.FiY],Za]},{provide:sh,useFactory:rA,deps:[si,_o,Za]},{provide:Ev,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:wv},{provide:p.PXZ,multi:!0,useFactory:nA},[Tv,{provide:p.ip1,multi:!0,useFactory:aw,deps:[Tv]},{provide:uw,useFactory:sA,deps:[Tv]},{provide:p.tb,multi:!0,useExisting:uw}]]}}static forChild(t){return{ngModule:n,providers:[ym(t)]}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Cv,8),p.LFG(si,8))},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})();function rA(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new sh(n,e,t)}function iA(n,e,t={}){return t.useHash?new Ze(n,e):new De(n,e)}function iw(n){return"guarded"}function ym(n){return[{provide:p.deG,multi:!0,useValue:n},{provide:_v,multi:!0,useValue:n}]}let Tv=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new $i.xQ}appInitializer(){return this.injector.get(V,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const a=new Promise(y=>r=y),l=this.injector.get(si),h=this.injector.get(Za);return"disabled"===h.initialNavigation?(l.setUpLocationChangeListener(),r(!0)):"enabled"===h.initialNavigation||"enabledBlocking"===h.initialNavigation?(l.hooks.afterPreactivation=()=>this.initNavigation?(0,pt.of)(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),l.initialNavigation()):r(!0),a})}bootstrapListener(t){const r=this.injector.get(Za),a=this.injector.get(dp),l=this.injector.get(sh),h=this.injector.get(si),y=this.injector.get(p.z2F);t===y.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&h.initialNavigation(),a.setUpPreloading(),l.init(),h.resetRootComponentType(y.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(p.zs3))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function aw(n){return n.appInitializer.bind(n)}function sA(n){return n.bootstrapListener.bind(n)}const uw=new p.OlP("Router Initializer");var cw=L(3607),cn=L(3854),yl=L(8026),ec=L(5422),_m=L(3910),lw=L(6682),fp=L(309),oA=L(7771),aA=L(8858);class Bt extends $i.xQ{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,r){super(),this.scheduler=r,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new dw(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,r=t?this._events:this._trimBufferThenGetEvents(),a=this.scheduler,l=r.length;let h;if(this.closed)throw new ea.N;if(this.isStopped||this.hasError?h=nl.w.EMPTY:(this.observers.push(e),h=new aA.W(this,e)),a&&e.add(e=new fp.ht(e,a)),t)for(let y=0;y<l&&!e.closed;y++)e.next(r[y]);else for(let y=0;y<l&&!e.closed;y++)e.next(r[y].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),h}_getNow(){return(this.scheduler||oA.c).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,r=this._windowTime,a=this._events,l=a.length;let h=0;for(;h<l&&!(e-a[h].time<r);)h++;return l>t&&(h=Math.max(h,l-t)),h>0&&a.splice(0,h),a}}class dw{constructor(e,t){this.time=e,this.value=t}}function Av(n,e,t){let r;return r=n&&"object"==typeof n?n:{bufferSize:n,windowTime:e,refCount:!1,scheduler:t},a=>a.lift(function({bufferSize:n=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:t,scheduler:r}){let a,h,l=0,y=!1,w=!1;return function(x){let P;l++,!a||y?(y=!1,a=new Bt(n,e,r),P=a.subscribe(this),h=x.subscribe({next(z){a.next(z)},error(z){y=!0,a.error(z)},complete(){w=!0,h=void 0,a.complete()}}),w&&(h=void 0)):P=a.subscribe(this),this.add(()=>{l--,P.unsubscribe(),P=void 0,h&&!w&&t&&0===l&&(h.unsubscribe(),h=void 0,a=void 0)})}}(r))}function ro(n,e){return e?qn(()=>n,e):qn(()=>n)}var Em=L(3101),Ai=L(8440),Ms=L(8939);L(2329);var _e=L(8239);const gw=new Map,Sv={activated:!1,tokenObservers:[]},$M={initialized:!1,enabled:!1};function gi(n){return gw.get(n)||Sv}function ko(n,e){gw.set(n,e)}function xv(){return $M}class zM{constructor(e,t,r,a,l){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=a,this.upperBound=l,this.pending=null,this.nextErrorWaitInterval=a,a>l)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,_e.Z)(function*(){t.stop();try{t.pending=new cn.BH,yield(n=t.getNextRun(e),new Promise(e=>{setTimeout(e,n)})),t.pending.resolve(),yield t.pending.promise,t.pending=new cn.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}var n})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ki=new cn.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Im(n){if(!gi(n).activated)throw Ki.create("use-before-activation",{appName:n.name})}function Rv(n,e){return pa.apply(this,arguments)}function pa(){return(pa=(0,_e.Z)(function*({url:n,body:e},t){var r,a;const l={"Content-Type":"application/json"},h=t.getImmediate({optional:!0});if(h){const J=yield h.getHeartbeatsHeader();J&&(l["X-Firebase-Client"]=J)}const y={method:"POST",body:JSON.stringify(e),headers:l};let w,D;try{w=yield fetch(n,y)}catch(J){throw Ki.create("fetch-network-error",{originalErrorMessage:null===(r=J)||void 0===r?void 0:r.message})}if(200!==w.status)throw Ki.create("fetch-status-error",{httpStatus:w.status});try{D=yield w.json()}catch(J){throw Ki.create("fetch-parse-error",{originalErrorMessage:null===(a=J)||void 0===a?void 0:a.message})}const x=D.ttl.match(/^([\d.]+)(s)$/);if(!x||!x[2]||isNaN(Number(x[1])))throw Ki.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${D.ttl}`});const P=1e3*Number(x[1]),z=Date.now();return{token:D.token,expireTimeMillis:z+P,issuedAtTimeMillis:z}})).apply(this,arguments)}function ZM(n,e){const{projectId:t,appId:r,apiKey:a}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${a}`,body:{debug_token:e}}}const uh="firebase-app-check-store";let Tm=null;function ch(){return Tm||(Tm=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=a=>{n(a.target.result)},r.onerror=a=>{var l;e(Ki.create("storage-open",{originalErrorMessage:null===(l=a.target.error)||void 0===l?void 0:l.message}))},r.onupgradeneeded=a=>{0===a.oldVersion&&a.target.result.createObjectStore(uh,{keyPath:"compositeKey"})}}catch(r){e(Ki.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),Tm)}function Pv(){return(Pv=(0,_e.Z)(function*(n,e){const r=(yield ch()).transaction(uh,"readwrite"),l=r.objectStore(uh).put({compositeKey:n,value:e});return new Promise((h,y)=>{l.onsuccess=w=>{h()},r.onerror=w=>{var D;y(Ki.create("storage-set",{originalErrorMessage:null===(D=w.target.error)||void 0===D?void 0:D.message}))}})})).apply(this,arguments)}const vl=new ec.Yd("@firebase/app-check");function Fv(n,e){return(0,cn.hl)()?function(n,e){return function(n,e){return Pv.apply(this,arguments)}(function(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{vl.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Lv(){return xv().enabled}function Vv(){return Uv.apply(this,arguments)}function Uv(){return(Uv=(0,_e.Z)(function*(){const n=xv();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const fA={error:"UNKNOWN_ERROR"};function pA(n){return cn.US.encodeString(JSON.stringify(n),!1)}function Si(n){return Bv.apply(this,arguments)}function Bv(){return(Bv=(0,_e.Z)(function*(n,e=!1){const t=n.app;Im(t);const r=gi(t);let l,a=r.token;if(a&&!fh(a)&&(ko(t,Object.assign(Object.assign({},r),{token:void 0})),a=void 0),!a){const w=yield r.cachedTokenPromise;w&&(fh(w)?a=w:yield Fv(t,void 0))}if(!e&&a&&fh(a))return{token:a.token};let y,h=!1;if(Lv()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Rv(ZM(t,yield Vv()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),h=!0);const w=yield r.exchangeTokenPromise;return yield Fv(t,w),ko(t,Object.assign(Object.assign({},r),{token:w})),{token:w.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),h=!0),a=yield r.exchangeTokenPromise}catch(w){"appCheck/throttled"===w.code?vl.warn(w.message):vl.error(w),l=w}return a?l?y=fh(a)?{token:a.token,internalError:l}:xm(l):(y={token:a.token},ko(t,Object.assign(Object.assign({},r),{token:a})),yield Fv(t,a)):y=xm(l),h&&mA(t,y),y})).apply(this,arguments)}function Cw(n,e){const t=gi(n),r=t.tokenObservers.filter(a=>a.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),ko(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function gA(n){const{app:e}=n,t=gi(e);let r=t.tokenRefresher;r||(r=function(n){const{app:e}=n;return new zM((0,_e.Z)(function*(){let r;if(r=gi(e).token?yield Si(n,!0):yield Si(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=gi(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),ko(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function mA(n,e){const t=gi(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(a){}}function fh(n){return n.expireTimeMillis-Date.now()>0}function xm(n){return{token:pA(fA),error:n}}class Dw{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=gi(this.app);for(const t of e)Cw(this.app,t.next);return Promise.resolve()}}const Mm="app-check-internal";(0,yl._registerComponent)(new _m.wA("app-check",n=>function(n,e){return new Dw(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Mm).initialize()})),(0,yl._registerComponent)(new _m.wA(Mm,n=>function(n){return{getToken:e=>Si(n,e),addTokenListener:e=>function(n,e,t,r){const{app:a}=n,l=gi(a),h={next:t,error:r,type:e};if(ko(a,Object.assign(Object.assign({},l),{tokenObservers:[...l.tokenObservers,h]})),l.token&&fh(l.token)){const y=l.token;Promise.resolve().then(()=>{t({token:y.token}),gA(n)}).catch(()=>{})}l.cachedTokenPromise.then(()=>gA(n))}(n,"INTERNAL",e),removeTokenListener:e=>Cw(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,yl.registerVersion)("@firebase/app-check","0.5.15");class _p{constructor(){return(0,Ai.vb)("app-check")}}"undefined"!=typeof window&&window,L(7841);const Nm=new p.OlP("angularfire2.auth.use-emulator"),Yv=new p.OlP("angularfire2.auth.settings"),Vw=new p.OlP("angularfire2.auth.tenant-id"),Qv=new p.OlP("angularfire2.auth.langugage-code"),Uw=new p.OlP("angularfire2.auth.use-device-language"),Pm=new p.OlP("angularfire.auth.persistence"),Bw=(n,e,t,r,a,l,h,y)=>(0,Ms.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const w=e.runOutsideAngular(()=>n.auth());if(t&&w.useEmulator(...t),r&&(w.tenantId=r),w.languageCode=a,l&&w.useDeviceLanguage(),h)for(const[D,x]of Object.entries(h))w.settings[D]=x;return y&&w.setPersistence(y),w},[t,r,a,l,h,y]);let Jv=(()=>{class n{constructor(t,r,a,l,h,y,w,D,x,P,z,J){const fe=new $i.xQ,Le=(0,pt.of)(void 0).pipe((0,fp.QV)(h.outsideAngular),qn(()=>l.runOutsideAngular(()=>Promise.resolve().then(L.bind(L,4828)))),(0,bt.U)(()=>(0,Ms.on)(t,l,r)),(0,bt.U)(Ve=>Bw(Ve,l,y,D,x,P,w,z)),Av({bufferSize:1,refCount:!1}));if(yo(a))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,pt.of)(null);else{Le.pipe(xo()).subscribe();const Pt=Le.pipe(qn(kt=>kt.getRedirectResult().then(Ht=>Ht,()=>null)),Ai.iC,Av({bufferSize:1,refCount:!1})),$t=Le.pipe(qn(kt=>new ei.y(Ht=>({unsubscribe:l.runOutsideAngular(()=>kt.onAuthStateChanged(Jt=>Ht.next(Jt),Jt=>Ht.error(Jt),()=>Ht.complete()))})))),xt=Le.pipe(qn(kt=>new ei.y(Ht=>({unsubscribe:l.runOutsideAngular(()=>kt.onIdTokenChanged(Jt=>Ht.next(Jt),Jt=>Ht.error(Jt),()=>Ht.complete()))}))));this.authState=Pt.pipe(ro($t),(0,Em.R)(h.outsideAngular),(0,fp.QV)(h.insideAngular)),this.user=Pt.pipe(ro(xt),(0,Em.R)(h.outsideAngular),(0,fp.QV)(h.insideAngular)),this.idToken=this.user.pipe(qn(kt=>kt?(0,_n.D)(kt.getIdToken()):(0,pt.of)(null))),this.idTokenResult=this.user.pipe(qn(kt=>kt?(0,_n.D)(kt.getIdTokenResult()):(0,pt.of)(null))),this.credential=(0,lw.T)(Pt,fe,this.authState.pipe(Js(kt=>!kt))).pipe((0,bt.U)(kt=>(null==kt?void 0:kt.user)?kt:null),(0,Em.R)(h.outsideAngular),(0,fp.QV)(h.insideAngular))}return(0,Ms.pX)(this,Le,l,{spy:{apply:(Ve,Pt,$t)=>{(Ve.startsWith("signIn")||Ve.startsWith("createUser"))&&$t.then(xt=>fe.next(xt))}}})}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Ms.Dh),p.LFG(Ms.xv,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(Ai.HU),p.LFG(Nm,8),p.LFG(Yv,8),p.LFG(Vw,8),p.LFG(Qv,8),p.LFG(Uw,8),p.LFG(Pm,8),p.LFG(_p,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();var ph=L(3637);function km(){return n=>n.lift(new NA)}class NA{call(e,t){return t.subscribe(new PA(e))}}class PA extends pr.L{constructor(e){super(e),this.hasPrev=!1}_next(e){let t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}class kA{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new FA(e,this.compare,this.keySelector))}}class FA extends pr.L{constructor(e,t,r){super(e),this.keySelector=r,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:a}=this;t=a?a(e):e}catch(a){return this.destination.error(a)}let r=!1;if(this.hasKey)try{const{compare:a}=this;r=a(this.key,t)}catch(a){return this.destination.error(a)}else this.hasKey=!0;r||(this.key=t,this.destination.next(e))}}L(4828);var it,LA=L(3394),XM="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ka={},Rn=Rn||{},Ot=XM||self;function Xv(){}function so(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function El(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var jw="closure_uid_"+(1e9*Math.random()>>>0),VA=0;function UA(n,e,t){return n.call.apply(n.bind,arguments)}function $w(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var a=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(a,r),n.apply(e,a)}}return function(){return n.apply(e,arguments)}}function mi(n,e,t){return(mi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?UA:$w).apply(null,arguments)}function Ep(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function oi(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,a,l){for(var h=Array(arguments.length-2),y=2;y<arguments.length;y++)h[y-2]=arguments[y];return e.prototype[a].apply(r,h)}}function ic(){this.s=this.s,this.o=this.o}var bp={};ic.prototype.s=!1,ic.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function(n){return Object.prototype.hasOwnProperty.call(n,jw)&&n[jw]||(n[jw]=++VA)}(this);delete bp[n]}},ic.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Fm=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Lm(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function t0(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(so(r)){const a=n.length||0,l=r.length||0;n.length=a+l;for(let h=0;h<l;h++)n[a+h]=r[h]}else n.push(r)}}function yi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}yi.prototype.h=function(){this.defaultPrevented=!0};var Hw=function(){if(!Ot.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Ot.addEventListener("test",Xv,e),Ot.removeEventListener("test",Xv,e)}catch(t){}return n}();function Vm(n){return/^[\s\xa0]*$/.test(n)}var Gw=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function n0(n,e){return n<e?-1:n>e?1:0}function Um(){var n=Ot.navigator;return n&&(n=n.userAgent)?n:""}function Fo(n){return-1!=Um().indexOf(n)}function qw(n){return qw[" "](n),n}qw[" "]=Xv;var wp,n,jA=Fo("Opera"),mh=Fo("Trident")||Fo("MSIE"),$A=Fo("Edge"),zw=$A||mh,Bm=Fo("Gecko")&&!(-1!=Um().toLowerCase().indexOf("webkit")&&!Fo("Edge"))&&!(Fo("Trident")||Fo("MSIE"))&&!Fo("Edge"),HA=-1!=Um().toLowerCase().indexOf("webkit")&&!Fo("Edge");function r0(){var n=Ot.document;return n?n.documentMode:void 0}e:{var Zw="",Rs=(n=Um(),Bm?/rv:([^\);]+)(\)|;)/.exec(n):$A?/Edge\/([\d\.]+)/.exec(n):mh?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):HA?/WebKit\/(\S+)/.exec(n):jA?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Rs&&(Zw=Rs?Rs[1]:""),mh){var Kw=r0();if(null!=Kw&&Kw>parseFloat(Zw)){wp=String(Kw);break e}}wp=Zw}var eR={};function tR(){return e=eR,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let n=0;const e=Gw(String(wp)).split("."),t=Gw("9").split("."),r=Math.max(e.length,t.length);for(let h=0;0==n&&h<r;h++){var a=e[h]||"",l=t[h]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],l=/(\d*)(\D*)(.*)/.exec(l)||["","","",""],0==a[0].length&&0==l[0].length)break;n=n0(0==a[1].length?0:parseInt(a[1],10),0==l[1].length?0:parseInt(l[1],10))||n0(0==a[2].length,0==l[2].length)||n0(a[2],l[2]),a=a[3],l=l[3]}while(0==n)}return 0<=n}();var e}var Yw=Ot.document&&mh&&(r0()||parseInt(wp,10))||void 0;function Cp(n,e){if(yi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Bm){e:{try{qw(e.nodeName);var a=!0;break e}catch(l){}a=!1}a||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:nR[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Cp.X.h.call(this)}}oi(Cp,yi);var nR={2:"touch",3:"pen",4:"mouse"};Cp.prototype.h=function(){Cp.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var yh="closure_listenable_"+(1e6*Math.random()|0),o0=0;function GA(n,e,t,r,a){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=a,this.key=++o0,this.ba=this.ea=!1}function _h(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function a0(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Qw(n){const e={};for(const t in n)e[t]=n[t];return e}const Jw="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Xw(n,e){let t,r;for(let a=1;a<arguments.length;a++){for(t in r=arguments[a],r)n[t]=r[t];for(let l=0;l<Jw.length;l++)t=Jw[l],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function $m(n){this.src=n,this.g={},this.h=0}function u0(n,e){var t=e.type;if(t in n.g){var l,r=n.g[t],a=Fm(r,e);(l=0<=a)&&Array.prototype.splice.call(r,a,1),l&&(_h(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function vh(n,e,t,r){for(var a=0;a<n.length;++a){var l=n[a];if(!l.ba&&l.listener==e&&l.capture==!!t&&l.ha==r)return a}return-1}$m.prototype.add=function(n,e,t,r,a){var l=n.toString();(n=this.g[l])||(n=this.g[l]=[],this.h++);var h=vh(n,e,r,a);return-1<h?(e=n[h],t||(e.ea=!1)):((e=new GA(e,this.src,l,!!r,a)).ea=t,n.push(e)),e};var sc="closure_lm_"+(1e6*Math.random()|0),Hm={};function oo(n,e,t,r,a){if(r&&r.once)return eC(n,e,t,r,a);if(Array.isArray(e)){for(var l=0;l<e.length;l++)oo(n,e[l],t,r,a);return null}return t=fs(t),n&&n[yh]?n.N(e,t,El(r)?!!r.capture:!!r,a):Eh(n,e,t,!1,r,a)}function Eh(n,e,t,r,a,l){if(!e)throw Error("Invalid event type");var h=El(a)?!!a.capture:!!a,y=Ya(n);if(y||(n[sc]=y=new $m(n)),(t=y.add(e,t,r,h,l)).proxy)return t;if(r=function(){const e=xi;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Hw||(a=h),void 0===a&&(a=!1),n.addEventListener(e.toString(),r,a);else if(n.attachEvent)n.attachEvent(bh(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function eC(n,e,t,r,a){if(Array.isArray(e)){for(var l=0;l<e.length;l++)eC(n,e[l],t,r,a);return null}return t=fs(t),n&&n[yh]?n.O(e,t,El(r)?!!r.capture:!!r,a):Eh(n,e,t,!0,r,a)}function Gm(n,e,t,r,a){if(Array.isArray(e))for(var l=0;l<e.length;l++)Gm(n,e[l],t,r,a);else r=El(r)?!!r.capture:!!r,t=fs(t),n&&n[yh]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=vh(l=n.g[e],t,r,a))&&(_h(l[t]),Array.prototype.splice.call(l,t,1),0==l.length&&(delete n.g[e],n.h--))):n&&(n=Ya(n))&&(e=n.g[e.toString()],n=-1,e&&(n=vh(e,t,r,a)),(t=-1<n?e[n]:null)&&ao(t))}function ao(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[yh])u0(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(bh(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Ya(e))?(u0(t,n),0==t.h&&(t.src=null,e[sc]=null)):_h(n)}}}function bh(n){return n in Hm?Hm[n]:Hm[n]="on"+n}function xi(n,e){if(n.ba)n=!0;else{e=new Cp(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&ao(n),n=t.call(r,e)}return n}function Ya(n){return(n=n[sc])instanceof $m?n:null}var wh="__closure_events_fn_"+(1e9*Math.random()>>>0);function fs(n){return"function"==typeof n?n:(n[wh]||(n[wh]=function(e){return n.handleEvent(e)}),n[wh])}function Pr(){ic.call(this),this.i=new $m(this),this.P=this,this.I=null}function ar(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new yi(e,n);else if(e instanceof yi)e.target=e.target||n;else{var a=e;Xw(e=new yi(r,n),a)}if(a=!0,t)for(var l=t.length-1;0<=l;l--){var h=e.g=t[l];a=Qa(h,r,!0,e)&&a}if(a=Qa(h=e.g=n,r,!0,e)&&a,a=Qa(h,r,!1,e)&&a,t)for(l=0;l<t.length;l++)a=Qa(h=e.g=t[l],r,!1,e)&&a}function Qa(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var a=!0,l=0;l<e.length;++l){var h=e[l];if(h&&!h.ba&&h.capture==t){var y=h.listener,w=h.ha||h.src;h.ea&&u0(n.i,h),a=!1!==y.call(w,r)&&a}}return a&&!r.defaultPrevented}oi(Pr,ic),Pr.prototype[yh]=!0,Pr.prototype.removeEventListener=function(n,e,t,r){Gm(this,n,e,t,r)},Pr.prototype.M=function(){if(Pr.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)_h(t[r]);delete n.g[e],n.h--}}this.I=null},Pr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Pr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var oc=Ot.JSON.stringify;function Ch(){var n=c0;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var qm,bl=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new Dh,n=>n.reset());class Dh{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Th(n){Ot.setTimeout(()=>{throw n},0)}function wl(n,e){qm||function(){var n=Ot.Promise.resolve(void 0);qm=function(){n.then(nC)}}(),Wm||(qm(),Wm=!0),c0.add(n,e)}var Wm=!1,c0=new class{constructor(){this.h=this.g=null}add(e,t){const r=bl.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function nC(){for(var n;n=Ch();){try{n.h.call(n.g)}catch(t){Th(t)}var e=bl;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Wm=!1}function Ip(n,e){Pr.call(this),this.h=n||1,this.g=e||Ot,this.j=mi(this.lb,this),this.l=Date.now()}function zm(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function Zm(n,e,t){if("function"==typeof n)t&&(n=mi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=mi(n.handleEvent,n)}return 2147483647<Number(e)?-1:Ot.setTimeout(n,e||0)}function l0(n){n.g=Zm(()=>{n.g=null,n.i&&(n.i=!1,l0(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}oi(Ip,Pr),(it=Ip.prototype).ca=!1,it.R=null,it.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),ar(this,"tick"),this.ca&&(zm(this),this.start()))}},it.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},it.M=function(){Ip.X.M.call(this),zm(this),delete this.g};class WA extends ic{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:l0(this)}M(){super.M(),this.g&&(Ot.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ah(n){ic.call(this),this.h=n,this.g={}}oi(Ah,ic);var rC=[];function d0(n,e,t,r){Array.isArray(t)||(t&&(rC[0]=t.toString()),t=rC);for(var a=0;a<t.length;a++){var l=oo(e,t[a],r||n.handleEvent,!1,n.h||n);if(!l)break;n.g[l.key]=l}}function h0(n){a0(n.g,function(e,t){this.g.hasOwnProperty(t)&&ao(e)},n),n.g={}}function Km(){this.g=!0}function Cl(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var a=r[1];if(Array.isArray(a)&&!(1>a.length)){var l=a[0];if("noop"!=l&&"stop"!=l&&"close"!=l)for(var h=1;h<a.length;h++)a[h]=""}}}return oc(t)}catch(y){return e}}(n,t)+(r?" "+r:"")})}Ah.prototype.M=function(){Ah.X.M.call(this),h0(this)},Ah.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Km.prototype.Aa=function(){this.g=!1},Km.prototype.info=function(){};var Il={},sC=null;function f0(){return sC=sC||new Pr}function oC(n){yi.call(this,Il.Pa,n)}function Sh(n){const e=f0();ar(e,new oC(e,n))}function KA(n,e){yi.call(this,Il.STAT_EVENT,n),this.stat=e}function ps(n){const e=f0();ar(e,new KA(e,n))}function YA(n,e){yi.call(this,Il.Qa,n),this.size=e}function Dp(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ot.setTimeout(function(){n()},e)}Il.Pa="serverreachability",oi(oC,yi),Il.STAT_EVENT="statevent",oi(KA,yi),Il.Qa="timingevent",oi(YA,yi);var p0={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},aC={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function g0(){}function Qm(){}g0.prototype.h=null;var lC,Tp={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function uC(){yi.call(this,"d")}function cC(){yi.call(this,"c")}function Jm(){}function xh(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new Ah(this),this.O=JA,this.T=new Ip(n=zw?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new QA}function QA(){this.i=null,this.g="",this.h=!1}oi(uC,yi),oi(cC,yi),oi(Jm,g0),Jm.prototype.g=function(){return new XMLHttpRequest},Jm.prototype.i=function(){return{}},lC=new Jm;var JA=45e3,ac={},Xm={};function ey(n,e,t){n.K=1,n.v=Nh(Lo(e)),n.s=t,n.P=!0,dC(n,null)}function dC(n,e){n.F=Date.now(),Mh(n),n.A=Lo(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),I0(t.i,"t",r),n.C=0,t=n.l.H,n.h=new QA,n.g=RC(n.l,t?e:null,!n.s),0<n.N&&(n.L=new WA(mi(n.La,n,n.g),n.N)),d0(n.S,n.g,"readystatechange",n.ib),e=n.H?Qw(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),Sh(1),function(n,e,t,r,a,l){n.info(function(){if(n.g)if(l)for(var h="",y=l.split("&"),w=0;w<y.length;w++){var D=y[w].split("=");if(1<D.length){var x=D[0];D=D[1];var P=x.split("_");h=2<=P.length&&"type"==P[1]?h+(x+"=")+D+"&":h+(x+"=redacted&")}}else h=null;else h=l;return"XMLHTTP REQ ("+r+") [attempt "+a+"]: "+e+"\n"+t+"\n"+h})}(n.j,n.u,n.A,n.m,n.U,n.s)}function m0(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function Ap(n,e,t){let a,r=!0;for(;!n.I&&n.C<t.length;){if(a=XA(n,t),a==Xm){4==e&&(n.o=4,ps(14),r=!1),Cl(n.j,n.m,null,"[Incomplete Response]");break}if(a==ac){n.o=4,ps(15),Cl(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Cl(n.j,n.m,a,null),y0(n,a)}m0(n)&&a!=Xm&&a!=ac&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,ps(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),hy(e),e.K=!0,ps(11))):(Cl(n.j,n.m,t,"[Invalid Chunked Response]"),Dl(n),Sp(n))}function XA(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Xm:(t=Number(e.substring(t,r)),isNaN(t)?ac:(r+=1)+t>e.length?Xm:(e=e.substr(r,t),n.C=r+t,e))}function Mh(n){n.V=Date.now()+n.O,hC(n,n.O)}function hC(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Dp(mi(n.gb,n),e)}function ty(n){n.B&&(Ot.clearTimeout(n.B),n.B=null)}function Sp(n){0==n.l.G||n.I||xC(n.l,n)}function Dl(n){ty(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,zm(n.T),h0(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function y0(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||oy(t.h,n)))if(!n.J&&oy(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch(D){r=null}if(Array.isArray(r)&&3==r.length){var a=r;if(0==a[0])e:if(t.u)t.Ba=a[1],0<t.Ba-t.T&&37500>a[2]&&t.L&&0==t.A&&!t.v&&(t.v=Dp(mi(t.cb,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;fy(t),P0(t)}Os(t),ps(18)}if(1>=sy(t.h)&&t.ja){try{t.ja()}catch(D){}t.ja=void 0}}else Sl(t,11)}else if((n.J||t.g==n)&&fy(t),!Vm(e))for(a=t.Fa.g.parse(e),e=0;e<a.length;e++){let D=a[e];if(t.T=D[0],D=D[1],2==t.G)if("c"==D[0]){t.I=D[1],t.ka=D[2];const x=D[3];null!=x&&(t.ma=x,t.j.info("VER="+t.ma));const P=D[4];null!=P&&(t.Ca=P,t.j.info("SVER="+t.Ca));const z=D[5];null!=z&&"number"==typeof z&&0<z&&(t.J=r=1.5*z,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const J=n.g;if(J){const fe=J.g?J.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(fe){var l=r.h;l.g||-1==fe.indexOf("spdy")&&-1==fe.indexOf("quic")&&-1==fe.indexOf("h2")||(l.j=l.l,l.g=new Set,l.h&&(A0(l,l.h),l.h=null))}if(r.D){const Le=J.g?J.g.getResponseHeader("X-HTTP-Session-Id"):null;Le&&(r.za=Le,Wn(r.F,r.D,Le))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var h=n;if((r=t).sa=Uh(r,r.H?r.ka:null,r.V),h.J){vC(r.h,h);var y=h,w=r.J;w&&y.setTimeout(w),y.B&&(ty(y),Mh(y)),r.g=h}else uo(r);0<t.i.length&&Vh(t)}else"stop"!=D[0]&&"close"!=D[0]||Sl(t,7);else 3==t.G&&("stop"==D[0]||"close"==D[0]?"stop"==D[0]?Sl(t,7):dy(t):"noop"!=D[0]&&t.l&&t.l.wa(D),t.A=0)}Sh(4)}catch(D){}}function _0(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(so(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if("undefined"!=typeof Map&&n instanceof Map)return Array.from(n.keys());if(!("undefined"!=typeof Set&&n instanceof Set)){if(so(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function(n){if(n.W&&"function"==typeof n.W)return n.W();if("undefined"!=typeof Map&&n instanceof Map||"undefined"!=typeof Set&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(so(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),a=r.length,l=0;l<a;l++)e.call(void 0,r[l],t&&t[l],n)}(it=xh.prototype).setTimeout=function(n){this.O=n},it.ib=function(n){n=n.target;const e=this.L;e&&3==ga(n)?e.l():this.La(n)},it.La=function(n){try{if(n==this.g)e:{const x=ga(this.g);var e=this.g.Ea();const P=this.g.aa();if(!(3>x)&&(3!=x||zw||this.g&&(this.h.h||this.g.fa()||Al(this.g)))){this.I||4!=x||7==e||Sh(8==e||0>=P?3:2),ty(this);var t=this.g.aa();this.Y=t;t:if(m0(this)){var r=Al(this.g);n="";var a=r.length,l=4==ga(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Dl(this),Sp(this);var h="";break t}this.h.i=new Ot.TextDecoder}for(e=0;e<a;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:l&&e==a-1});r.splice(0,a),this.h.g+=n,this.C=0,h=this.h.g}else h=this.g.fa();if(this.i=200==t,function(n,e,t,r,a,l,h){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+a+"]: "+e+"\n"+t+"\n"+l+" "+h})}(this.j,this.u,this.A,this.m,this.U,x,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var y,w=this.g;if((y=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Vm(y)){var D=y;break t}}D=null}if(!(t=D)){this.i=!1,this.o=3,ps(12),Dl(this),Sp(this);break e}Cl(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,y0(this,t)}this.P?(Ap(this,x,h),zw&&this.i&&3==x&&(d0(this.S,this.T,"tick",this.hb),this.T.start())):(Cl(this.j,this.m,h,null),y0(this,h)),4==x&&Dl(this),this.i&&!this.I&&(4==x?xC(this.l,this):(this.i=!1,Mh(this)))}else 400==t&&0<h.indexOf("Unknown SID")?(this.o=3,ps(12)):(this.o=0,ps(13)),Dl(this),Sp(this)}}}catch(x){}},it.hb=function(){if(this.g){var n=ga(this.g),e=this.g.fa();this.C<e.length&&(ty(this),Ap(this,n,e),this.i&&4!=n&&Mh(this))}},it.cancel=function(){this.I=!0,Dl(this)},it.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Sh(3),ps(17)),Dl(this),this.o=2,Sp(this)):hC(this,this.V-n)};var v0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Rh(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Rh){this.h=void 0!==e?e:n.h,ny(this,n.j),this.s=n.s,this.g=n.g,b0(this,n.m),this.l=n.l,e=n.i;var t=new Ph;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Oh(this,t),this.o=n.o}else n&&(t=String(n).match(v0))?(this.h=!!e,ny(this,t[1]||"",!0),this.s=Tl(t[2]||""),this.g=Tl(t[3]||"",!0),b0(this,t[4]),this.l=Tl(t[5]||"",!0),Oh(this,t[6]||"",!0),this.o=Tl(t[7]||"")):(this.h=!!e,this.i=new Ph(null,this.h))}function Lo(n){return new Rh(n)}function ny(n,e,t){n.j=t?Tl(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function b0(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Oh(n,e,t){e instanceof Ph?(n.i=e,function(n,e){e&&!n.j&&(uc(n),n.i=null,n.g.forEach(function(t,r){var a=r.toLowerCase();r!=a&&(C0(this,r),I0(this,a,t))},n)),n.j=e}(n.i,n.h)):(t||(e=xp(e,tS)),n.i=new Ph(e,n.h))}function Wn(n,e,t){n.i.set(e,t)}function Nh(n){return Wn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Tl(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function xp(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,w0),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function w0(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Rh.prototype.toString=function(){var n=[],e=this.j;e&&n.push(xp(e,ry,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(xp(e,ry,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(xp(t,"/"==t.charAt(0)?iR:pC,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",xp(t,gC)),n.join("")};var ry=/[#\/\?@]/g,pC=/[#\?:]/g,iR=/[#\?]/g,tS=/[#\?@]/g,gC=/#/g;function Ph(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function uc(n){n.g||(n.g=new Map,n.h=0,n.i&&function(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),a=null;if(0<=r){var l=n[t].substring(0,r);a=n[t].substring(r+1)}else l=n[t];e(l,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function C0(n,e){uc(n),e=cc(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function iy(n,e){return uc(n),e=cc(n,e),n.g.has(e)}function I0(n,e,t){C0(n,e),0<t.length&&(n.i=null,n.g.set(cc(n,e),Lm(t)),n.h+=t.length)}function cc(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function yC(n){this.l=n||_C,n=Ot.PerformanceNavigationTiming?0<(n=Ot.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ot.g&&Ot.g.Ga&&Ot.g.Ga()&&Ot.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(it=Ph.prototype).add=function(n,e){uc(this),this.i=null,n=cc(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},it.forEach=function(n,e){uc(this),this.g.forEach(function(t,r){t.forEach(function(a){n.call(e,a,r,this)},this)},this)},it.oa=function(){uc(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const a=n[r];for(let l=0;l<a.length;l++)t.push(e[r])}return t},it.W=function(n){uc(this);let e=[];if("string"==typeof n)iy(this,n)&&(e=e.concat(this.g.get(cc(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},it.set=function(n,e){return uc(this),this.i=null,iy(this,n=cc(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},it.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},it.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const l=encodeURIComponent(String(r)),h=this.W(r);for(r=0;r<h.length;r++){var a=l;""!==h[r]&&(a+="="+encodeURIComponent(String(h[r]))),n.push(a)}}return this.i=n.join("&")};var _C=10;function T0(n){return!!n.h||!!n.g&&n.g.size>=n.j}function sy(n){return n.h?1:n.g?n.g.size:0}function oy(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function A0(n,e){n.g?n.g.add(e):n.h=e}function vC(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function EC(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Lm(n.i)}function ay(){}function S0(){this.g=new ay}function bC(n,e,t){const r=t||"";try{_0(n,function(a,l){let h=a;El(a)&&(h=oc(a)),e.push(r+l+"="+encodeURIComponent(h))})}catch(a){throw e.push(r+"type="+encodeURIComponent("_badmap")),a}}function Mp(n,e,t,r,a){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,a(r)}catch(l){}}function kh(n){this.l=n.ac||null,this.j=n.jb||!1}function Rp(n,e){Pr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=uy,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}yC.prototype.cancel=function(){if(this.i=EC(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},ay.prototype.stringify=function(n){return Ot.JSON.stringify(n,void 0)},ay.prototype.parse=function(n){return Ot.JSON.parse(n,void 0)},oi(kh,g0),kh.prototype.g=function(){return new Rp(this.l,this.j)},kh.prototype.i=function(n){return function(){return n}}({}),oi(Rp,Pr);var uy=0;function x0(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function Fh(n){n.readyState=4,n.l=null,n.j=null,n.A=null,cy(n)}function cy(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(it=Rp.prototype).open=function(n,e){if(this.readyState!=uy)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,cy(this)},it.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Ot).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},it.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Fh(this)),this.readyState=uy},it.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,cy(this)),this.g&&(this.readyState=3,cy(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(void 0!==Ot.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;x0(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},it.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Fh(this):cy(this),3==this.readyState&&x0(this)}},it.Va=function(n){this.g&&(this.response=this.responseText=n,Fh(this))},it.Ua=function(n){this.g&&(this.response=n,Fh(this))},it.ga=function(){this.g&&Fh(this)},it.setRequestHeader=function(n,e){this.v.append(n,e)},it.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},it.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Rp.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var nS=Ot.JSON.parse;function ur(n){Pr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=M0,this.K=this.L=!1}oi(ur,Pr);var M0="",rS=/^https?$/i,qr=["POST","PUT"];function IC(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,DC(n),ly(n)}function DC(n){n.D||(n.D=!0,ar(n,"complete"),ar(n,"error"))}function R0(n){if(n.h&&void 0!==Rn&&(!n.C[1]||4!=ga(n)||2!=n.aa()))if(n.v&&4==ga(n))Zm(n.Ha,0,n);else if(ar(n,"readystatechange"),4==ga(n)){n.h=!1;try{const y=n.aa();e:switch(y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===y){var a=String(n.H).match(v0)[1]||null;if(!a&&Ot.self&&Ot.self.location){var l=Ot.self.location.protocol;a=l.substr(0,l.length-1)}r=!rS.test(a?a.toLowerCase():"")}t=r}if(t)ar(n,"complete"),ar(n,"success");else{n.m=6;try{var h=2<ga(n)?n.g.statusText:""}catch(w){h=""}n.j=h+" ["+n.aa()+"]",DC(n)}}finally{ly(n)}}}function ly(n,e){if(n.g){O0(n);const t=n.g,r=n.C[0]?Xv:null;n.g=null,n.C=null,e||ar(n,"ready");try{t.onreadystatechange=r}catch(a){}}}function O0(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Ot.clearTimeout(n.A),n.A=null)}function ga(n){return n.g?n.g.readyState:0}function Al(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case M0:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function TC(n){let e="";return a0(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function N0(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=TC(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Wn(n,e,t))}function Lh(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function AC(n){this.Ca=0,this.i=[],this.j=new Km,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Lh("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Lh("baseRetryDelayMs",5e3,n),this.bb=Lh("retryDelaySeedMs",1e4,n),this.$a=Lh("forwardChannelMaxRetries",2,n),this.ta=Lh("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new yC(n&&n.concurrentRequestLimit),this.Fa=new S0,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function dy(n){if(k0(n),3==n.G){var e=n.U++,t=Lo(n.F);Wn(t,"SID",n.I),Wn(t,"RID",e),Wn(t,"TYPE","terminate"),Op(n,t),(e=new xh(n,n.j,e,void 0)).K=2,e.v=Nh(Lo(t)),t=!1,Ot.navigator&&Ot.navigator.sendBeacon&&(t=Ot.navigator.sendBeacon(e.v.toString(),"")),!t&&Ot.Image&&((new Image).src=e.v,t=!0),t||(e.g=RC(e.l,null),e.g.da(e.v)),e.F=Date.now(),Mh(e)}py(n)}function P0(n){n.g&&(hy(n),n.g.cancel(),n.g=null)}function k0(n){P0(n),n.u&&(Ot.clearTimeout(n.u),n.u=null),fy(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Ot.clearTimeout(n.m),n.m=null)}function Vh(n){T0(n.h)||n.m||(n.m=!0,wl(n.Ja,n),n.C=0)}function SC(n,e){var t;t=e?e.m:n.U++;const r=Lo(n.F);Wn(r,"SID",n.I),Wn(r,"RID",t),Wn(r,"AID",n.T),Op(n,r),n.o&&n.s&&N0(r,n.o,n.s),t=new xh(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=Vo(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),A0(n.h,t),ey(t,r,e)}function Op(n,e){n.ia&&a0(n.ia,function(t,r){Wn(e,r,t)}),n.l&&_0({},function(t,r){Wn(e,r,t)})}function Vo(n,e,t){t=Math.min(n.i.length,t);var r=n.l?mi(n.l.Ra,n.l,n):null;e:{var a=n.i;let l=-1;for(;;){const h=["count="+t];-1==l?0<t?(l=a[0].h,h.push("ofs="+l)):l=0:h.push("ofs="+l);let y=!0;for(let w=0;w<t;w++){let D=a[w].h;const x=a[w].g;if(D-=l,0>D)l=Math.max(0,a[w].h-100),y=!1;else try{bC(x,h,"req"+D+"_")}catch(P){r&&r(x)}}if(y){r=h.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function uo(n){n.g||n.u||(n.Z=1,wl(n.Ia,n),n.A=0)}function Os(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=Dp(mi(n.Ia,n),MC(n,n.A)),n.A++,0))}function hy(n){null!=n.B&&(Ot.clearTimeout(n.B),n.B=null)}function F0(n){n.g=new xh(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=Lo(n.sa);Wn(e,"RID","rpc"),Wn(e,"SID",n.I),Wn(e,"CI",n.L?"0":"1"),Wn(e,"AID",n.T),Wn(e,"TYPE","xmlhttp"),Op(n,e),n.o&&n.s&&N0(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=Nh(Lo(e)),t.s=null,t.P=!0,dC(t,n)}function fy(n){null!=n.v&&(Ot.clearTimeout(n.v),n.v=null)}function xC(n,e){var t=null;if(n.g==e){fy(n),hy(n),n.g=null;var r=2}else{if(!oy(n.h,e))return;t=e.D,vC(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var a=n.C;ar(r=f0(),new YA(r,t,e,a)),Vh(n)}else uo(n);else if(3==(a=e.o)||0==a&&0<n.pa||!(1==r&&function(n,e){return!(sy(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=Dp(mi(n.Ja,n,e),MC(n,n.C)),n.C++,0)))}(n,e)||2==r&&Os(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),a){case 1:Sl(n,5);break;case 4:Sl(n,10);break;case 3:Sl(n,6);break;default:Sl(n,2)}}function MC(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function Sl(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=mi(n.kb,n);t||(t=new Rh("//www.google.com/images/cleardot.gif"),Ot.location&&"http"==Ot.location.protocol||ny(t,"https"),Nh(t)),function(n,e){const t=new Km;if(Ot.Image){const r=new Image;r.onload=Ep(Mp,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Ep(Mp,t,r,"TestLoadImage: error",!1,e),r.onabort=Ep(Mp,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Ep(Mp,t,r,"TestLoadImage: timeout",!1,e),Ot.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else ps(2);n.G=0,n.l&&n.l.va(e),py(n),k0(n)}function py(n){if(n.G=0,n.la=[],n.l){const e=EC(n.h);(0!=e.length||0!=n.i.length)&&(t0(n.la,e),t0(n.la,n.i),n.h.i.length=0,Lm(n.i),n.i.length=0),n.l.ua()}}function Uh(n,e,t){var r=t instanceof Rh?Lo(t):new Rh(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),b0(r,r.m);else{var a=Ot.location;r=a.protocol,e=e?e+"."+a.hostname:a.hostname,a=+a.port;var l=new Rh(null,void 0);r&&ny(l,r),e&&(l.g=e),a&&b0(l,a),t&&(l.l=t),r=l}return e=n.za,(t=n.D)&&e&&Wn(r,t,e),Wn(r,"VER",n.ma),Op(n,r),r}function RC(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ur(t&&n.Da&&!n.ra?new kh({jb:!0}):n.ra)).Ka(n.H),e}function L0(){}function gy(){if(mh&&!(10<=Number(Yw)))throw Error("Environmental error: no available transport.")}function gs(n,e){Pr.call(this),this.g=new AC(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!Vm(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Vm(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Bh(this)}function V0(n){uC.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Np(){cC.call(this),this.status=1}function Bh(n){this.g=n}(it=ur.prototype).Ka=function(n){this.L=n},it.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():lC.g(),this.C=function(n){return n.h||(n.h=n.i())}(this.u?this.u:lC),this.g.onreadystatechange=mi(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(l){return void IC(this,l)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var a in r)t.set(a,r[a]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const l of r.keys())t.set(l,r.get(l))}r=Array.from(t.keys()).find(l=>"content-type"==l.toLowerCase()),a=Ot.FormData&&n instanceof Ot.FormData,!(0<=Fm(qr,e))||r||a||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[l,h]of t)this.g.setRequestHeader(l,h);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{O0(this),0<this.B&&((this.K=function(n){return mh&&tR()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=mi(this.qa,this)):this.A=Zm(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(l){IC(this,l)}},it.qa=function(){void 0!==Rn&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ar(this,"timeout"),this.abort(8))},it.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,ar(this,"complete"),ar(this,"abort"),ly(this))},it.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ly(this,!0)),ur.X.M.call(this)},it.Ha=function(){this.s||(this.F||this.v||this.l?R0(this):this.fb())},it.fb=function(){R0(this)},it.aa=function(){try{return 2<ga(this)?this.g.status:-1}catch(n){return-1}},it.fa=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},it.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),nS(e)}},it.Ea=function(){return this.m},it.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(it=AC.prototype).ma=8,it.G=1,it.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const a=new xh(this,this.j,n,void 0);let l=this.s;if(this.S&&(l?(l=Qw(l),Xw(l,this.S)):l=this.S),null!==this.o||this.N||(a.H=l,l=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Vo(this,a,e),Wn(t=Lo(this.F),"RID",n),Wn(t,"CVER",22),this.D&&Wn(t,"X-HTTP-Session-Id",this.D),Op(this,t),l&&(this.N?e="headers="+encodeURIComponent(String(TC(l)))+"&"+e:this.o&&N0(t,this.o,l)),A0(this.h,a),this.Ya&&Wn(t,"TYPE","init"),this.O?(Wn(t,"$req",e),Wn(t,"SID","null"),a.Z=!0,ey(a,t,null)):ey(a,t,e),this.G=2}}else 3==this.G&&(n?SC(this,n):0==this.i.length||T0(this.h)||SC(this))},it.Ia=function(){if(this.u=null,F0(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=Dp(mi(this.eb,this),n)}},it.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,ps(10),P0(this),F0(this))},it.cb=function(){null!=this.v&&(this.v=null,P0(this),Os(this),ps(19))},it.kb=function(n){n?(this.j.info("Successfully pinged google.com"),ps(2)):(this.j.info("Failed to ping google.com"),ps(1))},(it=L0.prototype).xa=function(){},it.wa=function(){},it.va=function(){},it.ua=function(){},it.Ra=function(){},gy.prototype.g=function(n,e){return new gs(n,e)},oi(gs,Pr),gs.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;ps(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=Uh(n,null,n.V),Vh(n)},gs.prototype.close=function(){dy(this.g)},gs.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=oc(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&Vh(e)},gs.prototype.M=function(){this.g.l=null,delete this.j,dy(this.g),delete this.g,gs.X.M.call(this)},oi(V0,uC),oi(Np,cC),oi(Bh,L0),Bh.prototype.xa=function(){ar(this.g,"a")},Bh.prototype.wa=function(n){ar(this.g,new V0(n))},Bh.prototype.va=function(n){ar(this.g,new Np(n))},Bh.prototype.ua=function(){ar(this.g,"b")},gy.prototype.createWebChannel=gy.prototype.g,gs.prototype.send=gs.prototype.u,gs.prototype.open=gs.prototype.m,gs.prototype.close=gs.prototype.close,p0.NO_ERROR=0,p0.TIMEOUT=8,p0.HTTP_ERROR=6,aC.COMPLETE="complete",Qm.EventType=Tp,Tp.OPEN="a",Tp.CLOSE="b",Tp.ERROR="c",Tp.MESSAGE="d",Pr.prototype.listen=Pr.prototype.N,ur.prototype.listenOnce=ur.prototype.O,ur.prototype.getLastError=ur.prototype.Oa,ur.prototype.getLastErrorCode=ur.prototype.Ea,ur.prototype.getStatus=ur.prototype.aa,ur.prototype.getResponseJson=ur.prototype.Sa,ur.prototype.getResponseText=ur.prototype.fa,ur.prototype.send=ur.prototype.da,ur.prototype.setWithCredentials=ur.prototype.Ka;var OC=Ka.createWebChannelTransport=function(){return new gy},NC=Ka.getStatEventTarget=function(){return f0()},Pp=Ka.ErrorCode=p0,my=Ka.EventType=aC,PC=Ka.Event=Il,U0=Ka.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},kC=Ka.FetchXmlHttpFactory=kh,kp=Ka.WebChannel=Qm,FC=Ka.XhrIo=ur;const B0="@firebase/firestore";class Wr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Wr.UNAUTHENTICATED=new Wr(null),Wr.GOOGLE_CREDENTIALS=new Wr("google-credentials-uid"),Wr.FIRST_PARTY=new Wr("first-party-uid"),Wr.MOCK_USER=new Wr("mock-user");let xl="9.12.1";const lc=new ec.Yd("@firebase/firestore");function j0(){return lc.logLevel}function ke(n,...e){if(lc.logLevel<=ec.in.DEBUG){const t=e.map($0);lc.debug(`Firestore (${xl}): ${n}`,...t)}}function _r(n,...e){if(lc.logLevel<=ec.in.ERROR){const t=e.map($0);lc.error(`Firestore (${xl}): ${n}`,...t)}}function Ml(n,...e){if(lc.logLevel<=ec.in.WARN){const t=e.map($0);lc.warn(`Firestore (${xl}): ${n}`,...t)}}function $0(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function tt(n="Unexpected state"){const e=`FIRESTORE (${xl}) INTERNAL ASSERTION FAILED: `+n;throw _r(e),new Error(e)}function wt(n,e){n||tt()}function We(n,e){return n}const pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Te extends cn.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class zr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class LC{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class oS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Wr.UNAUTHENTICATED))}shutdown(){}}class aS{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class uS{constructor(e){this.t=e,this.currentUser=Wr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let a=this.i;const l=D=>this.i!==a?(a=this.i,t(D)):Promise.resolve();let h=new zr;this.o=()=>{this.i++,this.currentUser=this.u(),h.resolve(),h=new zr,e.enqueueRetryable(()=>l(this.currentUser))};const y=()=>{const D=h;e.enqueueRetryable((0,_e.Z)(function*(){yield D.promise,yield l(r.currentUser)}))},w=D=>{ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=D,this.auth.addAuthTokenListener(this.o),y()};this.t.onInit(D=>w(D)),setTimeout(()=>{if(!this.auth){const D=this.t.getImmediate({optional:!0});D?w(D):(ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),h.resolve(),h=new zr)}},0),y()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(wt("string"==typeof r.accessToken),new LC(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return wt(null===e||"string"==typeof e),new Wr(e)}}class VC{constructor(e,t,r,a){this.h=e,this.l=t,this.m=r,this.g=a,this.type="FirstParty",this.user=Wr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(wt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class UC{constructor(e,t,r,a){this.h=e,this.l=t,this.m=r,this.g=a}getToken(){return Promise.resolve(new VC(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Wr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class H0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class BC{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=l=>{null!=l.error&&ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.A;return this.A=l.token,ke("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>r(l))};const a=l=>{ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.appCheck.addTokenListener(this.o)};this.T.onInit(l=>a(l)),setTimeout(()=>{if(!this.appCheck){const l=this.T.getImmediate({optional:!0});l?a(l):ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(wt("string"==typeof t.token),this.A=t.token,new H0(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function jC(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class G0{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const a=jC(40);for(let l=0;l<a.length;++l)r.length<20&&a[l]<t&&(r+=e.charAt(a[l]%e.length))}return r}}function Vt(n,e){return n<e?-1:n>e?1:0}function Rl(n,e,t){return n.length===e.length&&n.every((r,a)=>t(r,e[a]))}function yy(n){return n+"\0"}class Ln{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Te(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Te(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Te(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Te(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ln.fromMillis(Date.now())}static fromDate(e){return Ln.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Ln(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Vt(this.nanoseconds,e.nanoseconds):Vt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ft{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ft(e)}static min(){return new ft(new Ln(0,0))}static max(){return new ft(new Ln(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Fp{constructor(e,t,r){void 0===t?t=0:t>e.length&&tt(),void 0===r?r=e.length-t:r>e.length-t&&tt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Fp.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Fp?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let a=0;a<r;a++){const l=e.get(a),h=t.get(a);if(l<h)return-1;if(l>h)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class an extends Fp{construct(e,t,r){return new an(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Te(pe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(a=>a.length>0))}return new an(t)}static emptyPath(){return new an([])}}const jh=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class vr extends Fp{construct(e,t,r){return new vr(e,t,r)}static isValidIdentifier(e){return jh.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),vr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new vr(["__name__"])}static fromServerFormat(e){const t=[];let r="",a=0;const l=()=>{if(0===r.length)throw new Te(pe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let h=!1;for(;a<e.length;){const y=e[a];if("\\"===y){if(a+1===e.length)throw new Te(pe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[a+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new Te(pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=w,a+=2}else"`"===y?(h=!h,a++):"."!==y||h?(r+=y,a++):(l(),a++)}if(l(),h)throw new Te(pe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new vr(t)}static emptyPath(){return new vr([])}}class je{constructor(e){this.path=e}static fromPath(e){return new je(an.fromString(e))}static fromName(e){return new je(an.fromString(e).popFirst(5))}static empty(){return new je(an.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===an.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return an.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new je(new an(e.slice()))}}class q0{constructor(e,t,r,a){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=a}}function _y(n){return n.fields.find(e=>2===e.kind)}function dc(n){return n.fields.filter(e=>2!==e.kind)}q0.UNKNOWN_ID=-1;class mt{constructor(e,t){this.fieldPath=e,this.kind=t}}class Lp{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Lp(0,Ns.min())}}function $C(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,a=ft.fromTimestamp(1e9===r?new Ln(t+1,0):new Ln(t,r));return new Ns(a,je.empty(),e)}function Vp(n){return new Ns(n.readTime,n.key,-1)}class Ns{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ns(ft.min(),je.empty(),-1)}static max(){return new Ns(ft.max(),je.empty(),-1)}}function $h(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=je.comparator(n.documentKey,e.documentKey),0!==t?t:Vt(n.largestBatchId,e.largestBatchId))}const Up="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Jn{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Ol(n){return vy.apply(this,arguments)}function vy(){return vy=(0,_e.Z)(function*(n){if(n.code!==pe.FAILED_PRECONDITION||n.message!==Up)throw n;ke("LocalStore","Unexpectedly lost primary lease")}),vy.apply(this,arguments)}class ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&tt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ue((r,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ue?t:ue.resolve(t)}catch(t){return ue.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ue.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ue.reject(t)}static resolve(e){return new ue((t,r)=>{t(e)})}static reject(e){return new ue((t,r)=>{r(e)})}static waitFor(e){return new ue((t,r)=>{let a=0,l=0,h=!1;e.forEach(y=>{++a,y.next(()=>{++l,h&&l===a&&t()},w=>r(w))}),h=!0,l===a&&t()})}static or(e){let t=ue.resolve(!1);for(const r of e)t=t.next(a=>a?ue.resolve(a):r());return t}static forEach(e,t){const r=[];return e.forEach((a,l)=>{r.push(t.call(this,a,l))}),this.waitFor(r)}static mapArray(e,t){return new ue((r,a)=>{const l=e.length,h=new Array(l);let y=0;for(let w=0;w<l;w++){const D=w;t(e[D]).next(x=>{h[D]=x,++y,y===l&&r(h)},x=>a(x))}})}static doWhile(e,t){return new ue((r,a)=>{const l=()=>{!0===e()?t().next(()=>{l()},a):r()};l()})}}class Ey{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new zr,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Hh(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const a=Pl(r.target.error);this.P.reject(new Hh(e,a))}}static open(e,t,r,a){try{return new Ey(t,e.transaction(a,r))}catch(l){throw new Hh(t,l)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(ke("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new dS(t)}}class co{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===co.D((0,cn.z$)())&&_r("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ke("SimpleDb","Removing database:",e),Nl(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,cn.hl)())return!1;if(co.N())return!0;const e=(0,cn.z$)(),t=co.D(e),r=0<t&&t<10,a=co.k(e),l=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||l)}static N(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,_e.Z)(function*(){return t.db||(ke("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,a)=>{const l=indexedDB.open(t.name,t.version);l.onsuccess=h=>{r(h.target.result)},l.onblocked=()=>{a(new Hh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=h=>{const y=h.target.error;a("VersionError"===y.name?new Te(pe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===y.name?new Te(pe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+y):new Hh(e,y))},l.onupgradeneeded=h=>{ke("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',h.oldVersion),t.S.$(h.target.result,l.transaction,h.oldVersion,t.version).next(()=>{ke("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,a){var l=this;return(0,_e.Z)(function*(){const h="readonly"===t;let y=0;for(;;){++y;try{l.db=yield l.F(e);const w=Ey.open(l.db,e,h?"readonly":"readwrite",r),D=a(w).next(x=>(w.V(),x)).catch(x=>(w.abort(x),ue.reject(x))).toPromise();return D.catch(()=>{}),yield w.v,D}catch(w){const D=w,x="FirebaseError"!==D.name&&y<3;if(ke("SimpleDb","Transaction failed with error:",D.message,"Retrying:",x),l.close(),!x)return Promise.reject(D)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class HC{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return Nl(this.U.delete())}}class Hh extends Te{constructor(e,t){super(pe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ja(n){return"IndexedDbTransactionError"===n.name}class dS{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(ke("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ke("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Nl(r)}add(e){return ke("SimpleDb","ADD",this.store.name,e,e),Nl(this.store.add(e))}get(e){return Nl(this.store.get(e)).next(t=>(void 0===t&&(t=null),ke("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ke("SimpleDb","DELETE",this.store.name,e),Nl(this.store.delete(e))}count(){return ke("SimpleDb","COUNT",this.store.name),Nl(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const a=this.cursor(r),l=[];return this.H(a,(h,y)=>{l.push(y)}).next(()=>l)}{const a=this.store.getAll(r.range);return new ue((l,h)=>{a.onerror=y=>{h(y.target.error)},a.onsuccess=y=>{l(y.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ue((a,l)=>{r.onerror=h=>{l(h.target.error)},r.onsuccess=h=>{a(h.target.result)}})}Y(e,t){ke("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const a=this.cursor(r);return this.H(a,(l,h,y)=>y.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const a=this.cursor(r);return this.H(a,t)}tt(e){const t=this.cursor({});return new ue((r,a)=>{t.onerror=l=>{const h=Pl(l.target.error);a(h)},t.onsuccess=l=>{const h=l.target.result;h?e(h.primaryKey,h.value).next(y=>{y?h.continue():r()}):r()}})}H(e,t){const r=[];return new ue((a,l)=>{e.onerror=h=>{l(h.target.error)},e.onsuccess=h=>{const y=h.target.result;if(!y)return void a();const w=new HC(y),D=t(y.primaryKey,y.value,w);if(D instanceof ue){const x=D.catch(P=>(w.done(),ue.reject(P)));r.push(x)}w.isDone?a():null===w.G?y.continue():y.continue(w.G)}}).next(()=>ue.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Nl(n){return new ue((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const a=Pl(r.target.error);t(a)}})}let GC=!1;function Pl(n){const e=co.D((0,cn.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Te("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return GC||(GC=!0,setTimeout(()=>{throw r},0)),r}}return n}class hS{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;ke("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,_e.Z)(function*(){t.task=null;try{ke("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){Ja(r)?ke("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Ol(r)}yield t.nt(6e4)}))}}class fS{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,_e.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let a=t,l=!0;return ue.doWhile(()=>!0===l&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(h=>{if(null!==h&&!r.has(h))return ke("IndexBackiller",`Processing collection: ${h}`),this.rt(e,h,a).next(y=>{a-=y,r.add(h)});l=!1})).next(()=>t-a)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(a=>this.localStore.localDocuments.getNextDocuments(e,t,a,r).next(l=>{const h=l.changes;return this.localStore.indexManager.updateIndexEntries(e,h).next(()=>this.ot(a,l)).next(y=>(ke("IndexBackiller",`Updating offset: ${y}`),this.localStore.indexManager.updateCollectionGroup(e,t,y))).next(()=>h.size)}))}ot(e,t){let r=e;return t.changes.forEach((a,l)=>{const h=Vp(l);$h(h,r)>0&&(r=h)}),new Ns(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class ms{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function Bp(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function hc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function W0(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}ms.at=-1;class Xn{constructor(e,t){this.comparator=e,this.root=t||Er.EMPTY}insert(e,t){return new Xn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Er.BLACK,null,null))}remove(e){return new Xn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Er.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(0===a)return t+r.left.size;a<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new by(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new by(this.root,e,this.comparator,!1)}getReverseIterator(){return new by(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new by(this.root,e,this.comparator,!0)}}class by{constructor(e,t,r,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(0===l){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Er{constructor(e,t,r,a,l){this.key=e,this.value=t,this.color=null!=r?r:Er.RED,this.left=null!=a?a:Er.EMPTY,this.right=null!=l?l:Er.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,a,l){return new Er(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=a?a:this.left,null!=l?l:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let a=this;const l=r(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,r),null):0===l?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Er.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),0===t(e,a.key)){if(a.right.isEmpty())return Er.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Er.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Er.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw tt();const e=this.left.check();if(e!==this.right.check())throw tt();return e+(this.isRed()?0:1)}}Er.EMPTY=null,Er.RED=!0,Er.BLACK=!1,Er.EMPTY=new class{constructor(){this.size=0}get key(){throw tt()}get value(){throw tt()}get color(){throw tt()}get left(){throw tt()}get right(){throw tt()}copy(n,e,t,r,a){return this}insert(n,e,t){return new Er(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ln{constructor(e){this.comparator=e,this.data=new Xn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new qC(this.data.getIterator())}getIteratorFrom(e){return new qC(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof ln)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(0!==this.comparator(a,l))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ln(this.comparator);return t.data=e,t}}class qC{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Gh(n){return n.hasNext()?n.getNext():void 0}class Ps{constructor(e){this.fields=e,e.sort(vr.comparator)}static empty(){return new Ps([])}unionWith(e){let t=new ln(vr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ps(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Rl(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class kr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new kr(t)}static fromUint8Array(e){const t=function(r){let a="";for(let l=0;l<r.length;++l)a+=String.fromCharCode(r[l]);return a}(e);return new kr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Vt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}kr.EMPTY_BYTE_STRING=new kr("");const zC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fc(n){if(wt(!!n),"string"==typeof n){let e=0;const t=zC.exec(n);if(wt(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:er(n.seconds),nanos:er(n.nanos)}}function er(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function kl(n){return"string"==typeof n?kr.fromBase64String(n):kr.fromUint8Array(n)}function z0(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function pS(n){const e=n.mapValue.fields.__previous_value__;return z0(e)?pS(e):e}function wy(n){const e=fc(n.mapValue.fields.__local_write_time__.timestampValue);return new Ln(e.seconds,e.nanos)}class oR{constructor(e,t,r,a,l,h,y,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=a,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=y,this.useFetchStreams=w}}class Fl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Fl("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Fl&&e.projectId===this.projectId&&e.database===this.database}}function qh(n){return null==n}function pc(n){return 0===n&&1/n==-1/0}function ZC(n){return"number"==typeof n&&Number.isInteger(n)&&!pc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const gc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},jp={nullValue:"NULL_VALUE"};function Uo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?z0(n)?4:QC(n)?9007199254740991:10:tt()}function ya(n,e){if(n===e)return!0;const t=Uo(n);if(t!==Uo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return wy(n).isEqual(wy(e));case 3:return function(r,a){if("string"==typeof r.timestampValue&&"string"==typeof a.timestampValue&&r.timestampValue.length===a.timestampValue.length)return r.timestampValue===a.timestampValue;const l=fc(r.timestampValue),h=fc(a.timestampValue);return l.seconds===h.seconds&&l.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return a=e,kl(n.bytesValue).isEqual(kl(a.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,a){return er(r.geoPointValue.latitude)===er(a.geoPointValue.latitude)&&er(r.geoPointValue.longitude)===er(a.geoPointValue.longitude)}(n,e);case 2:return function(r,a){if("integerValue"in r&&"integerValue"in a)return er(r.integerValue)===er(a.integerValue);if("doubleValue"in r&&"doubleValue"in a){const l=er(r.doubleValue),h=er(a.doubleValue);return l===h?pc(l)===pc(h):isNaN(l)&&isNaN(h)}return!1}(n,e);case 9:return Rl(n.arrayValue.values||[],e.arrayValue.values||[],ya);case 10:return function(r,a){const l=r.mapValue.fields||{},h=a.mapValue.fields||{};if(Bp(l)!==Bp(h))return!1;for(const y in l)if(l.hasOwnProperty(y)&&(void 0===h[y]||!ya(l[y],h[y])))return!1;return!0}(n,e);default:return tt()}var a}function $p(n,e){return void 0!==(n.values||[]).find(t=>ya(t,e))}function mc(n,e){if(n===e)return 0;const t=Uo(n),r=Uo(e);if(t!==r)return Vt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Vt(n.booleanValue,e.booleanValue);case 2:return function(a,l){const h=er(a.integerValue||a.doubleValue),y=er(l.integerValue||l.doubleValue);return h<y?-1:h>y?1:h===y?0:isNaN(h)?isNaN(y)?0:-1:1}(n,e);case 3:return KC(n.timestampValue,e.timestampValue);case 4:return KC(wy(n),wy(e));case 5:return Vt(n.stringValue,e.stringValue);case 6:return function(a,l){const h=kl(a),y=kl(l);return h.compareTo(y)}(n.bytesValue,e.bytesValue);case 7:return function(a,l){const h=a.split("/"),y=l.split("/");for(let w=0;w<h.length&&w<y.length;w++){const D=Vt(h[w],y[w]);if(0!==D)return D}return Vt(h.length,y.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,l){const h=Vt(er(a.latitude),er(l.latitude));return 0!==h?h:Vt(er(a.longitude),er(l.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(a,l){const h=a.values||[],y=l.values||[];for(let w=0;w<h.length&&w<y.length;++w){const D=mc(h[w],y[w]);if(D)return D}return Vt(h.length,y.length)}(n.arrayValue,e.arrayValue);case 10:return function(a,l){if(a===gc.mapValue&&l===gc.mapValue)return 0;if(a===gc.mapValue)return 1;if(l===gc.mapValue)return-1;const h=a.fields||{},y=Object.keys(h),w=l.fields||{},D=Object.keys(w);y.sort(),D.sort();for(let x=0;x<y.length&&x<D.length;++x){const P=Vt(y[x],D[x]);if(0!==P)return P;const z=mc(h[y[x]],w[D[x]]);if(0!==z)return z}return Vt(y.length,D.length)}(n.mapValue,e.mapValue);default:throw tt()}}function KC(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Vt(n,e);const t=fc(n),r=fc(e),a=Vt(t.seconds,r.seconds);return 0!==a?a:Vt(t.nanos,r.nanos)}function Wh(n){return Cy(n)}function Cy(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const a=fc(r);return`time(${a.seconds},${a.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?kl(n.bytesValue).toBase64():"referenceValue"in n?je.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let a="[",l=!0;for(const h of r.values||[])l?l=!1:a+=",",a+=Cy(h);return a+"]"}(n.arrayValue):"mapValue"in n?function(r){const a=Object.keys(r.fields||{}).sort();let l="{",h=!0;for(const y of a)h?h=!1:l+=",",l+=`${y}:${Cy(r.fields[y])}`;return l+"}"}(n.mapValue):tt();var e}function Ll(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Z0(n){return!!n&&"integerValue"in n}function _a(n){return!!n&&"arrayValue"in n}function YC(n){return!!n&&"nullValue"in n}function K0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Iy(n){return!!n&&"mapValue"in n}function zh(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return hc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=zh(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=zh(n.arrayValue.values[t]);return e}return Object.assign({},n)}function QC(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function JC(n){return"nullValue"in n?jp:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Ll(Fl.empty(),je.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:tt()}function gS(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Ll(Fl.empty(),je.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?gc:tt()}function Dy(n,e){const t=mc(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function XC(n,e){const t=mc(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class ai{constructor(e){this.value=e}static empty(){return new ai({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Iy(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=zh(t)}setAll(e){let t=vr.emptyPath(),r={},a=[];e.forEach((h,y)=>{if(!t.isImmediateParentOf(y)){const w=this.getFieldsMap(t);this.applyChanges(w,r,a),r={},a=[],t=y.popLast()}h?r[y.lastSegment()]=zh(h):a.push(y.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,r,a)}delete(e){const t=this.field(e.popLast());Iy(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ya(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=t.mapValue.fields[e.get(r)];Iy(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,r){hc(t,(a,l)=>e[a]=l);for(const a of r)delete e[a]}clone(){return new ai(zh(this.value))}}function Y0(n){const e=[];return hc(n.fields,(t,r)=>{const a=new vr([t]);if(Iy(r)){const l=Y0(r.mapValue).fields;if(0===l.length)e.push(a);else for(const h of l)e.push(a.child(h))}else e.push(a)}),new Ps(e)}class On{constructor(e,t,r,a,l,h){this.key=e,this.documentType=t,this.version=r,this.readTime=a,this.data=l,this.documentState=h}static newInvalidDocument(e){return new On(e,0,ft.min(),ft.min(),ai.empty(),0)}static newFoundDocument(e,t,r){return new On(e,1,t,ft.min(),r,0)}static newNoDocument(e,t){return new On(e,2,t,ft.min(),ai.empty(),0)}static newUnknownDocument(e,t){return new On(e,3,t,ft.min(),ai.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ai.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ai.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ft.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof On&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new On(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class mS{constructor(e,t=null,r=[],a=[],l=null,h=null,y=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=a,this.limit=l,this.startAt=h,this.endAt=y,this.ht=null}}function eI(n,e=null,t=[],r=[],a=null,l=null,h=null){return new mS(n,e,t,r,a,l,h)}function Xa(n){const e=We(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(a=r).field.canonicalString()+a.op.toString()+Wh(a.value);var a}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(a=r).field.canonicalString()+a.dir;var a}).join(","),qh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Wh(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Wh(r)).join(",")),e.ht=t}return e.ht}function Zh(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let a=0;a<n.orderBy.length;a++)if(!CS(n.orderBy[a],e.orderBy[a]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let a=0;a<n.filters.length;a++)if((t=n.filters[a]).op!==(r=e.filters[a]).op||!t.field.isEqual(r.field)||!ya(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!xy(n.startAt,e.startAt)&&xy(n.endAt,e.endAt)}function Ty(n){return je.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Ay(n,e){return n.filters.filter(t=>t instanceof _i&&t.field.isEqual(e))}function tI(n,e,t){let r=jp,a=!0;for(const l of Ay(n,e)){let h=jp,y=!0;switch(l.op){case"<":case"<=":h=JC(l.value);break;case"==":case"in":case">=":h=l.value;break;case">":h=l.value,y=!1;break;case"!=":case"not-in":h=jp}Dy({value:r,inclusive:a},{value:h,inclusive:y})<0&&(r=h,a=y)}if(null!==t)for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(e)){const h=t.position[l];Dy({value:r,inclusive:a},{value:h,inclusive:t.inclusive})<0&&(r=h,a=t.inclusive);break}return{value:r,inclusive:a}}function nI(n,e,t){let r=gc,a=!0;for(const l of Ay(n,e)){let h=gc,y=!0;switch(l.op){case">=":case">":h=gS(l.value),y=!1;break;case"==":case"in":case"<=":h=l.value;break;case"<":h=l.value,y=!1;break;case"!=":case"not-in":h=gc}XC({value:r,inclusive:a},{value:h,inclusive:y})>0&&(r=h,a=y)}if(null!==t)for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(e)){const h=t.position[l];XC({value:r,inclusive:a},{value:h,inclusive:t.inclusive})>0&&(r=h,a=t.inclusive);break}return{value:r,inclusive:a}}class _i extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new _S(e,t,r):"array-contains"===t?new rI(e,r):"in"===t?new bS(e,r):"not-in"===t?new wS(e,r):"array-contains-any"===t?new iI(e,r):new _i(e,t,r)}static lt(e,t,r){return"in"===t?new vS(e,r):new ES(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(mc(t,this.value)):null!==t&&Uo(this.value)===Uo(t)&&this.ft(mc(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return tt()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class _S extends _i{constructor(e,t,r){super(e,t,r),this.key=je.fromName(r.referenceValue)}matches(e){const t=je.comparator(e.key,this.key);return this.ft(t)}}class vS extends _i{constructor(e,t){super(e,"in",t),this.keys=Q0(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class ES extends _i{constructor(e,t){super(e,"not-in",t),this.keys=Q0(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Q0(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>je.fromName(r.referenceValue))}class rI extends _i{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return _a(t)&&$p(t.arrayValue,this.value)}}class bS extends _i{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&$p(this.value.arrayValue,t)}}class wS extends _i{constructor(e,t){super(e,"not-in",t)}matches(e){if($p(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!$p(this.value.arrayValue,t)}}class iI extends _i{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!_a(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>$p(this.value.arrayValue,r))}}class yc{constructor(e,t){this.position=e,this.inclusive=t}}class Kh{constructor(e,t="asc"){this.field=e,this.dir=t}}function CS(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function Sy(n,e,t){let r=0;for(let a=0;a<n.position.length;a++){const l=e[a],h=n.position[a];if(r=l.field.isKeyField()?je.comparator(je.fromName(h.referenceValue),t.key):mc(h,t.data.field(l.field)),"desc"===l.dir&&(r*=-1),0!==r)break}return r}function xy(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ya(n.position[t],e.position[t]))return!1;return!0}class va{constructor(e,t=null,r=[],a=[],l=null,h="F",y=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=a,this.limit=l,this.limitType=h,this.startAt=y,this.endAt=w,this._t=null,this.wt=null}}function My(n,e,t,r,a,l,h,y){return new va(n,e,t,r,a,l,h,y)}function Yh(n){return new va(n)}function sI(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function Hp(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function J0(n){for(const e of n.filters)if(e.dt())return e.field;return null}function Ry(n){return null!==n.collectionGroup}function Qh(n){const e=We(n);if(null===e._t){e._t=[];const t=J0(e),r=Hp(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new Kh(t)),e._t.push(new Kh(vr.keyField(),"asc"));else{let a=!1;for(const l of e.explicitOrderBy)e._t.push(l),l.field.isKeyField()&&(a=!0);if(!a){const l=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new Kh(vr.keyField(),l))}}}return e._t}function Mi(n){const e=We(n);if(!e.wt)if("F"===e.limitType)e.wt=eI(e.path,e.collectionGroup,Qh(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const l of Qh(e))t.push(new Kh(l.field,"desc"===l.dir?"asc":"desc"));const r=e.endAt?new yc(e.endAt.position,e.endAt.inclusive):null,a=e.startAt?new yc(e.startAt.position,e.startAt.inclusive):null;e.wt=eI(e.path,e.collectionGroup,t,e.filters,e.limit,r,a)}return e.wt}function Gp(n,e,t){return new va(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Jh(n,e){return Zh(Mi(n),Mi(e))&&n.limitType===e.limitType}function IS(n){return`${Xa(Mi(n))}|lt:${n.limitType}`}function X0(n){return`Query(target=${function(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Wh(r.value)}`;var r}).join(", ")}]`),qh(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Wh(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Wh(t)).join(",")),`Target(${e})`}(Mi(n))}; limitType=${n.limitType})`}function _c(n,e){return e.isFoundDocument()&&function(t,r){const a=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(a):je.isDocumentKey(t.path)?t.path.isEqual(a):t.path.isImmediateParentOf(a)}(n,e)&&function(t,r){for(const a of t.explicitOrderBy)if(!a.field.isKeyField()&&null===r.data.field(a.field))return!1;return!0}(n,e)&&function(t,r){for(const a of t.filters)if(!a.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(a,l,h){const y=Sy(a,l,h);return a.inclusive?y<=0:y<0}(t.startAt,Qh(t),r)||t.endAt&&!function(a,l,h){const y=Sy(a,l,h);return a.inclusive?y>=0:y>0}(t.endAt,Qh(t),r)));var t,r}function DS(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Oy(n){return(e,t)=>{let r=!1;for(const a of Qh(n)){const l=Ny(a,e,t);if(0!==l)return l;r=r||a.field.isKeyField()}return 0}}function Ny(n,e,t){const r=n.field.isKeyField()?je.comparator(e.key,t.key):function(a,l,h){const y=l.data.field(a),w=h.data.field(a);return null!==y&&null!==w?mc(y,w):tt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return tt()}}function oI(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pc(e)?"-0":e}}function Vl(n){return{integerValue:""+n}}function aI(n,e){return ZC(e)?Vl(e):oI(n,e)}class eE{constructor(){this._=void 0}}function TS(n,e,t){return n instanceof qp?function(r,a){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return a&&(l.fields.__previous_value__=a),{mapValue:l}}(t,e):n instanceof ba?uI(n,e):n instanceof Ul?AS(n,e):function(r,a){const l=tE(r,a),h=cI(l)+cI(r.yt);return Z0(l)&&Z0(r.yt)?Vl(h):oI(r.It,h)}(n,e)}function Ea(n,e,t){return n instanceof ba?uI(n,e):n instanceof Ul?AS(n,e):t}function tE(n,e){return n instanceof Xh?Z0(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class qp extends eE{}class ba extends eE{constructor(e){super(),this.elements=e}}function uI(n,e){const t=lI(e);for(const r of n.elements)t.some(a=>ya(a,r))||t.push(r);return{arrayValue:{values:t}}}class Ul extends eE{constructor(e){super(),this.elements=e}}function AS(n,e){let t=lI(e);for(const r of n.elements)t=t.filter(a=>!ya(a,r));return{arrayValue:{values:t}}}class Xh extends eE{constructor(e,t){super(),this.It=e,this.yt=t}}function cI(n){return er(n.integerValue||n.doubleValue)}function lI(n){return _a(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Bl{constructor(e,t){this.field=e,this.transform=t}}class nE{constructor(e,t){this.version=e,this.transformResults=t}}class Vn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Vn}static exists(e){return new Vn(void 0,e)}static updateTime(e){return new Vn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Py(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class rE{}function hI(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new ef(n.key,Vn.none()):new jl(n.key,n.data,Vn.none());{const t=n.data,r=ai.empty();let a=new ln(vr.comparator);for(let l of e.fields)if(!a.has(l)){let h=t.field(l);null===h&&l.length>1&&(l=l.popLast(),h=t.field(l)),null===h?r.delete(l):r.set(l,h),a=a.add(l)}return new eu(n.key,r,new Ps(a.toArray()),Vn.none())}}function SS(n,e,t){n instanceof jl?function(r,a,l){const h=r.value.clone(),y=sE(r.fieldTransforms,a,l.transformResults);h.setAll(y),a.convertToFoundDocument(l.version,h).setHasCommittedMutations()}(n,e,t):n instanceof eu?function(r,a,l){if(!Py(r.precondition,a))return void a.convertToUnknownDocument(l.version);const h=sE(r.fieldTransforms,a,l.transformResults),y=a.data;y.setAll(pI(r)),y.setAll(h),a.convertToFoundDocument(l.version,y).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Wp(n,e,t,r){return n instanceof jl?function(a,l,h,y){if(!Py(a.precondition,l))return h;const w=a.value.clone(),D=zp(a.fieldTransforms,y,l);return w.setAll(D),l.convertToFoundDocument(l.version,w).setHasLocalMutations(),null}(n,e,t,r):n instanceof eu?function(a,l,h,y){if(!Py(a.precondition,l))return h;const w=zp(a.fieldTransforms,y,l),D=l.data;return D.setAll(pI(a)),D.setAll(w),l.convertToFoundDocument(l.version,D).setHasLocalMutations(),null===h?null:h.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(x=>x.field))}(n,e,t,r):(h=t,Py(n.precondition,l=e)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):h);var l,h}function fI(n,e){let t=null;for(const r of n.fieldTransforms){const a=e.data.field(r.field),l=tE(r.transform,a||null);null!=l&&(null===t&&(t=ai.empty()),t.set(r.field,l))}return t||null}function iE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Rl(t,r,(a,l)=>function(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof ba&&r instanceof ba||t instanceof Ul&&r instanceof Ul?Rl(t.elements,r.elements,ya):t instanceof Xh&&r instanceof Xh?ya(t.yt,r.yt):t instanceof qp&&r instanceof qp);var t,r}(a,l))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class jl extends rE{constructor(e,t,r,a=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class eu extends rE{constructor(e,t,r,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function pI(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function sE(n,e,t){const r=new Map;wt(n.length===t.length);for(let a=0;a<t.length;a++){const l=n[a],h=l.transform,y=e.data.field(l.field);r.set(l.field,Ea(h,y,t[a]))}return r}function zp(n,e,t){const r=new Map;for(const a of n){const l=a.transform,h=t.data.field(a.field);r.set(a.field,TS(l,h,e))}return r}class ef extends rE{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ky extends rE{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Fy{constructor(e){this.count=e}}var tr,Qt;function gI(n){switch(n){default:return tt();case pe.CANCELLED:case pe.UNKNOWN:case pe.DEADLINE_EXCEEDED:case pe.RESOURCE_EXHAUSTED:case pe.INTERNAL:case pe.UNAVAILABLE:case pe.UNAUTHENTICATED:return!1;case pe.INVALID_ARGUMENT:case pe.NOT_FOUND:case pe.ALREADY_EXISTS:case pe.PERMISSION_DENIED:case pe.FAILED_PRECONDITION:case pe.ABORTED:case pe.OUT_OF_RANGE:case pe.UNIMPLEMENTED:case pe.DATA_LOSS:return!0}}function mI(n){if(void 0===n)return _r("GRPC error has no .code"),pe.UNKNOWN;switch(n){case tr.OK:return pe.OK;case tr.CANCELLED:return pe.CANCELLED;case tr.UNKNOWN:return pe.UNKNOWN;case tr.DEADLINE_EXCEEDED:return pe.DEADLINE_EXCEEDED;case tr.RESOURCE_EXHAUSTED:return pe.RESOURCE_EXHAUSTED;case tr.INTERNAL:return pe.INTERNAL;case tr.UNAVAILABLE:return pe.UNAVAILABLE;case tr.UNAUTHENTICATED:return pe.UNAUTHENTICATED;case tr.INVALID_ARGUMENT:return pe.INVALID_ARGUMENT;case tr.NOT_FOUND:return pe.NOT_FOUND;case tr.ALREADY_EXISTS:return pe.ALREADY_EXISTS;case tr.PERMISSION_DENIED:return pe.PERMISSION_DENIED;case tr.FAILED_PRECONDITION:return pe.FAILED_PRECONDITION;case tr.ABORTED:return pe.ABORTED;case tr.OUT_OF_RANGE:return pe.OUT_OF_RANGE;case tr.UNIMPLEMENTED:return pe.UNIMPLEMENTED;case tr.DATA_LOSS:return pe.DATA_LOSS;default:return tt()}}(Qt=tr||(tr={}))[Qt.OK=0]="OK",Qt[Qt.CANCELLED=1]="CANCELLED",Qt[Qt.UNKNOWN=2]="UNKNOWN",Qt[Qt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qt[Qt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qt[Qt.NOT_FOUND=5]="NOT_FOUND",Qt[Qt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qt[Qt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qt[Qt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qt[Qt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qt[Qt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qt[Qt.ABORTED=10]="ABORTED",Qt[Qt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qt[Qt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qt[Qt.INTERNAL=13]="INTERNAL",Qt[Qt.UNAVAILABLE=14]="UNAVAILABLE",Qt[Qt.DATA_LOSS=15]="DATA_LOSS";class $l{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[a,l]of r)if(this.equalsFn(a,e))return l}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),a=this.inner[r];if(void 0===a)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return 1===r.length?delete this.inner[t]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){hc(this.inner,(t,r)=>{for(const[a,l]of r)e(a,l)})}isEmpty(){return W0(this.inner)}size(){return this.innerSize}}const xS=new Xn(je.comparator);function ys(){return xS}const yI=new Xn(je.comparator);function Zp(...n){let e=yI;for(const t of n)e=e.insert(t.key,t);return e}function _I(n){let e=yI;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function wa(){return Kp()}function vI(){return Kp()}function Kp(){return new $l(n=>n.toString(),(n,e)=>n.isEqual(e))}const MS=new Xn(je.comparator),aR=new ln(je.comparator);function Wt(...n){let e=aR;for(const t of n)e=e.add(t);return e}const Yp=new ln(Vt);function Ly(){return Yp}class Qp{constructor(e,t,r,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const a=new Map;return a.set(e,Jp.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Qp(ft.min(),a,Ly(),ys(),Wt())}}class Jp{constructor(e,t,r,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Jp(r,t,Wt(),Wt(),Wt())}}class Hl{constructor(e,t,r,a){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=a}}class vc{constructor(e,t){this.targetId=e,this.At=t}}class oE{constructor(e,t,r=kr.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=a}}class EI{constructor(){this.Rt=0,this.bt=Xp(),this.Pt=kr.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Wt(),t=Wt(),r=Wt();return this.bt.forEach((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:r=r.add(a);break;default:tt()}}),new Jp(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=Xp()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class uR{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=ys(),this.qt=bI(),this.Kt=new ln(Vt)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:tt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,a)=>{this.Ht(a)&&t(a)})}Yt(e){const t=e.targetId,r=e.At.count,a=this.Xt(t);if(a){const l=a.target;if(Ty(l))if(0===r){const h=new je(l.path);this.jt(t,h,On.newNoDocument(h,ft.min()))}else wt(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((l,h)=>{const y=this.Xt(h);if(y){if(l.current&&Ty(y.target)){const w=new je(y.target.path);null!==this.Ut.get(w)||this.ee(h,w)||this.jt(h,w,On.newNoDocument(w,e))}l.Dt&&(t.set(h,l.xt()),l.Nt())}});let r=Wt();this.qt.forEach((l,h)=>{let y=!0;h.forEachWhile(w=>{const D=this.Xt(w);return!D||2===D.purpose||(y=!1,!1)}),y&&(r=r.add(l))}),this.Ut.forEach((l,h)=>h.setReadTime(e));const a=new Qp(e,t,this.Kt,this.Ut,r);return this.Ut=ys(),this.qt=bI(),this.Kt=new ln(Vt),a}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const a=this.zt(e);this.ee(e,t)?a.kt(t,1):a.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new EI,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new ln(Vt),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||ke("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new EI),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function bI(){return new Xn(je.comparator)}function Xp(){return new Xn(je.comparator)}const RS={asc:"ASCENDING",desc:"DESCENDING"},OS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class wI{constructor(e,t){this.databaseId=e,this.gt=t}}function tf(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Vy(n,e){return n.gt?e.toBase64():e.toUint8Array()}function CI(n,e){return tf(n,e.toTimestamp())}function Zr(n){return wt(!!n),ft.fromTimestamp(function(e){const t=fc(e);return new Ln(t.seconds,t.nanos)}(n))}function aE(n,e){return(t=n,new an(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function II(n){const e=an.fromString(n);return wt(cE(e)),e}function nf(n,e){return aE(n.databaseId,e.path)}function Ca(n,e){const t=II(e);if(t.get(1)!==n.databaseId.projectId)throw new Te(pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Te(pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new je(NS(t))}function Uy(n,e){return aE(n.databaseId,e)}function eg(n){const e=II(n);return 4===e.length?an.emptyPath():NS(e)}function Ec(n){return new an(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function NS(n){return wt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function rf(n,e,t){return{name:nf(n,e),fields:t.value.mapValue.fields}}function gn(n,e,t){const r=Ca(n,e.name),a=Zr(e.updateTime),l=new ai({mapValue:{fields:e.fields}}),h=On.newFoundDocument(r,a,l);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function tu(n,e){let t;if(e instanceof jl)t={update:rf(n,e.key,e.value)};else if(e instanceof ef)t={delete:nf(n,e.key)};else if(e instanceof eu)t={update:rf(n,e.key,e.data),updateMask:Bo(e.fieldMask)};else{if(!(e instanceof ky))return tt();t={verify:nf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(a,l){const h=l.transform;if(h instanceof qp)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof ba)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Ul)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Xh)return{fieldPath:l.field.canonicalString(),increment:h.yt};throw tt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(a=e.precondition).updateTime?{updateTime:CI(n,a.updateTime)}:void 0!==a.exists?{exists:a.exists}:tt()),t;var a}function DI(n,e){const t=e.currentDocument?void 0!==(a=e.currentDocument).updateTime?Vn.updateTime(Zr(a.updateTime)):void 0!==a.exists?Vn.exists(a.exists):Vn.none():Vn.none(),r=e.updateTransforms?e.updateTransforms.map(a=>function(l,h){let y=null;"setToServerValue"in h?(wt("REQUEST_TIME"===h.setToServerValue),y=new qp):"appendMissingElements"in h?y=new ba(h.appendMissingElements.values||[]):"removeAllFromArray"in h?y=new Ul(h.removeAllFromArray.values||[]):"increment"in h?y=new Xh(l,h.increment):tt();const w=vr.fromServerFormat(h.fieldPath);return new Bl(w,y)}(n,a)):[];var a;if(e.update){const a=Ca(n,e.update.name),l=new ai({mapValue:{fields:e.update.fields}});if(e.updateMask){const h=new Ps((e.updateMask.fieldPaths||[]).map(D=>vr.fromServerFormat(D)));return new eu(a,l,h,t,r)}return new jl(a,l,t,r)}if(e.delete){const a=Ca(n,e.delete);return new ef(a,t)}if(e.verify){const a=Ca(n,e.verify);return new ky(a,t)}return tt()}function ks(n,e){return{documents:[Uy(n,e.path)]}}function tg(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Uy(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Uy(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const a=function(w){if(0===w.length)return;const D=w.map(x=>function(P){if("=="===P.op){if(K0(P.value))return{unaryFilter:{field:of(P.field),op:"IS_NAN"}};if(YC(P.value))return{unaryFilter:{field:of(P.field),op:"IS_NULL"}}}else if("!="===P.op){if(K0(P.value))return{unaryFilter:{field:of(P.field),op:"IS_NOT_NAN"}};if(YC(P.value))return{unaryFilter:{field:of(P.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:of(P.field),op:lR(P.op),value:P.value}}}(x));return 1===D.length?D[0]:{compositeFilter:{op:"AND",filters:D}}}(e.filters);a&&(t.structuredQuery.where=a);const l=function(w){if(0!==w.length)return w.map(D=>{return{field:of((x=D).field),direction:TI(x.dir)};var x})}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const h=(D=e.limit,n.gt||qh(D)?D:{value:D});var D,y,w;return null!==h&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt={before:(y=e.startAt).inclusive,values:y.position}),e.endAt&&(t.structuredQuery.endAt={before:!(w=e.endAt).inclusive,values:w.position}),t}function wc(n){let e=eg(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let a=null;if(r>0){wt(1===r);const x=t.from[0];x.allDescendants?a=x.collectionId:e=e.child(x.collectionId)}let l=[];t.where&&(l=uE(t.where));let h=[];t.orderBy&&(h=t.orderBy.map(x=>{return new Kh(af((P=x).field),function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(P.direction));var P}));let y=null;t.limit&&(y=function(x){let P;return P="object"==typeof x?x.value:x,qh(P)?null:P}(t.limit));let w=null;var x;t.startAt&&(w=new yc((x=t.startAt).values||[],!!x.before));let D=null;return t.endAt&&(D=function(x){return new yc(x.values||[],!x.before)}(t.endAt)),My(e,a,h,l,y,"F",w,D)}function uE(n){return n?void 0!==n.unaryFilter?[nr(n)]:void 0!==n.fieldFilter?[lo(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>uE(e)).reduce((e,t)=>e.concat(t)):tt():[]}function TI(n){return RS[n]}function lR(n){return OS[n]}function of(n){return{fieldPath:n.canonicalString()}}function af(n){return vr.fromServerFormat(n.fieldPath)}function lo(n){return _i.create(af(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return tt()}}(n.fieldFilter.op),n.fieldFilter.value)}function nr(n){switch(n.unaryFilter.op){case"IS_NAN":const e=af(n.unaryFilter.field);return _i.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=af(n.unaryFilter.field);return _i.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=af(n.unaryFilter.field);return _i.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=af(n.unaryFilter.field);return _i.create(a,"!=",{nullValue:"NULL_VALUE"});default:return tt()}}function Bo(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function cE(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Yi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=By(e)),e=AI(n.get(t),e);return By(e)}function AI(n,e){let t=e;const r=n.length;for(let a=0;a<r;a++){const l=n.charAt(a);switch(l){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=l}}return t}function By(n){return n+"\x01\x01"}function Qi(n){const e=n.length;if(wt(e>=2),2===e)return wt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),an.emptyPath();const t=e-2,r=[];let a="";for(let l=0;l<e;){const h=n.indexOf("\x01",l);switch((h<0||h>t)&&tt(),n.charAt(h+1)){case"\x01":const y=n.substring(l,h);let w;0===a.length?w=y:(a+=y,w=a,a=""),r.push(w);break;case"\x10":a+=n.substring(l,h),a+="\0";break;case"\x11":a+=n.substring(l,h+1);break;default:tt()}l=h+2}return new an(r)}const uf=["userId","batchId"];function jy(n,e){return[n,Yi(e)]}function Cc(n,e,t){return[n,Yi(e),t]}const PS={},SI=["prefixPath","collectionGroup","readTime","documentId"],lE=["prefixPath","collectionGroup","documentId"],ng=["collectionGroup","readTime","prefixPath","documentId"],dE=["canonicalId","targetId"],xI=["targetId","path"],cf=["path","targetId"],kS=["collectionId","parent"],$y=["indexId","uid"],MI=["uid","sequenceNumber"],RI=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],OI=["indexId","uid","orderedDocumentKey"],Hy=["userId","collectionPath","documentId"],FS=["userId","collectionPath","largestBatchId"],hE=["userId","collectionGroup","largestBatchId"],Gy=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],dR=[...Gy,"documentOverlays"],LS=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Nt=LS,hR=[...Nt,"indexConfiguration","indexState","indexEntries"];class Gl extends Jn{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function ui(n,e){const t=We(n);return co.M(t.ie,e)}class fE{constructor(e,t,r,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&SS(l,e,r[a])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Wp(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Wp(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=vI();return this.mutations.forEach(a=>{const l=e.get(a.key),h=l.overlayedDocument;let y=this.applyToLocalView(h,l.mutatedFields);y=t.has(a.key)?null:y;const w=hI(h,y);null!==w&&r.set(a.key,w),h.isValidDocument()||h.convertToNoDocument(ft.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Wt())}isEqual(e){return this.batchId===e.batchId&&Rl(this.mutations,e.mutations,(t,r)=>iE(t,r))&&Rl(this.baseMutations,e.baseMutations,(t,r)=>iE(t,r))}}class pE{constructor(e,t,r,a){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=a}static from(e,t,r){wt(e.mutations.length===r.length);let a=MS;const l=e.mutations;for(let h=0;h<l.length;h++)a=a.insert(l[h].key,r[h].version);return new pE(e,t,r,a)}}class NI{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class ql{constructor(e,t,r,a,l=ft.min(),h=ft.min(),y=kr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=y}withSequenceNumber(e){return new ql(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new ql(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new ql(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class PI{constructor(e){this.re=e}}function kI(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:qy(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:nf(a=n.re,(l=e).key),fields:l.data.value.mapValue.fields,updateTime:tf(a,l.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:nu(e.version)};else{if(!e.isUnknownDocument())return tt();r.unknownDocument={path:t.path.toArray(),version:nu(e.version)}}var a,l;return r}function qy(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function nu(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Wl(n){const e=new Ln(n.seconds,n.nanoseconds);return ft.fromTimestamp(e)}function zl(n,e){const t=(e.baseMutations||[]).map(l=>DI(n.re,l));for(let l=0;l<e.mutations.length-1;++l){const h=e.mutations[l];l+1<e.mutations.length&&void 0!==e.mutations[l+1].transform&&(h.updateTransforms=e.mutations[l+1].transform.fieldTransforms,e.mutations.splice(l+1,1),++l)}const r=e.mutations.map(l=>DI(n.re,l)),a=Ln.fromMillis(e.localWriteTimeMs);return new fE(e.batchId,a,t,r)}function rg(n){const e=Wl(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Wl(n.lastLimboFreeSnapshotVersion):ft.min();let r;var a;return void 0!==n.query.documents?(wt(1===(a=n.query).documents.length),r=Mi(Yh(eg(a.documents[0])))):r=Mi(wc(n.query)),new ql(r,n.targetId,0,n.lastListenSequenceNumber,e,t,kr.fromBase64String(n.resumeToken))}function FI(n,e){const t=nu(e.snapshotVersion),r=nu(e.lastLimboFreeSnapshotVersion);let a;a=Ty(e.target)?ks(n.re,e.target):tg(n.re,e.target);const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Xa(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:a}}function gE(n){const e=wc({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Gp(e,e.limit,"L"):e}function mE(n,e){return new NI(e.largestBatchId,DI(n.re,e.overlayMutation))}function Wy(n,e){const t=e.path.lastSegment();return[n,Yi(e.path.popLast()),t]}function LI(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:nu(r.readTime),documentKey:Yi(r.documentKey.path),largestBatchId:r.largestBatchId}}class VS{getBundleMetadata(e,t){return yE(e).get(t).next(r=>{if(r)return{id:(a=r).bundleId,createTime:Wl(a.createTime),version:a.version};var a})}saveBundleMetadata(e,t){return yE(e).put({bundleId:(r=t).id,createTime:nu(Zr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return zy(e).get(t).next(r=>{if(r)return{name:(a=r).name,query:gE(a.bundledQuery),readTime:Wl(a.readTime)};var a})}saveNamedQuery(e,t){return zy(e).put({name:(r=t).name,readTime:nu(Zr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function yE(n){return ui(n,"bundles")}function zy(n){return ui(n,"namedQueries")}class Zy{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new Zy(e,t.uid||"")}getOverlay(e,t){return Ky(e).get(Wy(this.userId,t)).next(r=>r?mE(this.It,r):null)}getOverlays(e,t){const r=wa();return ue.forEach(t,a=>this.getOverlay(e,a).next(l=>{null!==l&&r.set(a,l)})).next(()=>r)}saveOverlays(e,t,r){const a=[];return r.forEach((l,h)=>{const y=new NI(t,h);a.push(this.ue(e,y))}),ue.waitFor(a)}removeOverlaysForBatchId(e,t,r){const a=new Set;t.forEach(h=>a.add(Yi(h.getCollectionPath())));const l=[];return a.forEach(h=>{const y=IDBKeyRange.bound([this.userId,h,r],[this.userId,h,r+1],!1,!0);l.push(Ky(e).Y("collectionPathOverlayIndex",y))}),ue.waitFor(l)}getOverlaysForCollection(e,t,r){const a=wa(),l=Yi(t),h=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,Number.POSITIVE_INFINITY],!0);return Ky(e).W("collectionPathOverlayIndex",h).next(y=>{for(const w of y){const D=mE(this.It,w);a.set(D.getKey(),D)}return a})}getOverlaysForCollectionGroup(e,t,r,a){const l=wa();let h;const y=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ky(e).Z({index:"collectionGroupOverlayIndex",range:y},(w,D,x)=>{const P=mE(this.It,D);l.size()<a||P.largestBatchId===h?(l.set(P.getKey(),P),h=P.largestBatchId):x.done()}).next(()=>l)}ue(e,t){return Ky(e).put(function(r,a,l){const[h,y,w]=Wy(a,l.mutation.key);return{userId:a,collectionPath:y,documentId:w,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:tu(r.re,l.mutation)}}(this.It,this.userId,t))}}function Ky(n){return ui(n,"documentOverlays")}class Zl{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(er(e.integerValue));else if("doubleValue"in e){const r=er(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),pc(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(kl(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?QC(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):tt()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const a of Object.keys(r))this._e(a,t),this.ae(r[a],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const a of r)this.ae(a,t)}ge(e,t){this.le(t,37),je.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function US(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function VI(n){const e=64-function(t){let r=0;for(let a=0;a<8;++a){const l=US(255&t[a]);if(r+=l,8!==l)break}return r}(n);return Math.ceil(e/8)}Zl.Te=new Zl;class BS{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const a=t.codePointAt(0);this.Ae(240|a>>>18),this.Ae(128|63&a>>>12),this.Ae(128|63&a>>>6),this.Ae(128|63&a)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const a=t.codePointAt(0);this.Pe(240|a>>>18),this.Pe(128|63&a>>>12),this.Pe(128|63&a>>>6),this.Pe(128|63&a)}}this.ve()}De(e){const t=this.Ce(e),r=VI(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=255&t[a]}Ne(e){const t=this.Ce(e),r=VI(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(a){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,a,!1),new Uint8Array(l.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let a=1;a<t.length;++a)t[a]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const a=new Uint8Array(r);a.set(this.buffer),this.buffer=a}}class jS{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class $S{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class ru{constructor(){this.Be=new BS,this.Le=new jS(this.Be),this.Ue=new $S(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class Kl{constructor(e,t,r,a){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=a}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Kl(this.indexId,this.documentKey,this.arrayValue,r)}}function Yl(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=_E(n.arrayValue,e.arrayValue),0!==t?t:(t=_E(n.directionalValue,e.directionalValue),0!==t?t:je.comparator(n.documentKey,e.documentKey)))}function _E(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class ig{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=_y(e);if(void 0!==t&&!this.ze(t))return!1;const r=dc(e);let a=0,l=0;for(;a<r.length&&this.ze(r[a]);++a);if(a===r.length)return!0;if(void 0!==this.je){const h=r[a];if(!this.He(this.je,h)||!this.Je(this.Ge[l++],h))return!1;++a}for(;a<r.length;++a){const h=r[a];if(l>=this.Ge.length||!this.Je(this.Ge[l++],h))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class fR{constructor(){this.Ye=new Yy}addToCollectionParentIndex(e,t){return this.Ye.add(t),ue.resolve()}getCollectionParents(e,t){return ue.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return ue.resolve()}deleteFieldIndex(e,t){return ue.resolve()}getDocumentsMatchingTarget(e,t){return ue.resolve(null)}getIndexType(e,t){return ue.resolve(0)}getFieldIndexes(e,t){return ue.resolve([])}getNextCollectionGroupToUpdate(e){return ue.resolve(null)}getMinOffset(e,t){return ue.resolve(Ns.min())}getMinOffsetFromCollectionGroup(e,t){return ue.resolve(Ns.min())}updateCollectionGroup(e,t,r){return ue.resolve()}updateIndexEntries(e,t){return ue.resolve()}}class Yy{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t]||new ln(an.comparator),l=!a.has(r);return this.index[t]=a.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t];return a&&a.has(r)}getEntries(e){return(this.index[e]||new ln(an.comparator)).toArray()}}const Qy=new Uint8Array(0);class HS{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new Yy,this.Ze=new $l(r=>Xa(r),(r,a)=>Zh(r,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),a=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const l={collectionId:r,parent:Yi(a)};return UI(e).put(l)}return ue.resolve()}getCollectionParents(e,t){const r=[],a=IDBKeyRange.bound([t,""],[yy(t),""],!1,!0);return UI(e).W(a).next(l=>{for(const h of l){if(h.collectionId!==t)break;r.push(Qi(h.parent))}return r})}addFieldIndex(e,t){const r=Jy(e),a={indexId:(h=t).indexId,collectionGroup:h.collectionGroup,fields:h.fields.map(y=>[y.fieldPath.canonicalString(),y.kind])};var h;delete a.indexId;const l=r.add(a);if(t.indexState){const h=lf(e);return l.next(y=>{h.put(LI(y,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return l.next()}deleteFieldIndex(e,t){const r=Jy(e),a=lf(e),l=sg(e);return r.delete(t.indexId).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=sg(e);let a=!0;const l=new Map;return ue.forEach(this.tn(t),h=>this.en(e,h).next(y=>{a&&(a=!!y),l.set(h,y)})).next(()=>{if(a){let h=Wt();const y=[];return ue.forEach(l,(w,D)=>{var x;ke("IndexedDbIndexManager",`Using index ${x=w,`id=${x.indexId}|cg=${x.collectionGroup}|f=${x.fields.map(xt=>`${xt.fieldPath}:${xt.kind}`).join(",")}`} to execute ${Xa(t)}`);const P=function(xt,kt){const Ht=_y(kt);if(void 0===Ht)return null;for(const Jt of Ay(xt,Ht.fieldPath))switch(Jt.op){case"array-contains-any":return Jt.value.arrayValue.values||[];case"array-contains":return[Jt.value]}return null}(D,w),z=function(xt,kt){const Ht=new Map;for(const Jt of dc(kt))for(const vi of Ay(xt,Jt.fieldPath))switch(vi.op){case"==":case"in":Ht.set(Jt.fieldPath.canonicalString(),vi.value);break;case"not-in":case"!=":return Ht.set(Jt.fieldPath.canonicalString(),vi.value),Array.from(Ht.values())}return null}(D,w),J=function(xt,kt){const Ht=[];let Jt=!0;for(const vi of dc(kt)){const Lb=0===vi.kind?tI(xt,vi.fieldPath,xt.startAt):nI(xt,vi.fieldPath,xt.startAt);Ht.push(Lb.value),Jt&&(Jt=Lb.inclusive)}return new yc(Ht,Jt)}(D,w),fe=function(xt,kt){const Ht=[];let Jt=!0;for(const vi of dc(kt)){const Lb=0===vi.kind?nI(xt,vi.fieldPath,xt.endAt):tI(xt,vi.fieldPath,xt.endAt);Ht.push(Lb.value),Jt&&(Jt=Lb.inclusive)}return new yc(Ht,Jt)}(D,w),Le=this.nn(w,D,J),Ve=this.nn(w,D,fe),Pt=this.sn(w,D,z),$t=this.rn(w.indexId,P,Le,J.inclusive,Ve,fe.inclusive,Pt);return ue.forEach($t,xt=>r.J(xt,t.limit).next(kt=>{kt.forEach(Ht=>{const Jt=je.fromSegments(Ht.documentKey);h.has(Jt)||(h=h.add(Jt),y.push(Jt))})}))}).next(()=>y)}return ue.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,a,l,h,y){const w=(null!=t?t.length:1)*Math.max(r.length,l.length),D=w/(null!=t?t.length:1),x=[];for(let P=0;P<w;++P){const z=t?this.on(t[P/D]):Qy,J=this.un(e,z,r[P%D],a),fe=this.cn(e,z,l[P%D],h),Le=y.map(Ve=>this.un(e,z,Ve,!0));x.push(...this.createRange(J,fe,Le))}return x}un(e,t,r,a){const l=new Kl(e,je.empty(),t,r);return a?l:l.Ke()}cn(e,t,r,a){const l=new Kl(e,je.empty(),t,r);return a?l.Ke():l}en(e,t){const r=new ig(t),a=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next(l=>{let h=null;for(const y of l)r.We(y)&&(!h||y.fields.length>h.fields.length)&&(h=y);return h})}getIndexType(e,t){let r=2;return ue.forEach(this.tn(t),a=>this.en(e,a).next(l=>{l?0!==r&&l.fields.length<function(h){let y=new ln(vr.comparator),w=!1;for(const D of h.filters){const x=D;x.field.isKeyField()||("array-contains"===x.op||"array-contains-any"===x.op?w=!0:y=y.add(x.field))}for(const D of h.orderBy)D.field.isKeyField()||(y=y.add(D.field));return y.size+(w?1:0)}(a)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new ru;for(const a of dc(e)){const l=t.data.field(a.fieldPath);if(null==l)return null;const h=r.qe(a.kind);Zl.Te.ce(l,h)}return r.$e()}on(e){const t=new ru;return Zl.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new ru;return Zl.Te.ce(Ll(this.databaseId,t),r.qe(function(a){const l=dc(a);return 0===l.length?0:l[l.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let a=[];a.push(new ru);let l=0;for(const h of dc(e)){const y=r[l++];for(const w of a)if(this.ln(t,h.fieldPath)&&_a(y))a=this.fn(a,h,y);else{const D=w.qe(h.kind);Zl.Te.ce(y,D)}}return this.dn(a)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const a=[...e],l=[];for(const h of r.arrayValue.values||[])for(const y of a){const w=new ru;w.seed(y.$e()),Zl.Te.ce(h,w.qe(t.kind)),l.push(w)}return l}ln(e,t){return!!e.filters.find(r=>r instanceof _i&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Jy(e),a=lf(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(l=>{const h=[];return ue.forEach(l,y=>a.get([y.indexId,this.uid]).next(w=>{h.push(function(D,x){const P=x?new Lp(x.sequenceNumber,new Ns(Wl(x.readTime),new je(Qi(x.documentKey)),x.largestBatchId)):Lp.empty(),z=D.fields.map(([J,fe])=>new mt(vr.fromServerFormat(J),fe));return new q0(D.indexId,D.collectionGroup,z,P)}(y,w))})).next(()=>h)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,a)=>{const l=r.indexState.sequenceNumber-a.indexState.sequenceNumber;return 0!==l?l:Vt(r.collectionGroup,a.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const a=Jy(e),l=lf(e);return this._n(e).next(h=>a.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(y=>ue.forEach(y,w=>l.put(LI(w.indexId,this.user,h,r)))))}updateIndexEntries(e,t){const r=new Map;return ue.forEach(t,(a,l)=>{const h=r.get(a.collectionGroup);return(h?ue.resolve(h):this.getFieldIndexes(e,a.collectionGroup)).next(y=>(r.set(a.collectionGroup,y),ue.forEach(y,w=>this.wn(e,a,w).next(D=>{const x=this.mn(l,w);return D.isEqual(x)?ue.resolve():this.gn(e,l,w,D,x)}))))})}yn(e,t,r,a){return sg(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,a){return sg(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const a=sg(e);let l=new ln(Yl);return a.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(h,y)=>{l=l.add(new Kl(r.indexId,t,y.arrayValue,y.directionalValue))}).next(()=>l)}mn(e,t){let r=new ln(Yl);const a=this.an(t,e);if(null==a)return r;const l=_y(t);if(null!=l){const h=e.data.field(l.fieldPath);if(_a(h))for(const y of h.arrayValue.values||[])r=r.add(new Kl(t.indexId,e.key,this.on(y),a))}else r=r.add(new Kl(t.indexId,e.key,Qy,a));return r}gn(e,t,r,a,l){ke("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const h=[];return function(y,w,D,x,P){const z=y.getIterator(),J=w.getIterator();let fe=Gh(z),Le=Gh(J);for(;fe||Le;){let Ve=!1,Pt=!1;if(fe&&Le){const $t=D(fe,Le);$t<0?Pt=!0:$t>0&&(Ve=!0)}else null!=fe?Pt=!0:Ve=!0;Ve?(x(Le),Le=Gh(J)):Pt?(P(fe),fe=Gh(z)):(fe=Gh(z),Le=Gh(J))}}(a,l,Yl,y=>{h.push(this.yn(e,t,r,y))},y=>{h.push(this.pn(e,t,r,y))}),ue.waitFor(h)}_n(e){let t=1;return lf(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,a,l)=>{l.done(),t=a.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((h,y)=>Yl(h,y)).filter((h,y,w)=>!y||0!==Yl(h,w[y-1]));const a=[];a.push(e);for(const h of r){const y=Yl(h,e),w=Yl(h,t);if(0===y)a[0]=e.Ke();else if(y>0&&w<0)a.push(h),a.push(h.Ke());else if(w>0)break}a.push(t);const l=[];for(let h=0;h<a.length;h+=2)l.push(IDBKeyRange.bound([a[h].indexId,this.uid,a[h].arrayValue,a[h].directionalValue,Qy,[]],[a[h+1].indexId,this.uid,a[h+1].arrayValue,a[h+1].directionalValue,Qy,[]]));return l}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(BI)}getMinOffset(e,t){return ue.mapArray(this.tn(t),r=>this.en(e,r).next(a=>a||tt())).next(BI)}}function UI(n){return ui(n,"collectionParents")}function sg(n){return ui(n,"indexEntries")}function Jy(n){return ui(n,"indexConfiguration")}function lf(n){return ui(n,"indexState")}function BI(n){wt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const a=n[r].indexState.offset;$h(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new Ns(e.readTime,e.documentKey,t)}const jI={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Fs{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Fs(e,Fs.DEFAULT_COLLECTION_PERCENTILE,Fs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function GS(n,e,t){const r=n.store("mutations"),a=n.store("documentMutations"),l=[],h=IDBKeyRange.only(t.batchId);let y=0;const w=r.Z({range:h},(x,P,z)=>(y++,z.delete()));l.push(w.next(()=>{wt(1===y)}));const D=[];for(const x of t.mutations){const P=Cc(e,x.key.path,t.batchId);l.push(a.delete(P)),D.push(x.key)}return ue.waitFor(l).next(()=>D)}function vE(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw tt();e=n.noDocument}return JSON.stringify(e).length}Fs.DEFAULT_COLLECTION_PERCENTILE=10,Fs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fs.DEFAULT=new Fs(41943040,Fs.DEFAULT_COLLECTION_PERCENTILE,Fs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fs.DISABLED=new Fs(-1,0,0);class df{constructor(e,t,r,a){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=a,this.In={}}static oe(e,t,r,a){wt(""!==e.uid);const l=e.isAuthenticated()?e.uid:"";return new df(l,t,r,a)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ic(e).Z({index:"userMutationsIndex",range:r},(a,l,h)=>{t=!1,h.done()}).next(()=>t)}addMutationBatch(e,t,r,a){const l=hf(e),h=Ic(e);return h.add({}).next(y=>{wt("number"==typeof y);const w=new fE(y,t,r,a),D=function(z,J,fe){const Le=fe.baseMutations.map(Pt=>tu(z.re,Pt)),Ve=fe.mutations.map(Pt=>tu(z.re,Pt));return{userId:J,batchId:fe.batchId,localWriteTimeMs:fe.localWriteTime.toMillis(),baseMutations:Le,mutations:Ve}}(this.It,this.userId,w),x=[];let P=new ln((z,J)=>Vt(z.canonicalString(),J.canonicalString()));for(const z of a){const J=Cc(this.userId,z.key.path,y);P=P.add(z.key.path.popLast()),x.push(h.put(D)),x.push(l.put(J,PS))}return P.forEach(z=>{x.push(this.indexManager.addToCollectionParentIndex(e,z))}),e.addOnCommittedListener(()=>{this.In[y]=w.keys()}),ue.waitFor(x).next(()=>w)})}lookupMutationBatch(e,t){return Ic(e).get(t).next(r=>r?(wt(r.userId===this.userId),zl(this.It,r)):null)}Tn(e,t){return this.In[t]?ue.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const a=r.keys();return this.In[t]=a,a}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=IDBKeyRange.lowerBound([this.userId,r]);let l=null;return Ic(e).Z({index:"userMutationsIndex",range:a},(h,y,w)=>{y.userId===this.userId&&(wt(y.batchId>=r),l=zl(this.It,y)),w.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Ic(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(a,l,h)=>{r=l.batchId,h.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ic(e).W("userMutationsIndex",t).next(r=>r.map(a=>zl(this.It,a)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=jy(this.userId,t.path),a=IDBKeyRange.lowerBound(r),l=[];return hf(e).Z({range:a},(h,y,w)=>{const[D,x,P]=h,z=Qi(x);if(D===this.userId&&t.path.isEqual(z))return Ic(e).get(P).next(J=>{if(!J)throw tt();wt(J.userId===this.userId),l.push(zl(this.It,J))});w.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ln(Vt);const a=[];return t.forEach(l=>{const h=jy(this.userId,l.path),y=IDBKeyRange.lowerBound(h),w=hf(e).Z({range:y},(D,x,P)=>{const[z,J,fe]=D,Le=Qi(J);z===this.userId&&l.path.isEqual(Le)?r=r.add(fe):P.done()});a.push(w)}),ue.waitFor(a).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1,l=jy(this.userId,r),h=IDBKeyRange.lowerBound(l);let y=new ln(Vt);return hf(e).Z({range:h},(w,D,x)=>{const[P,z,J]=w,fe=Qi(z);P===this.userId&&r.isPrefixOf(fe)?fe.length===a&&(y=y.add(J)):x.done()}).next(()=>this.En(e,y))}En(e,t){const r=[],a=[];return t.forEach(l=>{a.push(Ic(e).get(l).next(h=>{if(null===h)throw tt();wt(h.userId===this.userId),r.push(zl(this.It,h))}))}),ue.waitFor(a).next(()=>r)}removeMutationBatch(e,t){return GS(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),ue.forEach(r,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ue.resolve();const r=IDBKeyRange.lowerBound([this.userId]),a=[];return hf(e).Z({range:r},(l,h,y)=>{if(l[0]===this.userId){const w=Qi(l[1]);a.push(w)}else y.done()}).next(()=>{wt(0===a.length)})})}containsKey(e,t){return $I(e,this.userId,t)}Rn(e){return HI(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function $I(n,e,t){const r=jy(e,t.path),a=r[1],l=IDBKeyRange.lowerBound(r);let h=!1;return hf(n).Z({range:l,X:!0},(y,w,D)=>{const[x,P,z]=y;x===e&&P===a&&(h=!0),D.done()}).next(()=>h)}function Ic(n){return ui(n,"mutations")}function hf(n){return ui(n,"documentMutations")}function HI(n){return ui(n,"mutationQueues")}class Ql{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Ql(0)}static vn(){return new Ql(-1)}}class qS{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new Ql(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>ft.fromTimestamp(new Ln(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(a=>(a.highestListenSequenceNumber=t,r&&(a.lastRemoteSnapshotVersion=r.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.Sn(e,a)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Jl(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(wt(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let a=0;const l=[];return Jl(e).Z((h,y)=>{const w=rg(y);w.sequenceNumber<=t&&null===r.get(w.targetId)&&(a++,l.push(this.removeTargetData(e,w)))}).next(()=>ue.waitFor(l)).next(()=>a)}forEachTarget(e,t){return Jl(e).Z((r,a)=>{const l=rg(a);t(l)})}Vn(e){return Xy(e).get("targetGlobalKey").next(t=>(wt(null!==t),t))}Sn(e,t){return Xy(e).put("targetGlobalKey",t)}Dn(e,t){return Jl(e).put(FI(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Xa(t),a=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let l=null;return Jl(e).Z({range:a,index:"queryTargetsIndex"},(h,y,w)=>{const D=rg(y);Zh(t,D.target)&&(l=D,w.done())}).next(()=>l)}addMatchingKeys(e,t,r){const a=[],l=Dc(e);return t.forEach(h=>{const y=Yi(h.path);a.push(l.put({targetId:r,path:y})),a.push(this.referenceDelegate.addReference(e,r,h))}),ue.waitFor(a)}removeMatchingKeys(e,t,r){const a=Dc(e);return ue.forEach(t,l=>{const h=Yi(l.path);return ue.waitFor([a.delete([r,h]),this.referenceDelegate.removeReference(e,r,l)])})}removeMatchingKeysForTargetId(e,t){const r=Dc(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(a)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),a=Dc(e);let l=Wt();return a.Z({range:r,X:!0},(h,y,w)=>{const D=Qi(h[1]),x=new je(D);l=l.add(x)}).next(()=>l)}containsKey(e,t){const r=Yi(t.path),a=IDBKeyRange.bound([r],[yy(r)],!1,!0);let l=0;return Dc(e).Z({index:"documentTargetsIndex",X:!0,range:a},([h,y],w,D)=>{0!==h&&(l++,D.done())}).next(()=>l>0)}se(e,t){return Jl(e).get(t).next(r=>r?rg(r):null)}}function Jl(n){return ui(n,"targets")}function Xy(n){return ui(n,"targetGlobal")}function Dc(n){return ui(n,"targetDocuments")}function Xl([n,e],[t,r]){const a=Vt(n,t);return 0===a?Vt(e,r):a}class Oi{constructor(e){this.xn=e,this.buffer=new ln(Xl),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Xl(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class GI{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;ke("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,_e.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Ja(r)?ke("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Ol(r)}yield t.Fn(3e5)}))}}class jo{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ue.resolve(ms.at);const r=new Oi(t);return this.$n.forEachTarget(e,a=>r.On(a.sequenceNumber)).next(()=>this.$n.Ln(e,a=>r.On(a))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector","Garbage collection skipped; disabled"),ue.resolve(jI)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),jI):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,a,l,h,y,w,D;const x=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(P=>(P>this.params.maximumSequenceNumbersToCollect?(ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${P}`),a=this.params.maximumSequenceNumbersToCollect):a=P,h=Date.now(),this.nthSequenceNumber(e,a))).next(P=>(r=P,y=Date.now(),this.removeTargets(e,r,t))).next(P=>(l=P,w=Date.now(),this.removeOrphanedDocuments(e,r))).next(P=>(D=Date.now(),j0()<=ec.in.DEBUG&&ke("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${h-x}ms\n\tDetermined least recently used ${a} in `+(y-h)+`ms\n\tRemoved ${l} targets in `+(w-y)+`ms\n\tRemoved ${P} documents in `+(D-w)+`ms\nTotal Duration: ${D-x}ms`),ue.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:P})))}}class EE{constructor(e,t){this.db=e,this.garbageCollector=new jo(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(a=>r+a))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,a)=>t(a))}addReference(e,t,r){return e_(e,r)}removeReference(e,t,r){return e_(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return e_(e,t)}Gn(e,t){return function(r,a){let l=!1;return HI(r).tt(h=>$I(r,h,a).next(y=>(y&&(l=!0),ue.resolve(!y)))).next(()=>l)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this.Kn(e,(h,y)=>{if(y<=t){const w=this.Gn(e,h).next(D=>{if(!D)return l++,r.getEntry(e,h).next(()=>(r.removeEntry(h,ft.min()),Dc(e).delete([0,Yi(h.path)])))});a.push(w)}}).next(()=>ue.waitFor(a)).next(()=>r.apply(e)).next(()=>l)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return e_(e,t)}Kn(e,t){const r=Dc(e);let a,l=ms.at;return r.Z({index:"documentTargetsIndex"},([h,y],{path:w,sequenceNumber:D})=>{0===h?(l!==ms.at&&t(new je(Qi(a)),l),l=D,a=w):l=ms.at}).next(()=>{l!==ms.at&&t(new je(Qi(a)),l)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function e_(n,e){return Dc(n).put((r=n.currentSequenceNumber,{targetId:0,path:Yi(e.path),sequenceNumber:r}));var r}class bE{constructor(){this.changes=new $l(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,On.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ue.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class qI{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return ed(e).put(r)}removeEntry(e,t,r){return ed(e).delete(function(a,l){const h=a.path.toArray();return[h.slice(0,h.length-2),h[h.length-2],qy(l),h[h.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=On.newInvalidDocument(t);return ed(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(ff(t))},(a,l)=>{r=this.jn(t,l)}).next(()=>r)}Wn(e,t){let r={size:0,document:On.newInvalidDocument(t)};return ed(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(ff(t))},(a,l)=>{r={document:this.jn(t,l),size:vE(l)}}).next(()=>r)}getEntries(e,t){let r=ys();return this.zn(e,t,(a,l)=>{const h=this.jn(a,l);r=r.insert(a,h)}).next(()=>r)}Hn(e,t){let r=ys(),a=new Xn(je.comparator);return this.zn(e,t,(l,h)=>{const y=this.jn(l,h);r=r.insert(l,y),a=a.insert(l,vE(h))}).next(()=>({documents:r,Jn:a}))}zn(e,t,r){if(t.isEmpty())return ue.resolve();let a=new ln(zS);t.forEach(w=>a=a.add(w));const l=IDBKeyRange.bound(ff(a.first()),ff(a.last())),h=a.getIterator();let y=h.getNext();return ed(e).Z({index:"documentKeyIndex",range:l},(w,D,x)=>{const P=je.fromSegments([...D.prefixPath,D.collectionGroup,D.documentId]);for(;y&&zS(y,P)<0;)r(y,null),y=h.getNext();y&&y.isEqual(P)&&(r(y,D),y=h.hasNext()?h.getNext():null),y?x.j(ff(y)):x.done()}).next(()=>{for(;y;)r(y,null),y=h.hasNext()?h.getNext():null})}getAllFromCollection(e,t,r){const a=[t.popLast().toArray(),t.lastSegment(),qy(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ed(e).W(IDBKeyRange.bound(a,l,!0)).next(h=>{let y=ys();for(const w of h){const D=this.jn(je.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);y=y.insert(D.key,D)}return y})}getAllFromCollectionGroup(e,t,r,a){let l=ys();const h=zI(t,r),y=zI(t,Ns.max());return ed(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(h,y,!0)},(w,D,x)=>{const P=this.jn(je.fromSegments(D.prefixPath.concat(D.collectionGroup,D.documentId)),D);l=l.insert(P.key,P),l.size===a&&x.done()}).next(()=>l)}newChangeBuffer(e){return new WS(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return WI(e).get("remoteDocumentGlobalKey").next(t=>(wt(!!t),t))}Qn(e,t){return WI(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function(n,e){let t;if(e.document)t=gn(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=je.fromSegments(e.noDocument.path),a=Wl(e.noDocument.readTime);t=On.newNoDocument(r,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return tt();{const r=je.fromSegments(e.unknownDocument.path),a=Wl(e.unknownDocument.version);t=On.newUnknownDocument(r,a)}}return e.readTime&&t.setReadTime(function(r){const a=new Ln(r[0],r[1]);return ft.fromTimestamp(a)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(ft.min()))return r}return On.newInvalidDocument(e)}}function wE(n){return new qI(n)}class WS extends bE{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new $l(r=>r.toString(),(r,a)=>r.isEqual(a))}applyChanges(e){const t=[];let r=0,a=new ln((l,h)=>Vt(l.canonicalString(),h.canonicalString()));return this.changes.forEach((l,h)=>{const y=this.Xn.get(l);if(t.push(this.Yn.removeEntry(e,l,y.readTime)),h.isValidDocument()){const w=kI(this.Yn.It,h);a=a.add(l.path.popLast()),r+=vE(w)-y.size,t.push(this.Yn.addEntry(e,l,w))}else if(r-=y.size,this.trackRemovals){const w=kI(this.Yn.It,h.convertToNoDocument(ft.min()));t.push(this.Yn.addEntry(e,l,w))}}),a.forEach(l=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,l))}),t.push(this.Yn.updateMetadata(e,r)),ue.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:a})=>(a.forEach((l,h)=>{this.Xn.set(l,{size:h,readTime:r.get(l).readTime})}),r))}}function WI(n){return ui(n,"remoteDocumentGlobal")}function ed(n){return ui(n,"remoteDocumentsV14")}function ff(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function zI(n,e){const t=e.documentKey.path.toArray();return[n,qy(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function zS(n,e){const t=n.path.toArray(),r=e.path.toArray();let a=0;for(let l=0;l<t.length-2&&l<r.length-2;++l)if(a=Vt(t[l],r[l]),a)return a;return a=Vt(t.length,r.length),a||(a=Vt(t[t.length-2],r[r.length-2]),a||Vt(t[t.length-1],r[r.length-1]))}class ZS{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class ZI{constructor(e,t,r,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(r=a,this.getBaseDocument(e,t,r))).next(a=>(null!==r&&Wp(r.mutation,a,Ps.empty(),Ln.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Wt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Wt()){const a=wa();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,r).next(l=>{let h=Zp();return l.forEach((y,w)=>{h=h.insert(y,w.overlayedDocument)}),h}))}getOverlayedDocuments(e,t){const r=wa();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Wt()))}populateOverlays(e,t,r){const a=[];return r.forEach(l=>{t.has(l)||a.push(l)}),this.documentOverlayCache.getOverlays(e,a).next(l=>{l.forEach((h,y)=>{t.set(h,y)})})}computeViews(e,t,r,a){let l=ys();const h=Kp(),y=Kp();return t.forEach((w,D)=>{const x=r.get(D.key);a.has(D.key)&&(void 0===x||x.mutation instanceof eu)?l=l.insert(D.key,D):void 0!==x&&(h.set(D.key,x.mutation.getFieldMask()),Wp(x.mutation,D,x.mutation.getFieldMask(),Ln.now()))}),this.recalculateAndSaveOverlays(e,l).next(w=>(w.forEach((D,x)=>h.set(D,x)),t.forEach((D,x)=>{var P;return y.set(D,new ZS(x,null!==(P=h.get(D))&&void 0!==P?P:null))}),y))}recalculateAndSaveOverlays(e,t){const r=Kp();let a=new Xn((h,y)=>h-y),l=Wt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(h=>{for(const y of h)y.keys().forEach(w=>{const D=t.get(w);if(null===D)return;let x=r.get(w)||Ps.empty();x=y.applyToLocalView(D,x),r.set(w,x);const P=(a.get(y.batchId)||Wt()).add(w);a=a.insert(y.batchId,P)})}).next(()=>{const h=[],y=a.getReverseIterator();for(;y.hasNext();){const w=y.getNext(),D=w.key,x=w.value,P=vI();x.forEach(z=>{if(!l.has(z)){const J=hI(t.get(z),r.get(z));null!==J&&P.set(z,J),l=l.add(z)}}),h.push(this.documentOverlayCache.saveOverlays(e,D,P))}return ue.waitFor(h)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return je.isDocumentKey((a=t).path)&&null===a.collectionGroup&&0===a.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Ry(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var a}getNextDocuments(e,t,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,a).next(l=>{const h=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,a-l.size):ue.resolve(wa());let y=-1,w=l;return h.next(D=>ue.forEach(D,(x,P)=>(y<P.largestBatchId&&(y=P.largestBatchId),l.get(x)?ue.resolve():this.getBaseDocument(e,x,P).next(z=>{w=w.insert(x,z)}))).next(()=>this.populateOverlays(e,D,l)).next(()=>this.computeViews(e,w,D,Wt())).next(x=>({batchId:y,changes:_I(x)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new je(t)).next(r=>{let a=Zp();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const a=t.collectionGroup;let l=Zp();return this.indexManager.getCollectionParents(e,a).next(h=>ue.forEach(h,y=>{const w=(D=t,x=y.child(a),new va(x,null,D.explicitOrderBy.slice(),D.filters.slice(),D.limit,D.limitType,D.startAt,D.endAt));var D,x;return this.getDocumentsMatchingCollectionQuery(e,w,r).next(D=>{D.forEach((x,P)=>{l=l.insert(x,P)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,t,r){let a;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(l=>(a=l,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(l=>{l.forEach((y,w)=>{const D=w.getKey();null===a.get(D)&&(a=a.insert(D,On.newInvalidDocument(D)))});let h=Zp();return a.forEach((y,w)=>{const D=l.get(y);void 0!==D&&Wp(D.mutation,w,Ps.empty(),Ln.now()),_c(t,w)&&(h=h.insert(y,w))}),h})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):ue.resolve(On.newInvalidDocument(t))}}class pf{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return ue.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:Zr(r.createTime)}),ue.resolve()}getNamedQuery(e,t){return ue.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:gE(r.bundledQuery),readTime:Zr(r.readTime)}),ue.resolve();var r}}class pR{constructor(){this.overlays=new Xn(je.comparator),this.es=new Map}getOverlay(e,t){return ue.resolve(this.overlays.get(t))}getOverlays(e,t){const r=wa();return ue.forEach(t,a=>this.getOverlay(e,a).next(l=>{null!==l&&r.set(a,l)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((a,l)=>{this.ue(e,t,l)}),ue.resolve()}removeOverlaysForBatchId(e,t,r){const a=this.es.get(r);return void 0!==a&&(a.forEach(l=>this.overlays=this.overlays.remove(l)),this.es.delete(r)),ue.resolve()}getOverlaysForCollection(e,t,r){const a=wa(),l=t.length+1,h=new je(t.child("")),y=this.overlays.getIteratorFrom(h);for(;y.hasNext();){const w=y.getNext().value,D=w.getKey();if(!t.isPrefixOf(D.path))break;D.path.length===l&&w.largestBatchId>r&&a.set(w.getKey(),w)}return ue.resolve(a)}getOverlaysForCollectionGroup(e,t,r,a){let l=new Xn((D,x)=>D-x);const h=this.overlays.getIterator();for(;h.hasNext();){const D=h.getNext().value;if(D.getKey().getCollectionGroup()===t&&D.largestBatchId>r){let x=l.get(D.largestBatchId);null===x&&(x=wa(),l=l.insert(D.largestBatchId,x)),x.set(D.getKey(),D)}}const y=wa(),w=l.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach((D,x)=>y.set(D,x)),!(y.size()>=a)););return ue.resolve(y)}ue(e,t,r){const a=this.overlays.get(r.key);if(null!==a){const h=this.es.get(a.largestBatchId).delete(r.key);this.es.set(a.largestBatchId,h)}this.overlays=this.overlays.insert(r.key,new NI(t,r));let l=this.es.get(t);void 0===l&&(l=Wt(),this.es.set(t,l)),this.es.set(t,l.add(r.key))}}class t_{constructor(){this.ns=new ln(ci.ss),this.rs=new ln(ci.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new ci(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new ci(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new je(new an([])),r=new ci(t,e),a=new ci(t,e+1),l=[];return this.rs.forEachInRange([r,a],h=>{this.cs(h),l.push(h.key)}),l}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new je(new an([])),r=new ci(t,e),a=new ci(t,e+1);let l=Wt();return this.rs.forEachInRange([r,a],h=>{l=l.add(h.key)}),l}containsKey(e){const t=new ci(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class ci{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return je.comparator(e.key,t.key)||Vt(e._s,t._s)}static os(e,t){return Vt(e._s,t._s)||je.comparator(e.key,t.key)}}class gR{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new ln(ci.ss)}checkEmpty(e){return ue.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,a){const l=this.ws;this.ws++;const h=new fE(l,t,r,a);this.mutationQueue.push(h);for(const y of a)this.gs=this.gs.add(new ci(y.key,l)),this.indexManager.addToCollectionParentIndex(e,y.key.path.popLast());return ue.resolve(h)}lookupMutationBatch(e,t){return ue.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const a=this.ps(t+1),l=a<0?0:a;return ue.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ci(t,0),a=new ci(t,Number.POSITIVE_INFINITY),l=[];return this.gs.forEachInRange([r,a],h=>{const y=this.ys(h._s);l.push(y)}),ue.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ln(Vt);return t.forEach(a=>{const l=new ci(a,0),h=new ci(a,Number.POSITIVE_INFINITY);this.gs.forEachInRange([l,h],y=>{r=r.add(y._s)})}),ue.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1;let l=r;je.isDocumentKey(l)||(l=l.child(""));const h=new ci(new je(l),0);let y=new ln(Vt);return this.gs.forEachWhile(w=>{const D=w.key.path;return!!r.isPrefixOf(D)&&(D.length===a&&(y=y.add(w._s)),!0)},h),ue.resolve(this.Is(y))}Is(e){const t=[];return e.forEach(r=>{const a=this.ys(r);null!==a&&t.push(a)}),t}removeMutationBatch(e,t){wt(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return ue.forEach(t.mutations,a=>{const l=new ci(a.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new ci(t,0),a=this.gs.firstAfterOrEqual(r);return ue.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return ue.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class KI{constructor(e){this.Es=e,this.docs=new Xn(je.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,a=this.docs.get(r),l=a?a.size:0,h=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ue.resolve(r?r.document.mutableCopy():On.newInvalidDocument(t))}getEntries(e,t){let r=ys();return t.forEach(a=>{const l=this.docs.get(a);r=r.insert(a,l?l.document.mutableCopy():On.newInvalidDocument(a))}),ue.resolve(r)}getAllFromCollection(e,t,r){let a=ys();const l=new je(t.child("")),h=this.docs.getIteratorFrom(l);for(;h.hasNext();){const{key:y,value:{document:w}}=h.getNext();if(!t.isPrefixOf(y.path))break;y.path.length>t.length+1||$h(Vp(w),r)<=0||(a=a.insert(w.key,w.mutableCopy()))}return ue.resolve(a)}getAllFromCollectionGroup(e,t,r,a){tt()}As(e,t){return ue.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new KS(this)}getSize(e){return ue.resolve(this.size)}}class KS extends bE{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,a)=>{a.isValidDocument()?t.push(this.Yn.addEntry(e,a)):this.Yn.removeEntry(r)}),ue.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class CE{constructor(e){this.persistence=e,this.Rs=new $l(t=>Xa(t),Zh),this.lastRemoteSnapshotVersion=ft.min(),this.highestTargetId=0,this.bs=0,this.Ps=new t_,this.targetCount=0,this.vs=Ql.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,a)=>t(a)),ue.resolve()}getLastRemoteSnapshotVersion(e){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ue.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),ue.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new Ql(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,ue.resolve()}updateTargetData(e,t){return this.Dn(t),ue.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,ue.resolve()}removeTargets(e,t,r){let a=0;const l=[];return this.Rs.forEach((h,y)=>{y.sequenceNumber<=t&&null===r.get(y.targetId)&&(this.Rs.delete(h),l.push(this.removeMatchingKeysForTargetId(e,y.targetId)),a++)}),ue.waitFor(l).next(()=>a)}getTargetCount(e){return ue.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return ue.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),ue.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach(h=>{l.push(a.markPotentiallyOrphaned(e,h))}),ue.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),ue.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return ue.resolve(r)}containsKey(e,t){return ue.resolve(this.Ps.containsKey(t))}}class YI{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new ms(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new CE(this),this.indexManager=new fR,this.remoteDocumentCache=new KI(r=>this.referenceDelegate.xs(r)),this.It=new PI(t),this.Ns=new pf(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new pR,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new gR(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){ke("MemoryPersistence","Starting transaction:",e);const a=new QI(this.Ss.next());return this.referenceDelegate.ks(),r(a).next(l=>this.referenceDelegate.Os(a).next(()=>l)).toPromise().then(l=>(a.raiseOnCommittedEvent(),l))}Ms(e,t){return ue.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class QI extends Jn{constructor(e){super(),this.currentSequenceNumber=e}}class n_{constructor(e){this.persistence=e,this.Fs=new t_,this.$s=null}static Bs(e){return new n_(e)}get Ls(){if(this.$s)return this.$s;throw tt()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),ue.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),ue.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),ue.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(a=>this.Ls.add(a.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(l=>this.Ls.add(l.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.Ls,r=>{const a=je.fromPath(r);return this.Us(e,a).next(l=>{l||t.removeEntry(a,ft.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return ue.or([()=>ue.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class YS{constructor(e){this.It=e}$(e,t,r,a){const l=new Ey("createOrUpgrade",t);var y;r<1&&a>=1&&(e.createObjectStore("owner"),(y=e).createObjectStore("mutationQueues",{keyPath:"userId"}),y.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",uf,{unique:!0}),y.createObjectStore("documentMutations"),JI(e),function(y){y.createObjectStore("remoteDocuments")}(e));let h=ue.resolve();return r<3&&a>=3&&(0!==r&&(function(y){y.deleteObjectStore("targetDocuments"),y.deleteObjectStore("targets"),y.deleteObjectStore("targetGlobal")}(e),JI(e)),h=h.next(()=>function(y){const w=y.store("targetGlobal"),D={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ft.min().toTimestamp(),targetCount:0};return w.put("targetGlobalKey",D)}(l))),r<4&&a>=4&&(0!==r&&(h=h.next(()=>function(y,w){return w.store("mutations").W().next(D=>{y.deleteObjectStore("mutations"),y.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",uf,{unique:!0});const x=w.store("mutations"),P=D.map(z=>x.put(z));return ue.waitFor(P)})}(e,l))),h=h.next(()=>{!function(y){y.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&a>=5&&(h=h.next(()=>this.qs(l))),r<6&&a>=6&&(h=h.next(()=>(function(y){y.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(l)))),r<7&&a>=7&&(h=h.next(()=>this.Gs(l))),r<8&&a>=8&&(h=h.next(()=>this.Qs(e,l))),r<9&&a>=9&&(h=h.next(()=>{!function(y){y.objectStoreNames.contains("remoteDocumentChanges")&&y.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&a>=10&&(h=h.next(()=>this.js(l))),r<11&&a>=11&&(h=h.next(()=>{(function(y){y.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(y){y.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&a>=12&&(h=h.next(()=>{!function(y){const w=y.createObjectStore("documentOverlays",{keyPath:Hy});w.createIndex("collectionPathOverlayIndex",FS,{unique:!1}),w.createIndex("collectionGroupOverlayIndex",hE,{unique:!1})}(e)})),r<13&&a>=13&&(h=h.next(()=>function(y){const w=y.createObjectStore("remoteDocumentsV14",{keyPath:SI});w.createIndex("documentKeyIndex",lE),w.createIndex("collectionGroupIndex",ng)}(e)).next(()=>this.Ws(e,l)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&a>=14&&(h=h.next(()=>this.zs(e,l))),r<15&&a>=15&&(h=h.next(()=>function(y){y.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),y.createObjectStore("indexState",{keyPath:$y}).createIndex("sequenceNumberIndex",MI,{unique:!1}),y.createObjectStore("indexEntries",{keyPath:RI}).createIndex("documentKeyIndex",OI,{unique:!1})}(e))),h}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,a)=>{t+=vE(a)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(a=>ue.forEach(a,l=>{const h=IDBKeyRange.bound([l.userId,-1],[l.userId,l.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",h).next(y=>ue.forEach(y,w=>{wt(w.userId===l.userId);const D=zl(this.It,w);return GS(e,l.userId,D).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(a=>{const l=[];return r.Z((h,y)=>{const w=new an(h),D=[0,Yi(w)];l.push(t.get(D).next(x=>x?ue.resolve():t.put({targetId:0,path:Yi(w),sequenceNumber:a.highestListenSequenceNumber})))}).next(()=>ue.waitFor(l))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:kS});const r=t.store("collectionParents"),a=new Yy,l=h=>{if(a.add(h)){const y=h.lastSegment(),w=h.popLast();return r.put({collectionId:y,parent:Yi(w)})}};return t.store("remoteDocuments").Z({X:!0},(h,y)=>{const w=new an(h);return l(w.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([h,y,w],D)=>{const x=Qi(y);return l(x.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,a)=>{const l=rg(a),h=FI(this.It,l);return t.put(h)})}Ws(e,t){const r=t.store("remoteDocuments"),a=[];return r.Z((l,h)=>{const y=t.store("remoteDocumentsV14"),w=(D=h,D.document?new je(an.fromString(D.document.name).popFirst(5)):D.noDocument?je.fromSegments(D.noDocument.path):D.unknownDocument?je.fromSegments(D.unknownDocument.path):tt()).path.toArray();var D;const x={prefixPath:w.slice(0,w.length-2),collectionGroup:w[w.length-2],documentId:w[w.length-1],readTime:h.readTime||[0,0],unknownDocument:h.unknownDocument,noDocument:h.noDocument,document:h.document,hasCommittedMutations:!!h.hasCommittedMutations};a.push(y.put(x))}).next(()=>ue.waitFor(a))}zs(e,t){const r=t.store("mutations"),a=wE(this.It),l=new YI(n_.Bs,this.It.re);return r.W().next(h=>{const y=new Map;return h.forEach(w=>{var D;let x=null!==(D=y.get(w.userId))&&void 0!==D?D:Wt();zl(this.It,w).keys().forEach(P=>x=x.add(P)),y.set(w.userId,x)}),ue.forEach(y,(w,D)=>{const x=new Wr(D),P=Zy.oe(this.It,x),z=l.getIndexManager(x),J=df.oe(x,this.It,z,l.referenceDelegate);return new ZI(a,J,P,z).recalculateAndSaveOverlaysForDocumentKeys(new Gl(t,ms.at),w).next()})})}}function JI(n){n.createObjectStore("targetDocuments",{keyPath:xI}).createIndex("documentTargetsIndex",cf,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",dE,{unique:!0}),n.createObjectStore("targetGlobal")}const IE="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class DE{constructor(e,t,r,a,l,h,y,w,D,x,P=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=l,this.window=h,this.document=y,this.Js=D,this.Ys=x,this.Xs=P,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=z=>Promise.resolve(),!DE.C())throw new Te(pe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new EE(this,a),this.ii=t+"main",this.It=new PI(w),this.ri=new co(this.ii,this.Xs,new YS(this.It)),this.Cs=new qS(this.referenceDelegate,this.It),this.remoteDocumentCache=wE(this.It),this.Ns=new VS,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===x&&_r("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Te(pe.FAILED_PRECONDITION,IE);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new ms(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,_e.Z)(function*(a){if(t.started)return e(a)});return function(a){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,_e.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,_e.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>r_(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Ja(e))return ke("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ke("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return og(e).get("owner").next(t=>ue.resolve(this.mi(t)))}gi(e){return r_(e).delete(this.clientId)}yi(){var e=this;return(0,_e.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const a=ui(r,"clientMetadata");return a.W().next(l=>{const h=e.Ii(l,18e5),y=l.filter(w=>-1===h.indexOf(w));return ue.forEach(y,w=>a.delete(w.clientId)).next(()=>y)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?ue.resolve(!0):og(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Te(pe.FAILED_PRECONDITION,IE);return!1}}return!(!this.networkEnabled||!this.inForeground)||r_(e).W().next(r=>void 0===this.Ii(r,5e3).find(a=>{if(this.clientId!==a.clientId){const h=!this.inForeground&&a.inForeground,y=this.networkEnabled===a.networkEnabled;if(!this.networkEnabled&&a.networkEnabled||h&&y)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&ke("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,_e.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Gl(t,ms.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>r_(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return df.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new HS(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return Zy.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){ke("IndexedDbPersistence","Starting transaction:",e);const a="readonly"===t?"readonly":"readwrite",l=15===(h=this.Xs)?hR:14===h?Nt:13===h?LS:12===h?dR:11===h?Gy:void tt();var h;let y;return this.ri.runTransaction(e,a,l,w=>(y=new Gl(w,this.Ss?this.Ss.next():ms.at),"readwrite-primary"===t?this.fi(y).next(D=>!!D||this.di(y)).next(D=>{if(!D)throw _r(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Te(pe.FAILED_PRECONDITION,Up);return r(y)}).next(D=>this.wi(y).next(()=>D)):this.Vi(y).next(()=>r(y)))).then(w=>(y.raiseOnCommittedEvent(),w))}Vi(e){return og(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Te(pe.FAILED_PRECONDITION,IE)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return og(e).put("owner",t)}static C(){return co.C()}_i(e){const t=og(e);return t.get("owner").next(r=>this.mi(r)?(ke("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ue.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(_r(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,cn.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return ke("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return _r("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){_r("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch(e){}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function og(n){return ui(n,"owner")}function r_(n){return ui(n,"clientMetadata")}function TE(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class td{constructor(e,t,r,a){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=a}static Ci(e,t){let r=Wt(),a=Wt();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new td(e,t.fromCache,r,a)}}class AE{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,a){return this.ki(e,t).next(l=>l||this.Oi(e,t,a,r)).next(l=>l||this.Mi(e,t))}ki(e,t){if(sI(t))return ue.resolve(null);let r=Mi(t);return this.indexManager.getIndexType(e,r).next(a=>0===a?null:(null!==t.limit&&1===a&&(t=Gp(t,null,"F"),r=Mi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(l=>{const h=Wt(...l);return this.Ni.getDocuments(e,h).next(y=>this.indexManager.getMinOffset(e,r).next(w=>{const D=this.Fi(t,y);return this.$i(t,D,h,w.readTime)?this.ki(e,Gp(t,null,"F")):this.Bi(e,D,t,w)}))})))}Oi(e,t,r,a){return sI(t)||a.isEqual(ft.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(l=>{const h=this.Fi(t,l);return this.$i(t,h,r,a)?this.Mi(e,t):(j0()<=ec.in.DEBUG&&ke("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),X0(t)),this.Bi(e,h,t,$C(a,-1)))})}Fi(e,t){let r=new ln(Oy(e));return t.forEach((a,l)=>{_c(e,l)&&(r=r.add(l))}),r}$i(e,t,r,a){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const l="F"===e.limitType?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Mi(e,t){return j0()<=ec.in.DEBUG&&ke("QueryEngine","Using full collection scan to execute query:",X0(t)),this.Ni.getDocumentsMatchingQuery(e,t,Ns.min())}Bi(e,t,r,a){return this.Ni.getDocumentsMatchingQuery(e,r,a).next(l=>(t.forEach(h=>{l=l.insert(h.key,h)}),l))}}class XI{constructor(e,t,r,a){this.persistence=e,this.Li=t,this.It=a,this.Ui=new Xn(Vt),this.qi=new $l(l=>Xa(l),Zh),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ZI(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function SE(n,e,t,r){return new XI(n,e,t,r)}function xE(n,e){return i_.apply(this,arguments)}function i_(){return i_=(0,_e.Z)(function*(n,e){const t=We(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let a;return t.mutationQueue.getAllMutationBatches(r).next(l=>(a=l,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(l=>{const h=[],y=[];let w=Wt();for(const D of a){h.push(D.batchId);for(const x of D.mutations)w=w.add(x.key)}for(const D of l){y.push(D.batchId);for(const x of D.mutations)w=w.add(x.key)}return t.localDocuments.getDocuments(r,w).next(D=>({ji:D,removedBatchIds:h,addedBatchIds:y}))})})}),i_.apply(this,arguments)}function eD(n,e){const t=We(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const a=e.batch.keys(),l=t.Gi.newChangeBuffer({trackRemovals:!0});return function(h,y,w,D){const x=w.batch,P=x.keys();let z=ue.resolve();return P.forEach(J=>{z=z.next(()=>D.getEntry(y,J)).next(fe=>{const Le=w.docVersions.get(J);wt(null!==Le),fe.version.compareTo(Le)<0&&(x.applyToRemoteDocument(fe,w),fe.isValidDocument()&&(fe.setReadTime(w.commitVersion),D.addEntry(fe)))})}),z.next(()=>h.mutationQueue.removeMutationBatch(y,x))}(t,r,e,l).next(()=>l.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(h){let y=Wt();for(let w=0;w<h.mutationResults.length;++w)h.mutationResults[w].transformResults.length>0&&(y=y.add(h.batch.mutations[w].key));return y}(e))).next(()=>t.localDocuments.getDocuments(r,a))})}function tD(n){const e=We(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function QS(n,e){const t=We(n),r=e.snapshotVersion;let a=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const h=t.Gi.newChangeBuffer({trackRemovals:!0});a=t.Ui;const y=[];e.targetChanges.forEach((x,P)=>{const z=a.get(P);if(!z)return;y.push(t.Cs.removeMatchingKeys(l,x.removedDocuments,P).next(()=>t.Cs.addMatchingKeys(l,x.addedDocuments,P)));let J=z.withSequenceNumber(l.currentSequenceNumber);var fe,Le,Ve;e.targetMismatches.has(P)?J=J.withResumeToken(kr.EMPTY_BYTE_STRING,ft.min()).withLastLimboFreeSnapshotVersion(ft.min()):x.resumeToken.approximateByteSize()>0&&(J=J.withResumeToken(x.resumeToken,r)),a=a.insert(P,J),Le=J,Ve=x,(0===(fe=z).resumeToken.approximateByteSize()||Le.snapshotVersion.toMicroseconds()-fe.snapshotVersion.toMicroseconds()>=3e8||Ve.addedDocuments.size+Ve.modifiedDocuments.size+Ve.removedDocuments.size>0)&&y.push(t.Cs.updateTargetData(l,J))});let w=ys(),D=Wt();if(e.documentUpdates.forEach(x=>{e.resolvedLimboDocuments.has(x)&&y.push(t.persistence.referenceDelegate.updateLimboDocument(l,x))}),y.push(ME(l,h,e.documentUpdates).next(x=>{w=x.Wi,D=x.zi})),!r.isEqual(ft.min())){const x=t.Cs.getLastRemoteSnapshotVersion(l).next(P=>t.Cs.setTargetsMetadata(l,l.currentSequenceNumber,r));y.push(x)}return ue.waitFor(y).next(()=>h.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,w,D)).next(()=>w)}).then(l=>(t.Ui=a,l))}function ME(n,e,t){let r=Wt(),a=Wt();return t.forEach(l=>r=r.add(l)),e.getEntries(n,r).next(l=>{let h=ys();return t.forEach((y,w)=>{const D=l.get(y);w.isFoundDocument()!==D.isFoundDocument()&&(a=a.add(y)),w.isNoDocument()&&w.version.isEqual(ft.min())?(e.removeEntry(y,w.readTime),h=h.insert(y,w)):!D.isValidDocument()||w.version.compareTo(D.version)>0||0===w.version.compareTo(D.version)&&D.hasPendingWrites?(e.addEntry(w),h=h.insert(y,w)):ke("LocalStore","Ignoring outdated watch update for ",y,". Current version:",D.version," Watch version:",w.version)}),{Wi:h,zi:a}})}function JS(n,e){const t=We(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function gf(n,e){const t=We(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let a;return t.Cs.getTargetData(r,e).next(l=>l?(a=l,ue.resolve(a)):t.Cs.allocateTargetId(r).next(h=>(a=new ql(e,h,0,r.currentSequenceNumber),t.Cs.addTargetData(r,a).next(()=>a))))}).then(r=>{const a=t.Ui.get(r.targetId);return(null===a||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function mf(n,e,t){return nd.apply(this,arguments)}function nd(){return nd=(0,_e.Z)(function*(n,e,t){const r=We(n),a=r.Ui.get(e),l=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",l,h=>r.persistence.referenceDelegate.removeTarget(h,a)))}catch(h){if(!Ja(h))throw h;ke("LocalStore",`Failed to update sequence numbers for target ${e}: ${h}`)}r.Ui=r.Ui.remove(e),r.qi.delete(a.target)}),nd.apply(this,arguments)}function Tc(n,e,t){const r=We(n);let a=ft.min(),l=Wt();return r.persistence.runTransaction("Execute query","readonly",h=>function(y,w,D){const x=We(y),P=x.qi.get(D);return void 0!==P?ue.resolve(x.Ui.get(P)):x.Cs.getTargetData(w,D)}(r,h,Mi(e)).next(y=>{if(y)return a=y.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(h,y.targetId).next(w=>{l=w})}).next(()=>r.Li.getDocumentsMatchingQuery(h,e,t?a:ft.min(),t?l:Wt())).next(y=>($o(r,DS(e),y),{documents:y,Hi:l})))}function nD(n,e){const t=We(n),r=We(t.Cs),a=t.Ui.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",l=>r.se(l,e).next(h=>h?h.target:null))}function s_(n,e){const t=We(n),r=t.Ki.get(e)||ft.min();return t.persistence.runTransaction("Get new document changes","readonly",a=>t.Gi.getAllFromCollectionGroup(a,e,$C(r,-1),Number.MAX_SAFE_INTEGER)).then(a=>($o(t,e,a),a))}function $o(n,e,t){let r=n.Ki.get(e)||ft.min();t.forEach((a,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)}),n.Ki.set(e,r)}function yf(){return yf=(0,_e.Z)(function*(n,e,t,r){const a=We(n);let l=Wt(),h=ys();for(const D of t){const x=e.Ji(D.metadata.name);D.document&&(l=l.add(x));const P=e.Yi(D);P.setReadTime(e.Xi(D.metadata.readTime)),h=h.insert(x,P)}const y=a.Gi.newChangeBuffer({trackRemovals:!0}),w=yield gf(a,(D=r,Mi(Yh(an.fromString(`__bundle__/docs/${D}`)))));var D;return a.persistence.runTransaction("Apply bundle documents","readwrite",D=>ME(D,y,h).next(x=>(y.apply(D),x)).next(x=>a.Cs.removeMatchingKeysForTargetId(D,w.targetId).next(()=>a.Cs.addMatchingKeys(D,l,w.targetId)).next(()=>a.localDocuments.getLocalViewOfDocuments(D,x.Wi,x.zi)).next(()=>x.Wi)))}),yf.apply(this,arguments)}function ex(n,e){return RE.apply(this,arguments)}function RE(){return RE=(0,_e.Z)(function*(n,e,t=Wt()){const r=yield gf(n,Mi(gE(e.bundledQuery))),a=We(n);return a.persistence.runTransaction("Save named query","readwrite",l=>{const h=Zr(e.readTime);if(r.snapshotVersion.compareTo(h)>=0)return a.Ns.saveNamedQuery(l,e);const y=r.withResumeToken(kr.EMPTY_BYTE_STRING,h);return a.Ui=a.Ui.insert(y.targetId,y),a.Cs.updateTargetData(l,y).next(()=>a.Cs.removeMatchingKeysForTargetId(l,r.targetId)).next(()=>a.Cs.addMatchingKeys(l,t,r.targetId)).next(()=>a.Ns.saveNamedQuery(l,e))})}),RE.apply(this,arguments)}function tx(n,e){return`firestore_clients_${n}_${e}`}function o_(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function ag(n,e){return`firestore_targets_${n}_${e}`}class ug{constructor(e,t,r,a){this.user=e,this.batchId=t,this.state=r,this.error=a}static Zi(e,t,r){const a=JSON.parse(r);let l,h="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return h&&a.error&&(h="string"==typeof a.error.message&&"string"==typeof a.error.code,h&&(l=new Te(a.error.code,a.error.message))),h?new ug(e,t,a.state,l):(_r("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class rd{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let a,l="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return l&&r.error&&(l="string"==typeof r.error.message&&"string"==typeof r.error.code,l&&(a=new Te(r.error.code,r.error.message))),l?new rd(e,r.state,a):(_r("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class _f{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let a="object"==typeof r&&r.activeTargetIds instanceof Array,l=Ly();for(let h=0;a&&h<r.activeTargetIds.length;++h)a=ZC(r.activeTargetIds[h]),l=l.add(r.activeTargetIds[h]);return a?new _f(e,l):(_r("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class OE{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new OE(t.clientId,t.onlineState):(_r("SharedClientState",`Failed to parse online state: ${e}`),null)}}class NE{constructor(){this.activeTargetIds=Ly()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class PE{constructor(e,t,r,a,l){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Xn(Vt),this.started=!1,this.cr=[];const h=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.ar=tx(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new NE),this.lr=new RegExp(`^firestore_clients_${h}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${h}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${h}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(y){return`firestore_bundle_loaded_v2_${y}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,_e.Z)(function*(){const t=yield e.syncEngine.vi();for(const a of t){if(a===e.sr)continue;const l=e.getItem(tx(e.persistenceKey,a));if(l){const h=_f.Zi(a,l);h&&(e.ur=e.ur.insert(h.clientId,h))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const a=e.yr(r);a&&e.pr(a)}for(const a of e.cr)e.rr(a);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,a)=>{a.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(ag(this.persistenceKey,e));if(r){const a=rd.Zi(e,r);a&&(t=a.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(ag(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(a=>{this.Er(a)}),this.currentUser=e,r.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ke("SharedClientState","READ",e,t),t}setItem(e,t){ke("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ke("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(ke("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void _r("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,_e.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const a=t.vr(r.key);return t.Vr(a,null)}{const a=t.Sr(r.key,r.newValue);if(a)return t.Vr(a.clientId,a)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const a=t.Dr(r.key,r.newValue);if(a)return t.Cr(a)}}else if(t._r.test(r.key)){if(null!==r.newValue){const a=t.Nr(r.key,r.newValue);if(a)return t.kr(a)}}else if(r.key===t.wr){if(null!==r.newValue){const a=t.yr(r.newValue);if(a)return t.pr(a)}}else if(r.key===t.hr){const a=function(l){let h=ms.at;if(null!=l)try{const y=JSON.parse(l);wt("number"==typeof y),h=y}catch(y){_r("SharedClientState","Failed to read sequence number from WebStorage",y)}return h}(r.newValue);a!==ms.at&&t.sequenceNumberHandler(a)}else if(r.key===t.mr){const a=t.Or(r.newValue);yield Promise.all(a.map(l=>t.syncEngine.Mr(l)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const a=new ug(this.currentUser,e,t,r),l=o_(this.persistenceKey,this.currentUser,e);this.setItem(l,a.tr())}Er(e){const t=o_(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const a=ag(this.persistenceKey,e),l=new rd(e,t,r);this.setItem(a,l.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return _f.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),a=Number(r[1]);return ug.Zi(new Wr(void 0!==r[2]?r[2]:null),a,t)}Nr(e,t){const r=this._r.exec(e),a=Number(r[1]);return rd.Zi(a,t)}yr(e){return OE.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,_e.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);ke("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),a=this.Ir(this.ur),l=this.Ir(r),h=[],y=[];return l.forEach(w=>{a.has(w)||h.push(w)}),a.forEach(w=>{l.has(w)||y.push(w)}),this.syncEngine.Br(h,y).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=Ly();return e.forEach((r,a)=>{t=t.unionWith(a.activeTargetIds)}),t}}class rD{constructor(){this.Lr=new NE,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new NE,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class iD{qr(e){}shutdown(){}}class a_{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){ke("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){ke("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const sD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class nx{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class oD extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,a,l){const h=this.ho(e,t);ke("RestConnection","Sending: ",h,r);const y={};return this.lo(y,a,l),this.fo(e,h,y,r).then(w=>(ke("RestConnection","Received: ",w),w),w=>{throw Ml("RestConnection",`${e} failed with error: `,w,"url: ",h,"request:",r),w})}_o(e,t,r,a,l,h){return this.ao(e,t,r,a,l)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+xl,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,l)=>e[l]=a),r&&r.headers.forEach((a,l)=>e[l]=a)}ho(e,t){return`${this.oo}/v1/${t}:${sD[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,a){return new Promise((l,h)=>{const y=new FC;y.setWithCredentials(!0),y.listenOnce(my.COMPLETE,()=>{try{switch(y.getLastErrorCode()){case Pp.NO_ERROR:const D=y.getResponseJson();ke("Connection","XHR received:",JSON.stringify(D)),l(D);break;case Pp.TIMEOUT:ke("Connection",'RPC "'+e+'" timed out'),h(new Te(pe.DEADLINE_EXCEEDED,"Request time out"));break;case Pp.HTTP_ERROR:const x=y.getStatus();if(ke("Connection",'RPC "'+e+'" failed with status:',x,"response text:",y.getResponseText()),x>0){const P=y.getResponseJson().error;if(P&&P.status&&P.message){const z=function(J){const fe=J.toLowerCase().replace(/_/g,"-");return Object.values(pe).indexOf(fe)>=0?fe:pe.UNKNOWN}(P.status);h(new Te(z,P.message))}else h(new Te(pe.UNKNOWN,"Server responded with status "+y.getStatus()))}else h(new Te(pe.UNAVAILABLE,"Connection failed."));break;default:tt()}}finally{ke("Connection",'RPC "'+e+'" completed.')}});const w=JSON.stringify(a);y.send(t,"POST",w,r,15)})}wo(e,t,r){const a=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=OC(),h=NC(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(y.xmlHttpFactory=new kC({})),this.lo(y.initMessageHeaders,t,r),y.encodeInitMessageHeaders=!0;const w=a.join("");ke("Connection","Creating WebChannel: "+w,y);const D=l.createWebChannel(w,y);let x=!1,P=!1;const z=new nx({Hr:fe=>{P?ke("Connection","Not sending because WebChannel is closed:",fe):(x||(ke("Connection","Opening WebChannel transport."),D.open(),x=!0),ke("Connection","WebChannel sending:",fe),D.send(fe))},Jr:()=>D.close()}),J=(fe,Le,Ve)=>{fe.listen(Le,Pt=>{try{Ve(Pt)}catch($t){setTimeout(()=>{throw $t},0)}})};return J(D,kp.EventType.OPEN,()=>{P||ke("Connection","WebChannel transport opened.")}),J(D,kp.EventType.CLOSE,()=>{P||(P=!0,ke("Connection","WebChannel transport closed"),z.io())}),J(D,kp.EventType.ERROR,fe=>{P||(P=!0,Ml("Connection","WebChannel transport errored:",fe),z.io(new Te(pe.UNAVAILABLE,"The operation could not be completed")))}),J(D,kp.EventType.MESSAGE,fe=>{var Le;if(!P){const Ve=fe.data[0];wt(!!Ve);const Pt=Ve,$t=Pt.error||(null===(Le=Pt[0])||void 0===Le?void 0:Le.error);if($t){ke("Connection","WebChannel received error:",$t);const xt=$t.status;let kt=function(Jt){const vi=tr[Jt];if(void 0!==vi)return mI(vi)}(xt),Ht=$t.message;void 0===kt&&(kt=pe.INTERNAL,Ht="Unknown error status: "+xt+" with message "+$t.message),P=!0,z.io(new Te(kt,Ht)),D.close()}else ke("Connection","WebChannel received:",Ve),z.ro(Ve)}}),J(h,PC.STAT_EVENT,fe=>{fe.stat===U0.PROXY?ke("Connection","Detected buffering proxy"):fe.stat===U0.NOPROXY&&ke("Connection","Detected no buffering proxy")}),setTimeout(()=>{z.so()},0),z}}function kE(){return"undefined"!=typeof window?window:null}function u_(){return"undefined"!=typeof document?document:null}function vf(n){return new wI(n,!0)}class c_{constructor(e,t,r=1e3,a=1.5,l=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=a,this.po=l,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),a=Math.max(0,t-r);a>0&&ke("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,a,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class aD{constructor(e,t,r,a,l,h,y,w){this.Hs=e,this.vo=r,this.Vo=a,this.So=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=y,this.listener=w,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new c_(e,t)}ko(){return 1===this.state||5===this.state||this.Oo()}Oo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Mo()}stop(){var e=this;return(0,_e.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Oo()&&null===this.Co&&(this.Co=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,_e.Z)(function*(){if(e.Oo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var r=this;return(0,_e.Z)(function*(){r.Uo(),r.qo(),r.No.cancel(),r.Do++,4!==e?r.No.reset():t&&t.code===pe.RESOURCE_EXHAUSTED?(_r(t.toString()),_r("Using maximum backoff delay to prevent overloading the backend."),r.No.Ao()):t&&t.code===pe.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Ko(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,a])=>{this.Do===t&&this.Qo(r,a)},r=>{e(()=>{const a=new Te(pe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.jo(a)})})}Qo(e,t){const r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.xo=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.Oo()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(a=>{r(()=>this.jo(a))}),this.stream.onMessage(a=>{r(()=>this.onMessage(a))})}Mo(){var e=this;this.state=5,this.No.Ro((0,_e.Z)(function*(){e.state=0,e.start()}))}jo(e){return ke("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Hs.enqueueAndForget(()=>this.Do===e?t():(ke("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class uD extends aD{constructor(e,t,r,a,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,a,h),this.It=l}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(w=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:tt(),a=e.targetChange.targetIds||[],l=function(w,D){return w.gt?(wt(void 0===D||"string"==typeof D),kr.fromBase64String(D||"")):(wt(void 0===D||D instanceof Uint8Array),kr.fromUint8Array(D||new Uint8Array))}(n,e.targetChange.resumeToken),h=e.targetChange.cause,y=h&&function(w){const D=void 0===w.code?pe.UNKNOWN:mI(w.code);return new Te(D,w.message||"")}(h);t=new oE(r,a,l,y||null)}else if("documentChange"in e){const r=e.documentChange,a=Ca(n,r.document.name),l=Zr(r.document.updateTime),h=new ai({mapValue:{fields:r.document.fields}}),y=On.newFoundDocument(a,l,h);t=new Hl(r.targetIds||[],r.removedTargetIds||[],y.key,y)}else if("documentDelete"in e){const r=e.documentDelete,a=Ca(n,r.document),l=r.readTime?Zr(r.readTime):ft.min(),h=On.newNoDocument(a,l);t=new Hl([],r.removedTargetIds||[],h.key,h)}else if("documentRemove"in e){const r=e.documentRemove,a=Ca(n,r.document);t=new Hl([],r.removedTargetIds||[],a,null)}else{if(!("filter"in e))return tt();{const r=e.filter,l=new Fy(r.count||0);t=new vc(r.targetId,l)}}var w;return t}(this.It,e),r=function(a){if(!("targetChange"in a))return ft.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?ft.min():l.readTime?Zr(l.readTime):ft.min()}(e);return this.listener.zo(t,r)}Ho(e){const t={};t.database=Ec(this.It),t.addTarget=function(a,l){let h;const y=l.target;return h=Ty(y)?{documents:ks(a,y)}:{query:tg(a,y)},h.targetId=l.targetId,l.resumeToken.approximateByteSize()>0?h.resumeToken=Vy(a,l.resumeToken):l.snapshotVersion.compareTo(ft.min())>0&&(h.readTime=tf(a,l.snapshotVersion.toTimestamp())),h}(this.It,e);const r=function(n,e){const t=function(r,a){switch(a){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return tt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Lo(t)}Jo(e){const t={};t.database=Ec(this.It),t.removeTarget=e,this.Lo(t)}}class rx extends aD{constructor(e,t,r,a,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,a,h),this.It=l,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(wt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function(n,e){return n&&n.length>0?(wt(void 0!==e),n.map(t=>function(r,a){let l=Zr(r.updateTime?r.updateTime:a);return l.isEqual(ft.min())&&(l=Zr(a)),new nE(l,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Zr(e.commitTime);return this.listener.tu(r,t)}return wt(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=Ec(this.It),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>tu(this.It,r))};this.Lo(t)}}class mR extends class{}{constructor(e,t,r,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=r,this.It=a,this.su=!1}iu(){if(this.su)throw new Te(pe.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.So.ao(e,t,r,a,l)).catch(a=>{throw"FirebaseError"===a.name?(a.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Te(pe.UNKNOWN,a.toString())})}_o(e,t,r,a){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,h])=>this.So._o(e,t,r,l,h,a)).catch(l=>{throw"FirebaseError"===l.name?(l.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Te(pe.UNKNOWN,l.toString())})}terminate(){this.su=!0}}class ix{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}cu(){0===this.ru&&(this.au("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.au("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.au("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.au("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.au(e)}au(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(_r(t),this.uu=!1):ke("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class sx{constructor(e,t,r,a,l){var h=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=l,this.gu.qr(y=>{r.enqueueAndForget((0,_e.Z)(function*(){var w;Ia(h)&&(ke("RemoteStore","Restarting streams for network reachability change."),yield(w=(0,_e.Z)(function*(D){const x=We(D);x.wu.add(4),yield Ef(x),x.yu.set("Unknown"),x.wu.delete(4),yield l_(x)}),function(D){return w.apply(this,arguments)})(h))}))}),this.yu=new ix(r,a)}}function l_(n){return id.apply(this,arguments)}function id(){return id=(0,_e.Z)(function*(n){if(Ia(n))for(const e of n.mu)yield e(!0)}),id.apply(this,arguments)}function Ef(n){return cg.apply(this,arguments)}function cg(){return cg=(0,_e.Z)(function*(n){for(const e of n.mu)yield e(!1)}),cg.apply(this,arguments)}function d_(n,e){const t=We(n);t._u.has(e.targetId)||(t._u.set(e.targetId,e),h_(t)?lg(t):Cf(t).Oo()&&FE(t,e))}function bf(n,e){const t=We(n),r=Cf(t);t._u.delete(e),r.Oo()&&cD(t,e),0===t._u.size&&(r.Oo()?r.$o():Ia(t)&&t.yu.set("Unknown"))}function FE(n,e){n.pu.Mt(e.targetId),Cf(n).Ho(e)}function cD(n,e){n.pu.Mt(e),Cf(n).Jo(e)}function lg(n){n.pu=new uR({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n._u.get(e)||null}),Cf(n).start(),n.yu.cu()}function h_(n){return Ia(n)&&!Cf(n).ko()&&n._u.size>0}function Ia(n){return 0===We(n).wu.size}function dg(n){n.pu=void 0}function LE(n){return lD.apply(this,arguments)}function lD(){return lD=(0,_e.Z)(function*(n){n._u.forEach((e,t)=>{FE(n,e)})}),lD.apply(this,arguments)}function dD(n,e){return VE.apply(this,arguments)}function VE(){return VE=(0,_e.Z)(function*(n,e){dg(n),h_(n)?(n.yu.lu(e),lg(n)):n.yu.set("Unknown")}),VE.apply(this,arguments)}function hD(n,e,t){return wf.apply(this,arguments)}function wf(){return wf=(0,_e.Z)(function*(n,e,t){if(n.yu.set("Online"),e instanceof oE&&2===e.state&&e.cause)try{yield(r=(0,_e.Z)(function*(a,l){const h=l.cause;for(const y of l.targetIds)a._u.has(y)&&(yield a.remoteSyncer.rejectListen(y,h),a._u.delete(y),a.pu.removeTarget(y))}),function(a,l){return r.apply(this,arguments)})(n,e)}catch(r){ke("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield hg(n,r)}else if(e instanceof Hl?n.pu.Gt(e):e instanceof vc?n.pu.Yt(e):n.pu.Wt(e),!t.isEqual(ft.min()))try{const r=yield tD(n.localStore);t.compareTo(r)>=0&&(yield function(a,l){const h=a.pu.te(l);return h.targetChanges.forEach((y,w)=>{if(y.resumeToken.approximateByteSize()>0){const D=a._u.get(w);D&&a._u.set(w,D.withResumeToken(y.resumeToken,l))}}),h.targetMismatches.forEach(y=>{const w=a._u.get(y);if(!w)return;a._u.set(y,w.withResumeToken(kr.EMPTY_BYTE_STRING,w.snapshotVersion)),cD(a,y);const D=new ql(w.target,y,1,w.sequenceNumber);FE(a,D)}),a.remoteSyncer.applyRemoteEvent(h)}(n,t))}catch(r){ke("RemoteStore","Failed to raise snapshot:",r),yield hg(n,r)}var r}),wf.apply(this,arguments)}function hg(n,e,t){return UE.apply(this,arguments)}function UE(){return UE=(0,_e.Z)(function*(n,e,t){if(!Ja(e))throw e;n.wu.add(1),yield Ef(n),n.yu.set("Offline"),t||(t=()=>tD(n.localStore)),n.asyncQueue.enqueueRetryable((0,_e.Z)(function*(){ke("RemoteStore","Retrying IndexedDB access"),yield t(),n.wu.delete(1),yield l_(n)}))}),UE.apply(this,arguments)}function f_(n,e){return e().catch(t=>hg(n,t,e))}function Sc(n){return BE.apply(this,arguments)}function BE(){return BE=(0,_e.Z)(function*(n){const e=We(n),t=xc(e);let r=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;ox(e);)try{const a=yield JS(e.localStore,r);if(null===a){0===e.du.length&&t.$o();break}r=a.batchId,fD(e,a)}catch(a){yield hg(e,a)}jE(e)&&$E(e)}),BE.apply(this,arguments)}function ox(n){return Ia(n)&&n.du.length<10}function fD(n,e){n.du.push(e);const t=xc(n);t.Oo()&&t.Xo&&t.Zo(e.mutations)}function jE(n){return Ia(n)&&!xc(n).ko()&&n.du.length>0}function $E(n){xc(n).start()}function ax(n){return p_.apply(this,arguments)}function p_(){return p_=(0,_e.Z)(function*(n){xc(n).nu()}),p_.apply(this,arguments)}function pD(n){return HE.apply(this,arguments)}function HE(){return HE=(0,_e.Z)(function*(n){const e=xc(n);for(const t of n.du)e.Zo(t.mutations)}),HE.apply(this,arguments)}function ux(n,e,t){return g_.apply(this,arguments)}function g_(){return g_=(0,_e.Z)(function*(n,e,t){const r=n.du.shift(),a=pE.from(r,e,t);yield f_(n,()=>n.remoteSyncer.applySuccessfulWrite(a)),yield Sc(n)}),g_.apply(this,arguments)}function cx(n,e){return m_.apply(this,arguments)}function m_(){return m_=(0,_e.Z)(function*(n,e){var t;e&&xc(n).Xo&&(yield(t=(0,_e.Z)(function*(r,a){if(gI(l=a.code)&&l!==pe.ABORTED){const h=r.du.shift();xc(r).Fo(),yield f_(r,()=>r.remoteSyncer.rejectFailedWrite(h.batchId,a)),yield Sc(r)}var l}),function(r,a){return t.apply(this,arguments)})(n,e)),jE(n)&&$E(n)}),m_.apply(this,arguments)}function GE(n,e){return y_.apply(this,arguments)}function y_(){return y_=(0,_e.Z)(function*(n,e){const t=We(n);t.asyncQueue.verifyOperationInProgress(),ke("RemoteStore","RemoteStore received new credentials");const r=Ia(t);t.wu.add(3),yield Ef(t),r&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield l_(t)}),y_.apply(this,arguments)}function __(n,e){return qE.apply(this,arguments)}function qE(){return qE=(0,_e.Z)(function*(n,e){const t=We(n);e?(t.wu.delete(2),yield l_(t)):e||(t.wu.add(2),yield Ef(t),t.yu.set("Unknown"))}),qE.apply(this,arguments)}function Cf(n){return n.Iu||(n.Iu=function(e,t,r){const a=We(e);return a.iu(),new uD(t,a.So,a.authCredentials,a.appCheckCredentials,a.It,r)}(n.datastore,n.asyncQueue,{Yr:LE.bind(null,n),Zr:dD.bind(null,n),zo:hD.bind(null,n)}),n.mu.push(function(){var e=(0,_e.Z)(function*(t){t?(n.Iu.Fo(),h_(n)?lg(n):n.yu.set("Unknown")):(yield n.Iu.stop(),dg(n))});return function(t){return e.apply(this,arguments)}}())),n.Iu}function xc(n){return n.Tu||(n.Tu=function(e,t,r){const a=We(e);return a.iu(),new rx(t,a.So,a.authCredentials,a.appCheckCredentials,a.It,r)}(n.datastore,n.asyncQueue,{Yr:ax.bind(null,n),Zr:cx.bind(null,n),eu:pD.bind(null,n),tu:ux.bind(null,n)}),n.mu.push(function(){var e=(0,_e.Z)(function*(t){t?(n.Tu.Fo(),yield Sc(n)):(yield n.Tu.stop(),n.du.length>0&&(ke("RemoteStore",`Stopping write stream with ${n.du.length} pending writes`),n.du=[]))});return function(t){return e.apply(this,arguments)}}())),n.Tu}class v_{constructor(e,t,r,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=a,this.removalCallback=l,this.deferred=new zr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}static createAndSchedule(e,t,r,a,l){const h=Date.now()+r,y=new v_(e,t,h,a,l);return y.start(r),y}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Te(pe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fg(n,e){if(_r("AsyncQueue",`${e}: ${n}`),Ja(n))return new Te(pe.UNAVAILABLE,`${e}: ${n}`);throw n}class pg{constructor(e){this.comparator=e?(t,r)=>e(t,r)||je.comparator(t.key,r.key):(t,r)=>je.comparator(t.key,r.key),this.keyedMap=Zp(),this.sortedSet=new Xn(this.comparator)}static emptySet(e){return new pg(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof pg)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new pg;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class lx{constructor(){this.Eu=new Xn(je.comparator)}track(e){const t=e.doc.key,r=this.Eu.get(t);r?0!==e.type&&3===r.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==r.type?this.Eu=this.Eu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Eu=this.Eu.remove(t):1===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):tt():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,r)=>{e.push(r)}),e}}class gg{constructor(e,t,r,a,l,h,y,w,D){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=y,this.excludesMetadataChanges=w,this.hasCachedResults=D}static fromInitialDocuments(e,t,r,a,l){const h=[];return t.forEach(y=>{h.push({type:0,doc:y})}),new gg(e,t,pg.emptySet(t),h,r,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Jh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==r[a].type||!t[a].doc.isEqual(r[a].doc))return!1;return!0}}class yR{constructor(){this.Ru=void 0,this.listeners=[]}}class _R{constructor(){this.queries=new $l(e=>IS(e),Jh),this.onlineState="Unknown",this.bu=new Set}}function gD(n,e){return mD.apply(this,arguments)}function mD(){return mD=(0,_e.Z)(function*(n,e){const t=We(n),r=e.query;let a=!1,l=t.queries.get(r);if(l||(a=!0,l=new yR),a)try{l.Ru=yield t.onListen(r)}catch(h){const y=fg(h,`Initialization of query '${X0(e.query)}' failed`);return void e.onError(y)}t.queries.set(r,l),l.listeners.push(e),e.Pu(t.onlineState),l.Ru&&e.vu(l.Ru)&&vD(t)}),mD.apply(this,arguments)}function yD(n,e){return _D.apply(this,arguments)}function _D(){return _D=(0,_e.Z)(function*(n,e){const t=We(n),r=e.query;let a=!1;const l=t.queries.get(r);if(l){const h=l.listeners.indexOf(e);h>=0&&(l.listeners.splice(h,1),a=0===l.listeners.length)}if(a)return t.queries.delete(r),t.onUnlisten(r)}),_D.apply(this,arguments)}function vR(n,e){const t=We(n);let r=!1;for(const a of e){const h=t.queries.get(a.query);if(h){for(const y of h.listeners)y.vu(a)&&(r=!0);h.Ru=a}}r&&vD(t)}function ER(n,e,t){const r=We(n),a=r.queries.get(e);if(a)for(const l of a.listeners)l.onError(t);r.queries.delete(e)}function vD(n){n.bu.forEach(e=>{e.next()})}class ED{constructor(e,t,r){this.query=e,this.Vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)3!==a.type&&r.push(a);e=new gg(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Su?this.Cu(e)&&(this.Vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.Vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||(!this.options.ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=gg.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Su=!0,this.Vu.next(e)}}class bR{constructor(e,t){this.payload=e,this.byteLength=t}Ou(){return"metadata"in this.payload}}class dx{constructor(e){this.It=e}Ji(e){return Ca(this.It,e)}Yi(e){return e.metadata.exists?gn(this.It,e.document,!1):On.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Zr(e)}}class wR{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=bD(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=an.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new dx(this.It);for(const a of e)if(a.metadata.queries){const l=r.Ji(a.metadata.name);for(const h of a.metadata.queries){const y=(t.get(h)||Wt()).add(l);t.set(h,y)}}return t}complete(){var e=this;return(0,_e.Z)(function*(){const t=yield function(n,e,t,r){return yf.apply(this,arguments)}(e.localStore,new dx(e.It),e.documents,e.Mu.id),r=e.$u(e.documents);for(const a of e.queries)yield ex(e.localStore,a,r.get(a.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function bD(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class wD{constructor(e){this.key=e}}class CD{constructor(e){this.key=e}}class hx{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Wt(),this.mutatedKeys=Wt(),this.Gu=Oy(e),this.Qu=new pg(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new lx,a=t?t.Qu:this.Qu;let l=t?t.mutatedKeys:this.mutatedKeys,h=a,y=!1;const w="F"===this.query.limitType&&a.size===this.query.limit?a.last():null,D="L"===this.query.limitType&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((x,P)=>{const z=a.get(x),J=_c(this.query,P)?P:null,fe=!!z&&this.mutatedKeys.has(z.key),Le=!!J&&(J.hasLocalMutations||this.mutatedKeys.has(J.key)&&J.hasCommittedMutations);let Ve=!1;z&&J?z.data.isEqual(J.data)?fe!==Le&&(r.track({type:3,doc:J}),Ve=!0):this.Hu(z,J)||(r.track({type:2,doc:J}),Ve=!0,(w&&this.Gu(J,w)>0||D&&this.Gu(J,D)<0)&&(y=!0)):!z&&J?(r.track({type:0,doc:J}),Ve=!0):z&&!J&&(r.track({type:1,doc:z}),Ve=!0,(w||D)&&(y=!0)),Ve&&(J?(h=h.add(J),l=Le?l.add(x):l.delete(x)):(h=h.delete(x),l=l.delete(x)))}),null!==this.query.limit)for(;h.size>this.query.limit;){const x="F"===this.query.limitType?h.last():h.first();h=h.delete(x.key),l=l.delete(x.key),r.track({type:1,doc:x})}return{Qu:h,zu:r,$i:y,mutatedKeys:l}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const a=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const l=e.zu.Au();l.sort((D,x)=>function(P,z){const J=fe=>{switch(fe){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return tt()}};return J(P)-J(z)}(D.type,x.type)||this.Gu(D.doc,x.doc)),this.Ju(r);const h=t?this.Yu():[],y=0===this.Ku.size&&this.current?1:0,w=y!==this.qu;return this.qu=y,0!==l.length||w?{snapshot:new gg(this.query,e.Qu,a,l,e.mutatedKeys,0===y,w,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:h}:{Xu:h}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new lx,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Wt(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new CD(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new wD(r))}),t}tc(e){this.Uu=e.Hi,this.Ku=Wt();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return gg.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class CR{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class IR{constructor(e){this.key=e,this.nc=!1}}class fx{constructor(e,t,r,a,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.sc={},this.ic=new $l(y=>IS(y),Jh),this.rc=new Map,this.oc=new Set,this.uc=new Xn(je.comparator),this.cc=new Map,this.ac=new t_,this.hc={},this.lc=new Map,this.fc=Ql.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function px(n,e){return WE.apply(this,arguments)}function WE(){return WE=(0,_e.Z)(function*(n,e){const t=XE(n);let r,a;const l=t.ic.get(e);if(l)r=l.targetId,t.sharedClientState.addLocalQueryTarget(r),a=l.view.ec();else{const h=yield gf(t.localStore,Mi(e));t.isPrimaryClient&&d_(t.remoteStore,h);const y=t.sharedClientState.addLocalQueryTarget(h.targetId);r=h.targetId,a=yield ID(t,e,r,"current"===y,h.resumeToken)}return a}),WE.apply(this,arguments)}function ID(n,e,t,r,a){return DD.apply(this,arguments)}function DD(){return DD=(0,_e.Z)(function*(n,e,t,r,a){n._c=(P,z,J)=>{return(fe=(0,_e.Z)(function*(Le,Ve,Pt,$t){let xt=Ve.view.Wu(Pt);xt.$i&&(xt=yield Tc(Le.localStore,Ve.query,!1).then(({documents:Jt})=>Ve.view.Wu(Jt,xt)));const kt=$t&&$t.targetChanges.get(Ve.targetId),Ht=Ve.view.applyChanges(xt,Le.isPrimaryClient,kt);return ND(Le,Ve.targetId,Ht.Xu),Ht.snapshot}),function(Le,Ve,Pt,$t){return fe.apply(this,arguments)})(n,P,z,J);var fe};const l=yield Tc(n.localStore,e,!0),h=new hx(e,l.Hi),y=h.Wu(l.documents),w=Jp.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,a),D=h.applyChanges(y,n.isPrimaryClient,w);ND(n,t,D.Xu);const x=new CR(e,t,h);return n.ic.set(e,x),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),D.snapshot}),DD.apply(this,arguments)}function DR(n,e){return TD.apply(this,arguments)}function TD(){return TD=(0,_e.Z)(function*(n,e){const t=We(n),r=t.ic.get(e),a=t.rc.get(r.targetId);if(a.length>1)return t.rc.set(r.targetId,a.filter(l=>!Jh(l,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield mf(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),bf(t.remoteStore,r.targetId),od(t,r.targetId)}).catch(Ol))):(od(t,r.targetId),yield mf(t.localStore,r.targetId,!0))}),TD.apply(this,arguments)}function AD(){return AD=(0,_e.Z)(function*(n,e,t){const r=Xi(n);try{const a=yield function(l,h){const y=We(l),w=Ln.now(),D=h.reduce((z,J)=>z.add(J.key),Wt());let x,P;return y.persistence.runTransaction("Locally write mutations","readwrite",z=>{let J=ys(),fe=Wt();return y.Gi.getEntries(z,D).next(Le=>{J=Le,J.forEach((Ve,Pt)=>{Pt.isValidDocument()||(fe=fe.add(Ve))})}).next(()=>y.localDocuments.getOverlayedDocuments(z,J)).next(Le=>{x=Le;const Ve=[];for(const Pt of h){const $t=fI(Pt,x.get(Pt.key).overlayedDocument);null!=$t&&Ve.push(new eu(Pt.key,$t,Y0($t.value.mapValue),Vn.exists(!0)))}return y.mutationQueue.addMutationBatch(z,w,Ve,h)}).next(Le=>{P=Le;const Ve=Le.applyToLocalDocumentSet(x,fe);return y.documentOverlayCache.saveOverlays(z,Le.batchId,Ve)})}).then(()=>({batchId:P.batchId,changes:_I(x)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(a.batchId),function(l,h,y){let w=l.hc[l.currentUser.toKey()];w||(w=new Xn(Vt)),w=w.insert(h,y),l.hc[l.currentUser.toKey()]=w}(r,a.batchId,t),yield Mc(r,a.changes),yield Sc(r.remoteStore)}catch(a){const l=fg(a,"Failed to persist write");t.reject(l)}}),AD.apply(this,arguments)}function SD(n,e){return mg.apply(this,arguments)}function mg(){return mg=(0,_e.Z)(function*(n,e){const t=We(n);try{const r=yield QS(t.localStore,e);e.targetChanges.forEach((a,l)=>{const h=t.cc.get(l);h&&(wt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?h.nc=!0:a.modifiedDocuments.size>0?wt(h.nc):a.removedDocuments.size>0&&(wt(h.nc),h.nc=!1))}),yield Mc(t,r,e)}catch(r){yield Ol(r)}}),mg.apply(this,arguments)}function sd(n,e,t){const r=We(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const a=[];r.ic.forEach((l,h)=>{const y=h.view.Pu(e);y.snapshot&&a.push(y.snapshot)}),function(l,h){const y=We(l);y.onlineState=h;let w=!1;y.queries.forEach((D,x)=>{for(const P of x.listeners)P.Pu(h)&&(w=!0)}),w&&vD(y)}(r.eventManager,e),a.length&&r.sc.zo(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function xD(n,e,t){return zE.apply(this,arguments)}function zE(){return zE=(0,_e.Z)(function*(n,e,t){const r=We(n);r.sharedClientState.updateQueryState(e,"rejected",t);const a=r.cc.get(e),l=a&&a.key;if(l){let h=new Xn(je.comparator);h=h.insert(l,On.newNoDocument(l,ft.min()));const y=Wt().add(l),w=new Qp(ft.min(),new Map,new ln(Vt),h,y);yield SD(r,w),r.uc=r.uc.remove(l),r.cc.delete(e),ZE(r)}else yield mf(r.localStore,e,!1).then(()=>od(r,e,t)).catch(Ol)}),zE.apply(this,arguments)}function mx(n,e){return yg.apply(this,arguments)}function yg(){return yg=(0,_e.Z)(function*(n,e){const t=We(n),r=e.batch.batchId;try{const a=yield eD(t.localStore,e);If(t,r,null),b_(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Mc(t,a)}catch(a){yield Ol(a)}}),yg.apply(this,arguments)}function MD(n,e,t){return E_.apply(this,arguments)}function E_(){return E_=(0,_e.Z)(function*(n,e,t){const r=We(n);try{const a=yield function(l,h){const y=We(l);return y.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let D;return y.mutationQueue.lookupMutationBatch(w,h).next(x=>(wt(null!==x),D=x.keys(),y.mutationQueue.removeMutationBatch(w,x))).next(()=>y.mutationQueue.performConsistencyCheck(w)).next(()=>y.documentOverlayCache.removeOverlaysForBatchId(w,D,h)).next(()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(w,D)).next(()=>y.localDocuments.getDocuments(w,D))})}(r.localStore,e);If(r,e,t),b_(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Mc(r,a)}catch(a){yield Ol(a)}}),E_.apply(this,arguments)}function OD(){return OD=(0,_e.Z)(function*(n,e){const t=We(n);Ia(t.remoteStore)||ke("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(l){const h=We(l);return h.persistence.runTransaction("Get highest unacknowledged batch id","readonly",y=>h.mutationQueue.getHighestUnacknowledgedBatchId(y))}(t.localStore);if(-1===r)return void e.resolve();const a=t.lc.get(r)||[];a.push(e),t.lc.set(r,a)}catch(r){const a=fg(r,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}}),OD.apply(this,arguments)}function b_(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function If(n,e,t){const r=We(n);let a=r.hc[r.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),r.hc[r.currentUser.toKey()]=a}}function od(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||yx(n,r)})}function yx(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(bf(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),ZE(n))}function ND(n,e,t){for(const r of t)r instanceof wD?(n.ac.addReference(r.key,e),TR(n,r)):r instanceof CD?(ke("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||yx(n,r.key)):tt()}function TR(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(ke("SyncEngine","New document in limbo: "+t),n.oc.add(r),ZE(n))}function ZE(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new je(an.fromString(e)),r=n.fc.next();n.cc.set(r,new IR(t)),n.uc=n.uc.insert(t,r),d_(n.remoteStore,new ql(Mi(Yh(t.path)),r,2,ms.at))}}function Mc(n,e,t){return Df.apply(this,arguments)}function Df(){return Df=(0,_e.Z)(function*(n,e,t){const r=We(n),a=[],l=[],h=[];var y;r.ic.isEmpty()||(r.ic.forEach((y,w)=>{h.push(r._c(w,e,t).then(D=>{if((D||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(w.targetId,(null==D?void 0:D.fromCache)?"not-current":"current"),D){a.push(D);const x=td.Ci(w.targetId,D);l.push(x)}}))}),yield Promise.all(h),r.sc.zo(a),yield(y=(0,_e.Z)(function*(w,D){const x=We(w);try{yield x.persistence.runTransaction("notifyLocalViewChanges","readwrite",P=>ue.forEach(D,z=>ue.forEach(z.Si,J=>x.persistence.referenceDelegate.addReference(P,z.targetId,J)).next(()=>ue.forEach(z.Di,J=>x.persistence.referenceDelegate.removeReference(P,z.targetId,J)))))}catch(P){if(!Ja(P))throw P;ke("LocalStore","Failed to update sequence numbers: "+P)}for(const P of D){const z=P.targetId;if(!P.fromCache){const J=x.Ui.get(z),Le=J.withLastLimboFreeSnapshotVersion(J.snapshotVersion);x.Ui=x.Ui.insert(z,Le)}}}),function(w,D){return y.apply(this,arguments)})(r.localStore,l))}),Df.apply(this,arguments)}function _x(n,e){return PD.apply(this,arguments)}function PD(){return PD=(0,_e.Z)(function*(n,e){const t=We(n);if(!t.currentUser.isEqual(e)){ke("SyncEngine","User change. New user:",e.toKey());const r=yield xE(t.localStore,e);t.currentUser=e,(a=t).lc.forEach(h=>{h.forEach(y=>{y.reject(new Te(pe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),a.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Mc(t,r.ji)}var a}),PD.apply(this,arguments)}function AR(n,e){const t=We(n),r=t.cc.get(e);if(r&&r.nc)return Wt().add(r.key);{let a=Wt();const l=t.rc.get(e);if(!l)return a;for(const h of l){const y=t.ic.get(h);a=a.unionWith(y.view.ju)}return a}}function KE(n,e){return YE.apply(this,arguments)}function YE(){return YE=(0,_e.Z)(function*(n,e){const t=We(n),r=yield Tc(t.localStore,e.query,!0),a=e.view.tc(r);return t.isPrimaryClient&&ND(t,e.targetId,a.Xu),a}),YE.apply(this,arguments)}function SR(n,e){return kD.apply(this,arguments)}function kD(){return kD=(0,_e.Z)(function*(n,e){const t=We(n);return s_(t.localStore,e).then(r=>Mc(t,r))}),kD.apply(this,arguments)}function vx(n,e,t,r){return FD.apply(this,arguments)}function FD(){return FD=(0,_e.Z)(function*(n,e,t,r){const a=We(n),l=yield function(h,y){const w=We(h),D=We(w.mutationQueue);return w.persistence.runTransaction("Lookup mutation documents","readonly",x=>D.Tn(x,y).next(P=>P?w.localDocuments.getDocuments(x,P):ue.resolve(null)))}(a.localStore,e);var y;null!==l?("pending"===t?yield Sc(a.remoteStore):"acknowledged"===t||"rejected"===t?(If(a,e,r||null),b_(a,e),y=e,We(We(a.localStore).mutationQueue).An(y)):tt(),yield Mc(a,l)):ke("SyncEngine","Cannot apply mutation batch with id: "+e)}),FD.apply(this,arguments)}function QE(){return QE=(0,_e.Z)(function*(n,e){const t=We(n);if(XE(t),Xi(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),a=yield Ex(t,r.toArray());t.dc=!0,yield __(t.remoteStore,!0);for(const l of a)d_(t.remoteStore,l)}else if(!1===e&&!1!==t.dc){const r=[];let a=Promise.resolve();t.rc.forEach((l,h)=>{t.sharedClientState.isLocalQueryTarget(h)?r.push(h):a=a.then(()=>(od(t,h),mf(t.localStore,h,!0))),bf(t.remoteStore,h)}),yield a,yield Ex(t,r),function(l){const h=We(l);h.cc.forEach((y,w)=>{bf(h.remoteStore,w)}),h.ac.fs(),h.cc=new Map,h.uc=new Xn(je.comparator)}(t),t.dc=!1,yield __(t.remoteStore,!1)}}),QE.apply(this,arguments)}function Ex(n,e,t){return VD.apply(this,arguments)}function VD(){return VD=(0,_e.Z)(function*(n,e,t){const r=We(n),a=[],l=[];for(const h of e){let y;const w=r.rc.get(h);if(w&&0!==w.length){y=yield gf(r.localStore,Mi(w[0]));for(const D of w){const x=r.ic.get(D),P=yield KE(r,x);P.snapshot&&l.push(P.snapshot)}}else{const D=yield nD(r.localStore,h);y=yield gf(r.localStore,D),yield ID(r,UD(D),h,!1,y.resumeToken)}a.push(y)}return r.sc.zo(l),a}),VD.apply(this,arguments)}function UD(n){return My(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function _g(n){const e=We(n);return We(We(e.localStore).persistence).vi()}function bx(n,e,t,r){return JE.apply(this,arguments)}function JE(){return JE=(0,_e.Z)(function*(n,e,t,r){const a=We(n);if(a.dc)return void ke("SyncEngine","Ignoring unexpected query state notification.");const l=a.rc.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const h=yield s_(a.localStore,DS(l[0])),y=Qp.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,kr.EMPTY_BYTE_STRING);yield Mc(a,h,y);break}case"rejected":yield mf(a.localStore,e,!0),od(a,e,r);break;default:tt()}}),JE.apply(this,arguments)}function wx(n,e,t){return vg.apply(this,arguments)}function vg(){return vg=(0,_e.Z)(function*(n,e,t){const r=XE(n);if(r.dc){for(const a of e){if(r.rc.has(a)){ke("SyncEngine","Adding an already active target "+a);continue}const l=yield nD(r.localStore,a),h=yield gf(r.localStore,l);yield ID(r,UD(l),h.targetId,!1,h.resumeToken),d_(r.remoteStore,h)}for(const a of t)r.rc.has(a)&&(yield mf(r.localStore,a,!1).then(()=>{bf(r.remoteStore,a),od(r,a)}).catch(Ol))}}),vg.apply(this,arguments)}function XE(n){const e=We(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=SD.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=AR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=xD.bind(null,e),e.sc.zo=vR.bind(null,e.eventManager),e.sc.wc=ER.bind(null,e.eventManager),e}function Xi(n){const e=We(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=mx.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=MD.bind(null,e),e}class w_{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,_e.Z)(function*(){t.It=vf(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return SE(this.persistence,new AE,e.initialUser,this.It)}yc(e){return new YI(n_.Bs,this.It)}gc(e){return new rD}terminate(){var e=this;return(0,_e.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class BD extends w_{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,_e.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield Xi(r.Ac.syncEngine),yield Sc(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return SE(this.persistence,new AE,e.initialUser,this.It)}Tc(e,t){return new GI(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new fS(t,this.persistence);return new hS(e.asyncQueue,r)}yc(e){const t=TE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Fs.withCacheSize(this.cacheSizeBytes):Fs.DEFAULT;return new DE(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,kE(),u_(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new rD}}class Ix extends BD{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,_e.Z)(function*(){yield t().call(r,e);const a=r.Ac.syncEngine;r.sharedClientState instanceof PE&&(r.sharedClientState.syncEngine={Fr:vx.bind(null,a),$r:bx.bind(null,a),Br:wx.bind(null,a),vi:_g.bind(null,a),Mr:SR.bind(null,a)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var l=(0,_e.Z)(function*(h){yield function(n,e){return QE.apply(this,arguments)}(r.Ac.syncEngine,h),r.gcScheduler&&(h&&!r.gcScheduler.started?r.gcScheduler.start():h||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(h&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():h||r.indexBackfillerScheduler.stop())});return function(h){return l.apply(this,arguments)}}())})()}gc(e){const t=kE();if(!PE.C(t))throw new Te(pe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=TE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new PE(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Eg{initialize(e,t){var r=this;return(0,_e.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=a=>sd(r.syncEngine,a,1),r.remoteStore.remoteSyncer.handleCredentialChange=_x.bind(null,r.syncEngine),yield __(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new _R}createDatastore(e){const t=vf(e.databaseInfo.databaseId),r=new oD(e.databaseInfo);return new mR(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,a=e.asyncQueue,l=y=>sd(this.syncEngine,y,0),h=a_.C()?new a_:new iD,new sx(t,r,a,l,h);var t,r,a,l,h}createSyncEngine(e,t){return function(r,a,l,h,y,w,D){const x=new fx(r,a,l,h,y,w);return D&&(x.dc=!0),x}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,_e.Z)(function*(t){const r=We(t);ke("RemoteStore","RemoteStore shutting down."),r.wu.add(5),yield Ef(r),r.gu.shutdown(),r.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function C_(n,e,t){if(!t)throw new Te(pe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function eb(n,e,t,r){if(!0===e&&!0===r)throw new Te(pe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function jD(n){if(!je.isDocumentKey(n))throw new Te(pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function tb(n){if(je.isDocumentKey(n))throw new Te(pe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function bg(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":tt()}function tn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Te(pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=bg(n);throw new Te(pe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function $D(n,e){if(e<=0)throw new Te(pe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const I_=new Map;class nb{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Te(pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Te(pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,eb("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Tf{constructor(e,t,r,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new nb({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Te(pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Te(pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new nb(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new oS;switch(t.type){case"gapi":return new UC(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Te(pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=I_.get(e);t&&(ke("ComponentProvider","Removing Datastore"),I_.delete(e),t.terminate())}(this),Promise.resolve()}}class Un{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Da(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Un(this.firestore,e,this._key)}}class Nn{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Nn(this.firestore,e,this._query)}}class Da extends Nn{constructor(e,t,r){super(e,t,Yh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Un(this.firestore,null,new je(e))}withConverter(e){return new Da(this.firestore,e,this._path)}}function Dx(n,e,...t){if(n=(0,cn.m9)(n),C_("collection","path",e),n instanceof Tf){const r=an.fromString(e,...t);return tb(r),new Da(n,null,r)}{if(!(n instanceof Un||n instanceof Da))throw new Te(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(an.fromString(e,...t));return tb(r),new Da(n.firestore,null,r)}}function rb(n,e,...t){if(n=(0,cn.m9)(n),1===arguments.length&&(e=G0.R()),C_("doc","path",e),n instanceof Tf){const r=an.fromString(e,...t);return jD(r),new Un(n,null,new je(r))}{if(!(n instanceof Un||n instanceof Da))throw new Te(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(an.fromString(e,...t));return jD(r),new Un(n.firestore,n instanceof Da?n.converter:null,new je(r))}}function HD(n,e){return n=(0,cn.m9)(n),e=(0,cn.m9)(e),(n instanceof Un||n instanceof Da)&&(e instanceof Un||e instanceof Da)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function ib(n,e){return n=(0,cn.m9)(n),e=(0,cn.m9)(e),n instanceof Nn&&e instanceof Nn&&n.firestore===e.firestore&&Jh(n._query,e._query)&&n.converter===e.converter}function GD(n,e=10240){let t=0;return{read:()=>(0,_e.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,_e.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class sb{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):_r("Uncaught Error in snapshot listener:",e)}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Ax{constructor(e,t){this.Pc=e,this.It=t,this.metadata=new zr,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,_e.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,_e.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,_e.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),a=Number(r);isNaN(a)&&e.Dc(`length string (${r}) is not valid number`);const l=yield e.Cc(a);return new bR(JSON.parse(l),t.length+a)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,_e.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,_e.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,_e.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class qD{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,_e.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Te(pe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(a=(0,_e.Z)(function*(l,h){const y=We(l),w=Ec(y.It)+"/documents",D={documents:h.map(J=>nf(y.It,J))},x=yield y._o("BatchGetDocuments",w,D,h.length),P=new Map;x.forEach(J=>{const fe=function(n,e){return"found"in e?function(t,r){wt(!!r.found);const a=Ca(t,r.found.name),l=Zr(r.found.updateTime),h=new ai({mapValue:{fields:r.found.fields}});return On.newFoundDocument(a,l,h)}(n,e):"missing"in e?function(t,r){wt(!!r.missing),wt(!!r.readTime);const a=Ca(t,r.missing),l=Zr(r.readTime);return On.newNoDocument(a,l)}(n,e):tt()}(y.It,J);P.set(fe.key.toString(),fe)});const z=[];return h.forEach(J=>{const fe=P.get(J.toString());wt(!!fe),z.push(fe)}),z}),function(l,h){return a.apply(this,arguments)})(t.datastore,e);var a;return r.forEach(a=>t.recordVersion(a)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new ef(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,_e.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,a)=>{const l=je.fromPath(a);e.mutations.push(new ky(l,e.precondition(l)))}),yield(r=(0,_e.Z)(function*(a,l){const h=We(a),y=Ec(h.It)+"/documents",w={writes:l.map(D=>tu(h.It,D))};yield h.ao("Commit",y,w)}),function(a,l){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw tt();t=ft.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Te(pe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ft.min())?Vn.exists(!1):Vn.updateTime(t):Vn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ft.min()))throw new Te(pe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Vn.updateTime(t)}return Vn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Rx{constructor(e,t,r,a,l){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=a,this.deferred=l,this.kc=r.maxAttempts,this.No=new c_(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.No.Ro((0,_e.Z)(function*(){const t=new qD(e.datastore),r=e.Mc(t);r&&r.then(a=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(a)}).catch(l=>{e.Fc(l)}))}).catch(a=>{e.Fc(a)})}))}Mc(e){try{const t=this.updateFunction(e);return!qh(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!gI(t)}return!1}}class xR{constructor(e,t,r,a){var l=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=a,this.user=Wr.UNAUTHENTICATED,this.clientId=G0.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var h=(0,_e.Z)(function*(y){ke("FirestoreClient","Received user=",y.uid),yield l.authCredentialListener(y),l.user=y});return function(y){return h.apply(this,arguments)}}()),this.appCheckCredentials.start(r,h=>(ke("FirestoreClient","Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}getConfiguration(){var e=this;return(0,_e.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Te(pe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new zr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,_e.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const a=fg(r,"Failed to shutdown persistence");t.reject(a)}})),t.promise}}function ob(n,e){return T_.apply(this,arguments)}function T_(){return T_=(0,_e.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ke("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var a=(0,_e.Z)(function*(l){r.isEqual(l)||(yield xE(e.localStore,l),r=l)});return function(l){return a.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),T_.apply(this,arguments)}function WD(n,e){return ab.apply(this,arguments)}function ab(){return ab=(0,_e.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield A_(n);ke("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(a=>GE(e.remoteStore,a)),n.setAppCheckTokenChangeListener((a,l)=>GE(e.remoteStore,l)),n.onlineComponents=e}),ab.apply(this,arguments)}function A_(n){return ad.apply(this,arguments)}function ad(){return ad=(0,_e.Z)(function*(n){return n.offlineComponents||(ke("FirestoreClient","Using default OfflineComponentProvider"),yield ob(n,new w_)),n.offlineComponents}),ad.apply(this,arguments)}function Af(n){return S_.apply(this,arguments)}function S_(){return S_=(0,_e.Z)(function*(n){return n.onlineComponents||(ke("FirestoreClient","Using default OnlineComponentProvider"),yield WD(n,new Eg)),n.onlineComponents}),S_.apply(this,arguments)}function zD(n){return A_(n).then(e=>e.persistence)}function x_(n){return A_(n).then(e=>e.localStore)}function ZD(n){return Af(n).then(e=>e.remoteStore)}function KD(n){return Af(n).then(e=>e.syncEngine)}function ud(n){return M_.apply(this,arguments)}function M_(){return M_=(0,_e.Z)(function*(n){const e=yield Af(n),t=e.eventManager;return t.onListen=px.bind(null,e.syncEngine),t.onUnlisten=DR.bind(null,e.syncEngine),t}),M_.apply(this,arguments)}function YD(n,e,t={}){const r=new zr;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(a,l,h,y,w){const D=new sb({next:P=>{l.enqueueAndForget(()=>yD(a,x));const z=P.docs.has(h);!z&&P.fromCache?w.reject(new Te(pe.UNAVAILABLE,"Failed to get document because the client is offline.")):z&&P.fromCache&&y&&"server"===y.source?w.reject(new Te(pe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(P)},error:P=>w.reject(P)}),x=new ED(Yh(h.path),D,{includeMetadataChanges:!0,ku:!0});return gD(a,x)}(yield ud(n),n.asyncQueue,e,t,r)})),r.promise}function Fx(n,e,t={}){const r=new zr;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(a,l,h,y,w){const D=new sb({next:P=>{l.enqueueAndForget(()=>yD(a,x)),P.fromCache&&"server"===y.source?w.reject(new Te(pe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(P)},error:P=>w.reject(P)}),x=new ED(h,D,{includeMetadataChanges:!0,ku:!0});return gD(a,x)}(yield ud(n),n.asyncQueue,e,t,r)})),r.promise}class li{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.No=new c_(this,"async_queue_retry"),this.Wc=()=>{const t=u_();t&&ke("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=u_();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=u_();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new zr;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,_e.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.No.reset()}catch(t){if(!Ja(t))throw t;ke("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.No.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,_r("INTERNAL UNHANDLED ERROR: ",function(l){let h=l.message||"";return l.stack&&(h=l.stack.includes(l.message)?l.stack:l.message+"\n"+l.stack),h}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const a=v_.createAndSchedule(this,e,t,r,l=>this.Yc(l));return this.qc.push(a),a}zc(){this.Kc&&tt()}verifyOperationInProgress(){}Xc(){var e=this;return(0,_e.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function JD(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const a of["next","error","complete"])if(a in r&&"function"==typeof r[a])return!0;return!1}(n)}class XD{constructor(){this._progressObserver={},this._taskCompletionResolver=new zr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Bn extends Tf{constructor(e,t,r,a){super(e,t,r,a),this.type="firestore",this._queue=new li,this._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||lb(this),this._firestoreClient.terminate()}}function br(n){return n._firestoreClient||lb(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function lb(n){var e;const t=n._freezeSettings(),r=(l=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new oR(n._databaseId,l,n._persistenceKey,(y=t).host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,y.useFetchStreams));var l,y;n._firestoreClient=new xR(n._authCredentials,n._appCheckCredentials,n._queue,r)}function R_(n,e,t){const r=new zr;return n.asyncQueue.enqueue((0,_e.Z)(function*(){try{yield ob(n,t),yield WD(n,e),r.resolve()}catch(a){const l=a;if(!("FirebaseError"===(h=l).name?h.code===pe.FAILED_PRECONDITION||h.code===pe.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&h instanceof DOMException)||22===h.code||20===h.code||11===h.code))throw l;Ml("Error enabling offline persistence. Falling back to persistence disabled: "+l),r.reject(l)}var h})).then(()=>r.promise)}function Bx(n){if(n._initialized||n._terminated)throw new Te(pe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Ta{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ta(kr.fromBase64String(e))}catch(t){throw new Te(pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ta(kr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class iu{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Te(pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Aa{constructor(e){this._methodName=e}}class N_{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Te(pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Te(pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Vt(this._lat,e._lat)||Vt(this._long,e._long)}}const OR=/^__.*__$/;class NR{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new eu(e,this.data,this.fieldMask,t,this.fieldTransforms):new jl(e,this.data,t,this.fieldTransforms)}}class jx{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new eu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function iT(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw tt()}}class P_{constructor(e,t,r,a,l,h){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=a,void 0===l&&this.na(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new P_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.ia({path:r,oa:!1});return a.ua(e),a}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.ia({path:r,oa:!1});return a.na(),a}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return yb(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(iT(this.sa)&&OR.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class $x{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||vf(e)}da(e,t,r,a=!1){return new P_({sa:e,methodName:t,fa:r,path:vr.emptyPath(),oa:!1,la:a},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function ld(n){const e=n._freezeSettings(),t=vf(n._databaseId);return new $x(n._databaseId,!!e.ignoreUndefinedProperties,t)}function k_(n,e,t,r,a,l={}){const h=n.da(l.merge||l.mergeFields?2:0,e,t,a);gb("Data must be an object, but it was:",h,r);const y=aT(r,h);let w,D;if(l.merge)w=new Ps(h.fieldMask),D=h.fieldTransforms;else if(l.mergeFields){const x=[];for(const P of l.mergeFields){const z=mb(e,P,t);if(!h.contains(z))throw new Te(pe.INVALID_ARGUMENT,`Field '${z}' is specified in your field mask but missing from your input data.`);uT(x,z)||x.push(z)}w=new Ps(x),D=h.fieldTransforms.filter(P=>w.covers(P.field))}else w=null,D=h.fieldTransforms;return new NR(new ai(y),w,D)}class F_ extends Aa{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof F_}}function sT(n,e,t){return new P_({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class hb extends Aa{_toFieldTransform(e){return new Bl(e.path,new qp)}isEqual(e){return e instanceof hb}}class Hx extends Aa{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=sT(this,e,!0),r=this._a.map(l=>dd(l,t)),a=new ba(r);return new Bl(e.path,a)}isEqual(e){return this===e}}class PR extends Aa{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=sT(this,e,!0),r=this._a.map(l=>dd(l,t)),a=new Ul(r);return new Bl(e.path,a)}isEqual(e){return this===e}}class kR extends Aa{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new Xh(e.It,aI(e.It,this.wa));return new Bl(e.path,t)}isEqual(e){return this===e}}function fb(n,e,t,r){const a=n.da(1,e,t);gb("Data must be an object, but it was:",a,r);const l=[],h=ai.empty();hc(r,(w,D)=>{const x=L_(e,w,t);D=(0,cn.m9)(D);const P=a.ca(x);if(D instanceof F_)l.push(x);else{const z=dd(D,P);null!=z&&(l.push(x),h.set(x,z))}});const y=new Ps(l);return new jx(h,y,a.fieldTransforms)}function pb(n,e,t,r,a,l){const h=n.da(1,e,t),y=[mb(e,r,t)],w=[a];if(l.length%2!=0)throw new Te(pe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let z=0;z<l.length;z+=2)y.push(mb(e,l[z])),w.push(l[z+1]);const D=[],x=ai.empty();for(let z=y.length-1;z>=0;--z)if(!uT(D,y[z])){const J=y[z];let fe=w[z];fe=(0,cn.m9)(fe);const Le=h.ca(J);if(fe instanceof F_)D.push(J);else{const Ve=dd(fe,Le);null!=Ve&&(D.push(J),x.set(J,Ve))}}const P=new Ps(D);return new jx(x,P,h.fieldTransforms)}function oT(n,e,t,r=!1){return dd(t,n.da(r?4:3,e))}function dd(n,e){if(ho(n=(0,cn.m9)(n)))return gb("Unsupported field value:",e,n),aT(n,e);if(n instanceof Aa)return function(t,r){if(!iT(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const a=t._toFieldTransform(r);a&&r.fieldTransforms.push(a)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const a=[];let l=0;for(const h of t){let y=dd(h,r.aa(l));null==y&&(y={nullValue:"NULL_VALUE"}),a.push(y),l++}return{arrayValue:{values:a}}}(n,e)}return function(t,r){if(null===(t=(0,cn.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return aI(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const a=Ln.fromDate(t);return{timestampValue:tf(r.It,a)}}if(t instanceof Ln){const a=new Ln(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:tf(r.It,a)}}if(t instanceof N_)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Ta)return{bytesValue:Vy(r.It,t._byteString)};if(t instanceof Un){const a=r.databaseId,l=t.firestore._databaseId;if(!l.isEqual(a))throw r.ha(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:aE(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${bg(t)}`)}(n,e)}function aT(n,e){const t={};return W0(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):hc(n,(r,a)=>{const l=dd(a,e.ra(r));null!=l&&(t[r]=l)}),{mapValue:{fields:t}}}function ho(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Ln||n instanceof N_||n instanceof Ta||n instanceof Un||n instanceof Aa)}function gb(n,e,t){if(!ho(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=bg(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function mb(n,e,t){if((e=(0,cn.m9)(e))instanceof iu)return e._internalPath;if("string"==typeof e)return L_(n,e);throw yb("Field path arguments must be of type string or ",n,!1,void 0,t)}const Gx=new RegExp("[~\\*/\\[\\]]");function L_(n,e,t){if(e.search(Gx)>=0)throw yb(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new iu(...e.split("."))._internalPath}catch(r){throw yb(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function yb(n,e,t,r,a){const l=r&&!r.isEmpty(),h=void 0!==a;let y=`Function ${e}() called with invalid data`;t&&(y+=" (via `toFirestore()`)"),y+=". ";let w="";return(l||h)&&(w+=" (found",l&&(w+=` in field ${r}`),h&&(w+=` in document ${a}`),w+=")"),new Te(pe.INVALID_ARGUMENT,y+n+w)}function uT(n,e){return n.some(t=>t.isEqual(e))}class wg{constructor(e,t,r,a,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Un(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new qx(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Rc("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class qx extends wg{data(){return super.data()}}function Rc(n,e){return"string"==typeof e?L_(n,e):e instanceof iu?e._internalPath:e._delegate._internalPath}function _b(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Te(pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class V_{}function Oc(n,...e){for(const t of e)n=t._apply(n);return n}class FR extends V_{constructor(e,t,r){super(),this.ma=e,this.ga=t,this.ya=r,this.type="where"}_apply(e){const t=ld(e.firestore),r=function(a,l,h,y,w,D,x){let P;if(w.isKeyField()){if("array-contains"===D||"array-contains-any"===D)throw new Te(pe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${D}' queries on documentId().`);if("in"===D||"not-in"===D){bb(x,D);const J=[];for(const fe of x)J.push(dT(y,a,fe));P={arrayValue:{values:J}}}else P=dT(y,a,x)}else"in"!==D&&"not-in"!==D&&"array-contains-any"!==D||bb(x,D),P=oT(h,"where",x,"in"===D||"not-in"===D);const z=_i.create(w,D,P);return function(J,fe){if(fe.dt()){const Ve=J0(J);if(null!==Ve&&!Ve.isEqual(fe.field))throw new Te(pe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Ve.toString()}' and '${fe.field.toString()}'`);const Pt=Hp(J);null!==Pt&&wb(0,fe.field,Pt)}const Le=function(Ve,Pt){for(const $t of Ve.filters)if(Pt.indexOf($t.op)>=0)return $t.op;return null}(J,function(Ve){switch(Ve){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(fe.op));if(null!==Le)throw new Te(pe.INVALID_ARGUMENT,Le===fe.op?`Invalid query. You cannot use more than one '${fe.op.toString()}' filter.`:`Invalid query. You cannot use '${fe.op.toString()}' filters with '${Le.toString()}' filters.`)}(a,z),z}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new Nn(e.firestore,e.converter,function(a,l){const h=a.filters.concat([l]);return new va(a.path,a.collectionGroup,a.explicitOrderBy.slice(),h,a.limit,a.limitType,a.startAt,a.endAt)}(e._query,r))}}class VR extends V_{constructor(e,t){super(),this.ma=e,this.pa=t,this.type="orderBy"}_apply(e){const t=function(r,a,l){if(null!==r.startAt)throw new Te(pe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Te(pe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const h=new Kh(a,l);return function(y,w){if(null===Hp(y)){const D=J0(y);null!==D&&wb(0,D,w.field)}}(r,h),h}(e._query,this.ma,this.pa);return new Nn(e.firestore,e.converter,function(r,a){const l=r.explicitOrderBy.concat([a]);return new va(r.path,r.collectionGroup,l,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class cT extends V_{constructor(e,t,r){super(),this.type=e,this.Ia=t,this.Ta=r}_apply(e){return new Nn(e.firestore,e.converter,Gp(e._query,this.Ia,this.Ta))}}class Zx extends V_{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=Eb(e,this.type,this.Ea,this.Aa);return new Nn(e.firestore,e.converter,(a=t,new va((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,a,r.endAt)));var r,a}}class lT extends V_{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=Eb(e,this.type,this.Ea,this.Aa);return new Nn(e.firestore,e.converter,(a=t,new va((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,a)));var r,a}}function Eb(n,e,t,r){if(t[0]=(0,cn.m9)(t[0]),t[0]instanceof wg)return function(a,l,h,y,w){if(!y)throw new Te(pe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${h}().`);const D=[];for(const x of Qh(a))if(x.field.isKeyField())D.push(Ll(l,y.key));else{const P=y.data.field(x.field);if(z0(P))throw new Te(pe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+x.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===P){const z=x.field.canonicalString();throw new Te(pe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${z}' (used as the orderBy) does not exist.`)}D.push(P)}return new yc(D,w)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const a=ld(n.firestore);return function(l,h,y,w,D,x){const P=l.explicitOrderBy;if(D.length>P.length)throw new Te(pe.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const z=[];for(let J=0;J<D.length;J++){const fe=D[J];if(P[J].field.isKeyField()){if("string"!=typeof fe)throw new Te(pe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof fe}`);if(!Ry(l)&&-1!==fe.indexOf("/"))throw new Te(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${w}() must be a plain document ID, but '${fe}' contains a slash.`);const Le=l.path.child(an.fromString(fe));if(!je.isDocumentKey(Le))throw new Te(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${w}() must result in a valid document path, but '${Le}' is not because it contains an odd number of segments.`);const Ve=new je(Le);z.push(Ll(h,Ve))}else{const Le=oT(y,w,fe);z.push(Le)}}return new yc(z,x)}(n._query,n.firestore._databaseId,a,e,t,r)}}function dT(n,e,t){if("string"==typeof(t=(0,cn.m9)(t))){if(""===t)throw new Te(pe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ry(e)&&-1!==t.indexOf("/"))throw new Te(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(an.fromString(t));if(!je.isDocumentKey(r))throw new Te(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ll(n,new je(r))}if(t instanceof Un)return Ll(n,t._key);throw new Te(pe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${bg(t)}.`)}function bb(n,e){if(!Array.isArray(n)||0===n.length)throw new Te(pe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Te(pe.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function wb(n,e,t){if(!t.isEqual(e))throw new Te(pe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class U_{convertValue(e,t="none"){switch(Uo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return er(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(kl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw tt()}}convertObject(e,t){const r={};return hc(e.fields,(a,l)=>{r[a]=this.convertValue(l,t)}),r}convertGeoPoint(e){return new N_(er(e.latitude),er(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=pS(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(wy(e));default:return null}}convertTimestamp(e){const t=fc(e);return new Ln(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=an.fromString(e);wt(cE(r));const a=new Fl(r.get(1),r.get(3)),l=new je(r.popFirst(5));return a.isEqual(t)||_r(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function Sf(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Cb extends U_{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ta(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Un(this.firestore,null,t)}}class su{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class fo extends wg{constructor(e,t,r,a,l,h){super(e,t,r,a,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Nc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Rc("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Nc extends fo{data(e={}){return super.data(e)}}class ou{constructor(e,t,r,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new su(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Nc(this._firestore,this._userDataWriter,r.key,r,new su(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Te(pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,a){if(r._snapshot.oldDocs.isEmpty()){let l=0;return r._snapshot.docChanges.map(h=>({type:"added",doc:new Nc(r._firestore,r._userDataWriter,h.doc.key,h.doc,new su(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:l++}))}{let l=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(h=>a||3!==h.type).map(h=>{const y=new Nc(r._firestore,r._userDataWriter,h.doc.key,h.doc,new su(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);let w=-1,D=-1;return 0!==h.type&&(w=l.indexOf(h.doc.key),l=l.delete(h.doc.key)),1!==h.type&&(l=l.add(h.doc),D=l.indexOf(h.doc.key)),{type:hT(h.type),doc:y,oldIndex:w,newIndex:D}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function hT(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return tt()}}function fT(n,e){return n instanceof fo&&e instanceof fo?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof ou&&e instanceof ou&&n._firestore===e._firestore&&ib(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class au extends U_{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ta(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Un(this.firestore,null,t)}}function Ni(n,e,t){n=tn(n,Un);const r=tn(n.firestore,Bn),a=Sf(n.converter,e,t);return hd(r,[k_(ld(r),"setDoc",n._key,a,null!==n.converter,t).toMutation(n._key,Vn.none())])}function xf(n,e,t,...r){n=tn(n,Un);const a=tn(n.firestore,Bn),l=ld(a);let h;return h="string"==typeof(e=(0,cn.m9)(e))||e instanceof iu?pb(l,"updateDoc",n._key,e,t,r):fb(l,"updateDoc",n._key,e),hd(a,[h.toMutation(n._key,Vn.exists(!0))])}function Cg(n,...e){var t,r,a;n=(0,cn.m9)(n);let l={includeMetadataChanges:!1},h=0;"object"!=typeof e[h]||JD(e[h])||(l=e[h],h++);const y={includeMetadataChanges:l.includeMetadataChanges};if(JD(e[h])){const P=e[h];e[h]=null===(t=P.next)||void 0===t?void 0:t.bind(P),e[h+1]=null===(r=P.error)||void 0===r?void 0:r.bind(P),e[h+2]=null===(a=P.complete)||void 0===a?void 0:a.bind(P)}let w,D,x;if(n instanceof Un)D=tn(n.firestore,Bn),x=Yh(n._key.path),w={next:P=>{e[h]&&e[h](Mf(D,n,P))},error:e[h+1],complete:e[h+2]};else{const P=tn(n,Nn);D=tn(P.firestore,Bn),x=P._query;const z=new au(D);w={next:J=>{e[h]&&e[h](new ou(D,z,P,J))},error:e[h+1],complete:e[h+2]},_b(n._query)}return function(P,z,J,fe){const Le=new sb(fe),Ve=new ED(z,Le,J);return P.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return gD(yield ud(P),Ve)})),()=>{Le.bc(),P.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return yD(yield ud(P),Ve)}))}}(br(D),x,y,w)}function hd(n,e){return function(t,r){const a=new zr;return t.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(n,e,t){return AD.apply(this,arguments)}(yield KD(t),r,a)})),a.promise}(br(n),e)}function Mf(n,e,t){const r=t.docs.get(e._key),a=new au(n);return new fo(n,a,e._key,r,new su(t.hasPendingWrites,t.fromCache),e.converter)}const nM={maxAttempts:5};class gT{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ld(e)}set(e,t,r){this._verifyNotCommitted();const a=uu(e,this._firestore),l=Sf(a.converter,t,r),h=k_(this._dataReader,"WriteBatch.set",a._key,l,null!==a.converter,r);return this._mutations.push(h.toMutation(a._key,Vn.none())),this}update(e,t,r,...a){this._verifyNotCommitted();const l=uu(e,this._firestore);let h;return h="string"==typeof(t=(0,cn.m9)(t))||t instanceof iu?pb(this._dataReader,"WriteBatch.update",l._key,t,r,a):fb(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(h.toMutation(l._key,Vn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=uu(e,this._firestore);return this._mutations=this._mutations.concat(new ef(t._key,Vn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Te(pe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function uu(n,e){if((n=(0,cn.m9)(n)).firestore!==e)throw new Te(pe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class rM extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=ld(e)}get(e){const t=uu(e,this._firestore),r=new Cb(this._firestore);return this._transaction.lookup([t._key]).then(a=>{if(!a||1!==a.length)return tt();const l=a[0];if(l.isFoundDocument())return new wg(this._firestore,r,l.key,l,t.converter);if(l.isNoDocument())return new wg(this._firestore,r,t._key,null,t.converter);throw tt()})}set(e,t,r){const a=uu(e,this._firestore),l=Sf(a.converter,t,r),h=k_(this._dataReader,"Transaction.set",a._key,l,null!==a.converter,r);return this._transaction.set(a._key,h),this}update(e,t,r,...a){const l=uu(e,this._firestore);let h;return h="string"==typeof(t=(0,cn.m9)(t))||t instanceof iu?pb(this._dataReader,"Transaction.update",l._key,t,r,a):fb(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,h),this}delete(e){const t=uu(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=uu(e,this._firestore),r=new au(this._firestore);return super.get(e).then(a=>new fo(this._firestore,r,t._key,a._document,new su(!1,!1),t.converter))}}function $_(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Te("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function yT(){if("undefined"==typeof Uint8Array)throw new Te("unimplemented","Uint8Arrays are not available in this environment.")}function _T(){if("undefined"==typeof atob)throw new Te("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){xl=yl.SDK_VERSION,(0,yl._registerComponent)(new _m.wA("firestore",(t,{instanceIdentifier:r,options:a})=>{const l=t.getProvider("app").getImmediate(),h=new Bn(new uS(t.getProvider("auth-internal")),new BC(t.getProvider("app-check-internal")),function(y,w){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new Te(pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fl(y.options.projectId,w)}(l,r),l);return a=Object.assign({useFetchStreams:e},a),h._setSettings(a),h},"PUBLIC").setMultipleInstances(!0)),(0,yl.registerVersion)(B0,"3.7.1",n),(0,yl.registerVersion)(B0,"3.7.1","esm2017")}();class Dg{constructor(e){this._delegate=e}static fromBase64String(e){return _T(),new Dg(Ta.fromBase64String(e))}static fromUint8Array(e){return yT(),new Dg(Ta.fromUint8Array(e))}toBase64(){return _T(),this._delegate.toBase64()}toUint8Array(){return yT(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Go(n){return function(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of["next","error","complete"])if(r in t&&"function"==typeof t[r])return!0;return!1}(n)}class Rf{enableIndexedDbPersistence(e,t){return function(n,e){Bx(n=tn(n,Bn));const t=br(n),r=n._freezeSettings(),a=new Eg;return R_(t,a,new BD(a,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(n){Bx(n=tn(n,Bn));const e=br(n),t=n._freezeSettings(),r=new Eg;return R_(e,r,new Ix(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(n){if(n._initialized&&!n._terminated)throw new Te(pe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new zr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,_e.Z)(function*(){try{yield(t=(0,_e.Z)(function*(r){if(!co.C())return Promise.resolve();const a=r+"main";yield co.delete(a)}),function(r){return t.apply(this,arguments)})(TE(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Ag{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Fl||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Ml("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function(n,e,t,r={}){var a;const l=(n=tn(n,Tf))._getSettings();if("firestore.googleapis.com"!==l.host&&l.host!==e&&Ml("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},l),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let h,y;if("string"==typeof r.mockUserToken)h=r.mockUserToken,y=Wr.MOCK_USER;else{h=(0,cn.Sg)(r.mockUserToken,null===(a=n._app)||void 0===a?void 0:a.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new Te(pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new Wr(w)}n._authCredentials=new aS(new LC(h,y))}}(this._delegate,e,t,r)}enableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,_e.Z)(function*(){const e=yield zD(n),t=yield ZD(n);return e.setNetworkEnabled(!0),function(r){const a=We(r);return a.wu.delete(0),l_(a)}(t)}))}(br(n=tn(n,Bn)))}(this._delegate)}disableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,_e.Z)(function*(){const e=yield zD(n),t=yield ZD(n);return e.setNetworkEnabled(!1),(r=(0,_e.Z)(function*(a){const l=We(a);l.wu.add(0),yield Ef(l),l.yu.set("Offline")}),function(a){return r.apply(this,arguments)})(t);var r}))}(br(n=tn(n,Bn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,eb("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(n){return function(e){const t=new zr;return e.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(n,e){return OD.apply(this,arguments)}(yield KD(e),t)})),t.promise}(br(n=tn(n,Bn)))}(this._delegate)}onSnapshotsInSync(e){return function(n,e){return function(n,e){const t=new sb(e);return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return r=yield ud(n),a=t,We(r).bu.add(a),void a.next();var r,a})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return r=yield ud(n),a=t,void We(r).bu.delete(a);var r,a}))}}(br(n=tn(n,Bn)),JD(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Te("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Of(this,Dx(this._delegate,e))}catch(t){throw Pi(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ls(this,rb(this._delegate,e))}catch(t){throw Pi(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ki(this,function(n,e){if(n=tn(n,Tf),C_("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Te(pe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Nn(n,null,(t=e,new va(an.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Pi(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(n,e,t){n=tn(n,Bn);const r=Object.assign(Object.assign({},nM),void 0);return function(a){if(a.maxAttempts<1)throw new Te(pe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(a,l,h){const y=new zr;return a.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){const w=yield function(n){return Af(n).then(e=>e.datastore)}(a);new Rx(a.asyncQueue,w,h,l,y).run()})),y.promise}(br(n),a=>e(new rM(n,a)),r)}(this._delegate,t=>e(new vT(this,t)))}batch(){return br(this._delegate),new ET(new gT(this._delegate,e=>hd(this._delegate,e)))}loadBundle(e){return function(n,e){const t=br(n=tn(n,Bn)),r=new XD;return function(n,e,t,r){const a=function(l,h){let y;return y="string"==typeof l?(new TextEncoder).encode(l):l,w=function(w,D){if(w instanceof Uint8Array)return GD(w,D);if(w instanceof ArrayBuffer)return GD(new Uint8Array(w),D);if(w instanceof ReadableStream)return w.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(y),new Ax(w,h);var w}(t,vf(e));n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){!function(n,e,t){const r=We(n);var a;(a=(0,_e.Z)(function*(l,h,y){try{const w=yield h.getMetadata();if(yield function(z,J){const fe=We(z),Le=Zr(J.createTime);return fe.persistence.runTransaction("hasNewerBundle","readonly",Ve=>fe.Ns.getBundleMetadata(Ve,J.id)).then(Ve=>!!Ve&&Ve.createTime.compareTo(Le)>=0)}(l.localStore,w))return yield h.close(),y._completeWith({taskState:"Success",documentsLoaded:(z=w).totalDocuments,bytesLoaded:z.totalBytes,totalDocuments:z.totalDocuments,totalBytes:z.totalBytes}),Promise.resolve(new Set);y._updateProgress(bD(w));const D=new wR(w,l.localStore,h.It);let x=yield h.mc();for(;x;){const z=yield D.Fu(x);z&&y._updateProgress(z),x=yield h.mc()}const P=yield D.complete();return yield Mc(l,P.Lu,void 0),yield function(z,J){const fe=We(z);return fe.persistence.runTransaction("Save bundle","readwrite",Le=>fe.Ns.saveBundleMetadata(Le,J))}(l.localStore,w),y._completeWith(P.progress),Promise.resolve(P.Bu)}catch(w){return Ml("SyncEngine",`Loading bundle failed with ${w}`),y._failWith(w),Promise.resolve(new Set)}var z}),function(l,h,y){return a.apply(this,arguments)})(r,e,t).then(a=>{r.sharedClientState.notifyBundleLoaded(a)})}(yield KD(n),a,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function(n,e){return function(n,e){return n.asyncQueue.enqueue((0,_e.Z)(function*(){return function(t,r){const a=We(t);return a.persistence.runTransaction("Get named query","readonly",l=>a.Ns.getNamedQuery(l,r))}(yield x_(n),e)}))}(br(n=tn(n,Bn)),e).then(t=>t?new Nn(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ki(this,t):null)}}class cu extends U_{constructor(e){super(),this.firestore=e}convertBytes(e){return new Dg(new Ta(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ls.forKey(t,this.firestore,null)}}class vT{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new cu(e)}get(e){const t=pd(e);return this._delegate.get(t).then(r=>new Sg(this._firestore,new fo(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const a=pd(e);return r?($_("Transaction.set",r),this._delegate.set(a,t,r)):this._delegate.set(a,t),this}update(e,t,r,...a){const l=pd(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,r,...a),this}delete(e){const t=pd(e);return this._delegate.delete(t),this}}class ET{constructor(e){this._delegate=e}set(e,t,r){const a=pd(e);return r?($_("WriteBatch.set",r),this._delegate.set(a,t,r)):this._delegate.set(a,t),this}update(e,t,r,...a){const l=pd(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,r,...a),this}delete(e){const t=pd(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class kc{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Nc(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new xg(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=kc.INSTANCES;let a=r.get(e);a||(a=new WeakMap,r.set(e,a));let l=a.get(t);return l||(l=new kc(e,new cu(e),t),a.set(t,l)),l}}kc.INSTANCES=new WeakMap;class Ls{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new cu(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Te("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ls(t,new Un(t._delegate,r,new je(e)))}static forKey(e,t,r){return new Ls(t,new Un(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Of(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Of(this.firestore,Dx(this._delegate,e))}catch(t){throw Pi(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,cn.m9)(e))instanceof Un&&HD(this._delegate,e)}set(e,t){t=$_("DocumentReference.set",t);try{return t?Ni(this._delegate,e,t):Ni(this._delegate,e)}catch(r){throw Pi(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?xf(this._delegate,e):xf(this._delegate,e,t,...r)}catch(a){throw Pi(a,"updateDoc()","DocumentReference.update()")}}delete(){return function(n){return hd(tn(n.firestore,Bn),[new ef(n._key,Vn.none())])}(this._delegate)}onSnapshot(...e){const t=Ab(e),r=H_(e,a=>new Sg(this.firestore,new fo(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)));return Cg(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=tn(n,Un);const e=tn(n.firestore,Bn),t=br(e),r=new au(e);return function(n,e){const t=new zr;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return(r=(0,_e.Z)(function*(a,l,h){try{const y=yield function(w,D){const x=We(w);return x.persistence.runTransaction("read document","readonly",P=>x.localDocuments.getDocument(P,D))}(a,l);y.isFoundDocument()?h.resolve(y):y.isNoDocument()?h.resolve(null):h.reject(new Te(pe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(y){const w=fg(y,`Failed to get document '${l} from cache`);h.reject(w)}}),function(a,l,h){return r.apply(this,arguments)})(yield x_(n),e,t);var r})),t.promise}(t,n._key).then(a=>new fo(e,r,n._key,a,new su(null!==a&&a.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=tn(n,Un);const e=tn(n.firestore,Bn);return YD(br(e),n._key,{source:"server"}).then(t=>Mf(e,n,t))}(this._delegate):function(n){n=tn(n,Un);const e=tn(n.firestore,Bn);return YD(br(e),n._key).then(t=>Mf(e,n,t))}(this._delegate),t.then(r=>new Sg(this.firestore,new fo(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ls(this.firestore,this._delegate.withConverter(e?kc.getInstance(this.firestore,e):null))}}function Pi(n,e,t){return n.message=n.message.replace(e,t),n}function Ab(n){for(const e of n)if("object"==typeof e&&!Go(e))return e;return{}}function H_(n,e){var t,r;let a;return a=Go(n[0])?n[0]:Go(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:l=>{a.next&&a.next(e(l))},error:null===(t=a.error)||void 0===t?void 0:t.bind(a),complete:null===(r=a.complete)||void 0===r?void 0:r.bind(a)}}class Sg{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ls(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return fT(this._delegate,e._delegate)}}class xg extends Sg{data(e){const t=this._delegate.data(e);return function(n,e){n||tt()}(void 0!==t),t}}class ki{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new cu(e)}where(e,t,r){try{return new ki(this.firestore,Oc(this._delegate,function(n,e,t){const r=e,a=Rc("where",n);return new FR(a,r,t)}(e,t,r)))}catch(a){throw Pi(a,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ki(this.firestore,Oc(this._delegate,function(n,e="asc"){const t=e,r=Rc("orderBy",n);return new VR(r,t)}(e,t)))}catch(r){throw Pi(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ki(this.firestore,Oc(this._delegate,function(n){return $D("limit",n),new cT("limit",n,"F")}(e)))}catch(t){throw Pi(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ki(this.firestore,Oc(this._delegate,function(n){return $D("limitToLast",n),new cT("limitToLast",n,"L")}(e)))}catch(t){throw Pi(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ki(this.firestore,Oc(this._delegate,function(...n){return new Zx("startAt",n,!0)}(...e)))}catch(t){throw Pi(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ki(this.firestore,Oc(this._delegate,function(...n){return new Zx("startAfter",n,!1)}(...e)))}catch(t){throw Pi(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ki(this.firestore,Oc(this._delegate,function(...n){return new lT("endBefore",n,!1)}(...e)))}catch(t){throw Pi(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ki(this.firestore,Oc(this._delegate,function(...n){return new lT("endAt",n,!0)}(...e)))}catch(t){throw Pi(t,"endAt()","Query.endAt()")}}isEqual(e){return ib(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=tn(n,Nn);const e=tn(n.firestore,Bn),t=br(e),r=new au(e);return function(n,e){const t=new zr;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return(r=(0,_e.Z)(function*(a,l,h){try{const y=yield Tc(a,l,!0),w=new hx(l,y.Hi),D=w.Wu(y.documents),x=w.applyChanges(D,!1);h.resolve(x.snapshot)}catch(y){const w=fg(y,`Failed to execute query '${l} against cache`);h.reject(w)}}),function(a,l,h){return r.apply(this,arguments)})(yield x_(n),e,t);var r})),t.promise}(t,n._query).then(a=>new ou(e,r,n,a))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=tn(n,Nn);const e=tn(n.firestore,Bn),t=br(e),r=new au(e);return Fx(t,n._query,{source:"server"}).then(a=>new ou(e,r,n,a))}(this._delegate):function(n){n=tn(n,Nn);const e=tn(n.firestore,Bn),t=br(e),r=new au(e);return _b(n._query),Fx(t,n._query).then(a=>new ou(e,r,n,a))}(this._delegate),t.then(r=>new Mg(this.firestore,new ou(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=Ab(e),r=H_(e,a=>new Mg(this.firestore,new ou(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)));return Cg(this._delegate,t,r)}withConverter(e){return new ki(this.firestore,this._delegate.withConverter(e?kc.getInstance(this.firestore,e):null))}}class fd{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new xg(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Mg{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ki(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new xg(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new fd(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new xg(this._firestore,r))})}isEqual(e){return fT(this._delegate,e._delegate)}}class Of extends ki{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ls(this.firestore,e):null}doc(e){try{return new Ls(this.firestore,void 0===e?rb(this._delegate):rb(this._delegate,e))}catch(t){throw Pi(t,"doc()","CollectionReference.doc()")}}add(e){return function(n,e){const t=tn(n.firestore,Bn),r=rb(n),a=Sf(n.converter,e);return hd(t,[k_(ld(n.firestore),"addDoc",r._key,a,null!==n.converter,{}).toMutation(r._key,Vn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Ls(this.firestore,t))}isEqual(e){return HD(this._delegate,e._delegate)}withConverter(e){return new Of(this.firestore,this._delegate.withConverter(e?kc.getInstance(this.firestore,e):null))}}function pd(n){return tn(n,Un)}class bT{constructor(...e){this._delegate=new iu(...e)}static documentId(){return new bT(vr.keyField().canonicalString())}isEqual(e){return(e=(0,cn.m9)(e))instanceof iu&&this._delegate._internalPath.isEqual(e._internalPath)}}class Nf{constructor(e){this._delegate=e}static serverTimestamp(){const e=new hb("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new Nf(e)}static delete(){const e=new F_("deleteField");return e._methodName="FieldValue.delete",new Nf(e)}static arrayUnion(...e){const t=function(...n){return new Hx("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Nf(t)}static arrayRemove(...e){const t=function(...n){return new PR("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Nf(t)}static increment(e){const t=function(n){return new kR("increment",n)}(e);return t._methodName="FieldValue.increment",new Nf(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const GR={Firestore:Ag,GeoPoint:N_,Timestamp:Ln,Blob:Dg,Transaction:vT,WriteBatch:ET,DocumentReference:Ls,DocumentSnapshot:Sg,Query:ki,QueryDocumentSnapshot:xg,QuerySnapshot:Mg,CollectionReference:Of,FieldPath:bT,FieldValue:Nf,setLogLevel:function(n){!function(n){lc.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function dM(n,e){return function(n,e=ph.z){return new ei.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function wT(n,e){return dM(n,e).pipe((0,bt.U)(t=>({payload:t,type:"query"})))}function Sb(n,e){return wT(n,e).pipe(Ld(void 0),km(),(0,bt.U)(([t,r])=>{const a=r.payload.docChanges(),l=a.map(h=>({type:h.type,payload:h}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((h,y)=>{const w=a.find(x=>x.doc.ref.isEqual(h.ref)),D=null==t?void 0:t.payload.docs.find(x=>x.ref.isEqual(h.ref));w&&JSON.stringify(w.doc.metadata)===JSON.stringify(h.metadata)||!w&&D&&JSON.stringify(D.metadata)===JSON.stringify(h.metadata)||l.push({type:"modified",payload:{oldIndex:y,newIndex:y,type:"modified",doc:h}})}),l}))}function CT(n,e,t){return Sb(n,t).pipe(Qs((r,a)=>function(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return IT(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return IT(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return IT(n,e.oldIndex,1)}return n}(n,r))}),n}(r,a.map(l=>l.payload),e),[]),t=>t.lift(new kA(void 0,void 0)),(0,bt.U)(r=>r.map(a=>({type:a.type,payload:a}))))}function IT(n,e,t,...r){const a=n.slice();return a.splice(e,t,...r),a}function hM(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function(n){(function(n,e){n.INTERNAL.registerComponent(new _m.wA("firestore-compat",t=>((e,t)=>new Ag(e,t,new Rf))(t.getProvider("app-compat").getImmediate(),t.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},GR)))})(n),n.registerVersion("@firebase/firestore-compat","0.2.1")}(LA.Z);class i{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Sb(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,bt.U)(r=>r.filter(a=>e.indexOf(a.type)>-1)))),t.pipe(Ld(void 0),km(),Js(([r,a])=>a.length>0||!r),(0,bt.U)(([r,a])=>a),Ai.iC)}auditTrail(e){return this.stateChanges(e).pipe(Qs((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=hM(e);return CT(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ai.iC)}valueChanges(e={}){return wT(this.query,this.afs.schedulers.outsideAngular).pipe((0,bt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Ai.iC)}get(e){return(0,_n.D)(this.query.get(e)).pipe(Ai.iC)}add(e){return this.ref.add(e)}doc(e){return new s(this.ref.doc(e),this.afs)}}class s{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:a,query:l}=_(r,t);return new i(a,l,this.afs)}snapshotChanges(){return function(n,e){return dM(n,e).pipe(Ld(void 0),km(),(0,bt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Ai.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,bt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,_n.D)(this.ref.get(e)).pipe(Ai.iC)}}class o{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Sb(this.query,this.afs.schedulers.outsideAngular).pipe((0,bt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Js(t=>t.length>0),Ai.iC):Sb(this.query,this.afs.schedulers.outsideAngular).pipe(Ai.iC)}auditTrail(e){return this.stateChanges(e).pipe(Qs((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=hM(e);return CT(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ai.iC)}valueChanges(e={}){return wT(this.query,this.afs.schedulers.outsideAngular).pipe((0,bt.U)(r=>r.payload.docs.map(a=>e.idField?Object.assign({[e.idField]:a.id},a.data()):a.data())),Ai.iC)}get(e){return(0,_n.D)(this.query.get(e)).pipe(Ai.iC)}}const u=new p.OlP("angularfire2.enableFirestorePersistence"),c=new p.OlP("angularfire2.firestore.persistenceSettings"),d=new p.OlP("angularfire2.firestore.settings"),g=new p.OlP("angularfire2.firestore.use-emulator");function _(n,e=(t=>t)){return{query:e(n),ref:n}}let b=(()=>{class n{constructor(t,r,a,l,h,y,w,D,x,P,z,J,fe,Le,Ve,Pt,$t){this.schedulers=w;const xt=(0,Ms.on)(t,y,r),kt=x;P&&Bw(xt,y,z,fe,Le,Ve,J,Pt),[this.firestore,this.persistenceEnabled$]=(0,Ms.cc)(`${xt.name}.firestore`,"AngularFirestore",xt.name,()=>{const Ht=y.runOutsideAngular(()=>xt.firestore());if(l&&Ht.settings(l),kt&&Ht.useEmulator(...kt),a&&!yo(h)){const Jt=()=>{try{return(0,_n.D)(Ht.enablePersistence(D||void 0).then(()=>!0,()=>!1))}catch(vi){return"undefined"!=typeof console&&console.warn(vi),(0,pt.of)(!1)}};return[Ht,y.runOutsideAngular(Jt)]}return[Ht,(0,pt.of)(!1)]},[l,kt,a])}collection(t,r){let a;a="string"==typeof t?this.firestore.collection(t):t;const{ref:l,query:h}=_(a,r),y=this.schedulers.ngZone.run(()=>l);return new i(y,h,this)}collectionGroup(t,r){const a=r||(h=>h),l=this.firestore.collectionGroup(t);return new o(a(l),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const a=this.schedulers.ngZone.run(()=>r);return new s(a,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Ms.Dh),p.LFG(Ms.xv,8),p.LFG(u,8),p.LFG(d,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(Ai.HU),p.LFG(c,8),p.LFG(g,8),p.LFG(Jv,8),p.LFG(Nm,8),p.LFG(Yv,8),p.LFG(Vw,8),p.LFG(Qv,8),p.LFG(Uw,8),p.LFG(Pm,8),p.LFG(_p,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),A=(()=>{class n{constructor(t,r,a){this.fireauth=t,this.router=r,this.fireService=a}login(t){this.fireauth.signInWithEmailAndPassword(t.email,t.password).then(r=>{var a;localStorage.setItem("token","true"),localStorage.setItem("id",null===(a=r.user)||void 0===a?void 0:a.multiFactor.user.uid),console.log(r),this.router.navigate(["/chatbox"])},r=>{alert("Something went wrong"),this.router.navigate(["/login"])})}register(t){this.fireauth.createUserWithEmailAndPassword(t.email,t.password).then(r=>{alert("Registration Sucessful"),this.router.navigate(["/login"])},r=>{alert(r.message),this.router.navigate(["/register"])})}logout(){this.fireauth.signOut().then(()=>{localStorage.removeItem("token"),this.router.navigate(["/login"])},t=>{alert(t.message)})}forgotPassword(t){this.fireauth.sendPasswordResetEmail(t.email).then(()=>{console.log(t.email)},r=>{alert("Something went wrong")})}signInWithGoogle(){return this.fireauth.signInWithPopup(new cw.Q).then(t=>{var r;this.router.navigate(["/chatbox"]),localStorage.setItem("token",JSON.stringify(null===(r=t.user)||void 0===r?void 0:r.uid))})}getMessages(){return this.fireService.collection("User-chat-messages").snapshotChanges()}addMessage(t){return this.fireService.collection("User-chat-messages").add(t)}deleteMessage(t){this.fireService.doc("User-chat-messages/"+t).delete()}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Jv),p.LFG(si),p.LFG(b))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var O=L(1555);function q(n,e){return new ei.y(t=>{const r=n.length;if(0===r)return void t.complete();const a=new Array(r);let l=0,h=0;for(let y=0;y<r;y++){const w=(0,_n.D)(n[y]);let D=!1;t.add(w.subscribe({next:x=>{D||(D=!0,h++),a[y]=x},error:x=>t.error(x),complete:()=>{l++,(l===r||!D)&&(h===r&&t.next(e?e.reduce((x,P,z)=>(x[P]=a[z],x),{}):a),t.complete())}}))}})}let Y=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=a=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.Qsj),p.Y36(p.SBq))},n.\u0275dir=p.lG2({type:n}),n})(),le=(()=>{class n extends Y{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=p.n5z(n)))(r||n)}}(),n.\u0275dir=p.lG2({type:n,features:[p.qOj]}),n})();const ee=new p.OlP("NgValueAccessor"),at={provide:ee,useExisting:(0,p.Gpc)(()=>jn),multi:!0},Xt=new p.OlP("CompositionEventMode");let jn=(()=>{class n extends Y{constructor(t,r,a){super(t,r),this._compositionMode=a,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const n=k()?k().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.Qsj),p.Y36(p.SBq),p.Y36(Xt,8))},n.\u0275dir=p.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&p.NdJ("input",function(l){return r._handleInput(l.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(l){return r._compositionEnd(l.target.value)})},features:[p._Bn([at]),p.qOj]}),n})();function Kr(n){return null==n||0===n.length}function Pf(n){return null!=n&&"number"==typeof n.length}const wr=new p.OlP("NgValidators"),Vs=new p.OlP("NgAsyncValidators"),kf=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class qo{static min(e){return function(n){return e=>{if(Kr(e.value)||Kr(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function(n){return e=>{if(Kr(e.value)||Kr(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function(n){return Kr(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function(n){return Kr(n.value)||kf.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function(n){return e=>Kr(e.value)||!Pf(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function(n){return e=>Pf(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function(n){if(!n)return Ff;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Kr(r.value))return null;const a=r.value;return e.test(a)?null:{pattern:{requiredPattern:t,actualValue:a}}}}(e)}static nullValidator(e){return null}static compose(e){return iO(e)}static composeAsync(e){return sO(e)}}function Ff(n){return null}function XR(n){return null!=n}function eO(n){const e=(0,p.QGY)(n)?(0,_n.D)(n):n;return(0,p.CqO)(e),e}function tO(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function nO(n,e){return e.map(t=>t(n))}function rO(n){return n.map(e=>function(n){return!n.validate}(e)?e:t=>e.validate(t))}function iO(n){if(!n)return null;const e=n.filter(XR);return 0==e.length?null:function(t){return tO(nO(t,e))}}function fM(n){return null!=n?iO(rO(n)):null}function sO(n){if(!n)return null;const e=n.filter(XR);return 0==e.length?null:function(t){return function(...n){if(1===n.length){const e=n[0];if((0,To.k)(e))return q(e,null);if((0,O.K)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return q(t.map(r=>e[r]),t)}}if("function"==typeof n[n.length-1]){const e=n.pop();return q(n=1===n.length&&(0,To.k)(n[0])?n[0]:n,null).pipe((0,bt.U)(t=>e(...t)))}return q(n,null)}(nO(t,e).map(eO)).pipe((0,bt.U)(tO))}}function pM(n){return null!=n?sO(rO(n)):null}function oO(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function aO(n){return n._rawValidators}function uO(n){return n._rawAsyncValidators}function gM(n){return n?Array.isArray(n)?n:[n]:[]}function DT(n,e){return Array.isArray(n)?n.includes(e):n===e}function cO(n,e){const t=gM(e);return gM(n).forEach(a=>{DT(t,a)||t.push(a)}),t}function lO(n,e){return gM(e).filter(t=>!DT(n,t))}let dO=(()=>{class n{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=fM(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=pM(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,r){return!!this.control&&this.control.hasError(t,r)}getError(t,r){return this.control?this.control.getError(t,r):null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=p.lG2({type:n}),n})(),Us=(()=>{class n extends dO{get formDirective(){return null}get path(){return null}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=p.n5z(n)))(r||n)}}(),n.\u0275dir=p.lG2({type:n,features:[p.qOj]}),n})();class Lf extends dO{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class hO{constructor(e){this._cd=e}is(e){var t,r,a;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(a=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===a?void 0:a[e])}}let xb=(()=>{class n extends hO{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Lf,2))},n.\u0275dir=p.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&p.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[p.qOj]}),n})(),Mb=(()=>{class n extends hO{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Us,10))},n.\u0275dir=p.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&p.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[p.qOj]}),n})();function AT(n,e){return[...e.path,n]}function Rb(n,e){_M(n,e),e.valueAccessor.writeValue(n.value),function(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&fO(n,e)})}(n,e),function(n,e){const t=(r,a)=>{e.valueAccessor.writeValue(r),a&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&fO(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function ST(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),MT(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function xT(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function _M(n,e){const t=aO(n);null!==e.validator?n.setValidators(oO(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=uO(n);null!==e.asyncValidator?n.setAsyncValidators(oO(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const a=()=>n.updateValueAndValidity();xT(e._rawValidators,a),xT(e._rawAsyncValidators,a)}function MT(n,e){let t=!1;if(null!==n){if(null!==e.validator){const a=aO(n);if(Array.isArray(a)&&a.length>0){const l=a.filter(h=>h!==e.validator);l.length!==a.length&&(t=!0,n.setValidators(l))}}if(null!==e.asyncValidator){const a=uO(n);if(Array.isArray(a)&&a.length>0){const l=a.filter(h=>h!==e.asyncValidator);l.length!==a.length&&(t=!0,n.setAsyncValidators(l))}}}const r=()=>{};return xT(e._rawValidators,r),xT(e._rawAsyncValidators,r),t}function fO(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function pO(n,e){_M(n,e)}function vM(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function gO(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function EM(n,e){if(!e)return null;let t,r,a;return Array.isArray(e),e.forEach(l=>{l.constructor===jn?t=l:function(n){return Object.getPrototypeOf(n.constructor)===le}(l)?r=l:a=l}),a||r||t||null}function RT(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Ob="VALID",OT="INVALID",Z_="PENDING",Nb="DISABLED";function bM(n){return(CM(n)?n.validators:n)||null}function mO(n){return Array.isArray(n)?fM(n):n||null}function wM(n,e){return(CM(e)?e.asyncValidators:n)||null}function yO(n){return Array.isArray(n)?pM(n):n||null}function CM(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class IM{constructor(e,t){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=mO(this._rawValidators),this._composedAsyncValidatorFn=yO(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Ob}get invalid(){return this.status===OT}get pending(){return this.status==Z_}get disabled(){return this.status===Nb}get enabled(){return this.status!==Nb}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=mO(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=yO(e)}addValidators(e){this.setValidators(cO(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(cO(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(lO(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(lO(e,this._rawAsyncValidators))}hasValidator(e){return DT(this._rawValidators,e)}hasAsyncValidator(e){return DT(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Z_,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Nb,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Ob,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ob||this.status===Z_)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Nb:Ob}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Z_,this._hasOwnPendingAsyncValidator=!0;const t=eO(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(a=>{r=r instanceof K_?r.controls.hasOwnProperty(a)?r.controls[a]:null:r instanceof lN&&r.at(a)||null}),r}(this,e)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new p.vpe,this.statusChanges=new p.vpe}_calculateStatus(){return this._allControlsDisabled()?Nb:this.errors?OT:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Z_)?Z_:this._anyControlsHaveStatus(OT)?OT:Ob}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){CM(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Fc extends IM{constructor(e=null,t,r){super(bM(t),wM(r,t)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){RT(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){RT(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class K_ extends IM{constructor(e,t,r){super(bM(t),wM(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(r=>{this._throwIfControlMissing(r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,a)=>{r.reset(e[a],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t instanceof Fc?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((a,l)=>{r=t(r,a,l)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control with name: '${r}'.`)})}}class lN extends IM{constructor(e,t,r){super(bM(t),wM(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((r,a)=>{this._throwIfControlMissing(a),this.at(a).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,a)=>{this.at(a)&&this.at(a).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,a)=>{r.reset(e[a],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e instanceof Fc?e.value:e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control at index: ${r}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const dN={provide:Us,useExisting:(0,p.Gpc)(()=>NT)},Pb=(()=>Promise.resolve(null))();let NT=(()=>{class n extends Us{constructor(t,r){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new p.vpe,this.form=new K_({},fM(t),pM(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Pb.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),Rb(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Pb.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),RT(this._directives,t)})}addFormGroup(t){Pb.then(()=>{const r=this._findContainer(t.path),a=new K_({});pO(a,t),r.registerControl(t.name,a),a.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Pb.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Pb.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,gO(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(wr,10),p.Y36(Vs,10))},n.\u0275dir=p.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&p.NdJ("submit",function(l){return r.onSubmit(l)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[p._Bn([dN]),p.qOj]}),n})();const fN={provide:Lf,useExisting:(0,p.Gpc)(()=>DM)},EO=(()=>Promise.resolve(null))();let DM=(()=>{class n extends Lf{constructor(t,r,a,l){super(),this.control=new Fc,this._registered=!1,this.update=new p.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(a),this.valueAccessor=EM(0,l)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),vM(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?AT(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Rb(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){EO.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const r=t.isDisabled.currentValue,a=""===r||r&&"false"!==r;EO.then(()=>{a&&!this.control.disabled?this.control.disable():!a&&this.control.disabled&&this.control.enable()})}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Us,9),p.Y36(wr,10),p.Y36(Vs,10),p.Y36(ee,10))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[p._Bn([fN]),p.qOj,p.TTD]}),n})(),kb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=p.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),wO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})();const TM=new p.OlP("NgModelWithFormControlWarning"),vN={provide:Us,useExisting:(0,p.Gpc)(()=>Y_)};let Y_=(()=>{class n extends Us{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new p.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(MT(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Rb(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){ST(t.control||null,t,!1),RT(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,gO(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,a=this.form.get(t.path);r!==a&&(ST(r||null,t),a instanceof Fc&&(Rb(a,t),t.control=a))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);pO(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function(n,e){return MT(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){_M(this.form,this),this._oldForm&&MT(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(wr,10),p.Y36(Vs,10))},n.\u0275dir=p.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&p.NdJ("submit",function(l){return r.onSubmit(l)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[p._Bn([vN]),p.qOj,p.TTD]}),n})();const wN={provide:Lf,useExisting:(0,p.Gpc)(()=>Fb)};let Fb=(()=>{class n extends Lf{constructor(t,r,a,l,h){super(),this._ngModelWarningConfig=h,this._added=!1,this.update=new p.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(a),this.valueAccessor=EM(0,l)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),vM(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return AT(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Us,13),p.Y36(wr,10),p.Y36(Vs,10),p.Y36(ee,10),p.Y36(TM,8))},n.\u0275dir=p.lG2({type:n,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[p._Bn([wN]),p.qOj,p.TTD]}),n._ngModelWarningSentOnce=!1,n})(),VO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[[wO]]}),n})(),LN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[VO]}),n})(),VN=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:TM,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[VO]}),n})();const UO=function(n){return{"flex-direction":n}};function UN(n,e){if(1&n){const t=p.EpF();p.TgZ(0,"div",14),p.TgZ(1,"div",15),p._UZ(2,"img",16),p._uU(3),p.qZA(),p.TgZ(4,"div",17),p.TgZ(5,"span"),p._uU(6),p.ALo(7,"date"),p.qZA(),p.TgZ(8,"button",12),p.NdJ("click",function(){const l=p.CHM(t).$implicit;return p.oxw().deleteTheMsg(l.id)}),p._UZ(9,"img",18),p.qZA(),p.qZA(),p.qZA()}if(2&n){const t=e.$implicit,r=p.oxw();p.Q6J("ngStyle",p.VKq(8,UO,(null==t?null:t.userId)!==r.userId?"row-reverse":"row")),p.xp6(1),p.Q6J("ngStyle",p.VKq(10,UO,(null==t?null:t.userId)!==r.userId?"row-reverse":"row")),p.xp6(1),p.Q6J("src",t.image,p.LSH),p.xp6(1),p.hij(" ",t.message," "),p.xp6(3),p.Oqu(p.xi3(7,5,t.date,"h:mm"))}}let BN=(()=>{class n{constructor(t,r){this.router=t,this.authService=r,this.defaultId=1,this.chatList=[]}ngOnInit(){this.allData=this.chatList,this.authService.getMessages().subscribe(t=>{this.chatList=t.map(r=>(r.payload.doc.data().date=new Date(r.payload.doc.data().date),Object.assign(Object.assign({},r.payload.doc.data()),{id:r.payload.doc.id}))),this.chatList.sort((r,a)=>r.msgNo-a.msgNo),console.log(this.chatList)}),this.userId=localStorage.getItem("id")}addInTheList(t){const r={userId:this.userId,message:t.value,date:(new Date).toString(),image:"47m2SCcJ9UZp5rtrwSA1WScSga53"==this.userId?"assets/unnamed.gif":"assets/default-user.png",msgNo:this.chatList.length?this.chatList.length+1:1};console.log(r),this.authService.addMessage(r).then(a=>{this.chatInput=""}).catch(a=>{console.log(a)})}showUserDetails(t){this.router.navigate(["/userDetails/"+t.id],{queryParams:{data:JSON.stringify(t)}})}deleteTheMsg(t){this.authService.deleteMessage(t)}search(t){this.value=t.value,this.chatList=this.allData.filter(r=>r.message.toLowerCase().startsWith(this.value))}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(si),p.Y36(A))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-chatbox"]],decls:16,vars:2,consts:[[1,"main-container"],[1,"chatbox"],[1,"chat-box-header"],[1,"search-bar"],["type","text","placeholder","Find by name",3,"keyup"],["searchedValue",""],[1,"chat-users"],["class","users",3,"ngStyle",4,"ngFor","ngForOf"],[1,"chats-text-area"],["on","","cols","50","rows","20",3,"ngModel","keydown.enter","ngModelChange"],["val",""],[1,"add-btn"],[3,"click"],[1,"fa","fa-plus",2,"font-size","25px"],[1,"users",3,"ngStyle"],[1,"image-and-descrp",3,"ngStyle"],["alt","",3,"src"],[1,"delete-btn"],["src","assets/cancel.png","alt",""]],template:function(t,r){if(1&t){const a=p.EpF();p.TgZ(0,"div",0),p.TgZ(1,"div",1),p.TgZ(2,"div",2),p.TgZ(3,"span"),p._uU(4,"Chats"),p.qZA(),p.qZA(),p.TgZ(5,"div",3),p.TgZ(6,"input",4,5),p.NdJ("keyup",function(){p.CHM(a);const h=p.MAs(7);return r.search(h)}),p.qZA(),p.qZA(),p.TgZ(8,"div",6),p.YNc(9,UN,10,12,"div",7),p.qZA(),p.TgZ(10,"div",8),p.TgZ(11,"textarea",9,10),p.NdJ("keydown.enter",function(){p.CHM(a);const h=p.MAs(12);return r.addInTheList(h)})("ngModelChange",function(h){return r.chatInput=h}),p.qZA(),p.TgZ(13,"div",11),p.TgZ(14,"button",12),p.NdJ("click",function(){p.CHM(a);const h=p.MAs(12);return r.addInTheList(h)}),p._UZ(15,"i",13),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA()}2&t&&(p.xp6(9),p.Q6J("ngForOf",r.chatList),p.xp6(2),p.Q6J("ngModel",r.chatInput))},directives:[ts,jn,xb,DM,sr],pipes:[Uc],styles:['.main-container[_ngcontent-%COMP%]{height:100vh;width:100%;display:flex;justify-content:center;align-items:center;background:linear-gradient(135deg,#f9f9f9 0%,#ffffff 8%,#ffffff 8%,#ffffff 8%,#ffffff 8%,#ffffff 9%,#ffffff 9%,#ffffff 10%,#ffffff 48%,#ffffff 48%,#ffffff 50%,#fde3f3 50%,#fde3f3 50%,#fde3f3 50%,#ffffff 50%,#fac2e5 50%,#fac2e5 50%,#fac2e5 50%,#fac2e5 50%,#fac2e5 50%,#fac2e5 50%,#fac2e5 50%,#fac2e5 50%,#fac2e5 50%,#fac2e5 50%,#fac2e5 51%,#fde3f3 51%,#fde3f3 51%,#fde3f3 51%,#fde3f3 51%,#fde3f3 51%,#fde3f3 51%,#fde3f3 51%,#fde3f3 51%,#fde3f3 51%,#fde3f3 51%,#fde3f3 51%,#fde3f3 51%,#fde3f3 51%,#fde3f3 51%,#fac2e5 51%,#fac2e5 51%,#fac2e5 51%,#fac2e5 51%,#fac2e5 51%,#fac2e5 51%,#fac2e5 51%,#fac2e5 51%,#fac2e5 51%,#fac2e5 51%,#fac2e5 51%,#fac2e5 54%,#fac2e5 55%,#fde3f3 55%,#ffffff 55%,#ffffff 55%,#fac2e5 55%,#fac2e5 55%,#fac2e5 55%,#fac2e5 55%,#fac2e5 55%,#fac2e5 55%,#fac2e5 55%,#fac2e5 55%,#fac2e5 55%,#fac2e5 56%,#fac2e5 57%,#fde3f3 57%,#fdf9f9 57%,#fdf9f9 57%,#fac2e5 57%,#fac2e5 57%,#fac2e5 57%,#fac2e5 57%,#fac2e5 57%,#fac2e5 57%,#fac2e5 57%,#fde3f3 57%,#fac2e5 57%,#fac2e5 57%,#fac2e5 57%,#fac2e5 57%,#fac2e5 57%);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#f9f9f9",endColorstr="#fac2e5",GradientType=1)}.main-container[_ngcontent-%COMP%]   .chatbox[_ngcontent-%COMP%]{height:600px;width:345px;border:3px solid #fff;border-radius:15px;background-color:#fff;position:relative}.main-container[_ngcontent-%COMP%]   .chatbox[_ngcontent-%COMP%]   .chat-box-header[_ngcontent-%COMP%]{height:68px;width:341px;background-color:#cf84ce;display:flex;justify-content:center;align-items:center;font-size:24px;font-weight:700;color:#fff;border:none;border-top-left-radius:15px;border-top-right-radius:15px}.main-container[_ngcontent-%COMP%]   .chatbox[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]{position:absolute;top:55px}.main-container[_ngcontent-%COMP%]   .chatbox[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:36px;width:342px;border-radius:29px;border:1px solid #fff8f8;box-shadow:1px 2px #ededed;outline:none}.main-container[_ngcontent-%COMP%]   .chatbox[_ngcontent-%COMP%]   .chat-users[_ngcontent-%COMP%]{height:84%;display:flex;flex-direction:column;padding:34px 15px 15px;overflow:auto}.main-container[_ngcontent-%COMP%]   .chatbox[_ngcontent-%COMP%]   .chat-users[_ngcontent-%COMP%]   .users[_ngcontent-%COMP%]{font-size:20px;font-weight:700;height:77px;width:100%;border-bottom:1px solid #81797926;margin-bottom:12px;display:flex;align-items:center;justify-content:space-between}.main-container[_ngcontent-%COMP%]   .chatbox[_ngcontent-%COMP%]   .chat-users[_ngcontent-%COMP%]   .users[_ngcontent-%COMP%]   .image-and-descrp[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;word-break:break-all}.main-container[_ngcontent-%COMP%]   .chatbox[_ngcontent-%COMP%]   .chat-users[_ngcontent-%COMP%]   .users[_ngcontent-%COMP%]   .image-and-descrp[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:50px;width:50px;border-radius:50%;margin:0 18px}.main-container[_ngcontent-%COMP%]   .chatbox[_ngcontent-%COMP%]   .chat-users[_ngcontent-%COMP%]   .users[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:18px}.main-container[_ngcontent-%COMP%]   .chatbox[_ngcontent-%COMP%]   .chat-users[_ngcontent-%COMP%]   .users[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:26px;width:28px;border-radius:50%;border:none;cursor:pointer;display:none}.main-container[_ngcontent-%COMP%]   .chatbox[_ngcontent-%COMP%]   .chat-users[_ngcontent-%COMP%]   .users[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:26px;width:28px;border-radius:50%;border:none}.main-container[_ngcontent-%COMP%]   .chatbox[_ngcontent-%COMP%]   .chat-users[_ngcontent-%COMP%]   .users[_ngcontent-%COMP%]:hover{background-color:#08000808;cursor:pointer}.main-container[_ngcontent-%COMP%]   .chatbox[_ngcontent-%COMP%]   .chat-users[_ngcontent-%COMP%]   .users[_ngcontent-%COMP%]:hover   .delete-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:block}.main-container[_ngcontent-%COMP%]   .chatbox[_ngcontent-%COMP%]   .chat-users[_ngcontent-%COMP%]   .users[_ngcontent-%COMP%]:hover   .delete-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}.main-container[_ngcontent-%COMP%]   .chatbox[_ngcontent-%COMP%]   .chats-text-area[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:end;margin-top:1px;position:relative;margin-left:-3px}.main-container[_ngcontent-%COMP%]   .chatbox[_ngcontent-%COMP%]   .chats-text-area[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{height:36px;width:346px;font-size:20px;font-weight:700;padding-top:4px;padding-left:7px;padding-right:44px;border:1px solid #bdbdbd;border-bottom-left-radius:15px;border-bottom-right-radius:15px;resize:none;outline:none}.main-container[_ngcontent-%COMP%]   .chatbox[_ngcontent-%COMP%]   .chats-text-area[_ngcontent-%COMP%]   .add-btn[_ngcontent-%COMP%]{position:absolute;right:-4px;top:1px;border-bottom-right-radius:15px}.main-container[_ngcontent-%COMP%]   .chatbox[_ngcontent-%COMP%]   .chats-text-area[_ngcontent-%COMP%]   .add-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:34px;width:49px;border:none;cursor:pointer;background-color:#cf84ce;border-bottom-right-radius:15px}.main-container[_ngcontent-%COMP%]   .chatbox[_ngcontent-%COMP%]   .chats-text-area[_ngcontent-%COMP%]   .add-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{filter:invert(1)}[_ngcontent-%COMP%]::placeholder{color:#bbb8b8;font-size:14px;font-weight:700;padding-left:17px}']}),n})(),jN=(()=>{class n{constructor(t,r){this.route=t,this.firstRoute=r}ngOnInit(){this.route.queryParams.subscribe(t=>{this.user=JSON.parse(t.data)})}backToTheMainPage(){this.firstRoute.navigate(["/"])}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(ca),p.Y36(si))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-details"]],decls:9,vars:2,consts:[[1,"main-container"],[1,"details-container"],[1,"user-img"],[3,"src"],[1,"user-name"],[1,"delete-btn"],[3,"click"]],template:function(t,r){1&t&&(p.TgZ(0,"div",0),p.TgZ(1,"div",1),p.TgZ(2,"div",2),p._UZ(3,"img",3),p.qZA(),p.TgZ(4,"div",4),p._uU(5),p.qZA(),p.TgZ(6,"div",5),p.TgZ(7,"button",6),p.NdJ("click",function(){return r.backToTheMainPage()}),p._uU(8,"Back"),p.qZA(),p.qZA(),p.qZA(),p.qZA()),2&t&&(p.xp6(3),p.Q6J("src",r.user.image,p.LSH),p.xp6(2),p.hij(" ",r.user.name," "))},styles:[".main-container[_ngcontent-%COMP%]{height:100vh;width:100%;display:flex;justify-content:center;align-items:center}.main-container[_ngcontent-%COMP%]   .details-container[_ngcontent-%COMP%]{height:450px;width:345px;border:3px solid gray;border-radius:9px;box-shadow:9px 7px 8px #a7a7a7}.main-container[_ngcontent-%COMP%]   .details-container[_ngcontent-%COMP%]   .user-img[_ngcontent-%COMP%]{height:248px;width:339px;border-radius:50%;display:flex;justify-content:center;align-items:center}.main-container[_ngcontent-%COMP%]   .details-container[_ngcontent-%COMP%]   .user-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:202px;width:196px;border-radius:50%}.main-container[_ngcontent-%COMP%]   .details-container[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]{height:18%;display:flex;align-items:center;justify-content:center}.main-container[_ngcontent-%COMP%]   .details-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:33px;width:80px;border:1px solid #b56a6a26;border-radius:10px}.main-container[_ngcontent-%COMP%]   .details-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#000000ab;color:#fff;transition:.6s ease-in-out;font-weight:700}.main-container[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{height:13%;display:flex;align-items:center;justify-content:center;font-size:38px;font-weight:700}"]}),n})(),$N=(()=>{class n{constructor(t){this.auth=t,this.loginForm=new K_({email:new Fc("",[qo.required,qo.email]),password:new Fc("",qo.required)})}ngOnInit(){}forgotPassword(){this.auth.forgotPassword(this.loginForm.value),console.log(this.loginForm.value)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(A))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-forgot-password"]],decls:23,vars:1,consts:[[1,"main-container"],[1,"login-container"],[1,"login-header"],[1,"login-fields"],["action","",3,"formGroup"],[1,"email-container"],["for",""],["type","email","formControlName","email",1,"form-control"],[1,"login-btn"],[3,"click"],[1,"need-account"],["href","#"],[1,"forgot-password"],[1,"Register"],["href","/login"]],template:function(t,r){1&t&&(p.TgZ(0,"div",0),p.TgZ(1,"div",1),p.TgZ(2,"div",2),p.TgZ(3,"span"),p._uU(4,"Forgot password"),p.qZA(),p.qZA(),p.TgZ(5,"div",3),p.TgZ(6,"form",4),p.TgZ(7,"div",5),p.TgZ(8,"label",6),p._uU(9,"Email"),p.qZA(),p._UZ(10,"input",7),p.qZA(),p.qZA(),p.qZA(),p.TgZ(11,"div",8),p.TgZ(12,"button",9),p.NdJ("click",function(){return r.forgotPassword()}),p._uU(13,"Send Link"),p.qZA(),p.qZA(),p.TgZ(14,"div",10),p.TgZ(15,"a",11),p._uU(16,"Need Account ?"),p.qZA(),p.qZA(),p.TgZ(17,"div",12),p.TgZ(18,"a",11),p._uU(19,"Forgot Password ?"),p.qZA(),p.qZA(),p.TgZ(20,"div",13),p.TgZ(21,"a",14),p._uU(22,"Login"),p.qZA(),p.qZA(),p.qZA(),p.qZA()),2&t&&(p.xp6(6),p.Q6J("formGroup",r.loginForm))},directives:[kb,Mb,Y_,jn,xb,Fb],styles:['.main-container[_ngcontent-%COMP%]{height:100vh;width:100%;display:flex;justify-content:center;align-items:center;position:relative;background:linear-gradient(135deg,#f9f9f9 0%,#ffffff 8%,#ffffff 8%,#ffffff 8%,#ffffff 8%,#ffffff 9%,#ffffff 9%,#ffffff 10%,#ffffff 48%,#ffffff 48%,#ffffff 50%,#fde3f3 50%,#fde3f3 50%,#fde3f3 50%,#ffffff 50%,#fac2e5 50%,#fac2e5 50%,#fac2e5 50%,#fac2e5 50%,#fac2e5 50%,#fac2e5 50%,#fac2e5 50%,#fac2e5 50%,#fac2e5 50%,#fac2e5 50%,#fac2e5 51%,#fde3f3 51%,#fde3f3 51%,#fde3f3 51%,#fde3f3 51%,#fde3f3 51%,#fde3f3 51%,#fde3f3 51%,#fde3f3 51%,#fde3f3 51%,#fde3f3 51%,#fde3f3 51%,#fde3f3 51%,#fde3f3 51%,#fde3f3 51%,#fac2e5 51%,#fac2e5 51%,#fac2e5 51%,#fac2e5 51%,#fac2e5 51%,#fac2e5 51%,#fac2e5 51%,#fac2e5 51%,#fac2e5 51%,#fac2e5 51%,#fac2e5 51%,#fac2e5 54%,#fac2e5 55%,#fde3f3 55%,#ffffff 55%,#ffffff 55%,#fac2e5 55%,#fac2e5 55%,#fac2e5 55%,#fac2e5 55%,#fac2e5 55%,#fac2e5 55%,#fac2e5 55%,#fac2e5 55%,#fac2e5 55%,#fac2e5 56%,#fac2e5 57%,#fde3f3 57%,#fdf9f9 57%,#fdf9f9 57%,#fac2e5 57%,#fac2e5 57%,#fac2e5 57%,#fac2e5 57%,#fac2e5 57%,#fac2e5 57%,#fac2e5 57%,#fde3f3 57%,#fac2e5 57%,#fac2e5 57%,#fac2e5 57%,#fac2e5 57%,#fac2e5 57%);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#f9f9f9",endColorstr="#fac2e5",GradientType=1)}.main-container[_ngcontent-%COMP%]   .login-container[_ngcontent-%COMP%]{height:365px;width:428px;border:1px solid #cbc5c5;box-shadow:0 7px 14px gray;padding:31px;position:absolute;background-color:#fff;border-radius:8px}.main-container[_ngcontent-%COMP%]   .login-container[_ngcontent-%COMP%]   .login-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:25px;color:#897a7a}.main-container[_ngcontent-%COMP%]   .login-container[_ngcontent-%COMP%]   .login-fields[_ngcontent-%COMP%]{height:47%;padding:12px 0}.main-container[_ngcontent-%COMP%]   .login-container[_ngcontent-%COMP%]   .login-btn[_ngcontent-%COMP%]{margin:22px 0}.main-container[_ngcontent-%COMP%]   .login-container[_ngcontent-%COMP%]   .login-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:35px;width:74px;border-radius:9px;border:none;cursor:pointer;background-color:#587bd5d9;color:#fff}.main-container[_ngcontent-%COMP%]   .login-container[_ngcontent-%COMP%]   .login-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#fff;background-color:#cf84ce;transition:ease .5s}.main-container[_ngcontent-%COMP%]   .login-container[_ngcontent-%COMP%]   .need-account[_ngcontent-%COMP%]{display:inline-block;width:60%;margin-top:6px}.main-container[_ngcontent-%COMP%]   .login-container[_ngcontent-%COMP%]   .need-account[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}.main-container[_ngcontent-%COMP%]   .login-container[_ngcontent-%COMP%]   .forgot-password[_ngcontent-%COMP%]{display:inline-block}.main-container[_ngcontent-%COMP%]   .login-container[_ngcontent-%COMP%]   .forgot-password[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}.main-container[_ngcontent-%COMP%]   .login-container[_ngcontent-%COMP%]   .Register[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:red}']}),n})(),BO=(()=>{class n{constructor(t){this.auth=t,this.loginForm=new K_({email:new Fc("",[qo.required,qo.email]),password:new Fc("",qo.required)})}ngOnInit(){}login(){this.auth.login(this.loginForm.value),this.loginForm.reset()}signInWithGoogle(){this.auth.signInWithGoogle()}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(A))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-login"]],decls:28,vars:1,consts:[[1,"main-container"],[1,"login-container"],[1,"login-header"],[1,"login-fields"],["action","",3,"formGroup"],[1,"email-container"],["for",""],["type","email","formControlName","email",1,"form-control"],[1,"password-container"],["type","password","formControlName","password",1,"form-control"],[1,"login-btn"],[3,"click"],[1,"Register"],["routerLink","/register"],[1,"forgot-password"],["routerLink","/forgot-password"],[1,"google-btn"],["src","assets/icons8-google-48.png","alt",""]],template:function(t,r){1&t&&(p.TgZ(0,"div",0),p.TgZ(1,"div",1),p.TgZ(2,"div",2),p.TgZ(3,"span"),p._uU(4,"Login"),p.qZA(),p.qZA(),p.TgZ(5,"div",3),p.TgZ(6,"form",4),p.TgZ(7,"div",5),p.TgZ(8,"label",6),p._uU(9,"Email"),p.qZA(),p._UZ(10,"input",7),p.qZA(),p.TgZ(11,"div",8),p.TgZ(12,"label",6),p._uU(13,"Password"),p.qZA(),p._UZ(14,"input",9),p.qZA(),p.qZA(),p.qZA(),p.TgZ(15,"div",10),p.TgZ(16,"button",11),p.NdJ("click",function(){return r.login()}),p._uU(17,"Login"),p.qZA(),p.qZA(),p.TgZ(18,"div",12),p.TgZ(19,"a",13),p._uU(20,"Register"),p.qZA(),p.qZA(),p.TgZ(21,"div",14),p.TgZ(22,"a",15),p._uU(23,"Forgot Password ?"),p.qZA(),p.qZA(),p.TgZ(24,"div",16),p.TgZ(25,"button",11),p.NdJ("click",function(){return r.signInWithGoogle()}),p._UZ(26,"img",17),p._uU(27," Sign in with Google"),p.qZA(),p.qZA(),p.qZA(),p.qZA()),2&t&&(p.xp6(6),p.Q6J("formGroup",r.loginForm))},directives:[kb,Mb,Y_,jn,xb,Fb,rh],styles:['.main-container[_ngcontent-%COMP%]{height:100vh;width:100%;display:flex;justify-content:center;align-items:center;position:relative;background:linear-gradient(135deg,#f9f9f9 0%,#ffffff 8%,#ffffff 8%,#ffffff 8%,#ffffff 8%,#ffffff 9%,#ffffff 9%,#ffffff 10%,#ffffff 48%,#ffffff 48%,#ffffff 50%,#fde3f3 50%,#fde3f3 50%,#fde3f3 50%,#ffffff 50%,#fac2e5 50%,#fac2e5 50%,#fac2e5 50%,#fac2e5 50%,#fac2e5 50%,#fac2e5 50%,#fac2e5 50%,#fac2e5 50%,#fac2e5 50%,#fac2e5 50%,#fac2e5 51%,#fde3f3 51%,#fde3f3 51%,#fde3f3 51%,#fde3f3 51%,#fde3f3 51%,#fde3f3 51%,#fde3f3 51%,#fde3f3 51%,#fde3f3 51%,#fde3f3 51%,#fde3f3 51%,#fde3f3 51%,#fde3f3 51%,#fde3f3 51%,#fac2e5 51%,#fac2e5 51%,#fac2e5 51%,#fac2e5 51%,#fac2e5 51%,#fac2e5 51%,#fac2e5 51%,#fac2e5 51%,#fac2e5 51%,#fac2e5 51%,#fac2e5 51%,#fac2e5 54%,#fac2e5 55%,#fde3f3 55%,#ffffff 55%,#ffffff 55%,#fac2e5 55%,#fac2e5 55%,#fac2e5 55%,#fac2e5 55%,#fac2e5 55%,#fac2e5 55%,#fac2e5 55%,#fac2e5 55%,#fac2e5 55%,#fac2e5 56%,#fac2e5 57%,#fde3f3 57%,#fdf9f9 57%,#fdf9f9 57%,#fac2e5 57%,#fac2e5 57%,#fac2e5 57%,#fac2e5 57%,#fac2e5 57%,#fac2e5 57%,#fac2e5 57%,#fde3f3 57%,#fac2e5 57%,#fac2e5 57%,#fac2e5 57%,#fac2e5 57%,#fac2e5 57%);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#f9f9f9",endColorstr="#fac2e5",GradientType=1)}.main-container[_ngcontent-%COMP%]   .login-container[_ngcontent-%COMP%]{height:405px;width:428px;border:1px solid #cbc5c5;box-shadow:0 7px 14px gray;padding:31px;position:absolute;background-color:#fff;border-radius:8px}.main-container[_ngcontent-%COMP%]   .login-container[_ngcontent-%COMP%]   .login-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:25px;color:#897a7a}.main-container[_ngcontent-%COMP%]   .login-container[_ngcontent-%COMP%]   .login-fields[_ngcontent-%COMP%]{height:47%;padding:12px 0}.main-container[_ngcontent-%COMP%]   .login-container[_ngcontent-%COMP%]   .login-btn[_ngcontent-%COMP%]{margin:0}.main-container[_ngcontent-%COMP%]   .login-container[_ngcontent-%COMP%]   .login-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:35px;width:74px;border-radius:9px;border:none;cursor:pointer;background-color:#587bd5d9;color:#fff}.main-container[_ngcontent-%COMP%]   .login-container[_ngcontent-%COMP%]   .login-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#fff;background-color:#cf84ce;transition:ease .5s}.main-container[_ngcontent-%COMP%]   .login-container[_ngcontent-%COMP%]   .need-account[_ngcontent-%COMP%]{display:inline-block;width:60%;margin-top:6px}.main-container[_ngcontent-%COMP%]   .login-container[_ngcontent-%COMP%]   .need-account[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}.main-container[_ngcontent-%COMP%]   .login-container[_ngcontent-%COMP%]   .forgot-password[_ngcontent-%COMP%]{display:inline-block}.main-container[_ngcontent-%COMP%]   .login-container[_ngcontent-%COMP%]   .forgot-password[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}.main-container[_ngcontent-%COMP%]   .login-container[_ngcontent-%COMP%]   .Register[_ngcontent-%COMP%]{margin:5px 2px}.main-container[_ngcontent-%COMP%]   .login-container[_ngcontent-%COMP%]   .Register[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:red}.main-container[_ngcontent-%COMP%]   .login-container[_ngcontent-%COMP%]   .google-btn[_ngcontent-%COMP%]{margin-top:23px}.main-container[_ngcontent-%COMP%]   .login-container[_ngcontent-%COMP%]   .google-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:40px;width:100%;border:none;border-radius:6px}.main-container[_ngcontent-%COMP%]   .login-container[_ngcontent-%COMP%]   .google-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:30px;width:30px}']}),n})();const HN=[{path:"",component:BO},{path:"chatbox",component:BN},{path:"userDetails",component:jN},{path:"register",component:(()=>{class n{constructor(t){this.auth=t,this.loginForm=new K_({email:new Fc("",[qo.required,qo.email]),password:new Fc("",qo.required)})}ngOnInit(){}register(){this.auth.register(this.loginForm.value),this.loginForm.reset()}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(A))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-register"]],decls:21,vars:1,consts:[[1,"main-container"],[1,"login-container"],[1,"login-header"],[1,"login-fields"],["action","",3,"formGroup"],[1,"email-container"],["for",""],["type","email","formControlName","email",1,"form-control"],[1,"password-container"],["type","password","formControlName","password",1,"form-control"],[1,"login-btn"],[3,"click"],[1,"Register"],["routerLink","/login"]],template:function(t,r){1&t&&(p.TgZ(0,"div",0),p.TgZ(1,"div",1),p.TgZ(2,"div",2),p.TgZ(3,"span"),p._uU(4,"Register"),p.qZA(),p.qZA(),p.TgZ(5,"div",3),p.TgZ(6,"form",4),p.TgZ(7,"div",5),p.TgZ(8,"label",6),p._uU(9,"Email"),p.qZA(),p._UZ(10,"input",7),p.qZA(),p.TgZ(11,"div",8),p.TgZ(12,"label",6),p._uU(13,"Password"),p.qZA(),p._UZ(14,"input",9),p.qZA(),p.qZA(),p.qZA(),p.TgZ(15,"div",10),p.TgZ(16,"button",11),p.NdJ("click",function(){return r.register()}),p._uU(17,"Register"),p.qZA(),p.qZA(),p.TgZ(18,"div",12),p.TgZ(19,"a",13),p._uU(20,"Login"),p.qZA(),p.qZA(),p.qZA(),p.qZA()),2&t&&(p.xp6(6),p.Q6J("formGroup",r.loginForm))},directives:[kb,Mb,Y_,jn,xb,Fb,rh],styles:['.main-container[_ngcontent-%COMP%]{height:100vh;width:100%;display:flex;justify-content:center;align-items:center;position:relative;background:linear-gradient(135deg,#f9f9f9 0%,#ffffff 8%,#ffffff 8%,#ffffff 8%,#ffffff 8%,#ffffff 9%,#ffffff 9%,#ffffff 10%,#ffffff 48%,#ffffff 48%,#ffffff 50%,#fde3f3 50%,#fde3f3 50%,#fde3f3 50%,#ffffff 50%,#fac2e5 50%,#fac2e5 50%,#fac2e5 50%,#fac2e5 50%,#fac2e5 50%,#fac2e5 50%,#fac2e5 50%,#fac2e5 50%,#fac2e5 50%,#fac2e5 50%,#fac2e5 51%,#fde3f3 51%,#fde3f3 51%,#fde3f3 51%,#fde3f3 51%,#fde3f3 51%,#fde3f3 51%,#fde3f3 51%,#fde3f3 51%,#fde3f3 51%,#fde3f3 51%,#fde3f3 51%,#fde3f3 51%,#fde3f3 51%,#fde3f3 51%,#fac2e5 51%,#fac2e5 51%,#fac2e5 51%,#fac2e5 51%,#fac2e5 51%,#fac2e5 51%,#fac2e5 51%,#fac2e5 51%,#fac2e5 51%,#fac2e5 51%,#fac2e5 51%,#fac2e5 54%,#fac2e5 55%,#fde3f3 55%,#ffffff 55%,#ffffff 55%,#fac2e5 55%,#fac2e5 55%,#fac2e5 55%,#fac2e5 55%,#fac2e5 55%,#fac2e5 55%,#fac2e5 55%,#fac2e5 55%,#fac2e5 55%,#fac2e5 56%,#fac2e5 57%,#fde3f3 57%,#fdf9f9 57%,#fdf9f9 57%,#fac2e5 57%,#fac2e5 57%,#fac2e5 57%,#fac2e5 57%,#fac2e5 57%,#fac2e5 57%,#fac2e5 57%,#fde3f3 57%,#fac2e5 57%,#fac2e5 57%,#fac2e5 57%,#fac2e5 57%,#fac2e5 57%);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#f9f9f9",endColorstr="#fac2e5",GradientType=1)}.main-container[_ngcontent-%COMP%]   .login-container[_ngcontent-%COMP%]{height:365px;width:428px;border:1px solid #cbc5c5;box-shadow:0 7px 14px gray;padding:31px;position:absolute;background-color:#fff;border-radius:8px}.main-container[_ngcontent-%COMP%]   .login-container[_ngcontent-%COMP%]   .login-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:25px;color:#897a7a}.main-container[_ngcontent-%COMP%]   .login-container[_ngcontent-%COMP%]   .login-fields[_ngcontent-%COMP%]{height:47%;padding:12px 0}.main-container[_ngcontent-%COMP%]   .login-container[_ngcontent-%COMP%]   .login-btn[_ngcontent-%COMP%]{margin:22px 0}.main-container[_ngcontent-%COMP%]   .login-container[_ngcontent-%COMP%]   .login-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:35px;width:74px;border-radius:9px;border:none;cursor:pointer;background-color:#587bd5d9;color:#fff}.main-container[_ngcontent-%COMP%]   .login-container[_ngcontent-%COMP%]   .login-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#fff;background-color:#cf84ce;transition:ease .5s}.main-container[_ngcontent-%COMP%]   .login-container[_ngcontent-%COMP%]   .need-account[_ngcontent-%COMP%]{display:inline-block;width:60%;margin-top:6px}.main-container[_ngcontent-%COMP%]   .login-container[_ngcontent-%COMP%]   .need-account[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}.main-container[_ngcontent-%COMP%]   .login-container[_ngcontent-%COMP%]   .forgot-password[_ngcontent-%COMP%]{display:inline-block}.main-container[_ngcontent-%COMP%]   .login-container[_ngcontent-%COMP%]   .forgot-password[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}.main-container[_ngcontent-%COMP%]   .login-container[_ngcontent-%COMP%]   .Register[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:red}']}),n})()},{path:"login",component:BO},{path:"verify-email",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-verify-email"]],decls:13,vars:0,consts:[[1,"container-fluid"],[1,"row","mt-5"],[1,"col"],[1,"col-4"],[1,"card","shadow"],[1,"card-body"],["action",""],[1,"mb-3"],[1,"text-danger","text-muted"],[1,"text-muted"]],template:function(t,r){1&t&&(p.TgZ(0,"div",0),p.TgZ(1,"div",1),p._UZ(2,"div",2),p.TgZ(3,"div",3),p.TgZ(4,"div",4),p.TgZ(5,"div",5),p.TgZ(6,"form",6),p.TgZ(7,"div",7),p.TgZ(8,"h4",8),p._uU(9,"Welcome"),p.qZA(),p.qZA(),p.TgZ(10,"div",7),p.TgZ(11,"p",9),p._uU(12,"Link has sent on your registered email. Please verify it."),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA())},directives:[kb,Mb,NT],styles:[""]}),n})()},{path:"forgot-password",component:$N}];let GN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[[Dv.forRoot(HN)],Dv]}),n})(),qN=(()=>{class n{constructor(){this.title="chatlist"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&p._UZ(0,"router-outlet")},directives:[mm],styles:[""]}),n})();const PT={production:!0,firebaseConfig:{apiKey:"AIzaSyA_F_fowGqRrET5_MzT5vt2CM7nN2RMZjI",authDomain:"chat-list-81fe6.firebaseapp.com",projectId:"chat-list-81fe6",storageBucket:"chat-list-81fe6.appspot.com",messagingSenderId:"580915129853",appId:"1:580915129853:web:31f972ecc7264d55c9fd94"}};let WN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n,bootstrap:[qN]}),n.\u0275inj=p.cJS({providers:[],imports:[[Va,GN,Ms.hO.initializeApp(null==PT?void 0:PT.firebaseConfig),VN,LN]]}),n})();PT.production&&(0,p.G48)(),zs().bootstrapModule(WN).catch(n=>console.error(n))},3394:(Ke,ye,L)=>{"use strict";L.d(ye,{Z:()=>Ce});var p=L(3854),H=L(3910),k=L(8026),ne=L(5422);class se{constructor(ge,Se){this._delegate=ge,this.firebase=Se,(0,k._addComponent)(ge,new H.wA("app-compat",()=>this,"PUBLIC")),this.container=ge.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ge){this._delegate.automaticDataCollectionEnabled=ge}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ge=>{this._delegate.checkDestroyed(),ge()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,k.deleteApp)(this._delegate)))}_getService(ge,Se=k._DEFAULT_ENTRY_NAME){var xe;this._delegate.checkDestroyed();const De=this._delegate.container.getProvider(ge);return!De.isInitialized()&&"EXPLICIT"===(null===(xe=De.getComponent())||void 0===xe?void 0:xe.instantiationMode)&&De.initialize(),De.getImmediate({identifier:Se})}_removeServiceInstance(ge,Se=k._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ge).clearInstance(Se)}_addComponent(ge){(0,k._addComponent)(this._delegate,ge)}_addOrOverwriteComponent(ge){(0,k._addOrOverwriteComponent)(this._delegate,ge)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ve=new p.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),V=function re(){const me=function(me){const ge={},Se={__esModule:!0,initializeApp:function(_t,Oe={}){const Ne=k.initializeApp(_t,Oe);if((0,p.r3)(ge,Ne.name))return ge[Ne.name];const He=new me(Ne,Se);return ge[Ne.name]=He,He},app:De,registerVersion:k.registerVersion,setLogLevel:k.setLogLevel,onLog:k.onLog,apps:null,SDK_VERSION:k.SDK_VERSION,INTERNAL:{registerComponent:function(_t){const Oe=_t.name,Ne=Oe.replace("-compat","");if(k._registerComponent(_t)&&"PUBLIC"===_t.type){const He=(Qe=De())=>{if("function"!=typeof Qe[Ne])throw ve.create("invalid-app-argument",{appName:Oe});return Qe[Ne]()};void 0!==_t.serviceProps&&(0,p.ZB)(He,_t.serviceProps),Se[Ne]=He,me.prototype[Ne]=function(...Qe){return this._getService.bind(this,Oe).apply(this,_t.multipleInstances?Qe:[])}}return"PUBLIC"===_t.type?Se[Ne]:null},removeApp:function(_t){delete ge[_t]},useAsService:function(_t,Oe){return"serverAuth"===Oe?null:Oe},modularAPIs:k}};function De(_t){if(!(0,p.r3)(ge,_t=_t||k._DEFAULT_ENTRY_NAME))throw ve.create("no-app",{appName:_t});return ge[_t]}return Se.default=Se,Object.defineProperty(Se,"apps",{get:function(){return Object.keys(ge).map(_t=>ge[_t])}}),De.App=me,Se}(se);return me.INTERNAL=Object.assign(Object.assign({},me.INTERNAL),{createFirebaseNamespace:re,extendNamespace:function(Se){(0,p.ZB)(me,Se)},createSubscribe:p.ne,ErrorFactory:p.LL,deepExtend:p.ZB}),me}(),B=new ne.Yd("@firebase/app-compat");if((0,p.jU)()&&void 0!==self.firebase){B.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const me=self.firebase.SDK_VERSION;me&&me.indexOf("LITE")>=0&&B.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ce=V;(0,k.registerVersion)("@firebase/app-compat","0.1.37",undefined)},8026:(Ke,ye,L)=>{"use strict";L.r(ye),L.d(ye,{FirebaseError:()=>ne.ZR,SDK_VERSION:()=>Dr,_DEFAULT_ENTRY_NAME:()=>Ir,_addComponent:()=>hi,_addOrOverwriteComponent:()=>es,_apps:()=>Yr,_clearComponents:()=>Qr,_components:()=>rr,_getProvider:()=>Yt,_registerComponent:()=>sn,_removeServiceInstance:()=>zn,deleteApp:()=>cr,getApp:()=>Me,getApps:()=>Zn,initializeApp:()=>$n,onLog:()=>bn,registerVersion:()=>Zt,setLogLevel:()=>Jr});var p=L(8239),H=L(3910),k=L(5422),ne=L(3854),se=L(200);class oe{constructor(be){this.container=be}getPlatformInfoString(){return this.container.getProviders().map(Re=>{if(function(ze){const be=ze.getComponent();return"VERSION"===(null==be?void 0:be.type)}(Re)){const yt=Re.getImmediate();return`${yt.library}/${yt.version}`}return null}).filter(Re=>Re).join(" ")}}const ae="@firebase/app",V=new k.Yd("@firebase/app"),Ir="[DEFAULT]",po={[ae]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Yr=new Map,rr=new Map;function hi(ze,be){try{ze.container.addComponent(be)}catch(Re){V.debug(`Component ${be.name} failed to register with FirebaseApp ${ze.name}`,Re)}}function es(ze,be){ze.container.addOrOverwriteComponent(be)}function sn(ze){const be=ze.name;if(rr.has(be))return V.debug(`There were multiple attempts to register component ${be}.`),!1;rr.set(be,ze);for(const Re of Yr.values())hi(Re,ze);return!0}function Yt(ze,be){const Re=ze.container.getProvider("heartbeat").getImmediate({optional:!0});return Re&&Re.triggerHeartbeat(),ze.container.getProvider(be)}function zn(ze,be,Re=Ir){Yt(ze,be).clearInstance(Re)}function Qr(){rr.clear()}const Mt=new ne.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Wo{constructor(be,Re,yt){this._isDeleted=!1,this._options=Object.assign({},be),this._config=Object.assign({},Re),this._name=Re.name,this._automaticDataCollectionEnabled=Re.automaticDataCollectionEnabled,this._container=yt,this.container.addComponent(new H.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(be){this.checkDestroyed(),this._automaticDataCollectionEnabled=be}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(be){this._isDeleted=be}checkDestroyed(){if(this.isDeleted)throw Mt.create("app-deleted",{appName:this._name})}}const Dr="9.12.1";function $n(ze,be={}){let Re=ze;"object"!=typeof be&&(be={name:be});const yt=Object.assign({name:Ir,automaticDataCollectionEnabled:!1},be),Et=yt.name;if("string"!=typeof Et||!Et)throw Mt.create("bad-app-name",{appName:String(Et)});if(Re||(Re=(0,ne.aH)()),!Re)throw Mt.create("no-options");const zt=Yr.get(Et);if(zt){if((0,ne.vZ)(Re,zt.options)&&(0,ne.vZ)(yt,zt.config))return zt;throw Mt.create("duplicate-app",{appName:Et})}const W=new H.H0(Et);for(const K of rr.values())W.addComponent(K);const G=new Wo(Re,yt,W);return Yr.set(Et,G),G}function Me(ze=Ir){const be=Yr.get(ze);if(!be&&ze===Ir)return $n();if(!be)throw Mt.create("no-app",{appName:ze});return be}function Zn(){return Array.from(Yr.values())}function cr(ze){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,p.Z)(function*(ze){const be=ze.name;Yr.has(be)&&(Yr.delete(be),yield Promise.all(ze.container.getProviders().map(Re=>Re.delete())),ze.isDeleted=!0)})).apply(this,arguments)}function Zt(ze,be,Re){var yt;let Et=null!==(yt=po[ze])&&void 0!==yt?yt:ze;Re&&(Et+=`-${Re}`);const zt=Et.match(/\s|\//),W=be.match(/\s|\//);if(zt||W){const G=[`Unable to register library "${Et}" with version "${be}":`];return zt&&G.push(`library name "${Et}" contains illegal characters (whitespace or "/")`),zt&&W&&G.push("and"),W&&G.push(`version name "${be}" contains illegal characters (whitespace or "/")`),void V.warn(G.join(" "))}sn(new H.wA(`${Et}-version`,()=>({library:Et,version:be}),"VERSION"))}function bn(ze,be){if(null!==ze&&"function"!=typeof ze)throw Mt.create("invalid-log-argument");(0,k.Am)(ze,be)}function Jr(ze){(0,k.Ub)(ze)}const lr="firebase-heartbeat-store";let dr=null;function Fr(){return dr||(dr=(0,se.X3)("firebase-heartbeat-database",1,{upgrade:(ze,be)=>{0===be&&ze.createObjectStore(lr)}}).catch(ze=>{throw Mt.create("idb-open",{originalErrorMessage:ze.message})})),dr}function nt(){return(nt=(0,p.Z)(function*(ze){var be;try{return(yield Fr()).transaction(lr).objectStore(lr).get(Xr(ze))}catch(Re){if(Re instanceof ne.ZR)V.warn(Re.message);else{const yt=Mt.create("idb-get",{originalErrorMessage:null===(be=Re)||void 0===be?void 0:be.message});V.warn(yt.message)}}})).apply(this,arguments)}function Ye(ze,be){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,p.Z)(function*(ze,be){var Re;try{const Et=(yield Fr()).transaction(lr,"readwrite");return yield Et.objectStore(lr).put(be,Xr(ze)),Et.done}catch(yt){if(yt instanceof ne.ZR)V.warn(yt.message);else{const Et=Mt.create("idb-set",{originalErrorMessage:null===(Re=yt)||void 0===Re?void 0:Re.message});V.warn(Et.message)}}})).apply(this,arguments)}function Xr(ze){return`${ze.name}!${ze.options.appId}`}class Kn{constructor(be){this.container=be,this._heartbeatsCache=null;const Re=this.container.getProvider("app").getImmediate();this._storage=new Lr(Re),this._heartbeatsCachePromise=this._storage.read().then(yt=>(this._heartbeatsCache=yt,yt))}triggerHeartbeat(){var be=this;return(0,p.Z)(function*(){const yt=be.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Et=Pn();if(null===be._heartbeatsCache&&(be._heartbeatsCache=yield be._heartbeatsCachePromise),be._heartbeatsCache.lastSentHeartbeatDate!==Et&&!be._heartbeatsCache.heartbeats.some(zt=>zt.date===Et))return be._heartbeatsCache.heartbeats.push({date:Et,agent:yt}),be._heartbeatsCache.heartbeats=be._heartbeatsCache.heartbeats.filter(zt=>{const W=new Date(zt.date).valueOf();return Date.now()-W<=2592e6}),be._storage.overwrite(be._heartbeatsCache)})()}getHeartbeatsHeader(){var be=this;return(0,p.Z)(function*(){if(null===be._heartbeatsCache&&(yield be._heartbeatsCachePromise),null===be._heartbeatsCache||0===be._heartbeatsCache.heartbeats.length)return"";const Re=Pn(),{heartbeatsToSend:yt,unsentEntries:Et}=function(ze,be=1024){const Re=[];let yt=ze.slice();for(const Et of ze){const zt=Re.find(W=>W.agent===Et.agent);if(zt){if(zt.dates.push(Et.date),rt(Re)>be){zt.dates.pop();break}}else if(Re.push({agent:Et.agent,dates:[Et.date]}),rt(Re)>be){Re.pop();break}yt=yt.slice(1)}return{heartbeatsToSend:Re,unsentEntries:yt}}(be._heartbeatsCache.heartbeats),zt=(0,ne.L)(JSON.stringify({version:2,heartbeats:yt}));return be._heartbeatsCache.lastSentHeartbeatDate=Re,Et.length>0?(be._heartbeatsCache.heartbeats=Et,yield be._storage.overwrite(be._heartbeatsCache)):(be._heartbeatsCache.heartbeats=[],be._storage.overwrite(be._heartbeatsCache)),zt})()}}function Pn(){return(new Date).toISOString().substring(0,10)}class Lr{constructor(be){this.app=be,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,p.Z)(function*(){return!!(0,ne.hl)()&&(0,ne.eu)().then(()=>!0).catch(()=>!1)})()}read(){var be=this;return(0,p.Z)(function*(){return(yield be._canUseIndexedDBPromise)&&(yield function(ze){return nt.apply(this,arguments)}(be.app))||{heartbeats:[]}})()}overwrite(be){var Re=this;return(0,p.Z)(function*(){var yt;if(yield Re._canUseIndexedDBPromise){const zt=yield Re.read();return Ye(Re.app,{lastSentHeartbeatDate:null!==(yt=be.lastSentHeartbeatDate)&&void 0!==yt?yt:zt.lastSentHeartbeatDate,heartbeats:be.heartbeats})}})()}add(be){var Re=this;return(0,p.Z)(function*(){var yt;if(yield Re._canUseIndexedDBPromise){const zt=yield Re.read();return Ye(Re.app,{lastSentHeartbeatDate:null!==(yt=be.lastSentHeartbeatDate)&&void 0!==yt?yt:zt.lastSentHeartbeatDate,heartbeats:[...zt.heartbeats,...be.heartbeats]})}})()}}function rt(ze){return(0,ne.L)(JSON.stringify({version:2,heartbeats:ze})).length}sn(new H.wA("platform-logger",be=>new oe(be),"PRIVATE")),sn(new H.wA("heartbeat",be=>new Kn(be),"PRIVATE")),Zt(ae,"0.8.2",""),Zt(ae,"0.8.2","esm2017"),Zt("fire-js","")},3910:(Ke,ye,L)=>{"use strict";L.d(ye,{wA:()=>k,H0:()=>ae});var p=L(8239),H=L(3854);class k{constructor(V,B,te){this.name=V,this.instanceFactory=B,this.type=te,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(V){return this.instantiationMode=V,this}setMultipleInstances(V){return this.multipleInstances=V,this}setServiceProps(V){return this.serviceProps=V,this}setInstanceCreatedCallback(V){return this.onInstanceCreated=V,this}}const ne="[DEFAULT]";class se{constructor(V,B){this.name=V,this.container=B,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(V){const B=this.normalizeInstanceIdentifier(V);if(!this.instancesDeferred.has(B)){const te=new H.BH;if(this.instancesDeferred.set(B,te),this.isInitialized(B)||this.shouldAutoInitialize())try{const X=this.getOrInitializeService({instanceIdentifier:B});X&&te.resolve(X)}catch(X){}}return this.instancesDeferred.get(B).promise}getImmediate(V){var B;const te=this.normalizeInstanceIdentifier(null==V?void 0:V.identifier),X=null!==(B=null==V?void 0:V.optional)&&void 0!==B&&B;if(!this.isInitialized(te)&&!this.shouldAutoInitialize()){if(X)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:te})}catch(de){if(X)return null;throw de}}getComponent(){return this.component}setComponent(V){if(V.name!==this.name)throw Error(`Mismatching Component ${V.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=V,this.shouldAutoInitialize()){if("EAGER"===V.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:ne})}catch(B){}for(const[B,te]of this.instancesDeferred.entries()){const X=this.normalizeInstanceIdentifier(B);try{const de=this.getOrInitializeService({instanceIdentifier:X});te.resolve(de)}catch(de){}}}}clearInstance(V=ne){this.instancesDeferred.delete(V),this.instancesOptions.delete(V),this.instances.delete(V)}delete(){var V=this;return(0,p.Z)(function*(){const B=Array.from(V.instances.values());yield Promise.all([...B.filter(te=>"INTERNAL"in te).map(te=>te.INTERNAL.delete()),...B.filter(te=>"_delete"in te).map(te=>te._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(V=ne){return this.instances.has(V)}getOptions(V=ne){return this.instancesOptions.get(V)||{}}initialize(V={}){const{options:B={}}=V,te=this.normalizeInstanceIdentifier(V.instanceIdentifier);if(this.isInitialized(te))throw Error(`${this.name}(${te}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const X=this.getOrInitializeService({instanceIdentifier:te,options:B});for(const[de,Ce]of this.instancesDeferred.entries())te===this.normalizeInstanceIdentifier(de)&&Ce.resolve(X);return X}onInit(V,B){var te;const X=this.normalizeInstanceIdentifier(B),de=null!==(te=this.onInitCallbacks.get(X))&&void 0!==te?te:new Set;de.add(V),this.onInitCallbacks.set(X,de);const Ce=this.instances.get(X);return Ce&&V(Ce,X),()=>{de.delete(V)}}invokeOnInitCallbacks(V,B){const te=this.onInitCallbacks.get(B);if(te)for(const X of te)try{X(V,B)}catch(de){}}getOrInitializeService({instanceIdentifier:V,options:B={}}){let te=this.instances.get(V);if(!te&&this.component&&(te=this.component.instanceFactory(this.container,{instanceIdentifier:(re=V,re===ne?void 0:re),options:B}),this.instances.set(V,te),this.instancesOptions.set(V,B),this.invokeOnInitCallbacks(te,V),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,V,te)}catch(X){}var re;return te||null}normalizeInstanceIdentifier(V=ne){return this.component?this.component.multipleInstances?V:ne:V}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ae{constructor(V){this.name=V,this.providers=new Map}addComponent(V){const B=this.getProvider(V.name);if(B.isComponentSet())throw new Error(`Component ${V.name} has already been registered with ${this.name}`);B.setComponent(V)}addOrOverwriteComponent(V){this.getProvider(V.name).isComponentSet()&&this.providers.delete(V.name),this.addComponent(V)}getProvider(V){if(this.providers.has(V))return this.providers.get(V);const B=new se(V,this);return this.providers.set(V,B),B}getProviders(){return Array.from(this.providers.values())}}},5422:(Ke,ye,L)=>{"use strict";L.d(ye,{in:()=>H,Yd:()=>ve,Ub:()=>ae,Am:()=>re});const p=[];var H=(()=>{return(V=H||(H={}))[V.DEBUG=0]="DEBUG",V[V.VERBOSE=1]="VERBOSE",V[V.INFO=2]="INFO",V[V.WARN=3]="WARN",V[V.ERROR=4]="ERROR",V[V.SILENT=5]="SILENT",H;var V})();const k={debug:H.DEBUG,verbose:H.VERBOSE,info:H.INFO,warn:H.WARN,error:H.ERROR,silent:H.SILENT},ne=H.INFO,se={[H.DEBUG]:"log",[H.VERBOSE]:"log",[H.INFO]:"info",[H.WARN]:"warn",[H.ERROR]:"error"},oe=(V,B,...te)=>{if(B<V.logLevel)return;const X=(new Date).toISOString(),de=se[B];if(!de)throw new Error(`Attempted to log a message with an invalid logType (value: ${B})`);console[de](`[${X}]  ${V.name}:`,...te)};class ve{constructor(B){this.name=B,this._logLevel=ne,this._logHandler=oe,this._userLogHandler=null,p.push(this)}get logLevel(){return this._logLevel}set logLevel(B){if(!(B in H))throw new TypeError(`Invalid value "${B}" assigned to \`logLevel\``);this._logLevel=B}setLogLevel(B){this._logLevel="string"==typeof B?k[B]:B}get logHandler(){return this._logHandler}set logHandler(B){if("function"!=typeof B)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=B}get userLogHandler(){return this._userLogHandler}set userLogHandler(B){this._userLogHandler=B}debug(...B){this._userLogHandler&&this._userLogHandler(this,H.DEBUG,...B),this._logHandler(this,H.DEBUG,...B)}log(...B){this._userLogHandler&&this._userLogHandler(this,H.VERBOSE,...B),this._logHandler(this,H.VERBOSE,...B)}info(...B){this._userLogHandler&&this._userLogHandler(this,H.INFO,...B),this._logHandler(this,H.INFO,...B)}warn(...B){this._userLogHandler&&this._userLogHandler(this,H.WARN,...B),this._logHandler(this,H.WARN,...B)}error(...B){this._userLogHandler&&this._userLogHandler(this,H.ERROR,...B),this._logHandler(this,H.ERROR,...B)}}function ae(V){p.forEach(B=>{B.setLogLevel(V)})}function re(V,B){for(const te of p){let X=null;B&&B.level&&(X=k[B.level]),te.userLogHandler=null===V?null:(de,Ce,...me)=>{const ge=me.map(Se=>{if(null==Se)return null;if("string"==typeof Se)return Se;if("number"==typeof Se||"boolean"==typeof Se)return Se.toString();if(Se instanceof Error)return Se.message;try{return JSON.stringify(Se)}catch(xe){return null}}).filter(Se=>Se).join(" ");Ce>=(null!=X?X:de.logLevel)&&V({level:H[Ce].toLowerCase(),message:ge,args:me,type:de.name})}}}},200:(Ke,ye,L)=>{"use strict";L.d(ye,{Lj:()=>Ze,X3:()=>De});var p=L(8239);let k,ne;const ve=new WeakMap,ae=new WeakMap,re=new WeakMap,V=new WeakMap,B=new WeakMap;let de={get(Oe,Ne,He){if(Oe instanceof IDBTransaction){if("done"===Ne)return ae.get(Oe);if("objectStoreNames"===Ne)return Oe.objectStoreNames||re.get(Oe);if("store"===Ne)return He.objectStoreNames[1]?void 0:He.objectStore(He.objectStoreNames[0])}return Se(Oe[Ne])},set:(Oe,Ne,He)=>(Oe[Ne]=He,!0),has:(Oe,Ne)=>Oe instanceof IDBTransaction&&("done"===Ne||"store"===Ne)||Ne in Oe};function ge(Oe){return"function"==typeof Oe?function(Oe){return Oe!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(ne||(ne=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(Oe)?function(...Ne){return Oe.apply(xe(this),Ne),Se(ve.get(this))}:function(...Ne){return Se(Oe.apply(xe(this),Ne))}:function(Ne,...He){const Qe=Oe.call(xe(this),Ne,...He);return re.set(Qe,Ne.sort?Ne.sort():[Ne]),Se(Qe)}}(Oe):(Oe instanceof IDBTransaction&&function(Oe){if(ae.has(Oe))return;const Ne=new Promise((He,Qe)=>{const Xe=()=>{Oe.removeEventListener("complete",Ct),Oe.removeEventListener("error",Ge),Oe.removeEventListener("abort",Ge)},Ct=()=>{He(),Xe()},Ge=()=>{Qe(Oe.error||new DOMException("AbortError","AbortError")),Xe()};Oe.addEventListener("complete",Ct),Oe.addEventListener("error",Ge),Oe.addEventListener("abort",Ge)});ae.set(Oe,Ne)}(Oe),((Oe,Ne)=>Ne.some(He=>Oe instanceof He))(Oe,k||(k=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(Oe,de):Oe)}function Se(Oe){if(Oe instanceof IDBRequest)return function(Oe){const Ne=new Promise((He,Qe)=>{const Xe=()=>{Oe.removeEventListener("success",Ct),Oe.removeEventListener("error",Ge)},Ct=()=>{He(Se(Oe.result)),Xe()},Ge=()=>{Qe(Oe.error),Xe()};Oe.addEventListener("success",Ct),Oe.addEventListener("error",Ge)});return Ne.then(He=>{He instanceof IDBCursor&&ve.set(He,Oe)}).catch(()=>{}),B.set(Ne,Oe),Ne}(Oe);if(V.has(Oe))return V.get(Oe);const Ne=ge(Oe);return Ne!==Oe&&(V.set(Oe,Ne),B.set(Ne,Oe)),Ne}const xe=Oe=>B.get(Oe);function De(Oe,Ne,{blocked:He,upgrade:Qe,blocking:Xe,terminated:Ct}={}){const Ge=indexedDB.open(Oe,Ne),Tn=Se(Ge);return Qe&&Ge.addEventListener("upgradeneeded",Cr=>{Qe(Se(Ge.result),Cr.oldVersion,Cr.newVersion,Se(Ge.transaction))}),He&&Ge.addEventListener("blocked",()=>He()),Tn.then(Cr=>{Ct&&Cr.addEventListener("close",()=>Ct()),Xe&&Cr.addEventListener("versionchange",()=>Xe())}).catch(()=>{}),Tn}function Ze(Oe,{blocked:Ne}={}){const He=indexedDB.deleteDatabase(Oe);return Ne&&He.addEventListener("blocked",()=>Ne()),Se(He).then(()=>{})}const ut=["get","getKey","getAll","getAllKeys","count"],$e=["put","add","delete","clear"],Ft=new Map;function _t(Oe,Ne){if(!(Oe instanceof IDBDatabase)||Ne in Oe||"string"!=typeof Ne)return;if(Ft.get(Ne))return Ft.get(Ne);const He=Ne.replace(/FromIndex$/,""),Qe=Ne!==He,Xe=$e.includes(He);if(!(He in(Qe?IDBIndex:IDBObjectStore).prototype)||!Xe&&!ut.includes(He))return;const Ct=function(){var Ge=(0,p.Z)(function*(Tn,...Cr){const Bs=this.transaction(Tn,Xe?"readwrite":"readonly");let Ir=Bs.store;return Qe&&(Ir=Ir.index(Cr.shift())),(yield Promise.all([Ir[He](...Cr),Xe&&Bs.done]))[0]});return function(Cr){return Ge.apply(this,arguments)}}();return Ft.set(Ne,Ct),Ct}var Oe;de=GO(HO({},Oe=de),{get:(Ne,He,Qe)=>_t(Ne,He)||Oe.get(Ne,He,Qe),has:(Ne,He)=>!!_t(Ne,He)||Oe.has(Ne,He)})},8239:(Ke,ye,L)=>{"use strict";function p(k,ne,se,oe,ve,ae,re){try{var V=k[ae](re),B=V.value}catch(te){return void se(te)}V.done?ne(B):Promise.resolve(B).then(oe,ve)}function H(k){return function(){var ne=this,se=arguments;return new Promise(function(oe,ve){var ae=k.apply(ne,se);function re(B){p(ae,oe,ve,re,V,"next",B)}function V(B){p(ae,oe,ve,re,V,"throw",B)}re(void 0)})}}L.d(ye,{Z:()=>H})}},Ke=>{Ke(Ke.s=9157)}]);